{"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\server.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nrequire('dotenv').config();\nconst express = require('express');\nconst cors = require('cors');\nconst db = require('./db'); // Importer l'instance de Knex depuis db.js\nconst verifyToken = require('./middleware/jwtMiddleware');\nconst authRoutes = require('./routes/authRoutes');\nconst organizerRoutes = require('./routes/organizerRoutes');\nconst participantRoutes = require('./routes/participantRoutes');\nconst faqRoutes = require('./routes/faqRoutes');\nconst newsletterRoutes = require('./routes/newsletterRoutes');\nconst ticketSalesRoutes = require('./routes/ticketSalesRoutes');\nconst certificateRoutes = require('./routes/certificateRoutes');\nconst calendrierRoutes = require('./routes/calendrierRoutes');\nconst resultatsRoutes = require('./routes/resultatsRoutes');\nconst contactRoutes = require('./routes/contactRoutes');\nconst app = express();\nconst port = process.env.PORT || 3001;\napp.use((req, res, next) => {\n  console.log(`üì° Requ√™te re√ßue : ${req.method} ${req.url}`);\n  console.log(\"üîç Corps de la requ√™te :\", req.body);\n  next();\n});\napp.post(\"/api/admin/supprimer-vente\", ticketSalesRoutes);\nconsole.log(\"‚úÖ Route DELETE /api/admin/supprimer-vente enregistr√©e !\");\napp.use(cors({\n  origin: 'http://localhost:3000'\n}));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: true\n})); // ‚úÖ G√®re les requ√™tes POST avec form-data\n\n// Test de connexion √† la base de donn√©es\ndb.raw('SELECT 1').then(() => {\n  console.log('Connected to MySQL using Knex');\n}).catch(err => {\n  console.error('Error connecting to MySQL:', err);\n});\napp.use('/api/auth', authRoutes); //pour les gestion d'administrateur\napp.use('/api', faqRoutes); // pour les questions fr√©quents\napp.use('/api/organizer', organizerRoutes); // pour les organisateurs\napp.use('/api/participant', participantRoutes);\napp.use('/api/newsletter', newsletterRoutes); //pour la newsletter\napp.use(\"/api/tickets\", ticketSalesRoutes);\napp.use(\"/api/admin\", ticketSalesRoutes); // pour le billets\napp.use(\"/api/organizer\", ticketSalesRoutes);\napp.use(\"/api/certificate\", certificateRoutes);\napp.use('/api/contact', contactRoutes);\n\n// ‚úÖ Ajout de la route publique des calendriers (‚ö†Ô∏è SANS TOKEN)\napp.use(\"/api/public\", calendrierRoutes);\napp.use('/api/resultats', resultatsRoutes); // Ajout de la route des r√©sultats avec le pr√©fixe simple /api/resultats\n\napp.get('/api/admin/dashboard', verifyToken, (req, res) => {\n  res.json({\n    message: 'Bienvenue sur le tableau de bord administrateur'\n  });\n});\napp.listen(port, () => {\n  console.log(`Serveur d√©marr√© avec succ√®s au port ${port}`);\n});\n\n//ajoute image\nconst path = require('path');\napp.use('/uploads', express.static(path.join(__dirname, 'uploads')));\napp._router.stack.forEach(function (r) {\n  if (r.route && r.route.path) {\n    console.log(`üõ† Route enregistr√©e: ${r.route.path}`);\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwcmVzcyIsImNvcnMiLCJkYiIsInZlcmlmeVRva2VuIiwiYXV0aFJvdXRlcyIsIm9yZ2FuaXplclJvdXRlcyIsInBhcnRpY2lwYW50Um91dGVzIiwiZmFxUm91dGVzIiwibmV3c2xldHRlclJvdXRlcyIsInRpY2tldFNhbGVzUm91dGVzIiwiY2VydGlmaWNhdGVSb3V0ZXMiLCJjYWxlbmRyaWVyUm91dGVzIiwicmVzdWx0YXRzUm91dGVzIiwiY29udGFjdFJvdXRlcyIsImFwcCIsInBvcnQiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsInVzZSIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwibWV0aG9kIiwidXJsIiwiYm9keSIsInBvc3QiLCJvcmlnaW4iLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicmF3IiwidGhlbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJnZXQiLCJtZXNzYWdlIiwibGlzdGVuIiwicGF0aCIsInN0YXRpYyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJfcm91dGVyIiwic3RhY2siLCJmb3JFYWNoIiwiciIsInJvdXRlIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUgKCdkb3RlbnYnKS5jb25maWcoKTtcclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcclxuY29uc3QgZGIgPSByZXF1aXJlKCcuL2RiJyk7ICAvLyBJbXBvcnRlciBsJ2luc3RhbmNlIGRlIEtuZXggZGVwdWlzIGRiLmpzXHJcbmNvbnN0IHZlcmlmeVRva2VuID0gcmVxdWlyZSgnLi9taWRkbGV3YXJlL2p3dE1pZGRsZXdhcmUnKTtcclxuY29uc3QgYXV0aFJvdXRlcyA9IHJlcXVpcmUoJy4vcm91dGVzL2F1dGhSb3V0ZXMnKTtcclxuY29uc3Qgb3JnYW5pemVyUm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvb3JnYW5pemVyUm91dGVzJyk7XHJcbmNvbnN0IHBhcnRpY2lwYW50Um91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvcGFydGljaXBhbnRSb3V0ZXMnKTtcclxuY29uc3QgZmFxUm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvZmFxUm91dGVzJyk7XHJcbmNvbnN0IG5ld3NsZXR0ZXJSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy9uZXdzbGV0dGVyUm91dGVzJyk7XHJcbmNvbnN0IHRpY2tldFNhbGVzUm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvdGlja2V0U2FsZXNSb3V0ZXMnKTtcclxuY29uc3QgY2VydGlmaWNhdGVSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy9jZXJ0aWZpY2F0ZVJvdXRlcycpO1xyXG5jb25zdCBjYWxlbmRyaWVyUm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvY2FsZW5kcmllclJvdXRlcycpO1xyXG5jb25zdCByZXN1bHRhdHNSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy9yZXN1bHRhdHNSb3V0ZXMnKTsgIFxyXG5jb25zdCBjb250YWN0Um91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvY29udGFjdFJvdXRlcycpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxO1xyXG5cclxuXHJcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhg8J+ToSBSZXF1w6p0ZSByZcOndWUgOiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gKTtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBDb3JwcyBkZSBsYSByZXF1w6p0ZSA6XCIsIHJlcS5ib2R5KTtcclxuICAgIG5leHQoKTtcclxufSk7XHJcbmFwcC5wb3N0KFwiL2FwaS9hZG1pbi9zdXBwcmltZXItdmVudGVcIiwgdGlja2V0U2FsZXNSb3V0ZXMpO1xyXG5jb25zb2xlLmxvZyhcIuKchSBSb3V0ZSBERUxFVEUgL2FwaS9hZG1pbi9zdXBwcmltZXItdmVudGUgZW5yZWdpc3Ryw6llICFcIik7XHJcblxyXG5hcHAudXNlKGNvcnMoeyBvcmlnaW46ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnIH0pKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpOyAvLyDinIUgR8OocmUgbGVzIHJlcXXDqnRlcyBQT1NUIGF2ZWMgZm9ybS1kYXRhXHJcblxyXG4vLyBUZXN0IGRlIGNvbm5leGlvbiDDoCBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbmRiLnJhdygnU0VMRUNUIDEnKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gTXlTUUwgdXNpbmcgS25leCcpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3RpbmcgdG8gTXlTUUw6JywgZXJyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFwcC51c2UoJy9hcGkvYXV0aCcsIGF1dGhSb3V0ZXMpOyAvL3BvdXIgbGVzIGdlc3Rpb24gZCdhZG1pbmlzdHJhdGV1clxyXG4gICAgYXBwLnVzZSgnL2FwaScsIGZhcVJvdXRlcyk7IC8vIHBvdXIgbGVzIHF1ZXN0aW9ucyBmcsOpcXVlbnRzXHJcbiAgICBhcHAudXNlKCcvYXBpL29yZ2FuaXplcicsIG9yZ2FuaXplclJvdXRlcyk7Ly8gcG91ciBsZXMgb3JnYW5pc2F0ZXVyc1xyXG4gICAgYXBwLnVzZSgnL2FwaS9wYXJ0aWNpcGFudCcsIHBhcnRpY2lwYW50Um91dGVzKTtcclxuICAgIGFwcC51c2UoJy9hcGkvbmV3c2xldHRlcicsIG5ld3NsZXR0ZXJSb3V0ZXMpOyAvL3BvdXIgbGEgbmV3c2xldHRlclxyXG4gICAgYXBwLnVzZShcIi9hcGkvdGlja2V0c1wiLCB0aWNrZXRTYWxlc1JvdXRlcyk7XHJcbiAgICBhcHAudXNlKFwiL2FwaS9hZG1pblwiLCB0aWNrZXRTYWxlc1JvdXRlcyk7IC8vIHBvdXIgbGUgYmlsbGV0c1xyXG4gICAgYXBwLnVzZShcIi9hcGkvb3JnYW5pemVyXCIsIHRpY2tldFNhbGVzUm91dGVzKTtcclxuICAgIGFwcC51c2UoXCIvYXBpL2NlcnRpZmljYXRlXCIsIGNlcnRpZmljYXRlUm91dGVzKTtcclxuICAgIGFwcC51c2UoJy9hcGkvY29udGFjdCcsIGNvbnRhY3RSb3V0ZXMpO1xyXG5cclxuLy8g4pyFIEFqb3V0IGRlIGxhIHJvdXRlIHB1YmxpcXVlIGRlcyBjYWxlbmRyaWVycyAo4pqg77iPIFNBTlMgVE9LRU4pXHJcbmFwcC51c2UoXCIvYXBpL3B1YmxpY1wiLCBjYWxlbmRyaWVyUm91dGVzKTsgXHJcblxyXG5hcHAudXNlKCcvYXBpL3Jlc3VsdGF0cycsIHJlc3VsdGF0c1JvdXRlcyk7ICAvLyBBam91dCBkZSBsYSByb3V0ZSBkZXMgcsOpc3VsdGF0cyBhdmVjIGxlIHByw6lmaXhlIHNpbXBsZSAvYXBpL3Jlc3VsdGF0c1xyXG5cclxuXHJcbmFwcC5nZXQoJy9hcGkvYWRtaW4vZGFzaGJvYXJkJywgdmVyaWZ5VG9rZW4sIChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQmllbnZlbnVlIHN1ciBsZSB0YWJsZWF1IGRlIGJvcmQgYWRtaW5pc3RyYXRldXInIH0pO1xyXG59KTtcclxuXHJcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFNlcnZldXIgZMOpbWFycsOpIGF2ZWMgc3VjY8OocyBhdSBwb3J0ICR7cG9ydH1gKTtcclxufSk7XHJcblxyXG4vL2Fqb3V0ZSBpbWFnZVxyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5hcHAudXNlKCcvdXBsb2FkcycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICd1cGxvYWRzJykpKTtcclxuXHJcbmFwcC5fcm91dGVyLnN0YWNrLmZvckVhY2goZnVuY3Rpb24ocil7XHJcbiAgICBpZiAoci5yb3V0ZSAmJiByLnJvdXRlLnBhdGgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+boCBSb3V0ZSBlbnJlZ2lzdHLDqWU6ICR7ci5yb3V0ZS5wYXRofWApO1xyXG4gICAgfVxyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxPQUFPLENBQUUsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQzNCLE1BQU1DLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUksRUFBRSxHQUFHSixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBRTtBQUM3QixNQUFNSyxXQUFXLEdBQUdMLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUN6RCxNQUFNTSxVQUFVLEdBQUdOLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUNqRCxNQUFNTyxlQUFlLEdBQUdQLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQztBQUMzRCxNQUFNUSxpQkFBaUIsR0FBR1IsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQy9ELE1BQU1TLFNBQVMsR0FBR1QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLE1BQU1VLGdCQUFnQixHQUFHVixPQUFPLENBQUMsMkJBQTJCLENBQUM7QUFDN0QsTUFBTVcsaUJBQWlCLEdBQUdYLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUMvRCxNQUFNWSxpQkFBaUIsR0FBR1osT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQy9ELE1BQU1hLGdCQUFnQixHQUFHYixPQUFPLENBQUMsMkJBQTJCLENBQUM7QUFDN0QsTUFBTWMsZUFBZSxHQUFHZCxPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDM0Qs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","map":{"version":3,"names":["require","config","express","cors","db","verifyToken","authRoutes","organizerRoutes","participantRoutes","faqRoutes","newsletterRoutes","ticketSalesRoutes","certificateRoutes","calendrierRoutes","resultatsRoutes","contactRoutes","app","port","process","env","PORT","use","req","res","next","console","log","method","url","body","post","origin","json","urlencoded","extended","raw","then","catch","err","error","get","message","listen","path","static","join","__dirname","_router","stack","forEach","r","route"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\","sources":["server.js"],"sourcesContent":["require ('dotenv').config();\r\nconst express = require('express');\r\nconst cors = require('cors');\r\nconst db = require('./db');  // Importer l'instance de Knex depuis db.js\r\nconst verifyToken = require('./middleware/jwtMiddleware');\r\nconst authRoutes = require('./routes/authRoutes');\r\nconst organizerRoutes = require('./routes/organizerRoutes');\r\nconst participantRoutes = require('./routes/participantRoutes');\r\nconst faqRoutes = require('./routes/faqRoutes');\r\nconst newsletterRoutes = require('./routes/newsletterRoutes');\r\nconst ticketSalesRoutes = require('./routes/ticketSalesRoutes');\r\nconst certificateRoutes = require('./routes/certificateRoutes');\r\nconst calendrierRoutes = require('./routes/calendrierRoutes');\r\nconst resultatsRoutes = require('./routes/resultatsRoutes');  \r\nconst contactRoutes = require('./routes/contactRoutes');\r\n\r\nconst app = express();\r\nconst port = process.env.PORT || 3001;\r\n\r\n\r\napp.use((req, res, next) => {\r\n    console.log(`üì° Requ√™te re√ßue : ${req.method} ${req.url}`);\r\n    console.log(\"üîç Corps de la requ√™te :\", req.body);\r\n    next();\r\n});\r\napp.post(\"/api/admin/supprimer-vente\", ticketSalesRoutes);\r\nconsole.log(\"‚úÖ Route DELETE /api/admin/supprimer-vente enregistr√©e !\");\r\n\r\napp.use(cors({ origin: 'http://localhost:3000' }));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true })); // ‚úÖ G√®re les requ√™tes POST avec form-data\r\n\r\n// Test de connexion √† la base de donn√©es\r\ndb.raw('SELECT 1')\r\n    .then(() => {\r\n        console.log('Connected to MySQL using Knex');\r\n    })\r\n    .catch(err => {\r\n        console.error('Error connecting to MySQL:', err);\r\n    });\r\n\r\n    app.use('/api/auth', authRoutes); //pour les gestion d'administrateur\r\n    app.use('/api', faqRoutes); // pour les questions fr√©quents\r\n    app.use('/api/organizer', organizerRoutes);// pour les organisateurs\r\n    app.use('/api/participant', participantRoutes);\r\n    app.use('/api/newsletter', newsletterRoutes); //pour la newsletter\r\n    app.use(\"/api/tickets\", ticketSalesRoutes);\r\n    app.use(\"/api/admin\", ticketSalesRoutes); // pour le billets\r\n    app.use(\"/api/organizer\", ticketSalesRoutes);\r\n    app.use(\"/api/certificate\", certificateRoutes);\r\n    app.use('/api/contact', contactRoutes);\r\n\r\n// ‚úÖ Ajout de la route publique des calendriers (‚ö†Ô∏è SANS TOKEN)\r\napp.use(\"/api/public\", calendrierRoutes); \r\n\r\napp.use('/api/resultats', resultatsRoutes);  // Ajout de la route des r√©sultats avec le pr√©fixe simple /api/resultats\r\n\r\n\r\napp.get('/api/admin/dashboard', verifyToken, (req, res) => {\r\n    res.json({ message: 'Bienvenue sur le tableau de bord administrateur' });\r\n});\r\n\r\napp.listen(port, () => {\r\n    console.log(`Serveur d√©marr√© avec succ√®s au port ${port}`);\r\n});\r\n\r\n//ajoute image\r\nconst path = require('path');\r\napp.use('/uploads', express.static(path.join(__dirname, 'uploads')));\r\n\r\napp._router.stack.forEach(function(r){\r\n    if (r.route && r.route.path) {\r\n        console.log(`üõ† Route enregistr√©e: ${r.route.path}`);\r\n    }\r\n});\r\n"],"mappings":";;AAAAA,OAAO,CAAE,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAC3B,MAAMC,OAAO,GAAGF,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMI,EAAE,GAAGJ,OAAO,CAAC,MAAM,CAAC,CAAC,CAAE;AAC7B,MAAMK,WAAW,GAAGL,OAAO,CAAC,4BAA4B,CAAC;AACzD,MAAMM,UAAU,GAAGN,OAAO,CAAC,qBAAqB,CAAC;AACjD,MAAMO,eAAe,GAAGP,OAAO,CAAC,0BAA0B,CAAC;AAC3D,MAAMQ,iBAAiB,GAAGR,OAAO,CAAC,4BAA4B,CAAC;AAC/D,MAAMS,SAAS,GAAGT,OAAO,CAAC,oBAAoB,CAAC;AAC/C,MAAMU,gBAAgB,GAAGV,OAAO,CAAC,2BAA2B,CAAC;AAC7D,MAAMW,iBAAiB,GAAGX,OAAO,CAAC,4BAA4B,CAAC;AAC/D,MAAMY,iBAAiB,GAAGZ,OAAO,CAAC,4BAA4B,CAAC;AAC/D,MAAMa,gBAAgB,GAAGb,OAAO,CAAC,2BAA2B,CAAC;AAC7D,MAAMc,eAAe,GAAGd,OAAO,CAAC,0BAA0B,CAAC;AAC3D,MAAMe,aAAa,GAAGf,OAAO,CAAC,wBAAwB,CAAC;AAEvD,MAAMgB,GAAG,GAAGd,OAAO,CAAC,CAAC;AACrB,MAAMe,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;AAGrCJ,GAAG,CAACK,GAAG,CAAC,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxBC,OAAO,CAACC,GAAG,CAAC,sBAAsBJ,GAAG,CAACK,MAAM,IAAIL,GAAG,CAACM,GAAG,EAAE,CAAC;EAC1DH,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEJ,GAAG,CAACO,IAAI,CAAC;EACjDL,IAAI,CAAC,CAAC;AACV,CAAC,CAAC;AACFR,GAAG,CAACc,IAAI,CAAC,4BAA4B,EAAEnB,iBAAiB,CAAC;AACzDc,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC;AAEtEV,GAAG,CAACK,GAAG,CAAClB,IAAI,CAAC;EAAE4B,MAAM,EAAE;AAAwB,CAAC,CAAC,CAAC;AAClDf,GAAG,CAACK,GAAG,CAACnB,OAAO,CAAC8B,IAAI,CAAC,CAAC,CAAC;AACvBhB,GAAG,CAACK,GAAG,CAACnB,OAAO,CAAC+B,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEjD;AACA9B,EAAE,CAAC+B,GAAG,CAAC,UAAU,CAAC,CACbC,IAAI,CAAC,MAAM;EACRX,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;AAChD,CAAC,CAAC,CACDW,KAAK,CAACC,GAAG,IAAI;EACVb,OAAO,CAACc,KAAK,CAAC,4BAA4B,EAAED,GAAG,CAAC;AACpD,CAAC,CAAC;AAEFtB,GAAG,CAACK,GAAG,CAAC,WAAW,EAAEf,UAAU,CAAC,CAAC,CAAC;AAClCU,GAAG,CAACK,GAAG,CAAC,MAAM,EAAEZ,SAAS,CAAC,CAAC,CAAC;AAC5BO,GAAG,CAACK,GAAG,CAAC,gBAAgB,EAAEd,eAAe,CAAC,CAAC;AAC3CS,GAAG,CAACK,GAAG,CAAC,kBAAkB,EAAEb,iBAAiB,CAAC;AAC9CQ,GAAG,CAACK,GAAG,CAAC,iBAAiB,EAAEX,gBAAgB,CAAC,CAAC,CAAC;AAC9CM,GAAG,CAACK,GAAG,CAAC,cAAc,EAAEV,iBAAiB,CAAC;AAC1CK,GAAG,CAACK,GAAG,CAAC,YAAY,EAAEV,iBAAiB,CAAC,CAAC,CAAC;AAC1CK,GAAG,CAACK,GAAG,CAAC,gBAAgB,EAAEV,iBAAiB,CAAC;AAC5CK,GAAG,CAACK,GAAG,CAAC,kBAAkB,EAAET,iBAAiB,CAAC;AAC9CI,GAAG,CAACK,GAAG,CAAC,cAAc,EAAEN,aAAa,CAAC;;AAE1C;AACAC,GAAG,CAACK,GAAG,CAAC,aAAa,EAAER,gBAAgB,CAAC;AAExCG,GAAG,CAACK,GAAG,CAAC,gBAAgB,EAAEP,eAAe,CAAC,CAAC,CAAE;;AAG7CE,GAAG,CAACwB,GAAG,CAAC,sBAAsB,EAAEnC,WAAW,EAAE,CAACiB,GAAG,EAAEC,GAAG,KAAK;EACvDA,GAAG,CAACS,IAAI,CAAC;IAAES,OAAO,EAAE;EAAkD,CAAC,CAAC;AAC5E,CAAC,CAAC;AAEFzB,GAAG,CAAC0B,MAAM,CAACzB,IAAI,EAAE,MAAM;EACnBQ,OAAO,CAACC,GAAG,CAAC,uCAAuCT,IAAI,EAAE,CAAC;AAC9D,CAAC,CAAC;;AAEF;AACA,MAAM0B,IAAI,GAAG3C,OAAO,CAAC,MAAM,CAAC;AAC5BgB,GAAG,CAACK,GAAG,CAAC,UAAU,EAAEnB,OAAO,CAAC0C,MAAM,CAACD,IAAI,CAACE,IAAI,CAACC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;AAEpE9B,GAAG,CAAC+B,OAAO,CAACC,KAAK,CAACC,OAAO,CAAC,UAASC,CAAC,EAAC;EACjC,IAAIA,CAAC,CAACC,KAAK,IAAID,CAAC,CAACC,KAAK,CAACR,IAAI,EAAE;IACzBlB,OAAO,CAACC,GAAG,CAAC,yBAAyBwB,CAAC,CAACC,KAAK,CAACR,IAAI,EAAE,CAAC;EACxD;AACJ,CAAC,CAAC","ignoreList":[]}},"mtime":1742838310017},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\db.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst knex = require('knex');\nconst config = require('./knexfile');\n\n// Cr√©e une instance de Knex\nconst db = knex(config.development);\n\n// Exporter l'instance de Knex\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJrbmV4IiwicmVxdWlyZSIsImNvbmZpZyIsImRiIiwiZGV2ZWxvcG1lbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXCIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qga25leCA9IHJlcXVpcmUoJ2tuZXgnKTtcclxuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi9rbmV4ZmlsZScpO1xyXG5cclxuLy8gQ3LDqWUgdW5lIGluc3RhbmNlIGRlIEtuZXhcclxuY29uc3QgZGIgPSBrbmV4KGNvbmZpZy5kZXZlbG9wbWVudCk7XHJcblxyXG4vLyBFeHBvcnRlciBsJ2luc3RhbmNlIGRlIEtuZXhcclxubW9kdWxlLmV4cG9ydHMgPSBkYjtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxZQUFZLENBQUM7O0FBRXBDO0FBQ0EsTUFBTUUsRUFBRSxHQUFHSCxJQUFJLENBQUNFLE1BQU0sQ0FBQ0UsV0FBVyxDQUFDOztBQUVuQztBQUNBQyxNQUFNLENBQUNDLE9BQU8sR0FBR0gsRUFBRSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["knex","require","config","db","development","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\","sources":["db.js"],"sourcesContent":["const knex = require('knex');\r\nconst config = require('./knexfile');\r\n\r\n// Cr√©e une instance de Knex\r\nconst db = knex(config.development);\r\n\r\n// Exporter l'instance de Knex\r\nmodule.exports = db;\r\n"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMC,MAAM,GAAGD,OAAO,CAAC,YAAY,CAAC;;AAEpC;AACA,MAAME,EAAE,GAAGH,IAAI,CAACE,MAAM,CAACE,WAAW,CAAC;;AAEnC;AACAC,MAAM,CAACC,OAAO,GAAGH,EAAE","ignoreList":[]}},"mtime":1728050066000},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\knexfile.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nrequire('dotenv').config();\nmodule.exports = {\n  development: {\n    client: 'mysql',\n    connection: {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME\n    },\n    migrations: {\n      tableName: 'knex_migrations'\n    }\n  },\n  test: {\n    client: 'mysql',\n    connection: {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME\n    },\n    migrations: {\n      tableName: 'knex_migrations'\n    }\n  },\n  production: {\n    client: 'mysql',\n    connection: {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME\n    },\n    migrations: {\n      tableName: 'knex_migrations'\n    }\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwibW9kdWxlIiwiZXhwb3J0cyIsImRldmVsb3BtZW50IiwiY2xpZW50IiwiY29ubmVjdGlvbiIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsIm1pZ3JhdGlvbnMiLCJ0YWJsZU5hbWUiLCJ0ZXN0IiwicHJvZHVjdGlvbiJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbImtuZXhmaWxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpOyAgXG5cbm1vZHVsZS5leHBvcnRzID0geyAgXG4gIGRldmVsb3BtZW50OiB7ICBcbiAgICBjbGllbnQ6ICdteXNxbCcsXG4gICAgY29ubmVjdGlvbjogeyAgXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULCAgXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLCAgXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsICBcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLCAgXG4gICAgfSwgIFxuICAgIG1pZ3JhdGlvbnM6IHsgIFxuICAgICAgdGFibGVOYW1lOiAna25leF9taWdyYXRpb25zJyAgXG4gICAgfSAgXG4gIH0sICBcbiAgdGVzdDogeyAgXG4gICAgY2xpZW50OiAnbXlzcWwnLCAgXG4gICAgY29ubmVjdGlvbjogeyAgXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULCAgXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLCAgXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsICBcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLCAgXG4gICAgfSwgIFxuICAgIG1pZ3JhdGlvbnM6IHsgIFxuICAgICAgdGFibGVOYW1lOiAna25leF9taWdyYXRpb25zJyAgXG4gICAgfSAgXG4gIH0sICBcbiAgcHJvZHVjdGlvbjogeyAgXG4gICAgY2xpZW50OiAnbXlzcWwnLCAgXG4gICAgY29ubmVjdGlvbjogeyAgXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULCAgXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLCAgXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsICBcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLCAgXG4gICAgfSwgIFxuICAgIG1pZ3JhdGlvbnM6IHsgIFxuICAgICAgdGFibGVOYW1lOiAna25leF9taWdyYXRpb25zJyAgXG4gICAgfSAgXG4gIH0gIFxufTsgIFxuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBRTFCQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmQyxXQUFXLEVBQUU7SUFDWEMsTUFBTSxFQUFFLE9BQU87SUFDZkMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLElBQUksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDekJDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVc7TUFDakNDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPO0lBQ3hCLENBQUM7SUFDREMsVUFBVSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDSmQsTUFBTSxFQUFFLE9BQU87SUFDZkMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLElBQUksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDekJDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVc7TUFDakNDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPO0lBQ3hCLENBQUM7SUFDREMsVUFBVSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQztFQUNERSxVQUFVLEVBQUU7SUFDVmYsTUFBTSxFQUFFLE9BQU87SUFDZkMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLElBQUksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDekJDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVc7TUFDakNDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPO0lBQ3hCLENBQUM7SUFDREMsVUFBVSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTtJQUNiO0VBQ0Y7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["require","config","module","exports","development","client","connection","host","process","env","DB_HOST","user","DB_USER","password","DB_PASSWORD","database","DB_NAME","migrations","tableName","test","production"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\","sources":["knexfile.js"],"sourcesContent":["require('dotenv').config();  \n\nmodule.exports = {  \n  development: {  \n    client: 'mysql',\n    connection: {  \n      host: process.env.DB_HOST,  \n      user: process.env.DB_USER,  \n      password: process.env.DB_PASSWORD,  \n      database: process.env.DB_NAME,  \n    },  \n    migrations: {  \n      tableName: 'knex_migrations'  \n    }  \n  },  \n  test: {  \n    client: 'mysql',  \n    connection: {  \n      host: process.env.DB_HOST,  \n      user: process.env.DB_USER,  \n      password: process.env.DB_PASSWORD,  \n      database: process.env.DB_NAME,  \n    },  \n    migrations: {  \n      tableName: 'knex_migrations'  \n    }  \n  },  \n  production: {  \n    client: 'mysql',  \n    connection: {  \n      host: process.env.DB_HOST,  \n      user: process.env.DB_USER,  \n      password: process.env.DB_PASSWORD,  \n      database: process.env.DB_NAME,  \n    },  \n    migrations: {  \n      tableName: 'knex_migrations'  \n    }  \n  }  \n};  \n"],"mappings":";;AAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAE1BC,MAAM,CAACC,OAAO,GAAG;EACfC,WAAW,EAAE;IACXC,MAAM,EAAE,OAAO;IACfC,UAAU,EAAE;MACVC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MACzBC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,WAAW;MACjCC,QAAQ,EAAEP,OAAO,CAACC,GAAG,CAACO;IACxB,CAAC;IACDC,UAAU,EAAE;MACVC,SAAS,EAAE;IACb;EACF,CAAC;EACDC,IAAI,EAAE;IACJd,MAAM,EAAE,OAAO;IACfC,UAAU,EAAE;MACVC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MACzBC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,WAAW;MACjCC,QAAQ,EAAEP,OAAO,CAACC,GAAG,CAACO;IACxB,CAAC;IACDC,UAAU,EAAE;MACVC,SAAS,EAAE;IACb;EACF,CAAC;EACDE,UAAU,EAAE;IACVf,MAAM,EAAE,OAAO;IACfC,UAAU,EAAE;MACVC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MACzBC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,WAAW;MACjCC,QAAQ,EAAEP,OAAO,CAACC,GAAG,CAACO;IACxB,CAAC;IACDC,UAAU,EAAE;MACVC,SAAS,EAAE;IACb;EACF;AACF,CAAC","ignoreList":[]}},"mtime":1727785916000},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\middleware\\\\jwtMiddleware.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nrequire('dotenv').config();\nconst jwt = require('jsonwebtoken');\n\n// Middleware pour v√©rifier le token JWT\nconst verifyToken = (req, res, next) => {\n  // R√©cup√©rer le token depuis l'en-t√™te 'authorization'\n  const authHeader = req.headers['authorization'];\n  if (!authHeader) {\n    console.log('Token non fourni dans l\\'en-t√™te Authorization');\n    return res.status(403).send({\n      message: 'Token manquant dans l\\'en-t√™te Authorization!'\n    });\n  }\n\n  // Extraire le token du header \"Bearer <token>\"\n  const token = authHeader.split(' ')[1]; // La deuxi√®me partie contient le token r√©el\n\n  if (!token) {\n    console.log('Le token n\\'est pas fourni dans le bon format (Bearer <token>)');\n    return res.status(403).send({\n      message: 'Format incorrect du token, \"Bearer <token>\" attendu!'\n    });\n  }\n  try {\n    // V√©rifier et d√©coder le token avec la cl√© secr√®te\n    jwt.verify(token, process.env.JWT_SECRET, (err, decoded) => {\n      if (err) {\n        console.log('Erreur lors de la v√©rification du token:', err.message);\n        return res.status(401).send({\n          message: 'Token invalide ou expir√©!'\n        });\n      }\n\n      // Stocker l'ID et le r√¥le de l'utilisateur dans la requ√™te pour une utilisation ult√©rieure\n      // req.userId = decoded.id;\n      req.user = decoded;\n      req.userRole = decoded.role;\n      console.log('Token valide pour l\\'utilisateur ID:', decoded.id, 'avec le r√¥le:', decoded.role);\n      next();\n    });\n  } catch (err) {\n    console.error('Erreur inattendue lors de la v√©rification du token:', err.message);\n    return res.status(500).send({\n      message: 'Erreur interne lors de la v√©rification du token!'\n    });\n  }\n};\nmodule.exports = verifyToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiand0IiwidmVyaWZ5VG9rZW4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNwbGl0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJlcnIiLCJkZWNvZGVkIiwidXNlciIsInVzZXJSb2xlIiwicm9sZSIsImlkIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXG1pZGRsZXdhcmVcXCIsInNvdXJjZXMiOlsiand0TWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG4vLyBNaWRkbGV3YXJlIHBvdXIgdsOpcmlmaWVyIGxlIHRva2VuIEpXVFxyXG5jb25zdCB2ZXJpZnlUb2tlbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIC8vIFLDqWN1cMOpcmVyIGxlIHRva2VuIGRlcHVpcyBsJ2VuLXTDqnRlICdhdXRob3JpemF0aW9uJ1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG5cclxuICBpZiAoIWF1dGhIZWFkZXIpIHtcclxuICAgIGNvbnNvbGUubG9nKCdUb2tlbiBub24gZm91cm5pIGRhbnMgbFxcJ2VuLXTDqnRlIEF1dGhvcml6YXRpb24nKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCh7IG1lc3NhZ2U6ICdUb2tlbiBtYW5xdWFudCBkYW5zIGxcXCdlbi10w6p0ZSBBdXRob3JpemF0aW9uIScgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRyYWlyZSBsZSB0b2tlbiBkdSBoZWFkZXIgXCJCZWFyZXIgPHRva2VuPlwiXHJcbiAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07IC8vIExhIGRldXhpw6htZSBwYXJ0aWUgY29udGllbnQgbGUgdG9rZW4gcsOpZWxcclxuXHJcbiAgaWYgKCF0b2tlbikge1xyXG4gICAgY29uc29sZS5sb2coJ0xlIHRva2VuIG5cXCdlc3QgcGFzIGZvdXJuaSBkYW5zIGxlIGJvbiBmb3JtYXQgKEJlYXJlciA8dG9rZW4+KScpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5zZW5kKHsgbWVzc2FnZTogJ0Zvcm1hdCBpbmNvcnJlY3QgZHUgdG9rZW4sIFwiQmVhcmVyIDx0b2tlbj5cIiBhdHRlbmR1IScgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gVsOpcmlmaWVyIGV0IGTDqWNvZGVyIGxlIHRva2VuIGF2ZWMgbGEgY2zDqSBzZWNyw6h0ZVxyXG4gICAgand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgKGVyciwgZGVjb2RlZCkgPT4ge1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0VycmV1ciBsb3JzIGRlIGxhIHbDqXJpZmljYXRpb24gZHUgdG9rZW46JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdUb2tlbiBpbnZhbGlkZSBvdSBleHBpcsOpIScgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFN0b2NrZXIgbCdJRCBldCBsZSByw7RsZSBkZSBsJ3V0aWxpc2F0ZXVyIGRhbnMgbGEgcmVxdcOqdGUgcG91ciB1bmUgdXRpbGlzYXRpb24gdWx0w6lyaWV1cmVcclxuICAgICAgLy8gcmVxLnVzZXJJZCA9IGRlY29kZWQuaWQ7XHJcbiAgICAgIHJlcS51c2VyID0gZGVjb2RlZDtcclxuICAgICAgcmVxLnVzZXJSb2xlID0gZGVjb2RlZC5yb2xlO1xyXG4gICAgICBjb25zb2xlLmxvZygnVG9rZW4gdmFsaWRlIHBvdXIgbFxcJ3V0aWxpc2F0ZXVyIElEOicsIGRlY29kZWQuaWQsICdhdmVjIGxlIHLDtGxlOicsIGRlY29kZWQucm9sZSk7XHJcbiAgICAgIFxyXG4gICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBpbmF0dGVuZHVlIGxvcnMgZGUgbGEgdsOpcmlmaWNhdGlvbiBkdSB0b2tlbjonLCBlcnIubWVzc2FnZSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnRXJyZXVyIGludGVybmUgbG9ycyBkZSBsYSB2w6lyaWZpY2F0aW9uIGR1IHRva2VuIScgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB2ZXJpZnlUb2tlbjtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQzFCLE1BQU1DLEdBQUcsR0FBR0YsT0FBTyxDQUFDLGNBQWMsQ0FBQzs7QUFFbkM7QUFDQSxNQUFNRyxXQUFXLEdBQUdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDdEM7RUFDQSxNQUFNQyxVQUFVLEdBQUdILEdBQUcsQ0FBQ0ksT0FBTyxDQUFDLGVBQWUsQ0FBQztFQUUvQyxJQUFJLENBQUNELFVBQVUsRUFBRTtJQUNmRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnREFBZ0QsQ0FBQztJQUM3RCxPQUFPTCxHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFnRCxDQUFDLENBQUM7RUFDM0Y7O0VBRUE7RUFDQSxNQUFNQyxLQUFLLEdBQUdQLFVBQVUsQ0FBQ1EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0VBRXhDLElBQUksQ0FBQ0QsS0FBSyxFQUFFO0lBQ1ZMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdFQUFnRSxDQUFDO0lBQzdFLE9BQU9MLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQXVELENBQUMsQ0FBQztFQUNsRztFQUVBLElBQUk7SUFDRjtJQUNBWCxHQUFHLENBQUNjLE1BQU0sQ0FBQ0YsS0FBSyxFQUFFRyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFLENBQUNDLEdBQUcsRUFBRUMsT0FBTyxLQUFLO01BQzFELElBQUlELEdBQUcsRUFBRTtRQUNQWCxPQUFPLENBQUNDLEdBQUcsQ0FBQywwQ0FBMEMsRUFBRVUsR0FBRyxDQUFDUCxPQUFPLENBQUM7UUFDcEUsT0FBT1IsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUU7UUFBNEIsQ0FBQyxDQUFDO01BQ3ZFOztNQUVBO01BQ0E7TUFDQVQsR0FBRyxDQUFDa0IsSUFBSSxHQUFHRCxPQUFPO01BQ2xCakIsR0FBRyxDQUFDbUIsUUFBUSxHQUFHRixPQUFPLENBQUNHLElBQUk7TUFDM0JmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNDQUFzQyxFQUFFVyxPQUFPLENBQUNJLEVBQUUsRUFBRSxlQUFlLEVBQUVKLE9BQU8sQ0FBQ0csSUFBSSxDQUFDO01BRTlGbEIsSUFBSSxDQUFDLENBQUM7SUFDUixDQUFDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT2MsR0FBRyxFQUFFO0lBQ1pYLE9BQU8sQ0FBQ2lCLEtBQUssQ0FBQyxxREFBcUQsRUFBRU4sR0FBRyxDQUFDUCxPQUFPLENBQUM7SUFDakYsT0FBT1IsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBbUQsQ0FBQyxDQUFDO0VBQzlGO0FBQ0YsQ0FBQztBQUVEYyxNQUFNLENBQUNDLE9BQU8sR0FBR3pCLFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["require","config","jwt","verifyToken","req","res","next","authHeader","headers","console","log","status","send","message","token","split","verify","process","env","JWT_SECRET","err","decoded","user","userRole","role","id","error","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\middleware\\","sources":["jwtMiddleware.js"],"sourcesContent":["require('dotenv').config();\r\nconst jwt = require('jsonwebtoken');\r\n\r\n// Middleware pour v√©rifier le token JWT\r\nconst verifyToken = (req, res, next) => {\r\n  // R√©cup√©rer le token depuis l'en-t√™te 'authorization'\r\n  const authHeader = req.headers['authorization'];\r\n\r\n  if (!authHeader) {\r\n    console.log('Token non fourni dans l\\'en-t√™te Authorization');\r\n    return res.status(403).send({ message: 'Token manquant dans l\\'en-t√™te Authorization!' });\r\n  }\r\n\r\n  // Extraire le token du header \"Bearer <token>\"\r\n  const token = authHeader.split(' ')[1]; // La deuxi√®me partie contient le token r√©el\r\n\r\n  if (!token) {\r\n    console.log('Le token n\\'est pas fourni dans le bon format (Bearer <token>)');\r\n    return res.status(403).send({ message: 'Format incorrect du token, \"Bearer <token>\" attendu!' });\r\n  }\r\n\r\n  try {\r\n    // V√©rifier et d√©coder le token avec la cl√© secr√®te\r\n    jwt.verify(token, process.env.JWT_SECRET, (err, decoded) => {\r\n      if (err) {\r\n        console.log('Erreur lors de la v√©rification du token:', err.message);\r\n        return res.status(401).send({ message: 'Token invalide ou expir√©!' });\r\n      }\r\n\r\n      // Stocker l'ID et le r√¥le de l'utilisateur dans la requ√™te pour une utilisation ult√©rieure\r\n      // req.userId = decoded.id;\r\n      req.user = decoded;\r\n      req.userRole = decoded.role;\r\n      console.log('Token valide pour l\\'utilisateur ID:', decoded.id, 'avec le r√¥le:', decoded.role);\r\n      \r\n      next();\r\n    });\r\n  } catch (err) {\r\n    console.error('Erreur inattendue lors de la v√©rification du token:', err.message);\r\n    return res.status(500).send({ message: 'Erreur interne lors de la v√©rification du token!' });\r\n  }\r\n};\r\n\r\nmodule.exports = verifyToken;\r\n"],"mappings":";;AAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAC1B,MAAMC,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;;AAEnC;AACA,MAAMG,WAAW,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACtC;EACA,MAAMC,UAAU,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC;EAE/C,IAAI,CAACD,UAAU,EAAE;IACfE,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAC;IAC7D,OAAOL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAgD,CAAC,CAAC;EAC3F;;EAEA;EACA,MAAMC,KAAK,GAAGP,UAAU,CAACQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAExC,IAAI,CAACD,KAAK,EAAE;IACVL,OAAO,CAACC,GAAG,CAAC,gEAAgE,CAAC;IAC7E,OAAOL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAuD,CAAC,CAAC;EAClG;EAEA,IAAI;IACF;IACAX,GAAG,CAACc,MAAM,CAACF,KAAK,EAAEG,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE,CAACC,GAAG,EAAEC,OAAO,KAAK;MAC1D,IAAID,GAAG,EAAE;QACPX,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAEU,GAAG,CAACP,OAAO,CAAC;QACpE,OAAOR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAA4B,CAAC,CAAC;MACvE;;MAEA;MACA;MACAT,GAAG,CAACkB,IAAI,GAAGD,OAAO;MAClBjB,GAAG,CAACmB,QAAQ,GAAGF,OAAO,CAACG,IAAI;MAC3Bf,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEW,OAAO,CAACI,EAAE,EAAE,eAAe,EAAEJ,OAAO,CAACG,IAAI,CAAC;MAE9FlB,IAAI,CAAC,CAAC;IACR,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOc,GAAG,EAAE;IACZX,OAAO,CAACiB,KAAK,CAAC,qDAAqD,EAAEN,GAAG,CAACP,OAAO,CAAC;IACjF,OAAOR,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAmD,CAAC,CAAC;EAC9F;AACF,CAAC;AAEDc,MAAM,CAACC,OAAO,GAAGzB,WAAW","ignoreList":[]}},"mtime":1742764003529},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\authRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst verifyToken = require('../middleware/jwtMiddleware');\nconst verifyRoles = require('../middleware/roleMiddleware');\nconst AdminControler = require('../controlers/AdminControler');\nconst OrganizerControler = require('../controlers/OrganizerControler');\nconst router = express.Router();\n\n// ************ ADMINISTRATEURS ************************\n// Routes r√©serv√©es aux administrateurs pour g√©rer la plateforme\n// Route pour obtenir les informations de l'admin connect√© (avec JWT et r√¥le 'admin')\nrouter.get('/admin/profile', verifyToken, verifyRoles(['admin']), AdminControler.getProfile);\n// Routes pour les administrateurs\nrouter.post('/login/admin', AdminControler.login);\n// Route pour obtenir tous les administrateurs (prot√©g√©e par JWT avec v√©rification du r√¥le 'admin')\nrouter.get('/admin/all', verifyToken, verifyRoles(['admin']), AdminControler.getAllAdmins);\n// Route pour cr√©er un nouvel admin (prot√©g√©e par JWT avec r√¥le 'admin')\nrouter.post('/admin/create', verifyToken, verifyRoles(['admin']), AdminControler.createAdmin);\n// Route pour supprimer un admin\nrouter.delete('/admin/delete/:id', AdminControler.deleteAdmin);\n// Route pour modifier un administrateur\nrouter.put('/admin/edit/:id', verifyToken, verifyRoles(['admin']), AdminControler.editAdmin);\n//***********Organisateurs************* */\n\n// Route pour r√©cup√©rer le nombre total d'organisateurs\nrouter.get('/admin/organizers/count', OrganizerControler.getOrganizerCount);\n// Routes pour g√©rer les organisateurs\n\nrouter.get('/admin/organizers', (req, res, next) => {\n  console.log(\"Route /admin/organizers atteinte\");\n  next();\n}, verifyToken, verifyRoles(['admin']), OrganizerControler.getAllOrganizers);\nrouter.put('/admin/organizers/toggle-status/:id', verifyToken, verifyRoles(['admin']), OrganizerControler.toggleOrganizerStatus);\nrouter.delete('/admin/organizers/:id', verifyToken, verifyRoles(['admin']), OrganizerControler.deleteOrganizer);\n//nouveau\n//Route pour Envoyer un email √† un organisateur\nrouter.post('/admin/organizers/:id/send-email', verifyToken, verifyRoles(['admin']), AdminControler.sendEmailToOrganizer // M√©thode appel√©e ici\n);\n// R√©cup√©rer les √©v√©nements d'un organisateur\nrouter.get('/admin/organizers/:id/events', verifyToken, verifyRoles(['admin']), OrganizerControler.getEventsByOrganizerId);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInZlcmlmeVRva2VuIiwidmVyaWZ5Um9sZXMiLCJBZG1pbkNvbnRyb2xlciIsIk9yZ2FuaXplckNvbnRyb2xlciIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImdldFByb2ZpbGUiLCJwb3N0IiwibG9naW4iLCJnZXRBbGxBZG1pbnMiLCJjcmVhdGVBZG1pbiIsImRlbGV0ZSIsImRlbGV0ZUFkbWluIiwicHV0IiwiZWRpdEFkbWluIiwiZ2V0T3JnYW5pemVyQ291bnQiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29uc29sZSIsImxvZyIsImdldEFsbE9yZ2FuaXplcnMiLCJ0b2dnbGVPcmdhbml6ZXJTdGF0dXMiLCJkZWxldGVPcmdhbml6ZXIiLCJzZW5kRW1haWxUb09yZ2FuaXplciIsImdldEV2ZW50c0J5T3JnYW5pemVySWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXHJvdXRlc1xcIiwic291cmNlcyI6WyJhdXRoUm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCB2ZXJpZnlUb2tlbiA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvand0TWlkZGxld2FyZScpO1xyXG5jb25zdCB2ZXJpZnlSb2xlcyA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvcm9sZU1pZGRsZXdhcmUnKTtcclxuY29uc3QgQWRtaW5Db250cm9sZXIgPSByZXF1aXJlKCcuLi9jb250cm9sZXJzL0FkbWluQ29udHJvbGVyJyk7XHJcbmNvbnN0IE9yZ2FuaXplckNvbnRyb2xlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xlcnMvT3JnYW5pemVyQ29udHJvbGVyJyk7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gKioqKioqKioqKioqIEFETUlOSVNUUkFURVVSUyAqKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8gUm91dGVzIHLDqXNlcnbDqWVzIGF1eCBhZG1pbmlzdHJhdGV1cnMgcG91ciBnw6lyZXIgbGEgcGxhdGVmb3JtZVxyXG4vLyBSb3V0ZSBwb3VyIG9idGVuaXIgbGVzIGluZm9ybWF0aW9ucyBkZSBsJ2FkbWluIGNvbm5lY3TDqSAoYXZlYyBKV1QgZXQgcsO0bGUgJ2FkbWluJylcclxucm91dGVyLmdldCgnL2FkbWluL3Byb2ZpbGUnLCB2ZXJpZnlUb2tlbiwgdmVyaWZ5Um9sZXMoWydhZG1pbiddKSwgQWRtaW5Db250cm9sZXIuZ2V0UHJvZmlsZSk7XHJcbiAvLyBSb3V0ZXMgcG91ciBsZXMgYWRtaW5pc3RyYXRldXJzXHJcbiByb3V0ZXIucG9zdCgnL2xvZ2luL2FkbWluJywgQWRtaW5Db250cm9sZXIubG9naW4pO1xyXG4vLyBSb3V0ZSBwb3VyIG9idGVuaXIgdG91cyBsZXMgYWRtaW5pc3RyYXRldXJzIChwcm90w6lnw6llIHBhciBKV1QgYXZlYyB2w6lyaWZpY2F0aW9uIGR1IHLDtGxlICdhZG1pbicpXHJcbnJvdXRlci5nZXQoJy9hZG1pbi9hbGwnLCB2ZXJpZnlUb2tlbiwgdmVyaWZ5Um9sZXMoWydhZG1pbiddKSwgQWRtaW5Db250cm9sZXIuZ2V0QWxsQWRtaW5zKTtcclxuLy8gUm91dGUgcG91ciBjcsOpZXIgdW4gbm91dmVsIGFkbWluIChwcm90w6lnw6llIHBhciBKV1QgYXZlYyByw7RsZSAnYWRtaW4nKVxyXG5yb3V0ZXIucG9zdCgnL2FkbWluL2NyZWF0ZScsIHZlcmlmeVRva2VuLCB2ZXJpZnlSb2xlcyhbJ2FkbWluJ10pLCBBZG1pbkNvbnRyb2xlci5jcmVhdGVBZG1pbik7XHJcbi8vIFJvdXRlIHBvdXIgc3VwcHJpbWVyIHVuIGFkbWluXHJcbnJvdXRlci5kZWxldGUoJy9hZG1pbi9kZWxldGUvOmlkJywgQWRtaW5Db250cm9sZXIuZGVsZXRlQWRtaW4pO1xyXG4vLyBSb3V0ZSBwb3VyIG1vZGlmaWVyIHVuIGFkbWluaXN0cmF0ZXVyXHJcbnJvdXRlci5wdXQoJy9hZG1pbi9lZGl0LzppZCcsIHZlcmlmeVRva2VuLCB2ZXJpZnlSb2xlcyhbJ2FkbWluJ10pLCBBZG1pbkNvbnRyb2xlci5lZGl0QWRtaW4pO1xyXG4vLyoqKioqKioqKioqT3JnYW5pc2F0ZXVycyoqKioqKioqKioqKiogKi9cclxuXHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIGxlIG5vbWJyZSB0b3RhbCBkJ29yZ2FuaXNhdGV1cnNcclxucm91dGVyLmdldCgnL2FkbWluL29yZ2FuaXplcnMvY291bnQnLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0T3JnYW5pemVyQ291bnQpO1xyXG4vLyBSb3V0ZXMgcG91ciBnw6lyZXIgbGVzIG9yZ2FuaXNhdGV1cnNcclxuXHJcbnJvdXRlci5nZXQoJy9hZG1pbi9vcmdhbml6ZXJzJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlJvdXRlIC9hZG1pbi9vcmdhbml6ZXJzIGF0dGVpbnRlXCIpO1xyXG4gICAgbmV4dCgpO1xyXG4gIH0sIHZlcmlmeVRva2VuLCB2ZXJpZnlSb2xlcyhbJ2FkbWluJ10pLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0QWxsT3JnYW5pemVycyk7XHJcbiAgXHJcbnJvdXRlci5wdXQoJy9hZG1pbi9vcmdhbml6ZXJzL3RvZ2dsZS1zdGF0dXMvOmlkJywgdmVyaWZ5VG9rZW4sIHZlcmlmeVJvbGVzKFsnYWRtaW4nXSksIE9yZ2FuaXplckNvbnRyb2xlci50b2dnbGVPcmdhbml6ZXJTdGF0dXMpO1xyXG5yb3V0ZXIuZGVsZXRlKCcvYWRtaW4vb3JnYW5pemVycy86aWQnLCB2ZXJpZnlUb2tlbiwgdmVyaWZ5Um9sZXMoWydhZG1pbiddKSwgT3JnYW5pemVyQ29udHJvbGVyLmRlbGV0ZU9yZ2FuaXplcik7XHJcbi8vbm91dmVhdVxyXG4vL1JvdXRlIHBvdXIgRW52b3llciB1biBlbWFpbCDDoCB1biBvcmdhbmlzYXRldXJcclxucm91dGVyLnBvc3QoXHJcbiAgJy9hZG1pbi9vcmdhbml6ZXJzLzppZC9zZW5kLWVtYWlsJyxcclxuICB2ZXJpZnlUb2tlbixcclxuICB2ZXJpZnlSb2xlcyhbJ2FkbWluJ10pLFxyXG4gIEFkbWluQ29udHJvbGVyLnNlbmRFbWFpbFRvT3JnYW5pemVyIC8vIE3DqXRob2RlIGFwcGVsw6llIGljaVxyXG4pO1xyXG4vLyBSw6ljdXDDqXJlciBsZXMgw6l2w6luZW1lbnRzIGQndW4gb3JnYW5pc2F0ZXVyXHJcbnJvdXRlci5nZXQoXHJcbiAgJy9hZG1pbi9vcmdhbml6ZXJzLzppZC9ldmVudHMnLFxyXG4gIHZlcmlmeVRva2VuLFxyXG4gIHZlcmlmeVJvbGVzKFsnYWRtaW4nXSksXHJcbiAgT3JnYW5pemVyQ29udHJvbGVyLmdldEV2ZW50c0J5T3JnYW5pemVySWRcclxuKTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7O0FBQ0EsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLFdBQVcsR0FBR0QsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBQzFELE1BQU1FLFdBQVcsR0FBR0YsT0FBTyxDQUFDLDhCQUE4QixDQUFDO0FBQzNELE1BQU1HLGNBQWMsR0FBR0gsT0FBTyxDQUFDLDhCQUE4QixDQUFDO0FBQzlELE1BQU1JLGtCQUFrQixHQUFHSixPQUFPLENBQUMsa0NBQWtDLENBQUM7QUFFdEUsTUFBTUssTUFBTSxHQUFHTixPQUFPLENBQUNPLE1BQU0sQ0FBQyxDQUFDOztBQUUvQjtBQUNBO0FBQ0E7QUFDQUQsTUFBTSxDQUFDRSxHQUFHLENBQUMsZ0JBQWdCLEVBQUVOLFdBQVcsRUFBRUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsY0FBYyxDQUFDSyxVQUFVLENBQUM7QUFDM0Y7QUFDQUgsTUFBTSxDQUFDSSxJQUFJLENBQUMsY0FBYyxFQUFFTixjQUFjLENBQUNPLEtBQUssQ0FBQztBQUNsRDtBQUNBTCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxZQUFZLEVBQUVOLFdBQVcsRUFBRUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsY0FBYyxDQUFDUSxZQUFZLENBQUM7QUFDMUY7QUFDQU4sTUFBTSxDQUFDSSxJQUFJLENBQUMsZUFBZSxFQUFFUixXQUFXLEVBQUVDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVDLGNBQWMsQ0FBQ1MsV0FBVyxDQUFDO0FBQzdGO0FBQ0FQLE1BQU0sQ0FBQ1EsTUFBTSxDQUFDLG1CQUFtQixFQUFFVixjQUFjLENBQUNXLFdBQVcsQ0FBQztBQUM5RDtBQUNBVCxNQUFNLENBQUNVLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRWQsV0FBVyxFQUFFQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxjQUFjLENBQUNhLFNBQVMsQ0FBQztBQUM1Rjs7QUFHQTtBQUNBWCxNQUFNLENBQUNFLEdBQUcsQ0FBQyx5QkFBeUIsRUFBRUgsa0JBQWtCLENBQUNhLGlCQUFpQixDQUFDO0FBQzNFOztBQUVBWixNQUFNLENBQUNFLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDVyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2hEQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztFQUMvQ0YsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDLEVBQUVuQixXQUFXLEVBQUVDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVFLGtCQUFrQixDQUFDbUIsZ0JBQWdCLENBQUM7QUFFOUVsQixNQUFNLENBQUNVLEdBQUcsQ0FBQyxxQ0FBcUMsRUFBRWQsV0FBVyxFQUFFQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFRSxrQkFBa0IsQ0FBQ29CLHFCQUFxQixDQUFDO0FBQ2hJbkIsTUFBTSxDQUFDUSxNQUFNLENBQUMsdUJBQXVCLEVBQUVaLFdBQVcsRUFBRUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRUUsa0JBQWtCLENBQUNxQixlQUFlLENBQUM7QUFDL0c7QUFDQTtBQUNBcEIsTUFBTSxDQUFDSSxJQUFJLENBQ1Qsa0NBQWtDLEVBQ2xDUixXQUFXLEVBQ1hDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQ3RCQyxjQUFjLENBQUN1QixvQkFBb0IsQ0FBQztBQUN0QyxDQUFDO0FBQ0Q7QUFDQXJCLE1BQU0sQ0FBQ0UsR0FBRyxDQUNSLDhCQUE4QixFQUM5Qk4sV0FBVyxFQUNYQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUN0QkUsa0JBQWtCLENBQUN1QixzQkFDckIsQ0FBQztBQUdEQyxNQUFNLENBQUNDLE9BQU8sR0FBR3hCLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","verifyToken","verifyRoles","AdminControler","OrganizerControler","router","Router","get","getProfile","post","login","getAllAdmins","createAdmin","delete","deleteAdmin","put","editAdmin","getOrganizerCount","req","res","next","console","log","getAllOrganizers","toggleOrganizerStatus","deleteOrganizer","sendEmailToOrganizer","getEventsByOrganizerId","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["authRoutes.js"],"sourcesContent":["\r\nconst express = require('express');\r\nconst verifyToken = require('../middleware/jwtMiddleware');\r\nconst verifyRoles = require('../middleware/roleMiddleware');\r\nconst AdminControler = require('../controlers/AdminControler');\r\nconst OrganizerControler = require('../controlers/OrganizerControler');\r\n\r\nconst router = express.Router();\r\n\r\n// ************ ADMINISTRATEURS ************************\r\n// Routes r√©serv√©es aux administrateurs pour g√©rer la plateforme\r\n// Route pour obtenir les informations de l'admin connect√© (avec JWT et r√¥le 'admin')\r\nrouter.get('/admin/profile', verifyToken, verifyRoles(['admin']), AdminControler.getProfile);\r\n // Routes pour les administrateurs\r\n router.post('/login/admin', AdminControler.login);\r\n// Route pour obtenir tous les administrateurs (prot√©g√©e par JWT avec v√©rification du r√¥le 'admin')\r\nrouter.get('/admin/all', verifyToken, verifyRoles(['admin']), AdminControler.getAllAdmins);\r\n// Route pour cr√©er un nouvel admin (prot√©g√©e par JWT avec r√¥le 'admin')\r\nrouter.post('/admin/create', verifyToken, verifyRoles(['admin']), AdminControler.createAdmin);\r\n// Route pour supprimer un admin\r\nrouter.delete('/admin/delete/:id', AdminControler.deleteAdmin);\r\n// Route pour modifier un administrateur\r\nrouter.put('/admin/edit/:id', verifyToken, verifyRoles(['admin']), AdminControler.editAdmin);\r\n//***********Organisateurs************* */\r\n\r\n\r\n// Route pour r√©cup√©rer le nombre total d'organisateurs\r\nrouter.get('/admin/organizers/count', OrganizerControler.getOrganizerCount);\r\n// Routes pour g√©rer les organisateurs\r\n\r\nrouter.get('/admin/organizers', (req, res, next) => {\r\n    console.log(\"Route /admin/organizers atteinte\");\r\n    next();\r\n  }, verifyToken, verifyRoles(['admin']), OrganizerControler.getAllOrganizers);\r\n  \r\nrouter.put('/admin/organizers/toggle-status/:id', verifyToken, verifyRoles(['admin']), OrganizerControler.toggleOrganizerStatus);\r\nrouter.delete('/admin/organizers/:id', verifyToken, verifyRoles(['admin']), OrganizerControler.deleteOrganizer);\r\n//nouveau\r\n//Route pour Envoyer un email √† un organisateur\r\nrouter.post(\r\n  '/admin/organizers/:id/send-email',\r\n  verifyToken,\r\n  verifyRoles(['admin']),\r\n  AdminControler.sendEmailToOrganizer // M√©thode appel√©e ici\r\n);\r\n// R√©cup√©rer les √©v√©nements d'un organisateur\r\nrouter.get(\r\n  '/admin/organizers/:id/events',\r\n  verifyToken,\r\n  verifyRoles(['admin']),\r\n  OrganizerControler.getEventsByOrganizerId\r\n);\r\n\r\n\r\nmodule.exports = router;"],"mappings":";;AACA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,WAAW,GAAGD,OAAO,CAAC,6BAA6B,CAAC;AAC1D,MAAME,WAAW,GAAGF,OAAO,CAAC,8BAA8B,CAAC;AAC3D,MAAMG,cAAc,GAAGH,OAAO,CAAC,8BAA8B,CAAC;AAC9D,MAAMI,kBAAkB,GAAGJ,OAAO,CAAC,kCAAkC,CAAC;AAEtE,MAAMK,MAAM,GAAGN,OAAO,CAACO,MAAM,CAAC,CAAC;;AAE/B;AACA;AACA;AACAD,MAAM,CAACE,GAAG,CAAC,gBAAgB,EAAEN,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEC,cAAc,CAACK,UAAU,CAAC;AAC3F;AACAH,MAAM,CAACI,IAAI,CAAC,cAAc,EAAEN,cAAc,CAACO,KAAK,CAAC;AAClD;AACAL,MAAM,CAACE,GAAG,CAAC,YAAY,EAAEN,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEC,cAAc,CAACQ,YAAY,CAAC;AAC1F;AACAN,MAAM,CAACI,IAAI,CAAC,eAAe,EAAER,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEC,cAAc,CAACS,WAAW,CAAC;AAC7F;AACAP,MAAM,CAACQ,MAAM,CAAC,mBAAmB,EAAEV,cAAc,CAACW,WAAW,CAAC;AAC9D;AACAT,MAAM,CAACU,GAAG,CAAC,iBAAiB,EAAEd,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEC,cAAc,CAACa,SAAS,CAAC;AAC5F;;AAGA;AACAX,MAAM,CAACE,GAAG,CAAC,yBAAyB,EAAEH,kBAAkB,CAACa,iBAAiB,CAAC;AAC3E;;AAEAZ,MAAM,CAACE,GAAG,CAAC,mBAAmB,EAAE,CAACW,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChDC,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;EAC/CF,IAAI,CAAC,CAAC;AACR,CAAC,EAAEnB,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEE,kBAAkB,CAACmB,gBAAgB,CAAC;AAE9ElB,MAAM,CAACU,GAAG,CAAC,qCAAqC,EAAEd,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEE,kBAAkB,CAACoB,qBAAqB,CAAC;AAChInB,MAAM,CAACQ,MAAM,CAAC,uBAAuB,EAAEZ,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEE,kBAAkB,CAACqB,eAAe,CAAC;AAC/G;AACA;AACApB,MAAM,CAACI,IAAI,CACT,kCAAkC,EAClCR,WAAW,EACXC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EACtBC,cAAc,CAACuB,oBAAoB,CAAC;AACtC,CAAC;AACD;AACArB,MAAM,CAACE,GAAG,CACR,8BAA8B,EAC9BN,WAAW,EACXC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EACtBE,kBAAkB,CAACuB,sBACrB,CAAC;AAGDC,MAAM,CAACC,OAAO,GAAGxB,MAAM","ignoreList":[]}},"mtime":1742478187260},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\middleware\\\\roleMiddleware.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst verifyRoles = allowedRoles => {\n  return (req, res, next) => {\n    if (!req.userRole) {\n      return res.status(403).json({\n        message: 'Acc√®s refus√©, aucun r√¥le d√©fini pour cet utilisateur.'\n      });\n    }\n\n    // V√©rifier si le r√¥le de l'utilisateur fait partie des r√¥les autoris√©s\n    if (!allowedRoles.includes(req.userRole)) {\n      return res.status(403).json({\n        message: `Acc√®s refus√©, r√¥le '${req.userRole}' non autoris√© pour cette action.`\n      });\n    }\n    next();\n  };\n};\nmodule.exports = verifyRoles;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2ZXJpZnlSb2xlcyIsImFsbG93ZWRSb2xlcyIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VyUm9sZSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXG1pZGRsZXdhcmVcXCIsInNvdXJjZXMiOlsicm9sZU1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdmVyaWZ5Um9sZXMgPSAoYWxsb3dlZFJvbGVzKSA9PiB7XHJcbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgaWYgKCFyZXEudXNlclJvbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ0FjY8OocyByZWZ1c8OpLCBhdWN1biByw7RsZSBkw6lmaW5pIHBvdXIgY2V0IHV0aWxpc2F0ZXVyLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVsOpcmlmaWVyIHNpIGxlIHLDtGxlIGRlIGwndXRpbGlzYXRldXIgZmFpdCBwYXJ0aWUgZGVzIHLDtGxlcyBhdXRvcmlzw6lzXHJcbiAgICBpZiAoIWFsbG93ZWRSb2xlcy5pbmNsdWRlcyhyZXEudXNlclJvbGUpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IGBBY2PDqHMgcmVmdXPDqSwgcsO0bGUgJyR7cmVxLnVzZXJSb2xlfScgbm9uIGF1dG9yaXPDqSBwb3VyIGNldHRlIGFjdGlvbi5gIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5leHQoKTtcclxuICB9O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB2ZXJpZnlSb2xlcztcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFdBQVcsR0FBSUMsWUFBWSxJQUFLO0VBQ3BDLE9BQU8sQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUN6QixJQUFJLENBQUNGLEdBQUcsQ0FBQ0csUUFBUSxFQUFFO01BQ2pCLE9BQU9GLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFO01BQXdELENBQUMsQ0FBQztJQUNuRzs7SUFFQTtJQUNBLElBQUksQ0FBQ1AsWUFBWSxDQUFDUSxRQUFRLENBQUNQLEdBQUcsQ0FBQ0csUUFBUSxDQUFDLEVBQUU7TUFDeEMsT0FBT0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUUsdUJBQXVCTixHQUFHLENBQUNHLFFBQVE7TUFBb0MsQ0FBQyxDQUFDO0lBQ2xIO0lBRUFELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQztBQUNILENBQUM7QUFFRE0sTUFBTSxDQUFDQyxPQUFPLEdBQUdYLFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["verifyRoles","allowedRoles","req","res","next","userRole","status","json","message","includes","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\middleware\\","sources":["roleMiddleware.js"],"sourcesContent":["const verifyRoles = (allowedRoles) => {\r\n  return (req, res, next) => {\r\n    if (!req.userRole) {\r\n      return res.status(403).json({ message: 'Acc√®s refus√©, aucun r√¥le d√©fini pour cet utilisateur.' });\r\n    }\r\n\r\n    // V√©rifier si le r√¥le de l'utilisateur fait partie des r√¥les autoris√©s\r\n    if (!allowedRoles.includes(req.userRole)) {\r\n      return res.status(403).json({ message: `Acc√®s refus√©, r√¥le '${req.userRole}' non autoris√© pour cette action.` });\r\n    }\r\n\r\n    next();\r\n  };\r\n};\r\n\r\nmodule.exports = verifyRoles;\r\n"],"mappings":";;AAAA,MAAMA,WAAW,GAAIC,YAAY,IAAK;EACpC,OAAO,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IACzB,IAAI,CAACF,GAAG,CAACG,QAAQ,EAAE;MACjB,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAwD,CAAC,CAAC;IACnG;;IAEA;IACA,IAAI,CAACP,YAAY,CAACQ,QAAQ,CAACP,GAAG,CAACG,QAAQ,CAAC,EAAE;MACxC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE,uBAAuBN,GAAG,CAACG,QAAQ;MAAoC,CAAC,CAAC;IAClH;IAEAD,IAAI,CAAC,CAAC;EACR,CAAC;AACH,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGX,WAAW","ignoreList":[]}},"mtime":1729196134000},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\AdminControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\n// const db = require('../db');  // Importer l'instance de Knex depuis db.js\n// const bcrypt = require('bcrypt');\n// const jwt = require('jsonwebtoken');\n\n// exports.login = async (req, res) => {\n//   const { email, password } = req.body;\n\n//   try {\n//     console.log('Tentative de connexion avec:', email);\n\n//     const admin = await db('admin').where({ email_admin: email }).first();\n\n//     if (!admin) {\n//       console.log('Administrateur non trouv√©');\n//       return res.status(404).json({ message: 'Administrateur non trouv√©' });\n//     }\n\n//     console.log('Administrateur trouv√©:', admin);\n\n//     const validPassword = await bcrypt.compare(password, admin.mdp_admin);\n//     if (!validPassword) {\n//       console.log('Mot de passe incorrect');\n//       return res.status(400).json({ message: 'Mot de passe incorrect' });\n//     }\n\n//     console.log('Mot de passe correct');\n//     // Ajouter le r√¥le \"admin\" dans le token JWT\n//     const token = jwt.sign({ id: admin.id_admin, role: 'admin' }, process.env.JWT_SECRET, { expiresIn: '1h' });\n//     console.log('Token g√©n√©r√© avec succ√®s');\n\n//     res.status(200).json({ message: 'Connexion r√©ussie', token });\n//   } catch (error) {\n//     console.error('Erreur serveur lors de la connexion:', error);\n//     res.status(500).json({ message: 'Erreur serveur', error });\n//   }\n// };\n\n// // Fonction pour obtenir les informations de l'administrateur connect√©\n// exports.getProfile = async (req, res) => {\n//   try {\n//     const adminId = req.userId; // L'ID de l'utilisateur est extrait du token JWT\n//     const admin = await db('admin').where({ id_admin: adminId }).first();\n\n//     if (!admin) {\n//       return res.status(404).json({ message: 'Administrateur non trouv√©' });\n//     }\n\n//     // Retourner les informations de l'administrateur connect√©\n//     res.status(200).json({\n//       name: `${admin.nom_admin} ${admin.prenom_admin}`,\n//       email: admin.email_admin,\n//     });\n//   } catch (error) {\n//     console.error('Erreur lors de la r√©cup√©ration du profil:', error);\n//     res.status(500).json({ message: 'Erreur serveur' });\n//   }\n// };\n\n// // r√©cuperation des admins\n// exports.getAllAdmins = async (req, res) => {\n//   try {\n//       const admins = await db('admin').select('id_admin', 'nom_admin', 'prenom_admin', 'tel_admin','email_admin');\n//       res.status(200).json(admins);\n//   } catch (error) {\n//       res.status(500).json({ message: 'Erreur lors de la r√©cup√©ration des administrateurs', error });\n//   }\n// };\n\n// exports.createAdmin = async (req, res) => {\n//     const { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin} = req.body;\n\n//     try {\n//         const hashedPassword = await bcrypt.hash(mdp_admin, 10);\n//         await db('admin').insert({ nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin: hashedPassword });\n//         res.status(201).json({ message: 'Administrateur cr√©√© avec succ√®s' });\n//     } catch (error) {\n//         res.status(500).json({ message: 'Erreur lors de la cr√©ation de l\\'administrateur', error });\n//     }\n// };\n\n// //modification d'un admin\n// exports.editAdmin = async (req, res) => {\n//   const { id } = req.params;\n//   const { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin } = req.body;\n\n//   try {\n//       await db('admin').where({ id_admin: id }).update({ nom_admin, prenom_admin, email_admin, role_admin });\n//       res.status(200).json({ message: 'Administrateur modifi√© avec succ√®s' });\n//   } catch (error) {\n//       res.status(500).json({ message: 'Erreur lors de la modification de l\\'administrateur', error });\n//   }\n// };\n\n// //suppr√©ssion\n// exports.deleteAdmin = async (req, res) => {\n//   const { id } = req.params;\n\n//   try {\n//       await db('admin').where({ id_admin: id }).del();\n//       res.status(200).json({ message: 'Administrateur supprim√© avec succ√®s' });\n//   } catch (error) {\n//       res.status(500).json({ message: 'Erreur lors de la suppression de l\\'administrateur', error });\n//   }\n// };\n\n//code farany\nconst bcrypt = require('bcrypt');\nconst jwt = require('jsonwebtoken');\nconst {\n  createAdminQuery,\n  getAdminByEmailQuery,\n  getAllAdminsQuery,\n  getAdminByIdQuery,\n  updateAdminQuery,\n  deleteAdminQuery\n} = require('../queries'); // Import des requ√™tes\nconst nodemailer = require(\"nodemailer\");\nconst {\n  getOrganizerByIdQuery\n} = require(\"../queries\");\nexports.login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  try {\n    console.log('Tentative de connexion avec:', email);\n    const admin = await getAdminByEmailQuery(email); // Utilisation de la requ√™te externalis√©e\n\n    if (!admin) {\n      console.log('Administrateur non trouv√©');\n      return res.status(404).json({\n        message: 'Administrateur non trouv√©'\n      });\n    }\n    console.log('Administrateur trouv√©:', admin);\n    const validPassword = await bcrypt.compare(password, admin.mdp_admin);\n    if (!validPassword) {\n      console.log('Mot de passe incorrect');\n      return res.status(400).json({\n        message: 'Mot de passe incorrect'\n      });\n    }\n    console.log('Mot de passe correct');\n    const token = jwt.sign({\n      id: admin.id_admin,\n      role: 'admin'\n    }, process.env.JWT_SECRET, {\n      expiresIn: '1h'\n    });\n    console.log('Token g√©n√©r√© avec succ√®s');\n    res.status(200).json({\n      message: 'Connexion r√©ussie',\n      token\n    });\n  } catch (error) {\n    console.error('Erreur serveur lors de la connexion:', error);\n    res.status(500).json({\n      message: 'Erreur serveur',\n      error\n    });\n  }\n};\nexports.createAdmin = async (req, res) => {\n  const {\n    nom_admin,\n    prenom_admin,\n    email_admin,\n    tel_admin,\n    mdp_admin\n  } = req.body;\n  console.log('Donn√©es re√ßues pour l\\'ajout:', req.body);\n  try {\n    // V√©rifier si l'email existe d√©j√†\n    const existingAdmin = await getAdminByEmailQuery(email_admin);\n    if (existingAdmin) {\n      console.log('Administrateur avec cet email existe d√©j√†:', email_admin);\n      return res.status(400).json({\n        message: 'Cet email est d√©j√† enregistr√©.'\n      });\n    }\n\n    // Si l'email n'existe pas, continuer avec la cr√©ation\n    const hashedPassword = await bcrypt.hash(mdp_admin, 10);\n    console.log('Mot de passe hash√©:', hashedPassword);\n\n    // Ajouter l'admin dans la base de donn√©es\n    await createAdminQuery({\n      nom_admin,\n      prenom_admin,\n      email_admin,\n      tel_admin,\n      mdp_admin: hashedPassword\n    });\n    console.log('Admin ajout√© avec succ√®s');\n    res.status(201).json({\n      message: 'Administrateur cr√©√© avec succ√®s'\n    });\n  } catch (error) {\n    console.error('Erreur lors de la cr√©ation de l\\'administrateur:', error);\n    res.status(500).json({\n      message: 'Erreur lors de la cr√©ation de l\\'administrateur',\n      error\n    });\n  }\n};\nexports.getProfile = async (req, res) => {\n  try {\n    const adminId = req.userId;\n    const admin = await getAdminByIdQuery(adminId); // Utilisation de la requ√™te externalis√©e\n\n    if (!admin) {\n      return res.status(404).json({\n        message: 'Administrateur non trouv√©'\n      });\n    }\n    res.status(200).json({\n      name: `${admin.nom_admin} ${admin.prenom_admin}`,\n      email: admin.email_admin\n    });\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration du profil:', error);\n    res.status(500).json({\n      message: 'Erreur serveur'\n    });\n  }\n};\nexports.getAllAdmins = async (req, res) => {\n  try {\n    const admins = await getAllAdminsQuery(); // Utilisation de la requ√™te externalis√©e\n    res.status(200).json(admins);\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la r√©cup√©ration des administrateurs',\n      error\n    });\n  }\n};\nexports.editAdmin = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    nom_admin,\n    prenom_admin,\n    email_admin,\n    tel_admin,\n    mdp_admin\n  } = req.body;\n  try {\n    const hashedPassword = await bcrypt.hash(mdp_admin, 10);\n    await updateAdminQuery(id, {\n      nom_admin,\n      prenom_admin,\n      email_admin,\n      tel_admin,\n      mdp_admin: hashedPassword\n    });\n    res.status(200).json({\n      message: 'Administrateur modifi√© avec succ√®s'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la modification de l\\'administrateur',\n      error\n    });\n  }\n};\nexports.deleteAdmin = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    await deleteAdminQuery(id); // Utilisation de la requ√™te externalis√©e\n    res.status(200).json({\n      message: 'Administrateur supprim√© avec succ√®s'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la suppression de l\\'administrateur',\n      error\n    });\n  }\n};\n\n//Evoie email aux organisateurs\nexports.sendEmailToOrganizer = async (req, res) => {\n  const {\n    id\n  } = req.params; // ID de l'organisateur\n  const {\n    email,\n    subject,\n    content\n  } = req.body; // Contenu de l'email fourni par l'admin\n\n  try {\n    // V√©rifiez si l'organisateur existe dans la base de donn√©es\n    const organizer = await getOrganizerByIdQuery(id);\n    if (!organizer) {\n      return res.status(404).json({\n        message: \"Organisateur non trouv√©.\"\n      });\n    }\n\n    // Configuration du service d'email (Nodemailer)\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      // Changez si vous utilisez un autre service\n      auth: {\n        user: process.env.EMAIL_USER,\n        // Adresse email de l'exp√©diteur\n        pass: process.env.EMAIL_PASS // Mot de passe ou cl√© d'application de l'exp√©diteur\n      }\n    });\n\n    // D√©finition de l'email √† envoyer\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      // Adresse email de l'exp√©diteur\n      to: email,\n      // Adresse email du destinataire\n      subject: subject + \" (Administration de QuickEvent)\",\n      text: content // Contenu du message\n    };\n\n    // Envoi de l'email\n    await transporter.sendMail(mailOptions);\n    res.status(200).json({\n      message: `Email envoy√© avec succ√®s √† ${email}.`\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de l'envoi de l'email :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de l'envoi de l'email.\"\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHQiLCJyZXF1aXJlIiwiand0IiwiY3JlYXRlQWRtaW5RdWVyeSIsImdldEFkbWluQnlFbWFpbFF1ZXJ5IiwiZ2V0QWxsQWRtaW5zUXVlcnkiLCJnZXRBZG1pbkJ5SWRRdWVyeSIsInVwZGF0ZUFkbWluUXVlcnkiLCJkZWxldGVBZG1pblF1ZXJ5Iiwibm9kZW1haWxlciIsImdldE9yZ2FuaXplckJ5SWRRdWVyeSIsImV4cG9ydHMiLCJsb2dpbiIsInJlcSIsInJlcyIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwiY29uc29sZSIsImxvZyIsImFkbWluIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ2YWxpZFBhc3N3b3JkIiwiY29tcGFyZSIsIm1kcF9hZG1pbiIsInRva2VuIiwic2lnbiIsImlkIiwiaWRfYWRtaW4iLCJyb2xlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJlcnJvciIsImNyZWF0ZUFkbWluIiwibm9tX2FkbWluIiwicHJlbm9tX2FkbWluIiwiZW1haWxfYWRtaW4iLCJ0ZWxfYWRtaW4iLCJleGlzdGluZ0FkbWluIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiZ2V0UHJvZmlsZSIsImFkbWluSWQiLCJ1c2VySWQiLCJuYW1lIiwiZ2V0QWxsQWRtaW5zIiwiYWRtaW5zIiwiZWRpdEFkbWluIiwicGFyYW1zIiwiZGVsZXRlQWRtaW4iLCJzZW5kRW1haWxUb09yZ2FuaXplciIsInN1YmplY3QiLCJjb250ZW50Iiwib3JnYW5pemVyIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZXJ2aWNlIiwiYXV0aCIsInVzZXIiLCJFTUFJTF9VU0VSIiwicGFzcyIsIkVNQUlMX1BBU1MiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInRleHQiLCJzZW5kTWFpbCJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxjb250cm9sZXJzXFwiLCJzb3VyY2VzIjpbIkFkbWluQ29udHJvbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGInKTsgIC8vIEltcG9ydGVyIGwnaW5zdGFuY2UgZGUgS25leCBkZXB1aXMgZGIuanNcclxuLy8gY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XHJcbi8vIGNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5cclxuLy8gZXhwb3J0cy5sb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnNvbGUubG9nKCdUZW50YXRpdmUgZGUgY29ubmV4aW9uIGF2ZWM6JywgZW1haWwpO1xyXG5cclxuLy8gICAgIGNvbnN0IGFkbWluID0gYXdhaXQgZGIoJ2FkbWluJykud2hlcmUoeyBlbWFpbF9hZG1pbjogZW1haWwgfSkuZmlyc3QoKTtcclxuXHJcbi8vICAgICBpZiAoIWFkbWluKSB7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKCdBZG1pbmlzdHJhdGV1ciBub24gdHJvdXbDqScpO1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnQWRtaW5pc3RyYXRldXIgbm9uIHRyb3V2w6knIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnNvbGUubG9nKCdBZG1pbmlzdHJhdGV1ciB0cm91dsOpOicsIGFkbWluKTtcclxuXHJcbi8vICAgICBjb25zdCB2YWxpZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGFkbWluLm1kcF9hZG1pbik7XHJcbi8vICAgICBpZiAoIXZhbGlkUGFzc3dvcmQpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ01vdCBkZSBwYXNzZSBpbmNvcnJlY3QnKTtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ01vdCBkZSBwYXNzZSBpbmNvcnJlY3QnIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnNvbGUubG9nKCdNb3QgZGUgcGFzc2UgY29ycmVjdCcpO1xyXG4vLyAgICAgLy8gQWpvdXRlciBsZSByw7RsZSBcImFkbWluXCIgZGFucyBsZSB0b2tlbiBKV1RcclxuLy8gICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogYWRtaW4uaWRfYWRtaW4sIHJvbGU6ICdhZG1pbicgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcbi8vICAgICBjb25zb2xlLmxvZygnVG9rZW4gZ8OpbsOpcsOpIGF2ZWMgc3VjY8OocycpO1xyXG5cclxuLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0Nvbm5leGlvbiByw6l1c3NpZScsIHRva2VuIH0pO1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIGNvbm5leGlvbjonLCBlcnJvcik7XHJcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1cicsIGVycm9yIH0pO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vIC8vIEZvbmN0aW9uIHBvdXIgb2J0ZW5pciBsZXMgaW5mb3JtYXRpb25zIGRlIGwnYWRtaW5pc3RyYXRldXIgY29ubmVjdMOpXHJcbi8vIGV4cG9ydHMuZ2V0UHJvZmlsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBhZG1pbklkID0gcmVxLnVzZXJJZDsgLy8gTCdJRCBkZSBsJ3V0aWxpc2F0ZXVyIGVzdCBleHRyYWl0IGR1IHRva2VuIEpXVFxyXG4vLyAgICAgY29uc3QgYWRtaW4gPSBhd2FpdCBkYignYWRtaW4nKS53aGVyZSh7IGlkX2FkbWluOiBhZG1pbklkIH0pLmZpcnN0KCk7XHJcblxyXG4vLyAgICAgaWYgKCFhZG1pbikge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnQWRtaW5pc3RyYXRldXIgbm9uIHRyb3V2w6knIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIC8vIFJldG91cm5lciBsZXMgaW5mb3JtYXRpb25zIGRlIGwnYWRtaW5pc3RyYXRldXIgY29ubmVjdMOpXHJcbi8vICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbi8vICAgICAgIG5hbWU6IGAke2FkbWluLm5vbV9hZG1pbn0gJHthZG1pbi5wcmVub21fYWRtaW59YCxcclxuLy8gICAgICAgZW1haWw6IGFkbWluLmVtYWlsX2FkbWluLFxyXG4vLyAgICAgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGR1IHByb2ZpbDonLCBlcnJvcik7XHJcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1cicgfSk7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5cclxuLy8gLy8gcsOpY3VwZXJhdGlvbiBkZXMgYWRtaW5zXHJcbi8vIGV4cG9ydHMuZ2V0QWxsQWRtaW5zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgYWRtaW5zID0gYXdhaXQgZGIoJ2FkbWluJykuc2VsZWN0KCdpZF9hZG1pbicsICdub21fYWRtaW4nLCAncHJlbm9tX2FkbWluJywgJ3RlbF9hZG1pbicsJ2VtYWlsX2FkbWluJyk7XHJcbi8vICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFkbWlucyk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGFkbWluaXN0cmF0ZXVycycsIGVycm9yIH0pO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vIGV4cG9ydHMuY3JlYXRlQWRtaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gICAgIGNvbnN0IHsgbm9tX2FkbWluLCBwcmVub21fYWRtaW4sIGVtYWlsX2FkbWluLCB0ZWxfYWRtaW4sIG1kcF9hZG1pbn0gPSByZXEuYm9keTtcclxuICAgIFxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKG1kcF9hZG1pbiwgMTApO1xyXG4vLyAgICAgICAgIGF3YWl0IGRiKCdhZG1pbicpLmluc2VydCh7IG5vbV9hZG1pbiwgcHJlbm9tX2FkbWluLCBlbWFpbF9hZG1pbiwgdGVsX2FkbWluLCBtZHBfYWRtaW46IGhhc2hlZFBhc3N3b3JkIH0pO1xyXG4vLyAgICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ0FkbWluaXN0cmF0ZXVyIGNyw6nDqSBhdmVjIHN1Y2PDqHMnIH0pO1xyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGUgbFxcJ2FkbWluaXN0cmF0ZXVyJywgZXJyb3IgfSk7XHJcbi8vICAgICB9XHJcbi8vIH07XHJcblxyXG4vLyAvL21vZGlmaWNhdGlvbiBkJ3VuIGFkbWluXHJcbi8vIGV4cG9ydHMuZWRpdEFkbWluID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuLy8gICBjb25zdCB7IG5vbV9hZG1pbiwgcHJlbm9tX2FkbWluLCBlbWFpbF9hZG1pbiwgdGVsX2FkbWluLCBtZHBfYWRtaW4gfSA9IHJlcS5ib2R5O1xyXG5cclxuLy8gICB0cnkge1xyXG4vLyAgICAgICBhd2FpdCBkYignYWRtaW4nKS53aGVyZSh7IGlkX2FkbWluOiBpZCB9KS51cGRhdGUoeyBub21fYWRtaW4sIHByZW5vbV9hZG1pbiwgZW1haWxfYWRtaW4sIHJvbGVfYWRtaW4gfSk7XHJcbi8vICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0FkbWluaXN0cmF0ZXVyIG1vZGlmacOpIGF2ZWMgc3VjY8OocycgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgbW9kaWZpY2F0aW9uIGRlIGxcXCdhZG1pbmlzdHJhdGV1cicsIGVycm9yIH0pO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuXHJcbi8vIC8vc3VwcHLDqXNzaW9uXHJcbi8vIGV4cG9ydHMuZGVsZXRlQWRtaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuLy8gICB0cnkge1xyXG4vLyAgICAgICBhd2FpdCBkYignYWRtaW4nKS53aGVyZSh7IGlkX2FkbWluOiBpZCB9KS5kZWwoKTtcclxuLy8gICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQWRtaW5pc3RyYXRldXIgc3VwcHJpbcOpIGF2ZWMgc3VjY8OocycgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbFxcJ2FkbWluaXN0cmF0ZXVyJywgZXJyb3IgfSk7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5cclxuLy9jb2RlIGZhcmFueVxyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IHtcclxuICBjcmVhdGVBZG1pblF1ZXJ5LFxyXG4gIGdldEFkbWluQnlFbWFpbFF1ZXJ5LFxyXG4gIGdldEFsbEFkbWluc1F1ZXJ5LFxyXG4gIGdldEFkbWluQnlJZFF1ZXJ5LFxyXG4gIHVwZGF0ZUFkbWluUXVlcnksXHJcbiAgZGVsZXRlQWRtaW5RdWVyeSxcclxufSA9IHJlcXVpcmUoJy4uL3F1ZXJpZXMnKTsgLy8gSW1wb3J0IGRlcyByZXF1w6p0ZXNcclxuY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoXCJub2RlbWFpbGVyXCIpO1xyXG5jb25zdCB7IGdldE9yZ2FuaXplckJ5SWRRdWVyeSB9ID0gcmVxdWlyZShcIi4uL3F1ZXJpZXNcIik7XHJcblxyXG5cclxuZXhwb3J0cy5sb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdUZW50YXRpdmUgZGUgY29ubmV4aW9uIGF2ZWM6JywgZW1haWwpO1xyXG5cclxuICAgIGNvbnN0IGFkbWluID0gYXdhaXQgZ2V0QWRtaW5CeUVtYWlsUXVlcnkoZW1haWwpOyAvLyBVdGlsaXNhdGlvbiBkZSBsYSByZXF1w6p0ZSBleHRlcm5hbGlzw6llXHJcblxyXG4gICAgaWYgKCFhZG1pbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnQWRtaW5pc3RyYXRldXIgbm9uIHRyb3V2w6knKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0FkbWluaXN0cmF0ZXVyIG5vbiB0cm91dsOpJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnQWRtaW5pc3RyYXRldXIgdHJvdXbDqTonLCBhZG1pbik7XHJcblxyXG4gICAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBhZG1pbi5tZHBfYWRtaW4pO1xyXG4gICAgaWYgKCF2YWxpZFBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNb3QgZGUgcGFzc2UgaW5jb3JyZWN0Jyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdNb3QgZGUgcGFzc2UgaW5jb3JyZWN0JyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnTW90IGRlIHBhc3NlIGNvcnJlY3QnKTtcclxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogYWRtaW4uaWRfYWRtaW4sIHJvbGU6ICdhZG1pbicgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcbiAgICBjb25zb2xlLmxvZygnVG9rZW4gZ8OpbsOpcsOpIGF2ZWMgc3VjY8OocycpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0Nvbm5leGlvbiByw6l1c3NpZScsIHRva2VuIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIGNvbm5leGlvbjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1cicsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuY3JlYXRlQWRtaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IG5vbV9hZG1pbiwgcHJlbm9tX2FkbWluLCBlbWFpbF9hZG1pbiwgdGVsX2FkbWluLCBtZHBfYWRtaW4gfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnNvbGUubG9nKCdEb25uw6llcyByZcOndWVzIHBvdXIgbFxcJ2Fqb3V0OicsIHJlcS5ib2R5KTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFbDqXJpZmllciBzaSBsJ2VtYWlsIGV4aXN0ZSBkw6lqw6BcclxuICAgIGNvbnN0IGV4aXN0aW5nQWRtaW4gPSBhd2FpdCBnZXRBZG1pbkJ5RW1haWxRdWVyeShlbWFpbF9hZG1pbik7XHJcbiAgICBcclxuICAgIGlmIChleGlzdGluZ0FkbWluKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBZG1pbmlzdHJhdGV1ciBhdmVjIGNldCBlbWFpbCBleGlzdGUgZMOpasOgOicsIGVtYWlsX2FkbWluKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0NldCBlbWFpbCBlc3QgZMOpasOgIGVucmVnaXN0csOpLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2kgbCdlbWFpbCBuJ2V4aXN0ZSBwYXMsIGNvbnRpbnVlciBhdmVjIGxhIGNyw6lhdGlvblxyXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChtZHBfYWRtaW4sIDEwKTtcclxuICAgIGNvbnNvbGUubG9nKCdNb3QgZGUgcGFzc2UgaGFzaMOpOicsIGhhc2hlZFBhc3N3b3JkKTtcclxuXHJcbiAgICAvLyBBam91dGVyIGwnYWRtaW4gZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbiAgICBhd2FpdCBjcmVhdGVBZG1pblF1ZXJ5KHsgbm9tX2FkbWluLCBwcmVub21fYWRtaW4sIGVtYWlsX2FkbWluLCB0ZWxfYWRtaW4sIG1kcF9hZG1pbjogaGFzaGVkUGFzc3dvcmQgfSk7XHJcbiAgICBjb25zb2xlLmxvZygnQWRtaW4gYWpvdXTDqSBhdmVjIHN1Y2PDqHMnKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdBZG1pbmlzdHJhdGV1ciBjcsOpw6kgYXZlYyBzdWNjw6hzJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxcXCdhZG1pbmlzdHJhdGV1cjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGUgbFxcJ2FkbWluaXN0cmF0ZXVyJywgZXJyb3IgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydHMuZ2V0UHJvZmlsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBhZG1pbklkID0gcmVxLnVzZXJJZDtcclxuICAgIGNvbnN0IGFkbWluID0gYXdhaXQgZ2V0QWRtaW5CeUlkUXVlcnkoYWRtaW5JZCk7IC8vIFV0aWxpc2F0aW9uIGRlIGxhIHJlcXXDqnRlIGV4dGVybmFsaXPDqWVcclxuXHJcbiAgICBpZiAoIWFkbWluKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdBZG1pbmlzdHJhdGV1ciBub24gdHJvdXbDqScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBuYW1lOiBgJHthZG1pbi5ub21fYWRtaW59ICR7YWRtaW4ucHJlbm9tX2FkbWlufWAsXHJcbiAgICAgIGVtYWlsOiBhZG1pbi5lbWFpbF9hZG1pbixcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkdSBwcm9maWw6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXInIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0QWxsQWRtaW5zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFkbWlucyA9IGF3YWl0IGdldEFsbEFkbWluc1F1ZXJ5KCk7IC8vIFV0aWxpc2F0aW9uIGRlIGxhIHJlcXXDqnRlIGV4dGVybmFsaXPDqWVcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFkbWlucyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBhZG1pbmlzdHJhdGV1cnMnLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmVkaXRBZG1pbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgY29uc3QgeyBub21fYWRtaW4sIHByZW5vbV9hZG1pbiwgZW1haWxfYWRtaW4sIHRlbF9hZG1pbiwgbWRwX2FkbWluIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gobWRwX2FkbWluLCAxMCk7XHJcbiAgICBhd2FpdCB1cGRhdGVBZG1pblF1ZXJ5KGlkLCB7IG5vbV9hZG1pbiwgcHJlbm9tX2FkbWluLCBlbWFpbF9hZG1pbiwgdGVsX2FkbWluLCBtZHBfYWRtaW46IGhhc2hlZFBhc3N3b3JkIH0pO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQWRtaW5pc3RyYXRldXIgbW9kaWZpw6kgYXZlYyBzdWNjw6hzJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgbW9kaWZpY2F0aW9uIGRlIGxcXCdhZG1pbmlzdHJhdGV1cicsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuZGVsZXRlQWRtaW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgZGVsZXRlQWRtaW5RdWVyeShpZCk7IC8vIFV0aWxpc2F0aW9uIGRlIGxhIHJlcXXDqnRlIGV4dGVybmFsaXPDqWVcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0FkbWluaXN0cmF0ZXVyIHN1cHByaW3DqSBhdmVjIHN1Y2PDqHMnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkZSBsXFwnYWRtaW5pc3RyYXRldXInLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vL0V2b2llIGVtYWlsIGF1eCBvcmdhbmlzYXRldXJzXHJcbmV4cG9ydHMuc2VuZEVtYWlsVG9Pcmdhbml6ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zOyAvLyBJRCBkZSBsJ29yZ2FuaXNhdGV1clxyXG4gIGNvbnN0IHsgZW1haWwsIHN1YmplY3QsIGNvbnRlbnQgfSA9IHJlcS5ib2R5OyAvLyBDb250ZW51IGRlIGwnZW1haWwgZm91cm5pIHBhciBsJ2FkbWluXHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBWw6lyaWZpZXogc2kgbCdvcmdhbmlzYXRldXIgZXhpc3RlIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgY29uc3Qgb3JnYW5pemVyID0gYXdhaXQgZ2V0T3JnYW5pemVyQnlJZFF1ZXJ5KGlkKTtcclxuICAgIGlmICghb3JnYW5pemVyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiT3JnYW5pc2F0ZXVyIG5vbiB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbmZpZ3VyYXRpb24gZHUgc2VydmljZSBkJ2VtYWlsIChOb2RlbWFpbGVyKVxyXG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XHJcbiAgICAgIHNlcnZpY2U6IFwiZ21haWxcIiwgLy8gQ2hhbmdleiBzaSB2b3VzIHV0aWxpc2V6IHVuIGF1dHJlIHNlcnZpY2VcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsIC8vIEFkcmVzc2UgZW1haWwgZGUgbCdleHDDqWRpdGV1clxyXG4gICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MsIC8vIE1vdCBkZSBwYXNzZSBvdSBjbMOpIGQnYXBwbGljYXRpb24gZGUgbCdleHDDqWRpdGV1clxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRMOpZmluaXRpb24gZGUgbCdlbWFpbCDDoCBlbnZveWVyXHJcbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcclxuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiwgLy8gQWRyZXNzZSBlbWFpbCBkZSBsJ2V4cMOpZGl0ZXVyXHJcbiAgICAgIHRvOiBlbWFpbCwgLy8gQWRyZXNzZSBlbWFpbCBkdSBkZXN0aW5hdGFpcmVcclxuICAgICAgc3ViamVjdDogc3ViamVjdCArIFwiIChBZG1pbmlzdHJhdGlvbiBkZSBRdWlja0V2ZW50KVwiLFxyXG4gICAgICB0ZXh0OiBjb250ZW50LCAvLyBDb250ZW51IGR1IG1lc3NhZ2VcclxuICAgIH07XHJcblxyXG4gICAgLy8gRW52b2kgZGUgbCdlbWFpbFxyXG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogYEVtYWlsIGVudm95w6kgYXZlYyBzdWNjw6hzIMOgICR7ZW1haWx9LmAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGRlIGwnZW1haWwgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbCdlbnZvaSBkZSBsJ2VtYWlsLlwi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","map":{"version":3,"names":["bcrypt","require","jwt","createAdminQuery","getAdminByEmailQuery","getAllAdminsQuery","getAdminByIdQuery","updateAdminQuery","deleteAdminQuery","nodemailer","getOrganizerByIdQuery","exports","login","req","res","email","password","body","console","log","admin","status","json","message","validPassword","compare","mdp_admin","token","sign","id","id_admin","role","process","env","JWT_SECRET","expiresIn","error","createAdmin","nom_admin","prenom_admin","email_admin","tel_admin","existingAdmin","hashedPassword","hash","getProfile","adminId","userId","name","getAllAdmins","admins","editAdmin","params","deleteAdmin","sendEmailToOrganizer","subject","content","organizer","transporter","createTransport","service","auth","user","EMAIL_USER","pass","EMAIL_PASS","mailOptions","from","to","text","sendMail"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["AdminControler.js"],"sourcesContent":["// const db = require('../db');  // Importer l'instance de Knex depuis db.js\r\n// const bcrypt = require('bcrypt');\r\n// const jwt = require('jsonwebtoken');\r\n\r\n// exports.login = async (req, res) => {\r\n//   const { email, password } = req.body;\r\n\r\n//   try {\r\n//     console.log('Tentative de connexion avec:', email);\r\n\r\n//     const admin = await db('admin').where({ email_admin: email }).first();\r\n\r\n//     if (!admin) {\r\n//       console.log('Administrateur non trouv√©');\r\n//       return res.status(404).json({ message: 'Administrateur non trouv√©' });\r\n//     }\r\n\r\n//     console.log('Administrateur trouv√©:', admin);\r\n\r\n//     const validPassword = await bcrypt.compare(password, admin.mdp_admin);\r\n//     if (!validPassword) {\r\n//       console.log('Mot de passe incorrect');\r\n//       return res.status(400).json({ message: 'Mot de passe incorrect' });\r\n//     }\r\n\r\n//     console.log('Mot de passe correct');\r\n//     // Ajouter le r√¥le \"admin\" dans le token JWT\r\n//     const token = jwt.sign({ id: admin.id_admin, role: 'admin' }, process.env.JWT_SECRET, { expiresIn: '1h' });\r\n//     console.log('Token g√©n√©r√© avec succ√®s');\r\n\r\n//     res.status(200).json({ message: 'Connexion r√©ussie', token });\r\n//   } catch (error) {\r\n//     console.error('Erreur serveur lors de la connexion:', error);\r\n//     res.status(500).json({ message: 'Erreur serveur', error });\r\n//   }\r\n// };\r\n\r\n// // Fonction pour obtenir les informations de l'administrateur connect√©\r\n// exports.getProfile = async (req, res) => {\r\n//   try {\r\n//     const adminId = req.userId; // L'ID de l'utilisateur est extrait du token JWT\r\n//     const admin = await db('admin').where({ id_admin: adminId }).first();\r\n\r\n//     if (!admin) {\r\n//       return res.status(404).json({ message: 'Administrateur non trouv√©' });\r\n//     }\r\n\r\n//     // Retourner les informations de l'administrateur connect√©\r\n//     res.status(200).json({\r\n//       name: `${admin.nom_admin} ${admin.prenom_admin}`,\r\n//       email: admin.email_admin,\r\n//     });\r\n//   } catch (error) {\r\n//     console.error('Erreur lors de la r√©cup√©ration du profil:', error);\r\n//     res.status(500).json({ message: 'Erreur serveur' });\r\n//   }\r\n// };\r\n\r\n// // r√©cuperation des admins\r\n// exports.getAllAdmins = async (req, res) => {\r\n//   try {\r\n//       const admins = await db('admin').select('id_admin', 'nom_admin', 'prenom_admin', 'tel_admin','email_admin');\r\n//       res.status(200).json(admins);\r\n//   } catch (error) {\r\n//       res.status(500).json({ message: 'Erreur lors de la r√©cup√©ration des administrateurs', error });\r\n//   }\r\n// };\r\n\r\n// exports.createAdmin = async (req, res) => {\r\n//     const { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin} = req.body;\r\n    \r\n//     try {\r\n//         const hashedPassword = await bcrypt.hash(mdp_admin, 10);\r\n//         await db('admin').insert({ nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin: hashedPassword });\r\n//         res.status(201).json({ message: 'Administrateur cr√©√© avec succ√®s' });\r\n//     } catch (error) {\r\n//         res.status(500).json({ message: 'Erreur lors de la cr√©ation de l\\'administrateur', error });\r\n//     }\r\n// };\r\n\r\n// //modification d'un admin\r\n// exports.editAdmin = async (req, res) => {\r\n//   const { id } = req.params;\r\n//   const { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin } = req.body;\r\n\r\n//   try {\r\n//       await db('admin').where({ id_admin: id }).update({ nom_admin, prenom_admin, email_admin, role_admin });\r\n//       res.status(200).json({ message: 'Administrateur modifi√© avec succ√®s' });\r\n//   } catch (error) {\r\n//       res.status(500).json({ message: 'Erreur lors de la modification de l\\'administrateur', error });\r\n//   }\r\n// };\r\n\r\n// //suppr√©ssion\r\n// exports.deleteAdmin = async (req, res) => {\r\n//   const { id } = req.params;\r\n\r\n//   try {\r\n//       await db('admin').where({ id_admin: id }).del();\r\n//       res.status(200).json({ message: 'Administrateur supprim√© avec succ√®s' });\r\n//   } catch (error) {\r\n//       res.status(500).json({ message: 'Erreur lors de la suppression de l\\'administrateur', error });\r\n//   }\r\n// };\r\n\r\n//code farany\r\nconst bcrypt = require('bcrypt');\r\nconst jwt = require('jsonwebtoken');\r\nconst {\r\n  createAdminQuery,\r\n  getAdminByEmailQuery,\r\n  getAllAdminsQuery,\r\n  getAdminByIdQuery,\r\n  updateAdminQuery,\r\n  deleteAdminQuery,\r\n} = require('../queries'); // Import des requ√™tes\r\nconst nodemailer = require(\"nodemailer\");\r\nconst { getOrganizerByIdQuery } = require(\"../queries\");\r\n\r\n\r\nexports.login = async (req, res) => {\r\n  const { email, password } = req.body;\r\n\r\n  try {\r\n    console.log('Tentative de connexion avec:', email);\r\n\r\n    const admin = await getAdminByEmailQuery(email); // Utilisation de la requ√™te externalis√©e\r\n\r\n    if (!admin) {\r\n      console.log('Administrateur non trouv√©');\r\n      return res.status(404).json({ message: 'Administrateur non trouv√©' });\r\n    }\r\n\r\n    console.log('Administrateur trouv√©:', admin);\r\n\r\n    const validPassword = await bcrypt.compare(password, admin.mdp_admin);\r\n    if (!validPassword) {\r\n      console.log('Mot de passe incorrect');\r\n      return res.status(400).json({ message: 'Mot de passe incorrect' });\r\n    }\r\n\r\n    console.log('Mot de passe correct');\r\n    const token = jwt.sign({ id: admin.id_admin, role: 'admin' }, process.env.JWT_SECRET, { expiresIn: '1h' });\r\n    console.log('Token g√©n√©r√© avec succ√®s');\r\n\r\n    res.status(200).json({ message: 'Connexion r√©ussie', token });\r\n  } catch (error) {\r\n    console.error('Erreur serveur lors de la connexion:', error);\r\n    res.status(500).json({ message: 'Erreur serveur', error });\r\n  }\r\n};\r\n\r\nexports.createAdmin = async (req, res) => {\r\n  const { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin } = req.body;\r\n  console.log('Donn√©es re√ßues pour l\\'ajout:', req.body);\r\n\r\n  try {\r\n    // V√©rifier si l'email existe d√©j√†\r\n    const existingAdmin = await getAdminByEmailQuery(email_admin);\r\n    \r\n    if (existingAdmin) {\r\n      console.log('Administrateur avec cet email existe d√©j√†:', email_admin);\r\n      return res.status(400).json({ message: 'Cet email est d√©j√† enregistr√©.' });\r\n    }\r\n\r\n    // Si l'email n'existe pas, continuer avec la cr√©ation\r\n    const hashedPassword = await bcrypt.hash(mdp_admin, 10);\r\n    console.log('Mot de passe hash√©:', hashedPassword);\r\n\r\n    // Ajouter l'admin dans la base de donn√©es\r\n    await createAdminQuery({ nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin: hashedPassword });\r\n    console.log('Admin ajout√© avec succ√®s');\r\n\r\n    res.status(201).json({ message: 'Administrateur cr√©√© avec succ√®s' });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la cr√©ation de l\\'administrateur:', error);\r\n    res.status(500).json({ message: 'Erreur lors de la cr√©ation de l\\'administrateur', error });\r\n  }\r\n};\r\n\r\n\r\nexports.getProfile = async (req, res) => {\r\n  try {\r\n    const adminId = req.userId;\r\n    const admin = await getAdminByIdQuery(adminId); // Utilisation de la requ√™te externalis√©e\r\n\r\n    if (!admin) {\r\n      return res.status(404).json({ message: 'Administrateur non trouv√©' });\r\n    }\r\n\r\n    res.status(200).json({\r\n      name: `${admin.nom_admin} ${admin.prenom_admin}`,\r\n      email: admin.email_admin,\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration du profil:', error);\r\n    res.status(500).json({ message: 'Erreur serveur' });\r\n  }\r\n};\r\n\r\nexports.getAllAdmins = async (req, res) => {\r\n  try {\r\n    const admins = await getAllAdminsQuery(); // Utilisation de la requ√™te externalis√©e\r\n    res.status(200).json(admins);\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la r√©cup√©ration des administrateurs', error });\r\n  }\r\n};\r\n\r\nexports.editAdmin = async (req, res) => {\r\n  const { id } = req.params;\r\n  const { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin } = req.body;\r\n\r\n  try {\r\n    const hashedPassword = await bcrypt.hash(mdp_admin, 10);\r\n    await updateAdminQuery(id, { nom_admin, prenom_admin, email_admin, tel_admin, mdp_admin: hashedPassword });\r\n    res.status(200).json({ message: 'Administrateur modifi√© avec succ√®s' });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la modification de l\\'administrateur', error });\r\n  }\r\n};\r\n\r\nexports.deleteAdmin = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    await deleteAdminQuery(id); // Utilisation de la requ√™te externalis√©e\r\n    res.status(200).json({ message: 'Administrateur supprim√© avec succ√®s' });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la suppression de l\\'administrateur', error });\r\n  }\r\n};\r\n\r\n//Evoie email aux organisateurs\r\nexports.sendEmailToOrganizer = async (req, res) => {\r\n  const { id } = req.params; // ID de l'organisateur\r\n  const { email, subject, content } = req.body; // Contenu de l'email fourni par l'admin\r\n\r\n  try {\r\n    // V√©rifiez si l'organisateur existe dans la base de donn√©es\r\n    const organizer = await getOrganizerByIdQuery(id);\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: \"Organisateur non trouv√©.\" });\r\n    }\r\n\r\n    // Configuration du service d'email (Nodemailer)\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\", // Changez si vous utilisez un autre service\r\n      auth: {\r\n        user: process.env.EMAIL_USER, // Adresse email de l'exp√©diteur\r\n        pass: process.env.EMAIL_PASS, // Mot de passe ou cl√© d'application de l'exp√©diteur\r\n      },\r\n    });\r\n\r\n    // D√©finition de l'email √† envoyer\r\n    const mailOptions = {\r\n      from: process.env.EMAIL_USER, // Adresse email de l'exp√©diteur\r\n      to: email, // Adresse email du destinataire\r\n      subject: subject + \" (Administration de QuickEvent)\",\r\n      text: content, // Contenu du message\r\n    };\r\n\r\n    // Envoi de l'email\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    res.status(200).json({ message: `Email envoy√© avec succ√®s √† ${email}.` });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'envoi de l'email :\", error);\r\n    res.status(500).json({ message: \"Erreur lors de l'envoi de l'email.\" });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742478724115},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\queries.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst db = require('./db');\n\n// **** ADMIN *********\n// Requ√™te pour cr√©er un administrateur\nconst createAdminQuery = async adminData => {\n  return db('admin').insert(adminData);\n};\n\n// Requ√™te pour obtenir un administrateur par email\nconst getAdminByEmailQuery = async email => {\n  return db('admin').where({\n    email_admin: email\n  }).first();\n};\n\n// Requ√™te pour obtenir tous les administrateurs\nconst getAllAdminsQuery = async () => {\n  return db('admin').select('*');\n};\n\n// Requ√™te pour obtenir un administrateur par ID\nconst getAdminByIdQuery = async id => {\n  return db('admin').where({\n    id_admin: id\n  }).first();\n};\n\n// Requ√™te pour mettre √† jour un administrateur\nconst updateAdminQuery = async (id, updatedData) => {\n  return db('admin').where({\n    id_admin: id\n  }).update(updatedData);\n};\n\n// Requ√™te pour supprimer un administrateur\nconst deleteAdminQuery = async id => {\n  return db('admin').where({\n    id_admin: id\n  }).del();\n};\n\n//***********FAQ*************\n// Cr√©er une nouvelle FAQ\nconst createFaqQuery = async faqData => {\n  const [id] = await db('faq').insert(faqData);\n  return {\n    id,\n    ...faqData\n  };\n};\n\n// Obtenir toutes les FAQs\nconst getAllFaqsQuery = async () => {\n  return db('faq').select('*');\n};\n\n// Obtenir une FAQ par ID\nconst getFaqByIdQuery = async id => {\n  return db('faq').where({\n    id\n  }).first();\n};\n\n// Mettre √† jour une FAQ\nconst updateFaqQuery = async (id, updatedData) => {\n  return db('faq').where({\n    id\n  }).update(updatedData);\n};\n\n// Supprimer une FAQ\nconst deleteFaqQuery = async id => {\n  return db('faq').where({\n    id\n  }).del();\n};\n\n// ************Organisateur***************\n\n// Requ√™te pour cr√©er un organisateur avec la date d'inscription\nconst createOrganizerQuery = async _ref => {\n  let {\n    nom_organisateur,\n    prenom_organisateur,\n    email_organisateur,\n    tel_organisateur,\n    mdp_organisateur,\n    date_inscription,\n    isActive\n  } = _ref;\n  const [id] = await db('organisateur').insert({\n    nom_organisateur,\n    prenom_organisateur,\n    email_organisateur,\n    tel_organisateur,\n    mdp_organisateur,\n    date_inscription,\n    isActive\n  });\n  return id; // retourne l'ID ins√©r√©\n};\n\n// Requ√™te pour ins√©rer un jeton d'activation dans la base de donn√©es\nconst insertTokenQuery = async _ref2 => {\n  let {\n    token,\n    expiresAt,\n    email,\n    nom_organisateur,\n    prenom_organisateur,\n    tel_organisateur,\n    mdp_organisateur\n  } = _ref2;\n  try {\n    console.log('Pr√©paration pour ins√©rer le token et les donn√©es utilisateur:', {\n      token,\n      expiresAt,\n      email\n    });\n    const result = await db('tokens').insert({\n      token,\n      expires_at: expiresAt,\n      email,\n      nom_organisateur,\n      prenom_organisateur,\n      tel_organisateur,\n      mdp_organisateur\n    });\n    console.log('Insertion r√©ussie dans la table tokens:', result);\n    return result;\n  } catch (error) {\n    console.error('Erreur lors de l\\'insertion du token dans la table:', error);\n    throw error;\n  }\n};\nconst getTokenQuery = async (userId, token) => {\n  return db('tokens').where({\n    user_id: userId,\n    token\n  }).first();\n};\n\n// Requ√™te pour supprimer un token d'activation\nconst deleteTokenQuery = async (userId, token) => {\n  return db('tokens').where({\n    user_id: userId,\n    token\n  }).del();\n};\n\n// Requ√™te pour mettre √† jour les informations compl√©mentaires d'un organisateur\nconst completeOrganizerQuery = async _ref3 => {\n  let {\n    prenom_organisateur,\n    tel_organisateur,\n    email_organisateur\n  } = _ref3;\n  return db('organisateur').where({\n    email_organisateur\n  }).update({\n    prenom_organisateur,\n    tel_organisateur\n  });\n};\n\n// Requ√™te pour obtenir un organisateur par email\nconst getOrganizerByEmailQuery = async email => {\n  return db('organisateur').where({\n    email_organisateur: email\n  }).first();\n};\n\n// Requ√™te pour obtenir tous les organisateurs\nconst getAllOrganizersQuery = async () => {\n  return db('organisateur').select('*');\n};\n\n// Requ√™te pour obtenir un organisateur par ID\nconst getOrganizerByIdQuery = async id => {\n  return db('organisateur').where({\n    id_organisateur: id\n  }).select('nom_organisateur', 'prenom_organisateur', 'email_organisateur', 'tel_organisateur', 'date_inscription').first();\n};\n\n// Requ√™te pour mettre √† jour un organisateur\nconst updateOrganizerQuery = async (id, updatedData) => {\n  return await db('organisateur').where({\n    id_organisateur: id\n  }).update(updatedData);\n};\n\n// Requ√™te pour supprimer un organisateur\nconst deleteOrganizerQuery = async id => {\n  return db('organisateur').where({\n    id_organisateur: id\n  }).del();\n};\nconst getEventWithOrganizerQuery = async idEvenement => {\n  return db('evenement').join('organisateur', 'evenement.id_organisateur', 'organisateur.id_organisateur').where({\n    'evenement.id_evenement': idEvenement\n  }).select('evenement.*', 'organisateur.tel_organisateur', 'organisateur.email_organisateur').first();\n};\n\n// ************Participant***************\n\n// Requ√™te pour cr√©er un participant\nconst createParticipantQuery = async participantData => {\n  const [id] = await db('participants').insert(participantData);\n  return id; // retourne l'ID ins√©r√©\n};\n\n// Requ√™te pour obtenir un participant par email\n// const getParticipantByEmailQuery = async (email) => {\n//   return db('participants').where({ email_part: email }).first();\n// };\n\n// Requ√™te pour obtenir un participant par email\nconst getParticipantByEmailQuery = async email => {\n  return db('participants').select('id_participant', 'nom_part', 'email_part', 'mdp_part as mdp_participant',\n  // Alias pour renommer mdp_part\n  'genre_part', 'telephone_part', 'ville_part', 'codepostal_part', 'statut_part', 'date_inscription', 'id_organisateur').where({\n    email_part: email\n  }).first();\n};\n\n// Requ√™te pour obtenir un participant par ID\nconst getParticipantByIdQuery = async id => {\n  return db('participants').where({\n    id_participant: id\n  }).first();\n};\n\n// Requ√™te pour mettre √† jour un participant\nconst updateParticipantQuery = async (id, updatedData) => {\n  return db('participants').where({\n    id_participant: id\n  }).update(updatedData);\n};\n\n// Requ√™te pour supprimer un participant\nconst deleteParticipantQuery = async id => {\n  return db('participants').where({\n    id_participant: id\n  }).del();\n};\n\n// Requ√™te pour obtenir tous les participants\nconst getAllParticipantsQuery = async () => {\n  return db('participants').select('*');\n};\n\n// Requ√™te pour mettre √† jour un participant via son email\nconst updateParticipantByEmailQuery = async (email, updatedData) => {\n  return db('participants').where({\n    email_part: email\n  }).update(updatedData);\n};\n\n//ajoutez une requ√™te pour obtenir les d√©tails d'un √©v√©nement \nconst getEventByIdQuery = async id_evenement => {\n  return db('evenement').where({\n    id_evenement\n  }).first();\n};\n//achat billets\n// üîπ R√©cup√©rer toutes les ventes de billets\nconst getTicketSales = async () => {\n  return await db(\"achatbillets\").join(\"organisateur\", \"achatbillets.nom_organisateur\", \"=\", \"organisateur.nom_organisateur\").join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\").select(\"achatbillets.id\", \"organisateur.nom_organisateur\", \"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", db.raw(\"SUM(achatbillets.total_billets_vendus) as total_billets_vendus\"), \"achatbillets.prix_unitaire\", db.raw(\"SUM(achatbillets.montant_collecte) as montant_collecte\"), db.raw(\"SUM(achatbillets.montant_a_transferer) as montant_a_transferer\"), \"achatbillets.acheteur\", \"achatbillets.status_paiement\", \"achatbillets.date_achat\", \"evenement.types_tickets\").groupBy(\"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", \"achatbillets.id\");\n};\n\n// üîπ Mettre √† jour le statut de paiement\nconst updatePaymentStatus = async (id, status) => {\n  return await db(\"achatbillets\").where({\n    id\n  }).update({\n    status_paiement: status\n  });\n};\n\n// üîπ Supprimer une vente de billet\nconst deleteTicketSale = async id => {\n  return await db(\"achatbillets\").where({\n    id\n  }).del();\n};\n\n// nouveau teste\nconst getTicketSalesAll = async () => {\n  return await db(\"achatbillets\").select(\"id\",\n  // ‚úÖ On inclut l'ID unique de chaque achat\n  \"nom_organisateur\", \"nom_evenement\", \"type_ticket\", \"quantite\", \"prix_unitaire\", \"total_billets_vendus\", \"montant_collecte\", \"montant_a_transferer\", \"acheteur\", \"status_paiement\");\n};\n\n// ============== CERTIFICAT =====================\n\n// V√©rifier si un participant existe\nconst getParticipantById = async id => {\n  return db('participants').where({\n    id_participant: id\n  }).select('id_participant', 'nom_part') // ‚úÖ V√©rification que `nom` est bien r√©cup√©r√©\n  .first();\n};\n\n// Ajouter un certificat\nconst addCertificate = async certificateData => {\n  return db('certificat').insert(certificateData);\n};\n\n// R√©cup√©rer tous les certificats\nconst getAllCertificates = async () => {\n  return db('certificat').select('*');\n};\n\n// R√©cup√©rer un certificat par participant\nconst getCertificateByParticipant = async id => {\n  return db('certificat').where({\n    id_participant: id\n  }).first();\n};\nconst getAllParticipantsforCertificat = async () => {\n  return db('participants').join('organisateur', 'participants.id_organisateur', '=', 'organisateur.id_organisateur').join('evenement', 'organisateur.id_organisateur', '=', 'evenement.id_organisateur') // Jointure avec les √©v√©nements\n  .select('participants.id_participant', 'participants.nom_part', 'participants.email_part', 'participants.telephone_part', 'evenement.nom_event',\n  // R√©cup√©ration du nom de l'√©v√©nement\n  'evenement.id_evenement' // ‚úÖ Ajout de id_evenement\n  );\n};\n\n// R√©cup√©rer les certificats d'un participant\n// const getCertificatesByParticipant = async (participantId) => {\n//   return db(\"certificat\")\n//     .join(\"evenement\", \"certificat.id_evenement\", \"=\", \"evenement.id_evenement\")\n//     .where(\"certificat.id_participant\", participantId)\n//     .select(\n//       \"certificat.id_certificat\",\n//       \"evenement.nom_event\",\n//       'evenement.id_evenement', // ‚úÖ Ajout de id_evenement\n//       \"certificat.date_distribution\",\n//       \"certificat.url_certificat\"\n//     );\n// };\nconst getCertificatesByParticipant = async participantId => {\n  return db(\"certificat\").join(\"evenement\", \"certificat.id_evenement\", \"=\", \"evenement.id_evenement\").join(\"organisateur\", \"evenement.id_organisateur\", \"=\", \"organisateur.id_organisateur\") // Jointure avec l'organisateur\n  .where(\"certificat.id_participant\", participantId).select(\"certificat.id_certificat\", \"certificat.nom_titulaire\", 'evenement.id_evenement', \"evenement.nom_event\", \"evenement.date_debut\", \"evenement.date_fin\", \"evenement.lieu_event\", \"organisateur.nom_organisateur\",\n  // R√©cup√©ration du nom de l'organisateur\n  \"certificat.date_distribution\", \"certificat.url_certificat\");\n};\n\n// Supprimer un certificat par ID\nconst deleteCertificate = async id => {\n  return db(\"certificat\").where(\"id_certificat\", id).del();\n};\n\n//contact partie page d'accueil\n// Enregistrer un message de contact\nconst saveContactMessage = async _ref4 => {\n  let {\n    name,\n    email,\n    subject,\n    message\n  } = _ref4;\n  return await db('contact_messages').insert({\n    name,\n    email,\n    subject,\n    message,\n    created_at: db.fn.now()\n  });\n};\nmodule.exports = {\n  insertTokenQuery,\n  getTokenQuery,\n  deleteTokenQuery,\n  createAdminQuery,\n  getAdminByEmailQuery,\n  getAllAdminsQuery,\n  getAdminByIdQuery,\n  updateAdminQuery,\n  deleteAdminQuery,\n  createFaqQuery,\n  getAllFaqsQuery,\n  getFaqByIdQuery,\n  updateFaqQuery,\n  deleteFaqQuery,\n  createOrganizerQuery,\n  getOrganizerByEmailQuery,\n  getAllOrganizersQuery,\n  getOrganizerByIdQuery,\n  updateOrganizerQuery,\n  deleteOrganizerQuery,\n  completeOrganizerQuery,\n  createParticipantQuery,\n  getParticipantByEmailQuery,\n  getParticipantByIdQuery,\n  updateParticipantQuery,\n  deleteParticipantQuery,\n  getAllParticipantsQuery,\n  updateParticipantByEmailQuery,\n  getEventByIdQuery,\n  getEventWithOrganizerQuery,\n  getTicketSales,\n  updatePaymentStatus,\n  deleteTicketSale,\n  getTicketSalesAll,\n  addCertificate,\n  getParticipantById,\n  getAllCertificates,\n  getCertificateByParticipant,\n  getAllParticipantsforCertificat,\n  getCertificatesByParticipant,\n  deleteCertificate,\n  saveContactMessage\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJjcmVhdGVBZG1pblF1ZXJ5IiwiYWRtaW5EYXRhIiwiaW5zZXJ0IiwiZ2V0QWRtaW5CeUVtYWlsUXVlcnkiLCJlbWFpbCIsIndoZXJlIiwiZW1haWxfYWRtaW4iLCJmaXJzdCIsImdldEFsbEFkbWluc1F1ZXJ5Iiwic2VsZWN0IiwiZ2V0QWRtaW5CeUlkUXVlcnkiLCJpZCIsImlkX2FkbWluIiwidXBkYXRlQWRtaW5RdWVyeSIsInVwZGF0ZWREYXRhIiwidXBkYXRlIiwiZGVsZXRlQWRtaW5RdWVyeSIsImRlbCIsImNyZWF0ZUZhcVF1ZXJ5IiwiZmFxRGF0YSIsImdldEFsbEZhcXNRdWVyeSIsImdldEZhcUJ5SWRRdWVyeSIsInVwZGF0ZUZhcVF1ZXJ5IiwiZGVsZXRlRmFxUXVlcnkiLCJjcmVhdGVPcmdhbml6ZXJRdWVyeSIsIl9yZWYiLCJub21fb3JnYW5pc2F0ZXVyIiwicHJlbm9tX29yZ2FuaXNhdGV1ciIsImVtYWlsX29yZ2FuaXNhdGV1ciIsInRlbF9vcmdhbmlzYXRldXIiLCJtZHBfb3JnYW5pc2F0ZXVyIiwiZGF0ZV9pbnNjcmlwdGlvbiIsImlzQWN0aXZlIiwiaW5zZXJ0VG9rZW5RdWVyeSIsIl9yZWYyIiwidG9rZW4iLCJleHBpcmVzQXQiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0IiwiZXhwaXJlc19hdCIsImVycm9yIiwiZ2V0VG9rZW5RdWVyeSIsInVzZXJJZCIsInVzZXJfaWQiLCJkZWxldGVUb2tlblF1ZXJ5IiwiY29tcGxldGVPcmdhbml6ZXJRdWVyeSIsIl9yZWYzIiwiZ2V0T3JnYW5pemVyQnlFbWFpbFF1ZXJ5IiwiZ2V0QWxsT3JnYW5pemVyc1F1ZXJ5IiwiZ2V0T3JnYW5pemVyQnlJZFF1ZXJ5IiwiaWRfb3JnYW5pc2F0ZXVyIiwidXBkYXRlT3JnYW5pemVyUXVlcnkiLCJkZWxldGVPcmdhbml6ZXJRdWVyeSIsImdldEV2ZW50V2l0aE9yZ2FuaXplclF1ZXJ5IiwiaWRFdmVuZW1lbnQiLCJqb2luIiwiY3JlYXRlUGFydGljaXBhbnRRdWVyeSIsInBhcnRpY2lwYW50RGF0YSIsImdldFBhcnRpY2lwYW50QnlFbWFpbFF1ZXJ5IiwiZW1haWxfcGFydCIsImdldFBhcnRpY2lwYW50QnlJZFF1ZXJ5IiwiaWRfcGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudFF1ZXJ5IiwiZGVsZXRlUGFydGljaXBhbnRRdWVyeSIsImdldEFsbFBhcnRpY2lwYW50c1F1ZXJ5IiwidXBkYXRlUGFydGljaXBhbnRCeUVtYWlsUXVlcnkiLCJnZXRFdmVudEJ5SWRRdWVyeSIsImlkX2V2ZW5lbWVudCIsImdldFRpY2tldFNhbGVzIiwicmF3IiwiZ3JvdXBCeSIsInVwZGF0ZVBheW1lbnRTdGF0dXMiLCJzdGF0dXMiLCJzdGF0dXNfcGFpZW1lbnQiLCJkZWxldGVUaWNrZXRTYWxlIiwiZ2V0VGlja2V0U2FsZXNBbGwiLCJnZXRQYXJ0aWNpcGFudEJ5SWQiLCJhZGRDZXJ0aWZpY2F0ZSIsImNlcnRpZmljYXRlRGF0YSIsImdldEFsbENlcnRpZmljYXRlcyIsImdldENlcnRpZmljYXRlQnlQYXJ0aWNpcGFudCIsImdldEFsbFBhcnRpY2lwYW50c2ZvckNlcnRpZmljYXQiLCJnZXRDZXJ0aWZpY2F0ZXNCeVBhcnRpY2lwYW50IiwicGFydGljaXBhbnRJZCIsImRlbGV0ZUNlcnRpZmljYXRlIiwic2F2ZUNvbnRhY3RNZXNzYWdlIiwiX3JlZjQiLCJuYW1lIiwic3ViamVjdCIsIm1lc3NhZ2UiLCJjcmVhdGVkX2F0IiwiZm4iLCJub3ciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXCIsInNvdXJjZXMiOlsicXVlcmllcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYiA9IHJlcXVpcmUoJy4vZGInKTtcclxuXHJcbi8vICoqKiogQURNSU4gKioqKioqKioqXHJcbi8vIFJlcXXDqnRlIHBvdXIgY3LDqWVyIHVuIGFkbWluaXN0cmF0ZXVyXHJcbmNvbnN0IGNyZWF0ZUFkbWluUXVlcnkgPSBhc3luYyAoYWRtaW5EYXRhKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdhZG1pbicpLmluc2VydChhZG1pbkRhdGEpO1xyXG59O1xyXG5cclxuLy8gUmVxdcOqdGUgcG91ciBvYnRlbmlyIHVuIGFkbWluaXN0cmF0ZXVyIHBhciBlbWFpbFxyXG5jb25zdCBnZXRBZG1pbkJ5RW1haWxRdWVyeSA9IGFzeW5jIChlbWFpbCkgPT4ge1xyXG4gIHJldHVybiBkYignYWRtaW4nKS53aGVyZSh7IGVtYWlsX2FkbWluOiBlbWFpbCB9KS5maXJzdCgpO1xyXG59O1xyXG5cclxuLy8gUmVxdcOqdGUgcG91ciBvYnRlbmlyIHRvdXMgbGVzIGFkbWluaXN0cmF0ZXVyc1xyXG5jb25zdCBnZXRBbGxBZG1pbnNRdWVyeSA9IGFzeW5jICgpID0+IHtcclxuICByZXR1cm4gZGIoJ2FkbWluJykuc2VsZWN0KCcqJyk7XHJcbn07XHJcblxyXG4vLyBSZXF1w6p0ZSBwb3VyIG9idGVuaXIgdW4gYWRtaW5pc3RyYXRldXIgcGFyIElEXHJcbmNvbnN0IGdldEFkbWluQnlJZFF1ZXJ5ID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdhZG1pbicpLndoZXJlKHsgaWRfYWRtaW46IGlkIH0pLmZpcnN0KCk7XHJcbn07XHJcblxyXG4vLyBSZXF1w6p0ZSBwb3VyIG1ldHRyZSDDoCBqb3VyIHVuIGFkbWluaXN0cmF0ZXVyXHJcbmNvbnN0IHVwZGF0ZUFkbWluUXVlcnkgPSBhc3luYyAoaWQsIHVwZGF0ZWREYXRhKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdhZG1pbicpLndoZXJlKHsgaWRfYWRtaW46IGlkIH0pLnVwZGF0ZSh1cGRhdGVkRGF0YSk7XHJcbn07XHJcblxyXG4vLyBSZXF1w6p0ZSBwb3VyIHN1cHByaW1lciB1biBhZG1pbmlzdHJhdGV1clxyXG5jb25zdCBkZWxldGVBZG1pblF1ZXJ5ID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdhZG1pbicpLndoZXJlKHsgaWRfYWRtaW46IGlkIH0pLmRlbCgpO1xyXG59O1xyXG5cclxuLy8qKioqKioqKioqKkZBUSoqKioqKioqKioqKipcclxuLy8gQ3LDqWVyIHVuZSBub3V2ZWxsZSBGQVFcclxuY29uc3QgY3JlYXRlRmFxUXVlcnkgPSBhc3luYyAoZmFxRGF0YSkgPT4ge1xyXG4gIGNvbnN0IFtpZF0gPSBhd2FpdCBkYignZmFxJykuaW5zZXJ0KGZhcURhdGEpO1xyXG4gIHJldHVybiB7IGlkLCAuLi5mYXFEYXRhIH07XHJcbn07XHJcblxyXG4vLyBPYnRlbmlyIHRvdXRlcyBsZXMgRkFRc1xyXG5jb25zdCBnZXRBbGxGYXFzUXVlcnkgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdmYXEnKS5zZWxlY3QoJyonKTtcclxufTtcclxuXHJcbi8vIE9idGVuaXIgdW5lIEZBUSBwYXIgSURcclxuY29uc3QgZ2V0RmFxQnlJZFF1ZXJ5ID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdmYXEnKS53aGVyZSh7IGlkIH0pLmZpcnN0KCk7XHJcbn07XHJcblxyXG4vLyBNZXR0cmUgw6Agam91ciB1bmUgRkFRXHJcbmNvbnN0IHVwZGF0ZUZhcVF1ZXJ5ID0gYXN5bmMgKGlkLCB1cGRhdGVkRGF0YSkgPT4ge1xyXG4gIHJldHVybiBkYignZmFxJykud2hlcmUoeyBpZCB9KS51cGRhdGUodXBkYXRlZERhdGEpO1xyXG59O1xyXG5cclxuLy8gU3VwcHJpbWVyIHVuZSBGQVFcclxuY29uc3QgZGVsZXRlRmFxUXVlcnkgPSBhc3luYyAoaWQpID0+IHtcclxuICByZXR1cm4gZGIoJ2ZhcScpLndoZXJlKHsgaWQgfSkuZGVsKCk7XHJcbn07XHJcblxyXG4vLyAqKioqKioqKioqKipPcmdhbmlzYXRldXIqKioqKioqKioqKioqKipcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgY3LDqWVyIHVuIG9yZ2FuaXNhdGV1ciBhdmVjIGxhIGRhdGUgZCdpbnNjcmlwdGlvblxyXG5jb25zdCBjcmVhdGVPcmdhbml6ZXJRdWVyeSA9IGFzeW5jICh7IG5vbV9vcmdhbmlzYXRldXIsIHByZW5vbV9vcmdhbmlzYXRldXIsIGVtYWlsX29yZ2FuaXNhdGV1ciwgdGVsX29yZ2FuaXNhdGV1ciwgbWRwX29yZ2FuaXNhdGV1ciwgZGF0ZV9pbnNjcmlwdGlvbiwgaXNBY3RpdmUgfSkgPT4ge1xyXG4gIGNvbnN0IFtpZF0gPSBhd2FpdCBkYignb3JnYW5pc2F0ZXVyJykuaW5zZXJ0KHtcclxuICAgIG5vbV9vcmdhbmlzYXRldXIsXHJcbiAgICBwcmVub21fb3JnYW5pc2F0ZXVyLFxyXG4gICAgZW1haWxfb3JnYW5pc2F0ZXVyLFxyXG4gICAgdGVsX29yZ2FuaXNhdGV1cixcclxuICAgIG1kcF9vcmdhbmlzYXRldXIsXHJcbiAgICBkYXRlX2luc2NyaXB0aW9uLFxyXG4gICAgaXNBY3RpdmVcclxuICB9KTtcclxuICByZXR1cm4gaWQ7IC8vIHJldG91cm5lIGwnSUQgaW5zw6lyw6lcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgaW5zw6lyZXIgdW4gamV0b24gZCdhY3RpdmF0aW9uIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG5jb25zdCBpbnNlcnRUb2tlblF1ZXJ5ID0gYXN5bmMgKHsgdG9rZW4sIGV4cGlyZXNBdCwgZW1haWwsIG5vbV9vcmdhbmlzYXRldXIsIHByZW5vbV9vcmdhbmlzYXRldXIsIHRlbF9vcmdhbmlzYXRldXIsIG1kcF9vcmdhbmlzYXRldXIgfSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnUHLDqXBhcmF0aW9uIHBvdXIgaW5zw6lyZXIgbGUgdG9rZW4gZXQgbGVzIGRvbm7DqWVzIHV0aWxpc2F0ZXVyOicsIHsgdG9rZW4sIGV4cGlyZXNBdCwgZW1haWwgfSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYigndG9rZW5zJykuaW5zZXJ0KHtcclxuICAgICAgdG9rZW4sXHJcbiAgICAgIGV4cGlyZXNfYXQ6IGV4cGlyZXNBdCxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIG5vbV9vcmdhbmlzYXRldXIsXHJcbiAgICAgIHByZW5vbV9vcmdhbmlzYXRldXIsXHJcbiAgICAgIHRlbF9vcmdhbmlzYXRldXIsXHJcbiAgICAgIG1kcF9vcmdhbmlzYXRldXIsXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKCdJbnNlcnRpb24gcsOpdXNzaWUgZGFucyBsYSB0YWJsZSB0b2tlbnM6JywgcmVzdWx0KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxcXCdpbnNlcnRpb24gZHUgdG9rZW4gZGFucyBsYSB0YWJsZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBnZXRUb2tlblF1ZXJ5ID0gYXN5bmMgKHVzZXJJZCwgdG9rZW4pID0+IHtcclxuICByZXR1cm4gZGIoJ3Rva2VucycpLndoZXJlKHsgdXNlcl9pZDogdXNlcklkLCB0b2tlbiB9KS5maXJzdCgpO1xyXG59O1xyXG5cclxuLy8gUmVxdcOqdGUgcG91ciBzdXBwcmltZXIgdW4gdG9rZW4gZCdhY3RpdmF0aW9uXHJcbmNvbnN0IGRlbGV0ZVRva2VuUXVlcnkgPSBhc3luYyAodXNlcklkLCB0b2tlbikgPT4ge1xyXG4gIHJldHVybiBkYigndG9rZW5zJykud2hlcmUoeyB1c2VyX2lkOiB1c2VySWQsIHRva2VuIH0pLmRlbCgpO1xyXG59O1xyXG5cclxuLy8gUmVxdcOqdGUgcG91ciBtZXR0cmUgw6Agam91ciBsZXMgaW5mb3JtYXRpb25zIGNvbXBsw6ltZW50YWlyZXMgZCd1biBvcmdhbmlzYXRldXJcclxuY29uc3QgY29tcGxldGVPcmdhbml6ZXJRdWVyeSA9IGFzeW5jICh7IHByZW5vbV9vcmdhbmlzYXRldXIsIHRlbF9vcmdhbmlzYXRldXIsIGVtYWlsX29yZ2FuaXNhdGV1ciB9KSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdvcmdhbmlzYXRldXInKVxyXG4gICAgLndoZXJlKHsgZW1haWxfb3JnYW5pc2F0ZXVyIH0pXHJcbiAgICAudXBkYXRlKHsgcHJlbm9tX29yZ2FuaXNhdGV1ciwgdGVsX29yZ2FuaXNhdGV1ciB9KTtcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgb2J0ZW5pciB1biBvcmdhbmlzYXRldXIgcGFyIGVtYWlsXHJcbmNvbnN0IGdldE9yZ2FuaXplckJ5RW1haWxRdWVyeSA9IGFzeW5jIChlbWFpbCkgPT4ge1xyXG4gIHJldHVybiBkYignb3JnYW5pc2F0ZXVyJykud2hlcmUoeyBlbWFpbF9vcmdhbmlzYXRldXI6IGVtYWlsIH0pLmZpcnN0KCk7XHJcbn07XHJcblxyXG4vLyBSZXF1w6p0ZSBwb3VyIG9idGVuaXIgdG91cyBsZXMgb3JnYW5pc2F0ZXVyc1xyXG5jb25zdCBnZXRBbGxPcmdhbml6ZXJzUXVlcnkgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdvcmdhbmlzYXRldXInKS5zZWxlY3QoJyonKTtcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgb2J0ZW5pciB1biBvcmdhbmlzYXRldXIgcGFyIElEXHJcbmNvbnN0IGdldE9yZ2FuaXplckJ5SWRRdWVyeSA9IGFzeW5jIChpZCkgPT4ge1xyXG4gIHJldHVybiBkYignb3JnYW5pc2F0ZXVyJylcclxuICAgIC53aGVyZSh7IGlkX29yZ2FuaXNhdGV1cjogaWQgfSlcclxuICAgIC5zZWxlY3QoJ25vbV9vcmdhbmlzYXRldXInLCAncHJlbm9tX29yZ2FuaXNhdGV1cicsICdlbWFpbF9vcmdhbmlzYXRldXInLCAndGVsX29yZ2FuaXNhdGV1cicsICdkYXRlX2luc2NyaXB0aW9uJylcclxuICAgIC5maXJzdCgpO1xyXG59O1xyXG5cclxuLy8gUmVxdcOqdGUgcG91ciBtZXR0cmUgw6Agam91ciB1biBvcmdhbmlzYXRldXJcclxuY29uc3QgdXBkYXRlT3JnYW5pemVyUXVlcnkgPSBhc3luYyAoaWQsIHVwZGF0ZWREYXRhKSA9PiB7XHJcbiAgcmV0dXJuIGF3YWl0IGRiKCdvcmdhbmlzYXRldXInKS53aGVyZSh7IGlkX29yZ2FuaXNhdGV1cjogaWQgfSkudXBkYXRlKHVwZGF0ZWREYXRhKTtcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgc3VwcHJpbWVyIHVuIG9yZ2FuaXNhdGV1clxyXG5jb25zdCBkZWxldGVPcmdhbml6ZXJRdWVyeSA9IGFzeW5jIChpZCkgPT4ge1xyXG4gIHJldHVybiBkYignb3JnYW5pc2F0ZXVyJykud2hlcmUoeyBpZF9vcmdhbmlzYXRldXI6IGlkIH0pLmRlbCgpO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0RXZlbnRXaXRoT3JnYW5pemVyUXVlcnkgPSBhc3luYyAoaWRFdmVuZW1lbnQpID0+IHtcclxuICByZXR1cm4gZGIoJ2V2ZW5lbWVudCcpXHJcbiAgICAuam9pbignb3JnYW5pc2F0ZXVyJywgJ2V2ZW5lbWVudC5pZF9vcmdhbmlzYXRldXInLCAnb3JnYW5pc2F0ZXVyLmlkX29yZ2FuaXNhdGV1cicpXHJcbiAgICAud2hlcmUoeyAnZXZlbmVtZW50LmlkX2V2ZW5lbWVudCc6IGlkRXZlbmVtZW50IH0pXHJcbiAgICAuc2VsZWN0KFxyXG4gICAgICAnZXZlbmVtZW50LionLFxyXG4gICAgICAnb3JnYW5pc2F0ZXVyLnRlbF9vcmdhbmlzYXRldXInLFxyXG4gICAgICAnb3JnYW5pc2F0ZXVyLmVtYWlsX29yZ2FuaXNhdGV1cidcclxuICAgIClcclxuICAgIC5maXJzdCgpO1xyXG59O1xyXG5cclxuLy8gKioqKioqKioqKioqUGFydGljaXBhbnQqKioqKioqKioqKioqKipcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgY3LDqWVyIHVuIHBhcnRpY2lwYW50XHJcbmNvbnN0IGNyZWF0ZVBhcnRpY2lwYW50UXVlcnkgPSBhc3luYyAocGFydGljaXBhbnREYXRhKSA9PiB7XHJcbiAgY29uc3QgW2lkXSA9IGF3YWl0IGRiKCdwYXJ0aWNpcGFudHMnKS5pbnNlcnQocGFydGljaXBhbnREYXRhKTtcclxuICByZXR1cm4gaWQ7IC8vIHJldG91cm5lIGwnSUQgaW5zw6lyw6lcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgb2J0ZW5pciB1biBwYXJ0aWNpcGFudCBwYXIgZW1haWxcclxuLy8gY29uc3QgZ2V0UGFydGljaXBhbnRCeUVtYWlsUXVlcnkgPSBhc3luYyAoZW1haWwpID0+IHtcclxuLy8gICByZXR1cm4gZGIoJ3BhcnRpY2lwYW50cycpLndoZXJlKHsgZW1haWxfcGFydDogZW1haWwgfSkuZmlyc3QoKTtcclxuLy8gfTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgb2J0ZW5pciB1biBwYXJ0aWNpcGFudCBwYXIgZW1haWxcclxuY29uc3QgZ2V0UGFydGljaXBhbnRCeUVtYWlsUXVlcnkgPSBhc3luYyAoZW1haWwpID0+IHtcclxuICByZXR1cm4gZGIoJ3BhcnRpY2lwYW50cycpXHJcbiAgICAuc2VsZWN0KFxyXG4gICAgICAnaWRfcGFydGljaXBhbnQnLFxyXG4gICAgICAnbm9tX3BhcnQnLFxyXG4gICAgICAnZW1haWxfcGFydCcsXHJcbiAgICAgICdtZHBfcGFydCBhcyBtZHBfcGFydGljaXBhbnQnLCAvLyBBbGlhcyBwb3VyIHJlbm9tbWVyIG1kcF9wYXJ0XHJcbiAgICAgICdnZW5yZV9wYXJ0JyxcclxuICAgICAgJ3RlbGVwaG9uZV9wYXJ0JyxcclxuICAgICAgJ3ZpbGxlX3BhcnQnLFxyXG4gICAgICAnY29kZXBvc3RhbF9wYXJ0JyxcclxuICAgICAgJ3N0YXR1dF9wYXJ0JyxcclxuICAgICAgJ2RhdGVfaW5zY3JpcHRpb24nLFxyXG4gICAgICAnaWRfb3JnYW5pc2F0ZXVyJ1xyXG4gICAgKVxyXG4gICAgLndoZXJlKHsgZW1haWxfcGFydDogZW1haWwgfSlcclxuICAgIC5maXJzdCgpO1xyXG59O1xyXG5cclxuLy8gUmVxdcOqdGUgcG91ciBvYnRlbmlyIHVuIHBhcnRpY2lwYW50IHBhciBJRFxyXG5jb25zdCBnZXRQYXJ0aWNpcGFudEJ5SWRRdWVyeSA9IGFzeW5jIChpZCkgPT4ge1xyXG4gIHJldHVybiBkYigncGFydGljaXBhbnRzJykud2hlcmUoeyBpZF9wYXJ0aWNpcGFudDogaWQgfSkuZmlyc3QoKTtcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgbWV0dHJlIMOgIGpvdXIgdW4gcGFydGljaXBhbnRcclxuY29uc3QgdXBkYXRlUGFydGljaXBhbnRRdWVyeSA9IGFzeW5jIChpZCwgdXBkYXRlZERhdGEpID0+IHtcclxuICByZXR1cm4gZGIoJ3BhcnRpY2lwYW50cycpLndoZXJlKHsgaWRfcGFydGljaXBhbnQ6IGlkIH0pLnVwZGF0ZSh1cGRhdGVkRGF0YSk7XHJcbn07XHJcblxyXG4vLyBSZXF1w6p0ZSBwb3VyIHN1cHByaW1lciB1biBwYXJ0aWNpcGFudFxyXG5jb25zdCBkZWxldGVQYXJ0aWNpcGFudFF1ZXJ5ID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdwYXJ0aWNpcGFudHMnKS53aGVyZSh7IGlkX3BhcnRpY2lwYW50OiBpZCB9KS5kZWwoKTtcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgb2J0ZW5pciB0b3VzIGxlcyBwYXJ0aWNpcGFudHNcclxuY29uc3QgZ2V0QWxsUGFydGljaXBhbnRzUXVlcnkgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdwYXJ0aWNpcGFudHMnKS5zZWxlY3QoJyonKTtcclxufTtcclxuXHJcbi8vIFJlcXXDqnRlIHBvdXIgbWV0dHJlIMOgIGpvdXIgdW4gcGFydGljaXBhbnQgdmlhIHNvbiBlbWFpbFxyXG5jb25zdCB1cGRhdGVQYXJ0aWNpcGFudEJ5RW1haWxRdWVyeSA9IGFzeW5jIChlbWFpbCwgdXBkYXRlZERhdGEpID0+IHtcclxuICByZXR1cm4gZGIoJ3BhcnRpY2lwYW50cycpLndoZXJlKHsgZW1haWxfcGFydDogZW1haWwgfSkudXBkYXRlKHVwZGF0ZWREYXRhKTtcclxufTtcclxuXHJcbi8vYWpvdXRleiB1bmUgcmVxdcOqdGUgcG91ciBvYnRlbmlyIGxlcyBkw6l0YWlscyBkJ3VuIMOpdsOpbmVtZW50IFxyXG5jb25zdCBnZXRFdmVudEJ5SWRRdWVyeSA9IGFzeW5jIChpZF9ldmVuZW1lbnQpID0+IHtcclxuICByZXR1cm4gZGIoJ2V2ZW5lbWVudCcpLndoZXJlKHsgaWRfZXZlbmVtZW50IH0pLmZpcnN0KCk7XHJcbn07XHJcbi8vYWNoYXQgYmlsbGV0c1xyXG4vLyDwn5S5IFLDqWN1cMOpcmVyIHRvdXRlcyBsZXMgdmVudGVzIGRlIGJpbGxldHNcclxuY29uc3QgZ2V0VGlja2V0U2FsZXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGF3YWl0IGRiKFwiYWNoYXRiaWxsZXRzXCIpXHJcbiAgICAuam9pbihcIm9yZ2FuaXNhdGV1clwiLCBcImFjaGF0YmlsbGV0cy5ub21fb3JnYW5pc2F0ZXVyXCIsIFwiPVwiLCBcIm9yZ2FuaXNhdGV1ci5ub21fb3JnYW5pc2F0ZXVyXCIpXHJcbiAgICAuam9pbihcImV2ZW5lbWVudFwiLCBcImFjaGF0YmlsbGV0cy5ub21fZXZlbmVtZW50XCIsIFwiPVwiLCBcImV2ZW5lbWVudC5ub21fZXZlbnRcIilcclxuICAgIC5zZWxlY3QoXHJcbiAgICAgIFwiYWNoYXRiaWxsZXRzLmlkXCIsXHJcbiAgICAgIFwib3JnYW5pc2F0ZXVyLm5vbV9vcmdhbmlzYXRldXJcIixcclxuICAgICAgXCJhY2hhdGJpbGxldHMubm9tX2V2ZW5lbWVudFwiLFxyXG4gICAgICBcImFjaGF0YmlsbGV0cy50eXBlX3RpY2tldFwiLFxyXG4gICAgICBkYi5yYXcoXCJTVU0oYWNoYXRiaWxsZXRzLnRvdGFsX2JpbGxldHNfdmVuZHVzKSBhcyB0b3RhbF9iaWxsZXRzX3ZlbmR1c1wiKSxcclxuICAgICAgXCJhY2hhdGJpbGxldHMucHJpeF91bml0YWlyZVwiLFxyXG4gICAgICBkYi5yYXcoXCJTVU0oYWNoYXRiaWxsZXRzLm1vbnRhbnRfY29sbGVjdGUpIGFzIG1vbnRhbnRfY29sbGVjdGVcIiksXHJcbiAgICAgIGRiLnJhdyhcIlNVTShhY2hhdGJpbGxldHMubW9udGFudF9hX3RyYW5zZmVyZXIpIGFzIG1vbnRhbnRfYV90cmFuc2ZlcmVyXCIpLFxyXG4gICAgICBcImFjaGF0YmlsbGV0cy5hY2hldGV1clwiLFxyXG4gICAgICBcImFjaGF0YmlsbGV0cy5zdGF0dXNfcGFpZW1lbnRcIixcclxuICAgICAgXCJhY2hhdGJpbGxldHMuZGF0ZV9hY2hhdFwiLFxyXG4gICAgICBcImV2ZW5lbWVudC50eXBlc190aWNrZXRzXCJcclxuICAgIClcclxuICAgIC5ncm91cEJ5KFwiYWNoYXRiaWxsZXRzLm5vbV9ldmVuZW1lbnRcIiwgXCJhY2hhdGJpbGxldHMudHlwZV90aWNrZXRcIiwgXCJhY2hhdGJpbGxldHMuaWRcIik7XHJcbn07XHJcblxyXG5cclxuXHJcbi8vIPCflLkgTWV0dHJlIMOgIGpvdXIgbGUgc3RhdHV0IGRlIHBhaWVtZW50XHJcbmNvbnN0IHVwZGF0ZVBheW1lbnRTdGF0dXMgPSBhc3luYyAoaWQsIHN0YXR1cykgPT4ge1xyXG4gIHJldHVybiBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKVxyXG4gICAgLndoZXJlKHsgaWQgfSlcclxuICAgIC51cGRhdGUoeyBzdGF0dXNfcGFpZW1lbnQ6IHN0YXR1cyB9KTtcclxufTtcclxuXHJcbi8vIPCflLkgU3VwcHJpbWVyIHVuZSB2ZW50ZSBkZSBiaWxsZXRcclxuY29uc3QgZGVsZXRlVGlja2V0U2FsZSA9IGFzeW5jIChpZCkgPT4ge1xyXG4gIHJldHVybiBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKVxyXG4gICAgLndoZXJlKHsgaWQgfSlcclxuICAgIC5kZWwoKTtcclxufTtcclxuXHJcbi8vIG5vdXZlYXUgdGVzdGVcclxuY29uc3QgZ2V0VGlja2V0U2FsZXNBbGwgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGF3YWl0IGRiKFwiYWNoYXRiaWxsZXRzXCIpLnNlbGVjdChcclxuICAgIFwiaWRcIiwgIC8vIOKchSBPbiBpbmNsdXQgbCdJRCB1bmlxdWUgZGUgY2hhcXVlIGFjaGF0XHJcbiAgICBcIm5vbV9vcmdhbmlzYXRldXJcIixcclxuICAgIFwibm9tX2V2ZW5lbWVudFwiLFxyXG4gICAgXCJ0eXBlX3RpY2tldFwiLFxyXG4gICAgXCJxdWFudGl0ZVwiLFxyXG4gICAgXCJwcml4X3VuaXRhaXJlXCIsXHJcbiAgICBcInRvdGFsX2JpbGxldHNfdmVuZHVzXCIsXHJcbiAgICBcIm1vbnRhbnRfY29sbGVjdGVcIixcclxuICAgIFwibW9udGFudF9hX3RyYW5zZmVyZXJcIixcclxuICAgIFwiYWNoZXRldXJcIixcclxuICAgIFwic3RhdHVzX3BhaWVtZW50XCJcclxuICApO1xyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT0gQ0VSVElGSUNBVCA9PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIFbDqXJpZmllciBzaSB1biBwYXJ0aWNpcGFudCBleGlzdGVcclxuY29uc3QgZ2V0UGFydGljaXBhbnRCeUlkID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdwYXJ0aWNpcGFudHMnKVxyXG4gICAgLndoZXJlKHsgaWRfcGFydGljaXBhbnQ6IGlkIH0pXHJcbiAgICAuc2VsZWN0KCdpZF9wYXJ0aWNpcGFudCcsICdub21fcGFydCcpIC8vIOKchSBWw6lyaWZpY2F0aW9uIHF1ZSBgbm9tYCBlc3QgYmllbiByw6ljdXDDqXLDqVxyXG4gICAgLmZpcnN0KCk7XHJcbn07XHJcblxyXG4vLyBBam91dGVyIHVuIGNlcnRpZmljYXRcclxuY29uc3QgYWRkQ2VydGlmaWNhdGUgPSBhc3luYyAoY2VydGlmaWNhdGVEYXRhKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdjZXJ0aWZpY2F0JykuaW5zZXJ0KGNlcnRpZmljYXRlRGF0YSk7XHJcbn07XHJcblxyXG5cclxuLy8gUsOpY3Vww6lyZXIgdG91cyBsZXMgY2VydGlmaWNhdHNcclxuY29uc3QgZ2V0QWxsQ2VydGlmaWNhdGVzID0gYXN5bmMgKCkgPT4ge1xyXG4gIHJldHVybiBkYignY2VydGlmaWNhdCcpLnNlbGVjdCgnKicpO1xyXG59O1xyXG5cclxuLy8gUsOpY3Vww6lyZXIgdW4gY2VydGlmaWNhdCBwYXIgcGFydGljaXBhbnRcclxuY29uc3QgZ2V0Q2VydGlmaWNhdGVCeVBhcnRpY2lwYW50ID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdjZXJ0aWZpY2F0Jykud2hlcmUoeyBpZF9wYXJ0aWNpcGFudDogaWQgfSkuZmlyc3QoKTtcclxufTtcclxuXHJcbmNvbnN0IGdldEFsbFBhcnRpY2lwYW50c2ZvckNlcnRpZmljYXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgcmV0dXJuIGRiKCdwYXJ0aWNpcGFudHMnKVxyXG4gICAgLmpvaW4oJ29yZ2FuaXNhdGV1cicsICdwYXJ0aWNpcGFudHMuaWRfb3JnYW5pc2F0ZXVyJywgJz0nLCAnb3JnYW5pc2F0ZXVyLmlkX29yZ2FuaXNhdGV1cicpXHJcbiAgICAuam9pbignZXZlbmVtZW50JywgJ29yZ2FuaXNhdGV1ci5pZF9vcmdhbmlzYXRldXInLCAnPScsICdldmVuZW1lbnQuaWRfb3JnYW5pc2F0ZXVyJykgLy8gSm9pbnR1cmUgYXZlYyBsZXMgw6l2w6luZW1lbnRzXHJcbiAgICAuc2VsZWN0KFxyXG4gICAgICAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JyxcclxuICAgICAgJ3BhcnRpY2lwYW50cy5ub21fcGFydCcsXHJcbiAgICAgICdwYXJ0aWNpcGFudHMuZW1haWxfcGFydCcsXHJcbiAgICAgICdwYXJ0aWNpcGFudHMudGVsZXBob25lX3BhcnQnLFxyXG4gICAgICAnZXZlbmVtZW50Lm5vbV9ldmVudCcsLy8gUsOpY3Vww6lyYXRpb24gZHUgbm9tIGRlIGwnw6l2w6luZW1lbnRcclxuICAgICAgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnLCAvLyDinIUgQWpvdXQgZGUgaWRfZXZlbmVtZW50XHJcbiAgICApO1xyXG59O1xyXG5cclxuLy8gUsOpY3Vww6lyZXIgbGVzIGNlcnRpZmljYXRzIGQndW4gcGFydGljaXBhbnRcclxuLy8gY29uc3QgZ2V0Q2VydGlmaWNhdGVzQnlQYXJ0aWNpcGFudCA9IGFzeW5jIChwYXJ0aWNpcGFudElkKSA9PiB7XHJcbi8vICAgcmV0dXJuIGRiKFwiY2VydGlmaWNhdFwiKVxyXG4vLyAgICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJjZXJ0aWZpY2F0LmlkX2V2ZW5lbWVudFwiLCBcIj1cIiwgXCJldmVuZW1lbnQuaWRfZXZlbmVtZW50XCIpXHJcbi8vICAgICAud2hlcmUoXCJjZXJ0aWZpY2F0LmlkX3BhcnRpY2lwYW50XCIsIHBhcnRpY2lwYW50SWQpXHJcbi8vICAgICAuc2VsZWN0KFxyXG4vLyAgICAgICBcImNlcnRpZmljYXQuaWRfY2VydGlmaWNhdFwiLFxyXG4vLyAgICAgICBcImV2ZW5lbWVudC5ub21fZXZlbnRcIixcclxuLy8gICAgICAgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnLCAvLyDinIUgQWpvdXQgZGUgaWRfZXZlbmVtZW50XHJcbi8vICAgICAgIFwiY2VydGlmaWNhdC5kYXRlX2Rpc3RyaWJ1dGlvblwiLFxyXG4vLyAgICAgICBcImNlcnRpZmljYXQudXJsX2NlcnRpZmljYXRcIlxyXG4vLyAgICAgKTtcclxuLy8gfTtcclxuY29uc3QgZ2V0Q2VydGlmaWNhdGVzQnlQYXJ0aWNpcGFudCA9IGFzeW5jIChwYXJ0aWNpcGFudElkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKFwiY2VydGlmaWNhdFwiKVxyXG4gICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJjZXJ0aWZpY2F0LmlkX2V2ZW5lbWVudFwiLCBcIj1cIiwgXCJldmVuZW1lbnQuaWRfZXZlbmVtZW50XCIpXHJcbiAgICAuam9pbihcIm9yZ2FuaXNhdGV1clwiLCBcImV2ZW5lbWVudC5pZF9vcmdhbmlzYXRldXJcIiwgXCI9XCIsIFwib3JnYW5pc2F0ZXVyLmlkX29yZ2FuaXNhdGV1clwiKSAvLyBKb2ludHVyZSBhdmVjIGwnb3JnYW5pc2F0ZXVyXHJcbiAgICAud2hlcmUoXCJjZXJ0aWZpY2F0LmlkX3BhcnRpY2lwYW50XCIsIHBhcnRpY2lwYW50SWQpXHJcbiAgICAuc2VsZWN0KFxyXG4gICAgICBcImNlcnRpZmljYXQuaWRfY2VydGlmaWNhdFwiLFxyXG4gICAgICBcImNlcnRpZmljYXQubm9tX3RpdHVsYWlyZVwiLFxyXG4gICAgICAnZXZlbmVtZW50LmlkX2V2ZW5lbWVudCcsXHJcbiAgICAgIFwiZXZlbmVtZW50Lm5vbV9ldmVudFwiLFxyXG4gICAgICBcImV2ZW5lbWVudC5kYXRlX2RlYnV0XCIsXHJcbiAgICAgIFwiZXZlbmVtZW50LmRhdGVfZmluXCIsXHJcbiAgICAgIFwiZXZlbmVtZW50LmxpZXVfZXZlbnRcIixcclxuICAgICAgXCJvcmdhbmlzYXRldXIubm9tX29yZ2FuaXNhdGV1clwiLCAvLyBSw6ljdXDDqXJhdGlvbiBkdSBub20gZGUgbCdvcmdhbmlzYXRldXJcclxuICAgICAgXCJjZXJ0aWZpY2F0LmRhdGVfZGlzdHJpYnV0aW9uXCIsXHJcbiAgICAgIFwiY2VydGlmaWNhdC51cmxfY2VydGlmaWNhdFwiXHJcbiAgICApO1xyXG59O1xyXG5cclxuLy8gU3VwcHJpbWVyIHVuIGNlcnRpZmljYXQgcGFyIElEXHJcbmNvbnN0IGRlbGV0ZUNlcnRpZmljYXRlID0gYXN5bmMgKGlkKSA9PiB7XHJcbiAgcmV0dXJuIGRiKFwiY2VydGlmaWNhdFwiKS53aGVyZShcImlkX2NlcnRpZmljYXRcIiwgaWQpLmRlbCgpO1xyXG59O1xyXG5cclxuLy9jb250YWN0IHBhcnRpZSBwYWdlIGQnYWNjdWVpbFxyXG4vLyBFbnJlZ2lzdHJlciB1biBtZXNzYWdlIGRlIGNvbnRhY3RcclxuY29uc3Qgc2F2ZUNvbnRhY3RNZXNzYWdlID0gYXN5bmMgKHsgbmFtZSwgZW1haWwsIHN1YmplY3QsIG1lc3NhZ2UgfSkgPT4ge1xyXG4gIHJldHVybiBhd2FpdCBkYignY29udGFjdF9tZXNzYWdlcycpLmluc2VydCh7XHJcbiAgICBuYW1lLFxyXG4gICAgZW1haWwsXHJcbiAgICBzdWJqZWN0LFxyXG4gICAgbWVzc2FnZSxcclxuICAgIGNyZWF0ZWRfYXQ6IGRiLmZuLm5vdygpXHJcbiAgfSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgaW5zZXJ0VG9rZW5RdWVyeSxcclxuICBnZXRUb2tlblF1ZXJ5LFxyXG4gIGRlbGV0ZVRva2VuUXVlcnksXHJcbiAgY3JlYXRlQWRtaW5RdWVyeSxcclxuICBnZXRBZG1pbkJ5RW1haWxRdWVyeSxcclxuICBnZXRBbGxBZG1pbnNRdWVyeSxcclxuICBnZXRBZG1pbkJ5SWRRdWVyeSxcclxuICB1cGRhdGVBZG1pblF1ZXJ5LFxyXG4gIGRlbGV0ZUFkbWluUXVlcnksXHJcbiAgY3JlYXRlRmFxUXVlcnksXHJcbiAgZ2V0QWxsRmFxc1F1ZXJ5LFxyXG4gIGdldEZhcUJ5SWRRdWVyeSxcclxuICB1cGRhdGVGYXFRdWVyeSxcclxuICBkZWxldGVGYXFRdWVyeSxcclxuICBjcmVhdGVPcmdhbml6ZXJRdWVyeSxcclxuICBnZXRPcmdhbml6ZXJCeUVtYWlsUXVlcnksXHJcbiAgZ2V0QWxsT3JnYW5pemVyc1F1ZXJ5LFxyXG4gIGdldE9yZ2FuaXplckJ5SWRRdWVyeSxcclxuICB1cGRhdGVPcmdhbml6ZXJRdWVyeSxcclxuICBkZWxldGVPcmdhbml6ZXJRdWVyeSxcclxuICBjb21wbGV0ZU9yZ2FuaXplclF1ZXJ5LFxyXG4gIGNyZWF0ZVBhcnRpY2lwYW50UXVlcnksXHJcbiAgZ2V0UGFydGljaXBhbnRCeUVtYWlsUXVlcnksXHJcbiAgZ2V0UGFydGljaXBhbnRCeUlkUXVlcnksXHJcbiAgdXBkYXRlUGFydGljaXBhbnRRdWVyeSxcclxuICBkZWxldGVQYXJ0aWNpcGFudFF1ZXJ5LFxyXG4gIGdldEFsbFBhcnRpY2lwYW50c1F1ZXJ5LFxyXG4gIHVwZGF0ZVBhcnRpY2lwYW50QnlFbWFpbFF1ZXJ5LFxyXG4gIGdldEV2ZW50QnlJZFF1ZXJ5LFxyXG4gIGdldEV2ZW50V2l0aE9yZ2FuaXplclF1ZXJ5LFxyXG4gIGdldFRpY2tldFNhbGVzLFxyXG4gIHVwZGF0ZVBheW1lbnRTdGF0dXMsXHJcbiAgZGVsZXRlVGlja2V0U2FsZSxcclxuICBnZXRUaWNrZXRTYWxlc0FsbCxcclxuICBhZGRDZXJ0aWZpY2F0ZSxcclxuICBnZXRQYXJ0aWNpcGFudEJ5SWQsXHJcbiAgZ2V0QWxsQ2VydGlmaWNhdGVzLFxyXG4gIGdldENlcnRpZmljYXRlQnlQYXJ0aWNpcGFudCxcclxuICBnZXRBbGxQYXJ0aWNpcGFudHNmb3JDZXJ0aWZpY2F0LFxyXG4gIGdldENlcnRpZmljYXRlc0J5UGFydGljaXBhbnQsXHJcbiAgZGVsZXRlQ2VydGlmaWNhdGUsXHJcbiAgc2F2ZUNvbnRhY3RNZXNzYWdlLFxyXG5cclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQzs7QUFFMUI7QUFDQTtBQUNBLE1BQU1DLGdCQUFnQixHQUFHLE1BQU9DLFNBQVMsSUFBSztFQUM1QyxPQUFPSCxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUNJLE1BQU0sQ0FBQ0QsU0FBUyxDQUFDO0FBQ3RDLENBQUM7O0FBRUQ7QUFDQSxNQUFNRSxvQkFBb0IsR0FBRyxNQUFPQyxLQUFLLElBQUs7RUFDNUMsT0FBT04sRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRUMsV0FBVyxFQUFFRjtFQUFNLENBQUMsQ0FBQyxDQUFDRyxLQUFLLENBQUMsQ0FBQztBQUMxRCxDQUFDOztBQUVEO0FBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ3BDLE9BQU9WLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQ1csTUFBTSxDQUFDLEdBQUcsQ0FBQztBQUNoQyxDQUFDOztBQUVEO0FBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsTUFBT0MsRUFBRSxJQUFLO0VBQ3RDLE9BQU9iLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQ08sS0FBSyxDQUFDO0lBQUVPLFFBQVEsRUFBRUQ7RUFBRyxDQUFDLENBQUMsQ0FBQ0osS0FBSyxDQUFDLENBQUM7QUFDcEQsQ0FBQzs7QUFFRDtBQUNBLE1BQU1NLGdCQUFnQixHQUFHLE1BQUFBLENBQU9GLEVBQUUsRUFBRUcsV0FBVyxLQUFLO0VBQ2xELE9BQU9oQixFQUFFLENBQUMsT0FBTyxDQUFDLENBQUNPLEtBQUssQ0FBQztJQUFFTyxRQUFRLEVBQUVEO0VBQUcsQ0FBQyxDQUFDLENBQUNJLE1BQU0sQ0FBQ0QsV0FBVyxDQUFDO0FBQ2hFLENBQUM7O0FBRUQ7QUFDQSxNQUFNRSxnQkFBZ0IsR0FBRyxNQUFPTCxFQUFFLElBQUs7RUFDckMsT0FBT2IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRU8sUUFBUSxFQUFFRDtFQUFHLENBQUMsQ0FBQyxDQUFDTSxHQUFHLENBQUMsQ0FBQztBQUNsRCxDQUFDOztBQUVEO0FBQ0E7QUFDQSxNQUFNQyxjQUFjLEdBQUcsTUFBT0MsT0FBTyxJQUFLO0VBQ3hDLE1BQU0sQ0FBQ1IsRUFBRSxDQUFDLEdBQUcsTUFBTWIsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDSSxNQUFNLENBQUNpQixPQUFPLENBQUM7RUFDNUMsT0FBTztJQUFFUixFQUFFO0lBQUUsR0FBR1E7RUFBUSxDQUFDO0FBQzNCLENBQUM7O0FBRUQ7QUFDQSxNQUFNQyxlQUFlLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ2xDLE9BQU90QixFQUFFLENBQUMsS0FBSyxDQUFDLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDOUIsQ0FBQzs7QUFFRDtBQUNBLE1BQU1ZLGVBQWUsR0FBRyxNQUFPVixFQUFFLElBQUs7RUFDcEMsT0FBT2IsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRU07RUFBRyxDQUFDLENBQUMsQ0FBQ0osS0FBSyxDQUFDLENBQUM7QUFDeEMsQ0FBQzs7QUFFRDtBQUNBLE1BQU1lLGNBQWMsR0FBRyxNQUFBQSxDQUFPWCxFQUFFLEVBQUVHLFdBQVcsS0FBSztFQUNoRCxPQUFPaEIsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRU07RUFBRyxDQUFDLENBQUMsQ0FBQ0ksTUFBTSxDQUFDRCxXQUFXLENBQUM7QUFDcEQsQ0FBQzs7QUFFRDtBQUNBLE1BQU1TLGNBQWMsR0FBRyxNQUFPWixFQUFFLElBQUs7RUFDbkMsT0FBT2IsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRU07RUFBRyxDQUFDLENBQUMsQ0FBQ00sR0FBRyxDQUFDLENBQUM7QUFDdEMsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBLE1BQU1PLG9CQUFvQixHQUFHLE1BQUFDLElBQUEsSUFBeUk7RUFBQSxJQUFsSTtJQUFFQyxnQkFBZ0I7SUFBRUMsbUJBQW1CO0lBQUVDLGtCQUFrQjtJQUFFQyxnQkFBZ0I7SUFBRUMsZ0JBQWdCO0lBQUVDLGdCQUFnQjtJQUFFQztFQUFTLENBQUMsR0FBQVAsSUFBQTtFQUMvSixNQUFNLENBQUNkLEVBQUUsQ0FBQyxHQUFHLE1BQU1iLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQ0ksTUFBTSxDQUFDO0lBQzNDd0IsZ0JBQWdCO0lBQ2hCQyxtQkFBbUI7SUFDbkJDLGtCQUFrQjtJQUNsQkMsZ0JBQWdCO0lBQ2hCQyxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQkM7RUFDRixDQUFDLENBQUM7RUFDRixPQUFPckIsRUFBRSxDQUFDLENBQUM7QUFDYixDQUFDOztBQUVEO0FBQ0EsTUFBTXNCLGdCQUFnQixHQUFHLE1BQUFDLEtBQUEsSUFBa0g7RUFBQSxJQUEzRztJQUFFQyxLQUFLO0lBQUVDLFNBQVM7SUFBRWhDLEtBQUs7SUFBRXNCLGdCQUFnQjtJQUFFQyxtQkFBbUI7SUFBRUUsZ0JBQWdCO0lBQUVDO0VBQWlCLENBQUMsR0FBQUksS0FBQTtFQUNwSSxJQUFJO0lBQ0ZHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtEQUErRCxFQUFFO01BQUVILEtBQUs7TUFBRUMsU0FBUztNQUFFaEM7SUFBTSxDQUFDLENBQUM7SUFDekcsTUFBTW1DLE1BQU0sR0FBRyxNQUFNekMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDSSxNQUFNLENBQUM7TUFDdkNpQyxLQUFLO01BQ0xLLFVBQVUsRUFBRUosU0FBUztNQUNyQmhDLEtBQUs7TUFDTHNCLGdCQUFnQjtNQUNoQkMsbUJBQW1CO01BQ25CRSxnQkFBZ0I7TUFDaEJDO0lBQ0YsQ0FBQyxDQUFDO0lBQ0ZPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHlDQUF5QyxFQUFFQyxNQUFNLENBQUM7SUFDOUQsT0FBT0EsTUFBTTtFQUNmLENBQUMsQ0FBQyxPQUFPRSxLQUFLLEVBQUU7SUFDZEosT0FBTyxDQUFDSSxLQUFLLENBQUMscURBQXFELEVBQUVBLEtBQUssQ0FBQztJQUMzRSxNQUFNQSxLQUFLO0VBQ2I7QUFDRixDQUFDO0FBRUQsTUFBTUMsYUFBYSxHQUFHLE1BQUFBLENBQU9DLE1BQU0sRUFBRVIsS0FBSyxLQUFLO0VBQzdDLE9BQU9yQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUNPLEtBQUssQ0FBQztJQUFFdUMsT0FBTyxFQUFFRCxNQUFNO0lBQUVSO0VBQU0sQ0FBQyxDQUFDLENBQUM1QixLQUFLLENBQUMsQ0FBQztBQUMvRCxDQUFDOztBQUVEO0FBQ0EsTUFBTXNDLGdCQUFnQixHQUFHLE1BQUFBLENBQU9GLE1BQU0sRUFBRVIsS0FBSyxLQUFLO0VBQ2hELE9BQU9yQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUNPLEtBQUssQ0FBQztJQUFFdUMsT0FBTyxFQUFFRCxNQUFNO0lBQUVSO0VBQU0sQ0FBQyxDQUFDLENBQUNsQixHQUFHLENBQUMsQ0FBQztBQUM3RCxDQUFDOztBQUVEO0FBQ0EsTUFBTTZCLHNCQUFzQixHQUFHLE1BQUFDLEtBQUEsSUFBeUU7RUFBQSxJQUFsRTtJQUFFcEIsbUJBQW1CO0lBQUVFLGdCQUFnQjtJQUFFRDtFQUFtQixDQUFDLEdBQUFtQixLQUFBO0VBQ2pHLE9BQU9qRCxFQUFFLENBQUMsY0FBYyxDQUFDLENBQ3RCTyxLQUFLLENBQUM7SUFBRXVCO0VBQW1CLENBQUMsQ0FBQyxDQUM3QmIsTUFBTSxDQUFDO0lBQUVZLG1CQUFtQjtJQUFFRTtFQUFpQixDQUFDLENBQUM7QUFDdEQsQ0FBQzs7QUFFRDtBQUNBLE1BQU1tQix3QkFBd0IsR0FBRyxNQUFPNUMsS0FBSyxJQUFLO0VBQ2hELE9BQU9OLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQ08sS0FBSyxDQUFDO0lBQUV1QixrQkFBa0IsRUFBRXhCO0VBQU0sQ0FBQyxDQUFDLENBQUNHLEtBQUssQ0FBQyxDQUFDO0FBQ3hFLENBQUM7O0FBRUQ7QUFDQSxNQUFNMEMscUJBQXFCLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ3hDLE9BQU9uRCxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDdkMsQ0FBQzs7QUFFRDtBQUNBLE1BQU15QyxxQkFBcUIsR0FBRyxNQUFPdkMsRUFBRSxJQUFLO0VBQzFDLE9BQU9iLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FDdEJPLEtBQUssQ0FBQztJQUFFOEMsZUFBZSxFQUFFeEM7RUFBRyxDQUFDLENBQUMsQ0FDOUJGLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxxQkFBcUIsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsQ0FBQyxDQUMvR0YsS0FBSyxDQUFDLENBQUM7QUFDWixDQUFDOztBQUVEO0FBQ0EsTUFBTTZDLG9CQUFvQixHQUFHLE1BQUFBLENBQU96QyxFQUFFLEVBQUVHLFdBQVcsS0FBSztFQUN0RCxPQUFPLE1BQU1oQixFQUFFLENBQUMsY0FBYyxDQUFDLENBQUNPLEtBQUssQ0FBQztJQUFFOEMsZUFBZSxFQUFFeEM7RUFBRyxDQUFDLENBQUMsQ0FBQ0ksTUFBTSxDQUFDRCxXQUFXLENBQUM7QUFDcEYsQ0FBQzs7QUFFRDtBQUNBLE1BQU11QyxvQkFBb0IsR0FBRyxNQUFPMUMsRUFBRSxJQUFLO0VBQ3pDLE9BQU9iLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQ08sS0FBSyxDQUFDO0lBQUU4QyxlQUFlLEVBQUV4QztFQUFHLENBQUMsQ0FBQyxDQUFDTSxHQUFHLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRUQsTUFBTXFDLDBCQUEwQixHQUFHLE1BQU9DLFdBQVcsSUFBSztFQUN4RCxPQUFPekQsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUNuQjBELElBQUksQ0FBQyxjQUFjLEVBQUUsMkJBQTJCLEVBQUUsOEJBQThCLENBQUMsQ0FDakZuRCxLQUFLLENBQUM7SUFBRSx3QkFBd0IsRUFBRWtEO0VBQVksQ0FBQyxDQUFDLENBQ2hEOUMsTUFBTSxDQUNMLGFBQWEsRUFDYiwrQkFBK0IsRUFDL0IsaUNBQ0YsQ0FBQyxDQUNBRixLQUFLLENBQUMsQ0FBQztBQUNaLENBQUM7O0FBRUQ7O0FBRUE7QUFDQSxNQUFNa0Qsc0JBQXNCLEdBQUcsTUFBT0MsZUFBZSxJQUFLO0VBQ3hELE1BQU0sQ0FBQy9DLEVBQUUsQ0FBQyxHQUFHLE1BQU1iLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQ0ksTUFBTSxDQUFDd0QsZUFBZSxDQUFDO0VBQzdELE9BQU8vQyxFQUFFLENBQUMsQ0FBQztBQUNiLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNZ0QsMEJBQTBCLEdBQUcsTUFBT3ZELEtBQUssSUFBSztFQUNsRCxPQUFPTixFQUFFLENBQUMsY0FBYyxDQUFDLENBQ3RCVyxNQUFNLENBQ0wsZ0JBQWdCLEVBQ2hCLFVBQVUsRUFDVixZQUFZLEVBQ1osNkJBQTZCO0VBQUU7RUFDL0IsWUFBWSxFQUNaLGdCQUFnQixFQUNoQixZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLGFBQWEsRUFDYixrQkFBa0IsRUFDbEIsaUJBQ0YsQ0FBQyxDQUNBSixLQUFLLENBQUM7SUFBRXVELFVBQVUsRUFBRXhEO0VBQU0sQ0FBQyxDQUFDLENBQzVCRyxLQUFLLENBQUMsQ0FBQztBQUNaLENBQUM7O0FBRUQ7QUFDQSxNQUFNc0QsdUJBQXVCLEdBQUcsTUFBT2xELEVBQUUsSUFBSztFQUM1QyxPQUFPYixFQUFFLENBQUMsY0FBYyxDQUFDLENBQUNPLEtBQUssQ0FBQztJQUFFeUQsY0FBYyxFQUFFbkQ7RUFBRyxDQUFDLENBQUMsQ0FBQ0osS0FBSyxDQUFDLENBQUM7QUFDakUsQ0FBQzs7QUFFRDtBQUNBLE1BQU13RCxzQkFBc0IsR0FBRyxNQUFBQSxDQUFPcEQsRUFBRSxFQUFFRyxXQUFXLEtBQUs7RUFDeEQsT0FBT2hCLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQ08sS0FBSyxDQUFDO0lBQUV5RCxjQUFjLEVBQUVuRDtFQUFHLENBQUMsQ0FBQyxDQUFDSSxNQUFNLENBQUNELFdBQVcsQ0FBQztBQUM3RSxDQUFDOztBQUVEO0FBQ0EsTUFBTWtELHNCQUFzQixHQUFHLE1BQU9yRCxFQUFFLElBQUs7RUFDM0MsT0FBT2IsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRXlELGNBQWMsRUFBRW5EO0VBQUcsQ0FBQyxDQUFDLENBQUNNLEdBQUcsQ0FBQyxDQUFDO0FBQy9ELENBQUM7O0FBRUQ7QUFDQSxNQUFNZ0QsdUJBQXVCLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQzFDLE9BQU9uRSxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDdkMsQ0FBQzs7QUFFRDtBQUNBLE1BQU15RCw2QkFBNkIsR0FBRyxNQUFBQSxDQUFPOUQsS0FBSyxFQUFFVSxXQUFXLEtBQUs7RUFDbEUsT0FBT2hCLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQ08sS0FBSyxDQUFDO0lBQUV1RCxVQUFVLEVBQUV4RDtFQUFNLENBQUMsQ0FBQyxDQUFDVyxNQUFNLENBQUNELFdBQVcsQ0FBQztBQUM1RSxDQUFDOztBQUVEO0FBQ0EsTUFBTXFELGlCQUFpQixHQUFHLE1BQU9DLFlBQVksSUFBSztFQUNoRCxPQUFPdEUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRStEO0VBQWEsQ0FBQyxDQUFDLENBQUM3RCxLQUFLLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBQ0Q7QUFDQTtBQUNBLE1BQU04RCxjQUFjLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ2pDLE9BQU8sTUFBTXZFLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FDNUIwRCxJQUFJLENBQUMsY0FBYyxFQUFFLCtCQUErQixFQUFFLEdBQUcsRUFBRSwrQkFBK0IsQ0FBQyxDQUMzRkEsSUFBSSxDQUFDLFdBQVcsRUFBRSw0QkFBNEIsRUFBRSxHQUFHLEVBQUUscUJBQXFCLENBQUMsQ0FDM0UvQyxNQUFNLENBQ0wsaUJBQWlCLEVBQ2pCLCtCQUErQixFQUMvQiw0QkFBNEIsRUFDNUIsMEJBQTBCLEVBQzFCWCxFQUFFLENBQUN3RSxHQUFHLENBQUMsZ0VBQWdFLENBQUMsRUFDeEUsNEJBQTRCLEVBQzVCeEUsRUFBRSxDQUFDd0UsR0FBRyxDQUFDLHdEQUF3RCxDQUFDLEVBQ2hFeEUsRUFBRSxDQUFDd0UsR0FBRyxDQUFDLGdFQUFnRSxDQUFDLEVBQ3hFLHVCQUF1QixFQUN2Qiw4QkFBOEIsRUFDOUIseUJBQXlCLEVBQ3pCLHlCQUNGLENBQUMsQ0FDQUMsT0FBTyxDQUFDLDRCQUE0QixFQUFFLDBCQUEwQixFQUFFLGlCQUFpQixDQUFDO0FBQ3pGLENBQUM7O0FBSUQ7QUFDQSxNQUFNQyxtQkFBbUIsR0FBRyxNQUFBQSxDQUFPN0QsRUFBRSxFQUFFOEQsTUFBTSxLQUFLO0VBQ2hELE9BQU8sTUFBTTNFLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FDNUJPLEtBQUssQ0FBQztJQUFFTTtFQUFHLENBQUMsQ0FBQyxDQUNiSSxNQUFNLENBQUM7SUFBRTJELGVBQWUsRUFBRUQ7RUFBTyxDQUFDLENBQUM7QUFDeEMsQ0FBQzs7QUFFRDtBQUNBLE1BQU1FLGdCQUFnQixHQUFHLE1BQU9oRSxFQUFFLElBQUs7RUFDckMsT0FBTyxNQUFNYixFQUFFLENBQUMsY0FBYyxDQUFDLENBQzVCTyxLQUFLLENBQUM7SUFBRU07RUFBRyxDQUFDLENBQUMsQ0FDYk0sR0FBRyxDQUFDLENBQUM7QUFDVixDQUFDOztBQUVEO0FBQ0EsTUFBTTJELGlCQUFpQixHQUFHLE1BQUFBLENBQUEsS0FBWTtFQUNwQyxPQUFPLE1BQU05RSxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUNXLE1BQU0sQ0FDcEMsSUFBSTtFQUFHO0VBQ1Asa0JBQWtCLEVBQ2xCLGVBQWUsRUFDZixhQUFhLEVBQ2IsVUFBVSxFQUNWLGVBQWUsRUFDZixzQkFBc0IsRUFDdEIsa0JBQWtCLEVBQ2xCLHNCQUFzQixFQUN0QixVQUFVLEVBQ1YsaUJBQ0YsQ0FBQztBQUNILENBQUM7O0FBRUQ7O0FBRUE7QUFDQSxNQUFNb0Usa0JBQWtCLEdBQUcsTUFBT2xFLEVBQUUsSUFBSztFQUN2QyxPQUFPYixFQUFFLENBQUMsY0FBYyxDQUFDLENBQ3RCTyxLQUFLLENBQUM7SUFBRXlELGNBQWMsRUFBRW5EO0VBQUcsQ0FBQyxDQUFDLENBQzdCRixNQUFNLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLENBQUM7RUFBQSxDQUNyQ0YsS0FBSyxDQUFDLENBQUM7QUFDWixDQUFDOztBQUVEO0FBQ0EsTUFBTXVFLGNBQWMsR0FBRyxNQUFPQyxlQUFlLElBQUs7RUFDaEQsT0FBT2pGLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQ0ksTUFBTSxDQUFDNkUsZUFBZSxDQUFDO0FBQ2pELENBQUM7O0FBR0Q7QUFDQSxNQUFNQyxrQkFBa0IsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDckMsT0FBT2xGLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQ1csTUFBTSxDQUFDLEdBQUcsQ0FBQztBQUNyQyxDQUFDOztBQUVEO0FBQ0EsTUFBTXdFLDJCQUEyQixHQUFHLE1BQU90RSxFQUFFLElBQUs7RUFDaEQsT0FBT2IsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDTyxLQUFLLENBQUM7SUFBRXlELGNBQWMsRUFBRW5EO0VBQUcsQ0FBQyxDQUFDLENBQUNKLEtBQUssQ0FBQyxDQUFDO0FBQy9ELENBQUM7QUFFRCxNQUFNMkUsK0JBQStCLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBQ2xELE9BQU9wRixFQUFFLENBQUMsY0FBYyxDQUFDLENBQ3RCMEQsSUFBSSxDQUFDLGNBQWMsRUFBRSw4QkFBOEIsRUFBRSxHQUFHLEVBQUUsOEJBQThCLENBQUMsQ0FDekZBLElBQUksQ0FBQyxXQUFXLEVBQUUsOEJBQThCLEVBQUUsR0FBRyxFQUFFLDJCQUEyQixDQUFDLENBQUM7RUFBQSxDQUNwRi9DLE1BQU0sQ0FDTCw2QkFBNkIsRUFDN0IsdUJBQXVCLEVBQ3ZCLHlCQUF5QixFQUN6Qiw2QkFBNkIsRUFDN0IscUJBQXFCO0VBQUM7RUFDdEIsd0JBQXdCLENBQUU7RUFDNUIsQ0FBQztBQUNMLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNMEUsNEJBQTRCLEdBQUcsTUFBT0MsYUFBYSxJQUFLO0VBQzVELE9BQU90RixFQUFFLENBQUMsWUFBWSxDQUFDLENBQ3BCMEQsSUFBSSxDQUFDLFdBQVcsRUFBRSx5QkFBeUIsRUFBRSxHQUFHLEVBQUUsd0JBQXdCLENBQUMsQ0FDM0VBLElBQUksQ0FBQyxjQUFjLEVBQUUsMkJBQTJCLEVBQUUsR0FBRyxFQUFFLDhCQUE4QixDQUFDLENBQUM7RUFBQSxDQUN2Rm5ELEtBQUssQ0FBQywyQkFBMkIsRUFBRStFLGFBQWEsQ0FBQyxDQUNqRDNFLE1BQU0sQ0FDTCwwQkFBMEIsRUFDMUIsMEJBQTBCLEVBQzFCLHdCQUF3QixFQUN4QixxQkFBcUIsRUFDckIsc0JBQXNCLEVBQ3RCLG9CQUFvQixFQUNwQixzQkFBc0IsRUFDdEIsK0JBQStCO0VBQUU7RUFDakMsOEJBQThCLEVBQzlCLDJCQUNGLENBQUM7QUFDTCxDQUFDOztBQUVEO0FBQ0EsTUFBTTRFLGlCQUFpQixHQUFHLE1BQU8xRSxFQUFFLElBQUs7RUFDdEMsT0FBT2IsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDTyxLQUFLLENBQUMsZUFBZSxFQUFFTSxFQUFFLENBQUMsQ0FBQ00sR0FBRyxDQUFDLENBQUM7QUFDMUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsTUFBTXFFLGtCQUFrQixHQUFHLE1BQUFDLEtBQUEsSUFBNkM7RUFBQSxJQUF0QztJQUFFQyxJQUFJO0lBQUVwRixLQUFLO0lBQUVxRixPQUFPO0lBQUVDO0VBQVEsQ0FBQyxHQUFBSCxLQUFBO0VBQ2pFLE9BQU8sTUFBTXpGLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDSSxNQUFNLENBQUM7SUFDekNzRixJQUFJO0lBQ0pwRixLQUFLO0lBQ0xxRixPQUFPO0lBQ1BDLE9BQU87SUFDUEMsVUFBVSxFQUFFN0YsRUFBRSxDQUFDOEYsRUFBRSxDQUFDQyxHQUFHLENBQUM7RUFDeEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVEQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUVmOUQsZ0JBQWdCO0VBQ2hCUyxhQUFhO0VBQ2JHLGdCQUFnQjtFQUNoQjdDLGdCQUFnQjtFQUNoQkcsb0JBQW9CO0VBQ3BCSyxpQkFBaUI7RUFDakJFLGlCQUFpQjtFQUNqQkcsZ0JBQWdCO0VBQ2hCRyxnQkFBZ0I7RUFDaEJFLGNBQWM7RUFDZEUsZUFBZTtFQUNmQyxlQUFlO0VBQ2ZDLGNBQWM7RUFDZEMsY0FBYztFQUNkQyxvQkFBb0I7RUFDcEJ3Qix3QkFBd0I7RUFDeEJDLHFCQUFxQjtFQUNyQkMscUJBQXFCO0VBQ3JCRSxvQkFBb0I7RUFDcEJDLG9CQUFvQjtFQUNwQlAsc0JBQXNCO0VBQ3RCVyxzQkFBc0I7RUFDdEJFLDBCQUEwQjtFQUMxQkUsdUJBQXVCO0VBQ3ZCRSxzQkFBc0I7RUFDdEJDLHNCQUFzQjtFQUN0QkMsdUJBQXVCO0VBQ3ZCQyw2QkFBNkI7RUFDN0JDLGlCQUFpQjtFQUNqQmIsMEJBQTBCO0VBQzFCZSxjQUFjO0VBQ2RHLG1CQUFtQjtFQUNuQkcsZ0JBQWdCO0VBQ2hCQyxpQkFBaUI7RUFDakJFLGNBQWM7RUFDZEQsa0JBQWtCO0VBQ2xCRyxrQkFBa0I7RUFDbEJDLDJCQUEyQjtFQUMzQkMsK0JBQStCO0VBQy9CQyw0QkFBNEI7RUFDNUJFLGlCQUFpQjtFQUNqQkM7QUFFRixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db","require","createAdminQuery","adminData","insert","getAdminByEmailQuery","email","where","email_admin","first","getAllAdminsQuery","select","getAdminByIdQuery","id","id_admin","updateAdminQuery","updatedData","update","deleteAdminQuery","del","createFaqQuery","faqData","getAllFaqsQuery","getFaqByIdQuery","updateFaqQuery","deleteFaqQuery","createOrganizerQuery","_ref","nom_organisateur","prenom_organisateur","email_organisateur","tel_organisateur","mdp_organisateur","date_inscription","isActive","insertTokenQuery","_ref2","token","expiresAt","console","log","result","expires_at","error","getTokenQuery","userId","user_id","deleteTokenQuery","completeOrganizerQuery","_ref3","getOrganizerByEmailQuery","getAllOrganizersQuery","getOrganizerByIdQuery","id_organisateur","updateOrganizerQuery","deleteOrganizerQuery","getEventWithOrganizerQuery","idEvenement","join","createParticipantQuery","participantData","getParticipantByEmailQuery","email_part","getParticipantByIdQuery","id_participant","updateParticipantQuery","deleteParticipantQuery","getAllParticipantsQuery","updateParticipantByEmailQuery","getEventByIdQuery","id_evenement","getTicketSales","raw","groupBy","updatePaymentStatus","status","status_paiement","deleteTicketSale","getTicketSalesAll","getParticipantById","addCertificate","certificateData","getAllCertificates","getCertificateByParticipant","getAllParticipantsforCertificat","getCertificatesByParticipant","participantId","deleteCertificate","saveContactMessage","_ref4","name","subject","message","created_at","fn","now","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\","sources":["queries.js"],"sourcesContent":["const db = require('./db');\r\n\r\n// **** ADMIN *********\r\n// Requ√™te pour cr√©er un administrateur\r\nconst createAdminQuery = async (adminData) => {\r\n  return db('admin').insert(adminData);\r\n};\r\n\r\n// Requ√™te pour obtenir un administrateur par email\r\nconst getAdminByEmailQuery = async (email) => {\r\n  return db('admin').where({ email_admin: email }).first();\r\n};\r\n\r\n// Requ√™te pour obtenir tous les administrateurs\r\nconst getAllAdminsQuery = async () => {\r\n  return db('admin').select('*');\r\n};\r\n\r\n// Requ√™te pour obtenir un administrateur par ID\r\nconst getAdminByIdQuery = async (id) => {\r\n  return db('admin').where({ id_admin: id }).first();\r\n};\r\n\r\n// Requ√™te pour mettre √† jour un administrateur\r\nconst updateAdminQuery = async (id, updatedData) => {\r\n  return db('admin').where({ id_admin: id }).update(updatedData);\r\n};\r\n\r\n// Requ√™te pour supprimer un administrateur\r\nconst deleteAdminQuery = async (id) => {\r\n  return db('admin').where({ id_admin: id }).del();\r\n};\r\n\r\n//***********FAQ*************\r\n// Cr√©er une nouvelle FAQ\r\nconst createFaqQuery = async (faqData) => {\r\n  const [id] = await db('faq').insert(faqData);\r\n  return { id, ...faqData };\r\n};\r\n\r\n// Obtenir toutes les FAQs\r\nconst getAllFaqsQuery = async () => {\r\n  return db('faq').select('*');\r\n};\r\n\r\n// Obtenir une FAQ par ID\r\nconst getFaqByIdQuery = async (id) => {\r\n  return db('faq').where({ id }).first();\r\n};\r\n\r\n// Mettre √† jour une FAQ\r\nconst updateFaqQuery = async (id, updatedData) => {\r\n  return db('faq').where({ id }).update(updatedData);\r\n};\r\n\r\n// Supprimer une FAQ\r\nconst deleteFaqQuery = async (id) => {\r\n  return db('faq').where({ id }).del();\r\n};\r\n\r\n// ************Organisateur***************\r\n\r\n// Requ√™te pour cr√©er un organisateur avec la date d'inscription\r\nconst createOrganizerQuery = async ({ nom_organisateur, prenom_organisateur, email_organisateur, tel_organisateur, mdp_organisateur, date_inscription, isActive }) => {\r\n  const [id] = await db('organisateur').insert({\r\n    nom_organisateur,\r\n    prenom_organisateur,\r\n    email_organisateur,\r\n    tel_organisateur,\r\n    mdp_organisateur,\r\n    date_inscription,\r\n    isActive\r\n  });\r\n  return id; // retourne l'ID ins√©r√©\r\n};\r\n\r\n// Requ√™te pour ins√©rer un jeton d'activation dans la base de donn√©es\r\nconst insertTokenQuery = async ({ token, expiresAt, email, nom_organisateur, prenom_organisateur, tel_organisateur, mdp_organisateur }) => {\r\n  try {\r\n    console.log('Pr√©paration pour ins√©rer le token et les donn√©es utilisateur:', { token, expiresAt, email });\r\n    const result = await db('tokens').insert({\r\n      token,\r\n      expires_at: expiresAt,\r\n      email,\r\n      nom_organisateur,\r\n      prenom_organisateur,\r\n      tel_organisateur,\r\n      mdp_organisateur,\r\n    });\r\n    console.log('Insertion r√©ussie dans la table tokens:', result);\r\n    return result;\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'insertion du token dans la table:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst getTokenQuery = async (userId, token) => {\r\n  return db('tokens').where({ user_id: userId, token }).first();\r\n};\r\n\r\n// Requ√™te pour supprimer un token d'activation\r\nconst deleteTokenQuery = async (userId, token) => {\r\n  return db('tokens').where({ user_id: userId, token }).del();\r\n};\r\n\r\n// Requ√™te pour mettre √† jour les informations compl√©mentaires d'un organisateur\r\nconst completeOrganizerQuery = async ({ prenom_organisateur, tel_organisateur, email_organisateur }) => {\r\n  return db('organisateur')\r\n    .where({ email_organisateur })\r\n    .update({ prenom_organisateur, tel_organisateur });\r\n};\r\n\r\n// Requ√™te pour obtenir un organisateur par email\r\nconst getOrganizerByEmailQuery = async (email) => {\r\n  return db('organisateur').where({ email_organisateur: email }).first();\r\n};\r\n\r\n// Requ√™te pour obtenir tous les organisateurs\r\nconst getAllOrganizersQuery = async () => {\r\n  return db('organisateur').select('*');\r\n};\r\n\r\n// Requ√™te pour obtenir un organisateur par ID\r\nconst getOrganizerByIdQuery = async (id) => {\r\n  return db('organisateur')\r\n    .where({ id_organisateur: id })\r\n    .select('nom_organisateur', 'prenom_organisateur', 'email_organisateur', 'tel_organisateur', 'date_inscription')\r\n    .first();\r\n};\r\n\r\n// Requ√™te pour mettre √† jour un organisateur\r\nconst updateOrganizerQuery = async (id, updatedData) => {\r\n  return await db('organisateur').where({ id_organisateur: id }).update(updatedData);\r\n};\r\n\r\n// Requ√™te pour supprimer un organisateur\r\nconst deleteOrganizerQuery = async (id) => {\r\n  return db('organisateur').where({ id_organisateur: id }).del();\r\n};\r\n\r\nconst getEventWithOrganizerQuery = async (idEvenement) => {\r\n  return db('evenement')\r\n    .join('organisateur', 'evenement.id_organisateur', 'organisateur.id_organisateur')\r\n    .where({ 'evenement.id_evenement': idEvenement })\r\n    .select(\r\n      'evenement.*',\r\n      'organisateur.tel_organisateur',\r\n      'organisateur.email_organisateur'\r\n    )\r\n    .first();\r\n};\r\n\r\n// ************Participant***************\r\n\r\n// Requ√™te pour cr√©er un participant\r\nconst createParticipantQuery = async (participantData) => {\r\n  const [id] = await db('participants').insert(participantData);\r\n  return id; // retourne l'ID ins√©r√©\r\n};\r\n\r\n// Requ√™te pour obtenir un participant par email\r\n// const getParticipantByEmailQuery = async (email) => {\r\n//   return db('participants').where({ email_part: email }).first();\r\n// };\r\n\r\n// Requ√™te pour obtenir un participant par email\r\nconst getParticipantByEmailQuery = async (email) => {\r\n  return db('participants')\r\n    .select(\r\n      'id_participant',\r\n      'nom_part',\r\n      'email_part',\r\n      'mdp_part as mdp_participant', // Alias pour renommer mdp_part\r\n      'genre_part',\r\n      'telephone_part',\r\n      'ville_part',\r\n      'codepostal_part',\r\n      'statut_part',\r\n      'date_inscription',\r\n      'id_organisateur'\r\n    )\r\n    .where({ email_part: email })\r\n    .first();\r\n};\r\n\r\n// Requ√™te pour obtenir un participant par ID\r\nconst getParticipantByIdQuery = async (id) => {\r\n  return db('participants').where({ id_participant: id }).first();\r\n};\r\n\r\n// Requ√™te pour mettre √† jour un participant\r\nconst updateParticipantQuery = async (id, updatedData) => {\r\n  return db('participants').where({ id_participant: id }).update(updatedData);\r\n};\r\n\r\n// Requ√™te pour supprimer un participant\r\nconst deleteParticipantQuery = async (id) => {\r\n  return db('participants').where({ id_participant: id }).del();\r\n};\r\n\r\n// Requ√™te pour obtenir tous les participants\r\nconst getAllParticipantsQuery = async () => {\r\n  return db('participants').select('*');\r\n};\r\n\r\n// Requ√™te pour mettre √† jour un participant via son email\r\nconst updateParticipantByEmailQuery = async (email, updatedData) => {\r\n  return db('participants').where({ email_part: email }).update(updatedData);\r\n};\r\n\r\n//ajoutez une requ√™te pour obtenir les d√©tails d'un √©v√©nement \r\nconst getEventByIdQuery = async (id_evenement) => {\r\n  return db('evenement').where({ id_evenement }).first();\r\n};\r\n//achat billets\r\n// üîπ R√©cup√©rer toutes les ventes de billets\r\nconst getTicketSales = async () => {\r\n  return await db(\"achatbillets\")\r\n    .join(\"organisateur\", \"achatbillets.nom_organisateur\", \"=\", \"organisateur.nom_organisateur\")\r\n    .join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\")\r\n    .select(\r\n      \"achatbillets.id\",\r\n      \"organisateur.nom_organisateur\",\r\n      \"achatbillets.nom_evenement\",\r\n      \"achatbillets.type_ticket\",\r\n      db.raw(\"SUM(achatbillets.total_billets_vendus) as total_billets_vendus\"),\r\n      \"achatbillets.prix_unitaire\",\r\n      db.raw(\"SUM(achatbillets.montant_collecte) as montant_collecte\"),\r\n      db.raw(\"SUM(achatbillets.montant_a_transferer) as montant_a_transferer\"),\r\n      \"achatbillets.acheteur\",\r\n      \"achatbillets.status_paiement\",\r\n      \"achatbillets.date_achat\",\r\n      \"evenement.types_tickets\"\r\n    )\r\n    .groupBy(\"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", \"achatbillets.id\");\r\n};\r\n\r\n\r\n\r\n// üîπ Mettre √† jour le statut de paiement\r\nconst updatePaymentStatus = async (id, status) => {\r\n  return await db(\"achatbillets\")\r\n    .where({ id })\r\n    .update({ status_paiement: status });\r\n};\r\n\r\n// üîπ Supprimer une vente de billet\r\nconst deleteTicketSale = async (id) => {\r\n  return await db(\"achatbillets\")\r\n    .where({ id })\r\n    .del();\r\n};\r\n\r\n// nouveau teste\r\nconst getTicketSalesAll = async () => {\r\n  return await db(\"achatbillets\").select(\r\n    \"id\",  // ‚úÖ On inclut l'ID unique de chaque achat\r\n    \"nom_organisateur\",\r\n    \"nom_evenement\",\r\n    \"type_ticket\",\r\n    \"quantite\",\r\n    \"prix_unitaire\",\r\n    \"total_billets_vendus\",\r\n    \"montant_collecte\",\r\n    \"montant_a_transferer\",\r\n    \"acheteur\",\r\n    \"status_paiement\"\r\n  );\r\n};\r\n\r\n// ============== CERTIFICAT =====================\r\n\r\n// V√©rifier si un participant existe\r\nconst getParticipantById = async (id) => {\r\n  return db('participants')\r\n    .where({ id_participant: id })\r\n    .select('id_participant', 'nom_part') // ‚úÖ V√©rification que `nom` est bien r√©cup√©r√©\r\n    .first();\r\n};\r\n\r\n// Ajouter un certificat\r\nconst addCertificate = async (certificateData) => {\r\n  return db('certificat').insert(certificateData);\r\n};\r\n\r\n\r\n// R√©cup√©rer tous les certificats\r\nconst getAllCertificates = async () => {\r\n  return db('certificat').select('*');\r\n};\r\n\r\n// R√©cup√©rer un certificat par participant\r\nconst getCertificateByParticipant = async (id) => {\r\n  return db('certificat').where({ id_participant: id }).first();\r\n};\r\n\r\nconst getAllParticipantsforCertificat = async () => {\r\n  return db('participants')\r\n    .join('organisateur', 'participants.id_organisateur', '=', 'organisateur.id_organisateur')\r\n    .join('evenement', 'organisateur.id_organisateur', '=', 'evenement.id_organisateur') // Jointure avec les √©v√©nements\r\n    .select(\r\n      'participants.id_participant',\r\n      'participants.nom_part',\r\n      'participants.email_part',\r\n      'participants.telephone_part',\r\n      'evenement.nom_event',// R√©cup√©ration du nom de l'√©v√©nement\r\n      'evenement.id_evenement', // ‚úÖ Ajout de id_evenement\r\n    );\r\n};\r\n\r\n// R√©cup√©rer les certificats d'un participant\r\n// const getCertificatesByParticipant = async (participantId) => {\r\n//   return db(\"certificat\")\r\n//     .join(\"evenement\", \"certificat.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n//     .where(\"certificat.id_participant\", participantId)\r\n//     .select(\r\n//       \"certificat.id_certificat\",\r\n//       \"evenement.nom_event\",\r\n//       'evenement.id_evenement', // ‚úÖ Ajout de id_evenement\r\n//       \"certificat.date_distribution\",\r\n//       \"certificat.url_certificat\"\r\n//     );\r\n// };\r\nconst getCertificatesByParticipant = async (participantId) => {\r\n  return db(\"certificat\")\r\n    .join(\"evenement\", \"certificat.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n    .join(\"organisateur\", \"evenement.id_organisateur\", \"=\", \"organisateur.id_organisateur\") // Jointure avec l'organisateur\r\n    .where(\"certificat.id_participant\", participantId)\r\n    .select(\r\n      \"certificat.id_certificat\",\r\n      \"certificat.nom_titulaire\",\r\n      'evenement.id_evenement',\r\n      \"evenement.nom_event\",\r\n      \"evenement.date_debut\",\r\n      \"evenement.date_fin\",\r\n      \"evenement.lieu_event\",\r\n      \"organisateur.nom_organisateur\", // R√©cup√©ration du nom de l'organisateur\r\n      \"certificat.date_distribution\",\r\n      \"certificat.url_certificat\"\r\n    );\r\n};\r\n\r\n// Supprimer un certificat par ID\r\nconst deleteCertificate = async (id) => {\r\n  return db(\"certificat\").where(\"id_certificat\", id).del();\r\n};\r\n\r\n//contact partie page d'accueil\r\n// Enregistrer un message de contact\r\nconst saveContactMessage = async ({ name, email, subject, message }) => {\r\n  return await db('contact_messages').insert({\r\n    name,\r\n    email,\r\n    subject,\r\n    message,\r\n    created_at: db.fn.now()\r\n  });\r\n};\r\n\r\nmodule.exports = {\r\n\r\n  insertTokenQuery,\r\n  getTokenQuery,\r\n  deleteTokenQuery,\r\n  createAdminQuery,\r\n  getAdminByEmailQuery,\r\n  getAllAdminsQuery,\r\n  getAdminByIdQuery,\r\n  updateAdminQuery,\r\n  deleteAdminQuery,\r\n  createFaqQuery,\r\n  getAllFaqsQuery,\r\n  getFaqByIdQuery,\r\n  updateFaqQuery,\r\n  deleteFaqQuery,\r\n  createOrganizerQuery,\r\n  getOrganizerByEmailQuery,\r\n  getAllOrganizersQuery,\r\n  getOrganizerByIdQuery,\r\n  updateOrganizerQuery,\r\n  deleteOrganizerQuery,\r\n  completeOrganizerQuery,\r\n  createParticipantQuery,\r\n  getParticipantByEmailQuery,\r\n  getParticipantByIdQuery,\r\n  updateParticipantQuery,\r\n  deleteParticipantQuery,\r\n  getAllParticipantsQuery,\r\n  updateParticipantByEmailQuery,\r\n  getEventByIdQuery,\r\n  getEventWithOrganizerQuery,\r\n  getTicketSales,\r\n  updatePaymentStatus,\r\n  deleteTicketSale,\r\n  getTicketSalesAll,\r\n  addCertificate,\r\n  getParticipantById,\r\n  getAllCertificates,\r\n  getCertificateByParticipant,\r\n  getAllParticipantsforCertificat,\r\n  getCertificatesByParticipant,\r\n  deleteCertificate,\r\n  saveContactMessage,\r\n\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742766913204},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\OrganizerControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst bcrypt = require('bcrypt');\nconst db = require('../db');\nconst jwt = require('jsonwebtoken');\nconst {\n  sendActivationEmail\n} = require('./OrganizerEmailService'); // Import du service d'envoi d'email\nconst Token = require('../middleware/jwtMiddleware'); // Mod√®le pour la table Token\nconst crypto = require('crypto');\nconst nodemailer = require('nodemailer');\nconst {\n  createOrganizerQuery,\n  getOrganizerByEmailQuery,\n  getAllOrganizersQuery,\n  getOrganizerByIdQuery,\n  getEventWithOrganizerQuery,\n  updateOrganizerQuery,\n  deleteOrganizerQuery,\n  insertTokenQuery,\n  getParticipantByIdQuery\n} = require('../queries'); // Import des requ√™tes\nconst {\n  log\n} = require('console');\nconst {\n  Parser\n} = require(\"json2csv\");\n\n// Fonction de connexion pour l'organisateur\nexports.login = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  console.log('Donn√©es re√ßues :', req.body); // Log des donn√©es re√ßues\n\n  try {\n    const organizer = await getOrganizerByEmailQuery(email);\n    if (!organizer) {\n      return res.status(404).json({\n        message: 'Organisateur non trouv√©'\n      });\n    }\n\n    // V√©rifiez si le compte est activ√©\n    if (!organizer.isActive) {\n      return res.status(403).json({\n        message: \"Veuillez activer votre compte en v√©rifiant votre email.\"\n      });\n    }\n    const validPassword = await bcrypt.compare(password, organizer.mdp_organisateur);\n    if (!validPassword) {\n      return res.status(400).json({\n        message: 'Mot de passe incorrect'\n      });\n    }\n\n    // Cr√©er un token JWT avec l'ID de l'organisateur\n    const token = jwt.sign({\n      id: organizer.id_organisateur,\n      role: 'organizer'\n    }, process.env.JWT_SECRET, {\n      expiresIn: '1h'\n    });\n    res.status(200).json({\n      message: 'Connexion r√©ussie',\n      token,\n      // Envoie le token au frontend\n      organizerId: organizer.id_organisateur // Ajoute l'ID de l'organisateur pour redirection au dashboard\n    });\n  } catch (error) {\n    console.error('Erreur serveur :', error);\n    res.status(500).json({\n      message: 'Erreur serveur',\n      error\n    });\n  }\n};\nexports.createOrganizer = async (req, res) => {\n  const {\n    nom_organisateur,\n    prenom_organisateur,\n    email_organisateur,\n    tel_organisateur,\n    mdp_organisateur\n  } = req.body;\n  console.log(\"Donn√©es re√ßues:\", req.body);\n  try {\n    console.log(\"V√©rification de l'email existant...\");\n    const existingOrganizer = await getOrganizerByEmailQuery(email_organisateur);\n    const existingTokenEntry = await db('tokens').where({\n      email: email_organisateur\n    }).first();\n    if (existingOrganizer || existingTokenEntry) {\n      return res.status(400).json({\n        message: 'Cet email est d√©j√† enregistr√©.'\n      });\n    }\n    console.log(\"Hashing du mot de passe...\");\n    const hashedPassword = await bcrypt.hash(mdp_organisateur, 10);\n\n    // G√©n√©ration d'un token d'activation unique\n    const activationToken = crypto.randomBytes(20).toString('hex');\n    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // Expiration dans 24 heures\n\n    // Stocker les donn√©es dans la table 'tokens'\n    console.log(\"Insertion du token et des donn√©es utilisateur dans la table tokens...\");\n    await insertTokenQuery({\n      token: activationToken,\n      expiresAt,\n      email: email_organisateur,\n      nom_organisateur,\n      prenom_organisateur,\n      tel_organisateur,\n      mdp_organisateur: hashedPassword\n    });\n\n    // Envoyer l'e-mail d'activation avec le lien contenant le m√™me token\n    console.log(\"Envoi de l'email d'activation...\");\n    await sendActivationEmail(email_organisateur, activationToken); // Transmettez le token ici\n    console.log(\"Token g√©n√©r√© pour l'activation :\", activationToken);\n    res.status(201).json({\n      message: 'Inscription r√©ussie ! Veuillez v√©rifier votre email pour confirmer.'\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de l'inscription:\", error);\n    res.status(500).json({\n      message: \"Erreur lors de l'inscription. Veuillez r√©essayer.\",\n      error: error.message\n    });\n  }\n};\n\n//r√©cup√©ration de l'organisateur par id\nexports.getOrganizerById = async (req, res) => {\n  console.log(\"Requ√™te re√ßue avec params :\", req.params); // V√©rifier les param√®tres\n\n  const id = parseInt(req.params.id, 10); // Convertir l'ID en entier\n\n  if (isNaN(id)) {\n    return res.status(400).json({\n      message: \"ID invalide, doit √™tre un nombre.\"\n    });\n  }\n  try {\n    // Correction : Convertir l'ID et utiliser le bon champ \"id_organisateur\"\n    const organizer = await db('organisateur').where('id_organisateur', id).first();\n    if (!organizer) {\n      return res.status(404).json({\n        message: \"Organisateur non trouv√©\"\n      });\n    }\n    res.json(organizer);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration de l'organisateur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// R√©cup√©rer le nombre total d'organisateurs\n\nexports.getOrganizerCount = async (req, res) => {\n  try {\n    const count = await db('organisateur').count('id_organisateur as total').first(); // ‚úÖ R√©cup√®re seulement le nombre total\n    res.status(200).json({\n      total: count.total\n    }); // ‚úÖ Retourne { total: X }\n  } catch (error) {\n    console.error(\"Erreur lors du comptage des organisateurs :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\nexports.getProfilOrganizer = async (req, res) => {\n  try {\n    // Assurez-vous que organizerId est un entier.\n    const organizerId = parseInt(req.user?.id, 10);\n    if (!organizerId) {\n      return res.status(400).json({\n        message: 'ID de l\\'organisateur manquant ou invalide'\n      });\n    }\n    const organizer = await getOrganizerByIdQuery(organizerId);\n    console.log(\"Donn√©es de l'organisateur :\", organizer);\n    if (!organizer) {\n      return res.status(404).json({\n        message: 'Organisateur non trouv√©'\n      });\n    }\n    res.status(200).json({\n      name: organizer.nom_organisateur,\n      email: organizer.email_organisateur,\n      prenom: organizer.prenom_organisateur,\n      tel_organisateur: organizer.tel_organisateur,\n      date_inscription: organizer.date_inscription\n    });\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration du profil :', error);\n    res.status(500).json({\n      message: 'Erreur serveur'\n    });\n  }\n};\nexports.updateProfilOrganizer = async (req, res) => {\n  const organizerId = req.user?.id;\n  const {\n    name,\n    prenom,\n    email,\n    tel_organisateur,\n    oldPassword,\n    newPassword,\n    confirmPassword\n  } = req.body;\n  try {\n    console.log(\"Donn√©es re√ßues :\", {\n      name,\n      prenom,\n      email,\n      tel_organisateur,\n      oldPassword,\n      newPassword,\n      confirmPassword\n    });\n\n    // R√©cup√©ration de l'organisateur\n    const organizer = await getOrganizerByIdQuery(organizerId);\n    if (!organizer) {\n      return res.status(404).json({\n        message: 'Organisateur non trouv√©'\n      });\n    }\n    console.log(\"Organisateur r√©cup√©r√© :\", organizer);\n\n    // Initialisation des donn√©es √† mettre √† jour\n    const updateData = {\n      nom_organisateur: name,\n      prenom_organisateur: prenom,\n      email_organisateur: email,\n      tel_organisateur: String(tel_organisateur)\n    };\n\n    // V√©rification de l'ancien mot de passe si n√©cessaire\n    if (oldPassword && organizer.mdp_organisateur) {\n      const isMatch = await bcrypt.compare(oldPassword, organizer.mdp_organisateur);\n      if (!isMatch) {\n        return res.status(400).json({\n          message: 'Ancien mot de passe incorrect'\n        });\n      }\n    } else if (oldPassword && !organizer.mdp_organisateur) {\n      // Si aucun ancien mot de passe n'est d√©fini pour cet utilisateur, permettre la mise √† jour\n      if (newPassword && newPassword === confirmPassword) {\n        const hashedPassword = await bcrypt.hash(newPassword, 10);\n        updateData.mdp_organisateur = hashedPassword;\n      } else {\n        return res.status(400).json({\n          message: 'Le nouveau mot de passe et la confirmation ne correspondent pas'\n        });\n      }\n    } else if (newPassword && newPassword !== confirmPassword) {\n      return res.status(400).json({\n        message: 'Le nouveau mot de passe et la confirmation ne correspondent pas'\n      });\n    }\n\n    // Hashage du nouveau mot de passe si fourni sans ancien mot de passe\n    if (newPassword && !oldPassword) {\n      const hashedPassword = await bcrypt.hash(newPassword, 10);\n      updateData.mdp_organisateur = hashedPassword;\n    }\n\n    // Mise √† jour de l'organisateur dans la base de donn√©es\n    const result = await updateOrganizerQuery(organizerId, updateData);\n    console.log('Donn√©es de mise √† jour :', updateData);\n    console.log('R√©sultat de la mise √† jour:', result);\n    if (result === 0) {\n      return res.status(400).json({\n        message: '√âchec de la mise √† jour du profil'\n      });\n    }\n    res.status(200).json({\n      message: 'Profil mis √† jour avec succ√®s'\n    });\n  } catch (error) {\n    console.error('Erreur lors de la mise √† jour du profil:', error);\n    res.status(500).json({\n      message: 'Erreur lors de la mise √† jour du profil',\n      error: error.message\n    });\n  }\n};\nexports.getAllOrganizers = async (req, res) => {\n  try {\n    const organizers = await db(\"organisateur\").leftJoin(\"evenement\", \"organisateur.id_organisateur\", \"evenement.id_organisateur\").select(\"organisateur.id_organisateur\", \"organisateur.nom_organisateur\", \"organisateur.prenom_organisateur\", \"organisateur.email_organisateur\").count(\"evenement.id_evenement as eventCount\") // Compter les √©v√©nements\n    .groupBy(\"organisateur.id_organisateur\"); // Grouper par organisateur\n\n    console.log(\"Organisateurs r√©cup√©r√©s :\", organizers);\n    res.status(200).json(organizers);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des organisateurs :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// Fonction pour modifier un organisateur\nexports.editOrganizer = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    nom_organisateur,\n    prenom_organisateur,\n    email_organisateur,\n    tel_organisateur,\n    mdp_organisateur\n  } = req.body;\n  try {\n    await updateOrganizerQuery(id, {\n      nom_organisateur,\n      prenom_organisateur,\n      email_organisateur,\n      tel_organisateur,\n      mdp_organisateur\n    });\n    res.status(200).json({\n      message: 'Organisateur modifi√© avec succ√®s'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la modification de l\\'organisateur',\n      error\n    });\n  }\n};\n\n// Fonction pour supprimer un organisateur\nexports.deleteOrganizer = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    await deleteOrganizerQuery(id); // Utilisation de la requ√™te externalis√©e\n    res.status(200).json({\n      message: 'Organisateur supprim√© avec succ√®s'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la suppression de l\\'organisateur',\n      error\n    });\n  }\n};\nexports.toggleOrganizerStatus = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const organizer = await getOrganizerByIdQuery(id);\n    if (!organizer) {\n      return res.status(404).json({\n        message: 'Organisateur non trouv√©'\n      });\n    }\n    const newStatus = !organizer.isActive;\n    await updateOrganizerQuery(id, {\n      isActive: newStatus\n    });\n    res.status(200).json({\n      isActive: newStatus\n    });\n  } catch (error) {\n    console.error('Erreur lors de l\\'activation/d√©sactivation :', error);\n    res.status(500).json({\n      message: 'Erreur lors de l\\'activation/d√©sactivation'\n    });\n  }\n};\nexports.activateAccount = async (req, res) => {\n  const {\n    token\n  } = req.params;\n  try {\n    // Affichage du token re√ßu dans l'URL pour v√©rification\n    console.log(\"Token de l'URL:\", `\"${token}\"`);\n\n    // R√©cup√©rer les donn√©es utilisateur en utilisant le token\n    const tokenEntry = await db('tokens').where({\n      token\n    }).first();\n    console.log(\"Token Entry dans la base de donn√©es:\", tokenEntry);\n\n    // V√©rification de la correspondance des tokens\n    if (tokenEntry && token !== tokenEntry.token) {\n      console.log(\"Les tokens ne correspondent pas !\");\n    }\n    if (!tokenEntry) {\n      return res.status(400).json({\n        message: \"Token non trouv√© dans la base de donn√©es.\"\n      });\n    }\n\n    // Afficher la date d'expiration et la date actuelle pour v√©rification\n    console.log(\"Date d'expiration :\", tokenEntry.expires_at);\n    console.log(\"Date actuelle :\", new Date());\n    if (new Date(tokenEntry.expires_at) < new Date()) {\n      return res.status(400).json({\n        message: \"Le lien d'activation a expir√©.\"\n      });\n    }\n\n    // R√©cup√©ration et affichage de tous les tokens pour diagnostic\n    const allTokens = await db('tokens').select('*');\n    console.log(\"Tous les tokens enregistr√©s :\", allTokens);\n\n    // Cr√©er l'organisateur dans la base de donn√©es\n    const organizerId = await createOrganizerQuery({\n      nom_organisateur: tokenEntry.nom_organisateur,\n      prenom_organisateur: tokenEntry.prenom_organisateur,\n      email_organisateur: tokenEntry.email,\n      tel_organisateur: tokenEntry.tel_organisateur,\n      mdp_organisateur: tokenEntry.mdp_organisateur,\n      date_inscription: new Date(),\n      isActive: true\n    });\n\n    // Supprimer le token apr√®s activation\n    await db('tokens').where({\n      token\n    }).del();\n\n    // Redirection vers la page de connexion ou autre\n    res.redirect(`http://localhost:3000/login?activation=success`);\n  } catch (error) {\n    console.error(\"Erreur lors de l'activation du compte :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de l'activation du compte.\"\n    });\n  }\n};\n\n// V√©rifiez si l'email existe d√©j√† dans la base de donn√©es\nexports.checkEmail = async (req, res) => {\n  const {\n    email\n  } = req.body;\n  try {\n    // V√©rifiez si l'email existe d√©j√† dans la base de donn√©es\n    const existingOrganizer = await db('organisateur').where({\n      email_organisateur: email\n    }).first();\n    if (existingOrganizer) {\n      // Si l'email est d√©j√† utilis√©\n      res.json({\n        isAvailable: false\n      });\n    } else {\n      // Si l'email n'est pas utilis√©\n      res.json({\n        isAvailable: true\n      });\n    }\n  } catch (error) {\n    console.error(\"Erreur lors de la v√©rification de l'email :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\nexports.checkFirstName = async (req, res) => {\n  const {\n    firstName\n  } = req.body;\n  try {\n    const existingOrganizer = await db('organisateur').where({\n      prenom_organisateur: firstName\n    }).first();\n    if (existingOrganizer) {\n      return res.json({\n        isAvailable: false\n      });\n    } else {\n      return res.json({\n        isAvailable: true\n      });\n    }\n  } catch (error) {\n    console.error(\"Erreur lors de la v√©rification du pr√©nom :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// V√©rification de l'unicit√© du nom (lastName)\nexports.checkLastName = async (req, res) => {\n  const {\n    lastName\n  } = req.body;\n  try {\n    const existingOrganizer = await db('organisateur').where({\n      nom_organisateur: lastName\n    }).first();\n    if (existingOrganizer) {\n      return res.json({\n        isAvailable: false\n      });\n    } else {\n      return res.json({\n        isAvailable: true\n      });\n    }\n  } catch (error) {\n    console.error(\"Erreur lors de la v√©rification du nom :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// Envoyer le code de r√©initialisation mot de passe oublier Organisateur\nexports.sendResetCode = async (req, res) => {\n  const {\n    email\n  } = req.body;\n  try {\n    const organizer = await db('organisateur').where({\n      email_organisateur: email\n    }).first();\n    if (!organizer) {\n      return res.status(404).json({\n        message: 'Email non trouv√©.'\n      });\n    }\n    const resetCode = crypto.randomBytes(3).toString('hex'); // G√©n√®re un code de r√©initialisation\n    const resetCodeExpiry = new Date(Date.now() + 15 * 60 * 1000); // Expire apr√®s 15 minutes\n\n    // Mettre √† jour la base de donn√©es avec le code et la date d'expiration\n    await db('organisateur').where({\n      email_organisateur: email\n    }).update({\n      reset_code: resetCode,\n      reset_code_expiry: resetCodeExpiry\n    });\n\n    // Envoyer l'email\n    const transporter = nodemailer.createTransport({\n      service: 'gmail',\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS\n      }\n    });\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: email,\n      subject: 'Code de r√©initialisation de mot de passe',\n      text: `Votre code de r√©initialisation est : ${resetCode}. Ce code expirera dans 15 minutes.`\n    };\n    await transporter.sendMail(mailOptions);\n    res.status(200).json({\n      message: 'Code de r√©initialisation envoy√© √† votre email.'\n    });\n  } catch (err) {\n    console.error('Erreur lors de l\\'envoi du code de r√©initialisation :', err);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// Valider le code de r√©initialisation mot de passe oublier Organisateur\nexports.verifyResetCode = async (req, res) => {\n  const {\n    email,\n    code\n  } = req.body;\n  try {\n    const organizer = await db('organisateur').where({\n      email_organisateur: email,\n      reset_code: code\n    }).first();\n    if (!organizer) {\n      return res.status(400).json({\n        message: 'Code invalide ou expir√©.'\n      });\n    }\n    const now = new Date();\n    if (new Date(organizer.reset_code_expiry) < now) {\n      return res.status(400).json({\n        message: 'Code expir√©.'\n      });\n    }\n    res.status(200).json({\n      message: 'Code valide.'\n    });\n  } catch (err) {\n    console.error('Erreur lors de la v√©rification du code :', err);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// R√©initialiser le mot de passe mot de passe oublier Organisateur\nexports.resetPassword = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  try {\n    const hashedPassword = await bcrypt.hash(password, 10);\n    await db('organisateur').where({\n      email_organisateur: email\n    }).update({\n      mdp_organisateur: hashedPassword,\n      reset_code: null,\n      reset_code_expiry: null\n    });\n    res.status(200).json({\n      message: 'Mot de passe r√©initialis√© avec succ√®s.'\n    });\n  } catch (err) {\n    console.error('Erreur lors de la r√©initialisation du mot de passe :', err);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n//*********************Creation d'evenement**************************\n\nexports.createEvent = async (req, res) => {\n  const {\n    nom_event,\n    type_event,\n    nom_sport,\n    lieu_event,\n    nbr_participant,\n    genre_participant,\n    // Inclut genre_participant\n    date_debut,\n    date_fin,\n    date_creationEvent,\n    description_accueil,\n    description_detail,\n    categorie_participant,\n    frais_inscription,\n    statut_event,\n    id_challenge,\n    tickets\n  } = req.body;\n  try {\n    // Validation pour genre_participant\n    if (!['Masculin', 'F√©minin', 'Mixte'].includes(genre_participant)) {\n      return res.status(400).json({\n        message: 'Valeur invalide pour genre_participant'\n      });\n    }\n    const organizerId = req.user?.id;\n    const logo_event = req.files.logo_event ? req.files.logo_event[0].filename : null;\n    const images_accueil = req.files.images_accueil ? req.files.images_accueil[0].filename : null;\n    const images_contenu = req.files.images_contenu ? req.files.images_contenu[0].filename : null;\n    // V√©rification et transformation des tickets en JSON\n    let types_tickets = [];\n    let nbr_total_tickets = 0;\n    if (tickets) {\n      try {\n        const parsedTickets = typeof tickets === 'string' ? JSON.parse(tickets) : tickets;\n        if (Array.isArray(parsedTickets)) {\n          types_tickets = parsedTickets.map(ticket => ({\n            type: ticket.type_ticket,\n            prix: ticket.prix_ticket,\n            quantite: parseInt(ticket.nbr_ticket_disponible, 10)\n          }));\n          nbr_total_tickets = types_tickets.reduce((total, ticket) => total + ticket.quantite, 0);\n        } else {\n          return res.status(400).json({\n            message: 'Le format des tickets est invalide'\n          });\n        }\n      } catch (error) {\n        console.error(\"Erreur de parsing des tickets :\", error);\n        return res.status(400).json({\n          message: 'Format JSON invalide pour tickets'\n        });\n      }\n    }\n    await db('evenement').insert({\n      nom_event,\n      type_event,\n      nom_sport,\n      lieu_event,\n      nbr_participant,\n      genre_participant,\n      // D√©j√† inclus ici\n      date_debut,\n      date_fin,\n      date_creationEvent,\n      description_accueil,\n      description_detail,\n      categorie_participant,\n      frais_inscription,\n      statut_event,\n      id_challenge,\n      logo_event,\n      images_accueil,\n      images_contenu,\n      id_organisateur: organizerId,\n      types_tickets: JSON.stringify(types_tickets),\n      // Stockage en JSON\n      nbr_total_tickets\n    });\n    res.status(201).json({\n      message: '√âv√©nement cr√©√© avec succ√®s'\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation de l'√©v√©nement:\", error);\n    res.status(500).json({\n      message: 'Erreur serveur',\n      error\n    });\n  }\n};\nexports.getEventAll = async (req, res) => {\n  try {\n    const events = await db('evenement').select('*');\n    if (events.length === 0) {\n      return res.status(200).json({\n        message: \"Aucun √©v√©nement trouv√©.\"\n      });\n    }\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      message: \"Erreur interne du serveur\"\n    });\n  }\n};\n\n// Contr√¥leur pour afficher les √©v√©nements avec les chemins des images\nexports.getAllEvents = async (req, res) => {\n  try {\n    const organizerId = req.user?.id;\n    const events = await db('evenement').where({\n      id_organisateur: organizerId\n    });\n    const eventsWithImagePaths = events.map(event => {\n      return {\n        ...event,\n        logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\n        images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\n        images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null\n      };\n    });\n    res.status(200).json(eventsWithImagePaths);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des √©v√©nements:', error);\n    res.status(500).json({\n      message: 'Erreur serveur'\n    });\n  }\n};\n\n//  controler pour la get un evenement pour modifier\nexports.getEventById = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const event = await db('evenement').where({\n      id_evenement: id\n    }).first();\n    if (!event) {\n      return res.status(404).json({\n        message: '√âv√©nement non trouv√©'\n      });\n    }\n    console.log(\"√âv√©nement r√©cup√©r√© :\", event); // Affichez les d√©tails r√©cup√©r√©s\n    res.status(200).json({\n      ...event,\n      logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\n      images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\n      images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null\n    });\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration de l‚Äô√©v√©nement :', error);\n    res.status(500).json({\n      message: 'Erreur serveur'\n    });\n  }\n};\nexports.getEventWithOrganizer = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const event = await getEventWithOrganizerQuery(id);\n    if (!event) {\n      return res.status(404).json({\n        message: '√âv√©nement non trouv√©'\n      });\n    }\n    res.status(200).json({\n      ...event,\n      logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\n      images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\n      images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null\n    });\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration de l‚Äô√©v√©nement avec l‚Äôorganisateur :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n//mis a jour ou modification evenement\nexports.updateEvent = async (req, res) => {\n  const {\n    id\n  } = req.params; // ID de l'√©v√©nement\n  const {\n    nom_event,\n    type_event,\n    nom_sport,\n    lieu_event,\n    nbr_participant,\n    genre_participant,\n    date_debut,\n    date_fin,\n    frais_inscription,\n    statut_event,\n    categorie_participant,\n    description_accueil,\n    description_detail,\n    tickets\n  } = req.body;\n  const organizerId = req.user?.id;\n  const logo_event = req.files.logo_event ? req.files.logo_event[0].filename : null;\n  const images_accueil = req.files.images_accueil ? req.files.images_accueil[0].filename : null;\n  const images_contenu = req.files.images_contenu ? req.files.images_contenu[0].filename : null;\n  try {\n    // V√©rification et transformation des tickets en JSON\n    let types_tickets = [];\n    let nbr_total_tickets = 0;\n    if (tickets) {\n      try {\n        const parsedTickets = typeof tickets === 'string' ? JSON.parse(tickets) : tickets;\n        if (Array.isArray(parsedTickets)) {\n          types_tickets = parsedTickets.map(ticket => ({\n            type: ticket.type_ticket,\n            prix: ticket.prix_ticket,\n            quantite: parseInt(ticket.nbr_ticket_disponible, 10)\n          }));\n          nbr_total_tickets = types_tickets.reduce((total, ticket) => total + ticket.quantite, 0);\n        } else {\n          return res.status(400).json({\n            message: 'Le format des tickets est invalide'\n          });\n        }\n      } catch (error) {\n        console.error(\"Erreur de parsing des tickets :\", error);\n        return res.status(400).json({\n          message: 'Format JSON invalide pour tickets'\n        });\n      }\n    }\n    const updatedEvent = {\n      nom_event,\n      type_event,\n      nom_sport,\n      lieu_event,\n      nbr_participant,\n      genre_participant,\n      date_debut: date_debut ? date_debut : null,\n      // ‚úÖ Remplace '' par NULL\n      date_fin: date_fin ? date_fin : null,\n      frais_inscription,\n      statut_event,\n      categorie_participant,\n      description_accueil,\n      description_detail,\n      ...(logo_event && {\n        logo_event\n      }),\n      // Ajouter uniquement si fourni\n      ...(images_accueil && {\n        images_accueil\n      }),\n      // Ajouter uniquement si fourni\n      ...(images_contenu && {\n        images_contenu\n      }),\n      // Ajouter uniquement si fourni\n      ...(tickets && {\n        types_tickets: JSON.stringify(tickets),\n        // ‚úÖ S'assurer que les tickets sont bien un tableau\n        nbr_total_tickets\n      })\n    };\n    const result = await db('evenement').where({\n      id_evenement: id\n    }).update(updatedEvent);\n    if (result) {\n      res.status(200).json({\n        message: '√âv√©nement mis √† jour avec succ√®s.'\n      });\n    } else {\n      res.status(404).json({\n        message: '√âv√©nement non trouv√©.'\n      });\n    }\n  } catch (error) {\n    console.error('Erreur lors de la mise √† jour de l‚Äô√©v√©nement :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// Supprimer un √©v√©nement\nexports.deleteEvent = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const event = await db('evenement').where({\n      id_evenement: id\n    }).first();\n    if (!event) {\n      return res.status(404).json({\n        message: '√âv√©nement non trouv√©.'\n      });\n    }\n    await db('evenement').where({\n      id_evenement: id\n    }).del();\n    res.status(200).json({\n      message: '√âv√©nement supprim√© avec succ√®s.'\n    });\n  } catch (error) {\n    console.error('Erreur lors de la suppression de l‚Äô√©v√©nement :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// Contr√¥leur pour afficher tous les √©v√©nements (public)\nexports.getAllPublicEvents = async (req, res) => {\n  try {\n    const events = await db('evenement'); // Pas de filtre par `id_organisateur` ici\n\n    // Ajout des chemins des images pour chaque √©v√©nement\n    const eventsWithImagePaths = events.map(event => {\n      return {\n        ...event,\n        logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\n        images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\n        images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null\n      };\n    });\n    res.status(200).json(eventsWithImagePaths);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des √©v√©nements publics:', error);\n    res.status(500).json({\n      message: 'Erreur serveur'\n    });\n  }\n};\nexports.getEventDetailById = async (req, res) => {\n  const {\n    id\n  } = req.params; // R√©cup√®re l'ID depuis les param√®tres de la route\n  try {\n    console.log('Requ√™te pour r√©cup√©rer l\\'√©v√©nement avec ID :', id);\n\n    // Recherche l'√©v√©nement par ID\n    const event = await db('evenement').where({\n      id_evenement: id\n    }).first();\n    if (!event) {\n      return res.status(404).json({\n        message: '√âv√©nement introuvable'\n      });\n    }\n\n    // Ajouter les chemins d'image et retourner les donn√©es\n    res.status(200).json({\n      ...event,\n      // Inclut toutes les donn√©es de l'√©v√©nement\n      logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\n      images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\n      images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null\n    });\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration de l\\'√©v√©nement :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// nouveau \n// Contr√¥leur pour r√©cup√©rer tous les √©v√©nements d'un organisateur\nexports.getEventsByOrganizerId = async (req, res) => {\n  const {\n    id\n  } = req.params; // ID de l'organisateur\n\n  try {\n    const events = await db('evenement').where({\n      id_organisateur: id\n    });\n\n    // Ajout des chemins des images pour chaque √©v√©nement\n    const eventsWithImagePaths = events.map(event => ({\n      ...event,\n      logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\n      images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\n      images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null\n    }));\n    res.status(200).json(eventsWithImagePaths);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de la r√©cup√©ration des √©v√©nements.\"\n    });\n  }\n};\n\n// fonction pour r√©cup√©rer les participants depuis la base de donn√©es \nexports.getParticipantsByEventId = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  console.log(`Requ√™te re√ßue pour r√©cup√©rer les participants de l'√©v√©nement ID : ${eventId}`);\n  try {\n    // Utiliser 'id_evenement' √† la place de 'event_id'\n    const participants = await db('participants').where({\n      id_evenement: eventId\n    });\n    if (!participants || participants.length === 0) {\n      return res.status(404).json({\n        message: 'Aucun participant trouv√© pour cet √©v√©nement.'\n      });\n    }\n    res.status(200).json(participants);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\nexports.getAllParticipantsByOrganizer = async (req, res) => {\n  const organizerId = req.user?.id; // R√©cup√©rer l'ID de l'organisateur authentifi√©\n\n  if (!organizerId) {\n    return res.status(403).json({\n      message: \"L'ID de l'organisateur est introuvable.\"\n    });\n  }\n  try {\n    // Jointure entre `evenements`, `participer` et `participants`\n    const participants = await db('participer').join('participants', 'participer.id_participant', '=', 'participants.id_participant').join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement').select('participants.id_participant', 'participants.nom_part', 'evenement.nom_event', 'participer.id_evenement').where('evenement.id_organisateur', organizerId); // Filtrer par organisateur\n\n    if (!participants || participants.length === 0) {\n      return res.status(404).json({\n        message: 'Aucun participant trouv√© pour vos √©v√©nements.'\n      });\n    }\n    res.status(200).json(participants);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// Fonction pour supprimer un participant dans le TB organisateur\nexports.deleteParticipant = async (req, res) => {\n  const {\n    participantId\n  } = req.params;\n  console.log(\"ID du participant √† supprimer :\", participantId);\n  try {\n    // V√©rifier si le participant existe\n    const participant = await db('participants').where({\n      id_participant: participantId\n    }).first();\n    if (!participant) {\n      return res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n\n    // Supprimer le participant de la base de donn√©es\n    await db('participants').where({\n      id_participant: participantId\n    }).del();\n    res.status(200).json({\n      message: \"Participant supprim√© avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression du participant :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n/**\r\n * Achat d'un billet et mise √† jour des tickets disponibles.\r\n */\nexports.acheterTicket = async (req, res) => {\n  const {\n    id_evenement,\n    type_ticket,\n    quantity\n  } = req.body;\n  try {\n    console.log(\"üì• Donn√©es re√ßues :\", req.body);\n\n    // R√©cup√©rer l'√©v√©nement\n    const event = await db(\"evenement\").where({\n      id_evenement\n    }).first();\n    if (!event) {\n      return res.status(404).json({\n        message: \"√âv√©nement introuvable\"\n      });\n    }\n    let tickets = JSON.parse(event.types_tickets);\n    let ticketUpdated = false;\n\n    // V√©rifier si le billet existe et le mettre √† jour\n    const updatedTickets = tickets.map(ticket => {\n      if ((ticket.type_ticket || ticket.type) === type_ticket) {\n        // V√©rifier que `nbr_ticket_disponible` est un nombre valide\n        let currentStock = parseInt(ticket.nbr_ticket_disponible, 10);\n        if (isNaN(currentStock)) {\n          currentStock = parseInt(ticket.quantite, 10) || 0; // Prendre `quantite` si `nbr_ticket_disponible` est invalide\n        }\n        console.log(`üéü Mise √† jour du billet ${ticket.type || ticket.type_ticket} (avant: ${currentStock})`);\n\n        // V√©rifier si le stock est suffisant\n        if (currentStock < quantity) {\n          console.warn(\"‚ö†Ô∏è Stock insuffisant !\");\n          return ticket; // Retourne le billet inchang√©\n        }\n\n        // Mise √† jour du stock\n        ticket.nbr_ticket_disponible = Math.max(0, currentStock - quantity);\n        console.log(`‚úÖ Nouveau stock: ${ticket.nbr_ticket_disponible}`);\n        ticketUpdated = true;\n      }\n      return ticket;\n    });\n\n    // Si le billet n'existe pas ou n'a pas √©t√© mis √† jour\n    if (!ticketUpdated) {\n      return res.status(400).json({\n        message: \"Type de billet non trouv√© ou stock insuffisant\"\n      });\n    }\n\n    // Mettre √† jour la base de donn√©es avec la nouvelle liste de tickets\n    await db(\"evenement\").where({\n      id_evenement\n    }).update({\n      types_tickets: JSON.stringify(updatedTickets)\n    });\n    console.log(\"üîÑ Mise √† jour r√©ussie ! Tickets mis √† jour :\", updatedTickets);\n    return res.json({\n      message: \"Billet achet√© avec succ√®s\",\n      tickets: updatedTickets\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'achat du billet :\", error);\n    return res.status(500).json({\n      message: \"Erreur interne du serveur\"\n    });\n  }\n};\n\n// R√©cup√©rer les √©v√©nements cr√©√©s par un organisateur\nexports.getEventsByOrganizer = async (req, res) => {\n  const organizerId = req.user.id; // R√©cup√©rer l'ID de l'organisateur connect√©\n\n  try {\n    const events = await db('evenement').where({\n      id_organisateur: organizerId\n    });\n    if (!events.length) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\"\n      });\n    }\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\nexports.getParticipantsAndCountByEvent = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  try {\n    // 1) R√©cup√©rer les participants avec le nom de leur √©quipe\n    const participants = await db('participants').join('participer', 'participants.id_participant', 'participer.id_participant').join('equipes', 'participants.id_participant', 'equipes.id_participant') // Jointure avec la table des √©quipes\n    .where('participer.id_evenement', eventId).select('participants.id_participant', 'equipes.nom_equipe' // On s√©lectionne le nom de l'√©quipe au lieu du nom du participant\n    );\n\n    // 2) Compter les participants\n    const nbrParticipant = participants.length;\n    res.status(200).json({\n      nbr_participant: nbrParticipant,\n      participants // Retourne la liste des participants avec leur √©quipe\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des participants :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// Fonction pour cr√©er les poules d'un √©v√©nement (une seule fois par √©v√©nement)\nexports.createPools = async (req, res) => {\n  const {\n    id_evenement,\n    pools\n  } = req.body;\n  if (!id_evenement || !pools || pools.length === 0) {\n    return res.status(400).json({\n      message: \"Donn√©es invalides. Assurez-vous de s√©lectionner un √©v√©nement et d'ajouter des poules.\"\n    });\n  }\n  try {\n    // V√©rifier si des poules existent d√©j√† pour cet √©v√©nement\n    const existingPools = await db('poules').where({\n      id_evenement\n    }).select('id_poule');\n    console.log(`Poules existantes pour l'√©v√©nement ${id_evenement} :`, existingPools);\n    if (existingPools.length > 0) {\n      console.warn(\"Tentative de cr√©ation de poules alors qu'elles existent d√©j√† !\");\n      return res.status(409).json({\n        message: \"Des poules existent d√©j√† pour cet √©v√©nement. Impossible d'en cr√©er de nouvelles.\"\n      });\n    }\n\n    // Ins√©rer les poules dans la table `poules`\n    const insertedPools = await db('poules').insert(pools.map(nom_poule => ({\n      id_evenement,\n      nom_poule,\n      created_at: new Date()\n    }))).returning('*'); // Retourne les nouvelles poules ins√©r√©es\n\n    res.status(201).json({\n      message: \"Poules cr√©√©es avec succ√®s.\",\n      pools: insertedPools\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation des poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la cr√©ation des poules.\",\n      error: error.message\n    });\n  }\n};\n\n// Fonction pour attribuer les participants aux poules √©quitablement\nexports.assignParticipantsToPools = async (req, res) => {\n  const {\n    id_evenement\n  } = req.body;\n  if (!id_evenement) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les poules associ√©es √† cet √©v√©nement\n    const pools = await db('poules').where({\n      id_evenement\n    }).select('id_poule');\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n\n    // R√©cup√©rer les participants inscrits √† cet √©v√©nement\n    const participants = await db('participer').where({\n      id_evenement\n    }).select('id_participant');\n    if (participants.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun participant trouv√© pour cet √©v√©nement.\"\n      });\n    }\n\n    // M√©langer les participants\n    function shuffleArray(array) {\n      for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]]; // √âchange des √©l√©ments\n      }\n      return array;\n    }\n    const shuffledParticipants = shuffleArray([...participants]);\n\n    // Calculer la r√©partition √©quitable\n    const numPools = pools.length;\n    const numParticipants = participants.length;\n    const minPerPool = Math.floor(numParticipants / numPools);\n    const extraParticipants = numParticipants % numPools;\n    console.log(\"üîπ Total Participants :\", numParticipants);\n    console.log(\"üîπ Total Poules :\", numPools);\n    console.log(\"üîπ Nombre min de participants par poule :\", minPerPool);\n    console.log(\"üîπ Participants suppl√©mentaires √† r√©partir :\", extraParticipants);\n    let assignments = [];\n    let index = 0;\n    let poolDistribution = {};\n    for (let i = 0; i < numPools; i++) {\n      const numToAssign = minPerPool + (i < extraParticipants ? 1 : 0);\n      poolDistribution[pools[i].id_poule] = numToAssign;\n      for (let j = 0; j < numToAssign; j++) {\n        assignments.push({\n          id_poule: pools[i].id_poule,\n          id_participant: shuffledParticipants[index].id_participant\n        });\n        index++;\n      }\n    }\n    console.log(\"üìå R√©partition des participants par poule :\", poolDistribution);\n\n    // Ins√©rer les assignations dans la table `poule_participants`\n    await db('poule_participants').insert(assignments);\n    res.status(201).json({\n      message: \"Participants r√©partis avec succ√®s.\",\n      assignments\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'affectation des participants :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de l'affectation des participants.\"\n    });\n  }\n};\nexports.getPoolsWithParticipants = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  if (!eventId) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les poules de cet √©v√©nement\n    const pools = await db('poules').where({\n      id_evenement: eventId\n    }).select('id_poule', 'nom_poule');\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n\n    // R√©cup√©rer les participants avec leur √©quipe pour chaque poule\n    const participants = await db('poule_participants').join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant').join('equipes', 'participants.id_participant', '=', 'equipes.id_participant') // Jointure avec la table √©quipes\n    .whereIn('poule_participants.id_poule', pools.map(p => p.id_poule)).select('poule_participants.id_poule', 'participants.id_participant', 'equipes.nom_equipe' // On r√©cup√®re le nom de l'√©quipe\n    );\n\n    // Organiser les participants par poule\n    const poolsWithParticipants = pools.map(pool => ({\n      id_poule: pool.id_poule,\n      nom_poule: pool.nom_poule,\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\n    }));\n    res.status(200).json({\n      pools: poolsWithParticipants\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des poules.\"\n    });\n  }\n};\nexports.getEventsWithPools = async (req, res) => {\n  try {\n    // R√©cup√©rer l'ID de l'organisateur depuis `verifyToken`\n    const organizerId = req.user?.id; // Correction ici\n\n    if (!organizerId) {\n      return res.status(401).json({\n        message: \"Organisateur non authentifi√©.\"\n      });\n    }\n\n    // V√©rification des logs pour s'assurer que l'ID est bien r√©cup√©r√©\n    console.log(\"üîç ID de l'organisateur r√©cup√©r√© :\", organizerId);\n    const eventsWithPools = await db('poules').join('evenement', 'poules.id_evenement', '=', 'evenement.id_evenement').where('evenement.id_organisateur', organizerId) // Correction ici\n    .distinct('evenement.id_evenement', 'evenement.nom_event').select();\n    if (eventsWithPools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement avec des poules trouv√© pour cet organisateur.\"\n      });\n    }\n    res.status(200).json(eventsWithPools);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements avec poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\"\n    });\n  }\n};\nexports.addParticipantManual = async (req, res) => {\n  try {\n    const {\n      id_evenement,\n      nom_poule,\n      id_participant\n    } = req.body;\n\n    // 0) V√©rifier que l'id_participant est fourni\n    if (!id_participant) {\n      return res.status(400).json({\n        message: \"L'id du participant est requis.\"\n      });\n    }\n\n    // 1) V√©rifier si le participant est d√©j√† inscrit dans une poule pour cet √©v√©nement\n    const alreadyAssigned = await db('poule_participants').join('poules', 'poule_participants.id_poule', '=', 'poules.id_poule').where('poules.id_evenement', id_evenement).andWhere('poule_participants.id_participant', id_participant).first();\n    if (alreadyAssigned) {\n      return res.status(400).json({\n        message: 'Ce participant est d√©j√† inscrit dans une poule pour cet √©v√©nement.'\n      });\n    }\n\n    // 2) V√©rifier si la poule existe d√©j√† pour cet √©v√©nement et ce nom\n    let existingPoule = await db('poules').where({\n      id_evenement,\n      nom_poule\n    }).first();\n\n    // 3) Si la poule n'existe pas, la cr√©er\n    if (!existingPoule) {\n      const [newPouleId] = await db('poules').insert({\n        id_evenement,\n        nom_poule,\n        created_at: new Date()\n      });\n      existingPoule = {\n        id_poule: newPouleId\n      };\n      console.log('Poule cr√©√©e avec ID:', newPouleId);\n    } else {\n      console.log('Poule existante trouv√©e:', existingPoule);\n    }\n\n    // 4) Ins√©rer dans la table poule_participants\n    await db('poule_participants').insert({\n      id_poule: existingPoule.id_poule,\n      id_participant\n    });\n    return res.status(200).json({\n      message: 'Participant ajout√© avec succ√®s !'\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de l'ajout manuel :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// Supprime les poules et leurs participants pour un √©v√©nement donn√©\nexports.deletePoolsForEvent = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  if (!eventId) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les id des poules de cet √©v√©nement\n    const pools = await db('poules').where({\n      id_evenement: eventId\n    }).select('id_poule');\n    if (pools.length > 0) {\n      const poolIds = pools.map(p => p.id_poule);\n      // Supprimer d'abord les participants li√©s aux poules\n      await db('poule_participants').whereIn('id_poule', poolIds).del();\n      // Supprimer ensuite les poules\n      await db('poules').where({\n        id_evenement: eventId\n      }).del();\n    }\n    return res.status(200).json({\n      message: \"Les poules et leurs participants ont √©t√© supprim√©s avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression des poules :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur lors de la suppression des poules.\"\n    });\n  }\n};\n\n// R√©cup√©rer les √©v√©nements avec des poules pour un organisateur\nexports.getEventsByOrganizerMatch = async (req, res) => {\n  try {\n    const organizerId = req.user?.id; // L'ID de l'organisateur est r√©cup√©r√© via le token\n\n    if (!organizerId) {\n      return res.status(401).json({\n        message: \"Organisateur non authentifi√©.\"\n      });\n    }\n    const events = await db('evenement').where('id_organisateur', organizerId).select('id_evenement', 'nom_event');\n    if (events.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\"\n      });\n    }\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\"\n    });\n  }\n};\n\n// R√©cup√©rer les poules et leurs participants pour un √©v√©nement s√©lectionn√©\nexports.getPoolsWithParticipantsMatch = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  if (!eventId) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    const pools = await db('poules').where({\n      id_evenement: eventId\n    }).select('id_poule', 'nom_poule');\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n    const participants = await db('poule_participants').join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant').whereIn('poule_participants.id_poule', pools.map(p => p.id_poule)).select('poule_participants.id_poule', 'participants.id_participant', 'participants.nom_part');\n    const poolsWithParticipants = pools.map(pool => ({\n      id_poule: pool.id_poule,\n      nom_poule: pool.nom_poule,\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\n    }));\n    res.status(200).json(poolsWithParticipants);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des poules.\"\n    });\n  }\n};\nexports.createMatch = async (req, res) => {\n  try {\n    const {\n      phase,\n      participant_a,\n      participant_b,\n      lieu_rencontre,\n      date_rencontre,\n      heure_rencontre,\n      id_evenement,\n      journee,\n      tour_final\n    } = req.body;\n\n    // V√©rification des champs essentiels\n    if (!phase || !participant_a || !participant_b || !lieu_rencontre || !date_rencontre || !heure_rencontre || !id_evenement) {\n      return res.status(400).json({\n        message: \"Tous les champs essentiels sont requis.\"\n      });\n    }\n    if (![\"Barrage\", \"√âliminatoire\", \"Finale\"].includes(phase) && !journee) {\n      return res.status(400).json({\n        message: \"Le champ 'journee' est requis.\"\n      });\n    }\n    if (![\"Groupe\", \"Qualification\", \"Classement\", \"Barrage\"].includes(phase) && !tour_final) {\n      return res.status(400).json({\n        message: \"Le champ 'tour_final' est requis.\"\n      });\n    }\n\n    // üîç R√©cup√©rer l'ID des √©quipes\n    const equipeA = await db(\"equipes\").where({\n      nom_equipe: participant_a\n    }).first();\n    const equipeB = await db(\"equipes\").where({\n      nom_equipe: participant_b\n    }).first();\n    if (!equipeA || !equipeB) {\n      return res.status(400).json({\n        message: \"Les √©quipes s√©lectionn√©es n'existent pas.\"\n      });\n    }\n\n    // üîç R√©cup√©rer les poules des √©quipes A et B\n    const poulesA = await db(\"poule_participants\").where({\n      id_participant: equipeA.id_participant\n    }).pluck(\"id_poule\");\n    const poulesB = await db(\"poule_participants\").where({\n      id_participant: equipeB.id_participant\n    }).pluck(\"id_poule\");\n    if (!poulesA.length || !poulesB.length) {\n      return res.status(400).json({\n        message: \"Impossible de trouver la poule des participants.\"\n      });\n    }\n\n    // üîç V√©rifier si une poule est commune aux deux participants\n    const pouleCommune = poulesA.find(poule => poulesB.includes(poule));\n    if (!pouleCommune) {\n      return res.status(400).json({\n        message: \"Les participants ne sont pas dans la m√™me poule.\"\n      });\n    }\n\n    // üîç V√©rifier que cette poule appartient bien √† l'√©v√©nement donn√©\n    const pouleInfo = await db(\"poules\").where({\n      id_poule: pouleCommune,\n      id_evenement\n    }).first();\n    if (!pouleInfo) {\n      return res.status(400).json({\n        message: \"La poule des participants doit √™tre li√©e √† l'√©v√©nement.\"\n      });\n    }\n\n    // üîπ Ins√©rer la rencontre\n    const matchData = {\n      phase,\n      participant_a: equipeA.nom_equipe,\n      participant_b: equipeB.nom_equipe,\n      lieu_rencontre,\n      date_rencontre,\n      heure_rencontre,\n      id_evenement,\n      journee: journee || null,\n      tour_final: tour_final || null,\n      id_poule: pouleCommune\n    };\n\n    // Ins√©rer la rencontre\n    const [newMatchId] = await db(\"rencontre\").insert(matchData);\n    console.log(`‚úÖ Match ins√©r√© avec succ√®s (ID: ${newMatchId})`);\n\n    // üîπ R√©cup√©rer la rencontre nouvellement cr√©√©e\n    const newMatch = await db(\"rencontre\").where({\n      id_rencontre: newMatchId\n    }).first();\n    res.status(201).json({\n      message: \"Rencontre cr√©√©e avec succ√®s.\",\n      match: newMatch\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la cr√©ation de la rencontre :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la cr√©ation de la rencontre.\"\n    });\n  }\n};\nexports.getMatchesByEvent = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n    const matches = await db(\"rencontre\").select(\"id_rencontre\", \"participant_a\", \"participant_b\", \"date_rencontre\", \"heure_rencontre\", \"lieu_rencontre\", \"phase\", \"journee\", \"tour_final\").where(\"id_evenement\", eventId);\n\n    // Groupement des matchs par phase/journ√©e/tour final\n    const groupedMatches = matches.reduce((acc, match) => {\n      const key = `${match.phase}_${match.journee || \"0\"}_${match.tour_final || \"0\"}`;\n      if (!acc[key]) {\n        acc[key] = {\n          phase: match.phase,\n          journee: match.journee,\n          tour_final: match.tour_final,\n          matches: []\n        };\n      }\n      acc[key].matches.push({\n        id_rencontre: match.id_rencontre,\n        participant_a: match.participant_a,\n        // D√©j√† stock√© sous forme de nom\n        participant_b: match.participant_b,\n        // D√©j√† stock√© sous forme de nom\n        date_rencontre: match.date_rencontre,\n        heure_rencontre: match.heure_rencontre,\n        lieu_rencontre: match.lieu_rencontre\n      });\n      return acc;\n    }, {});\n    res.status(200).json(Object.values(groupedMatches));\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\"\n    });\n  }\n};\n\n// R√©cup√©rer les infos du participant avec son √©quipe\nexports.getParticipantById = async (req, res) => {\n  const {\n    participantId\n  } = req.params;\n  if (!participantId) {\n    return res.status(400).json({\n      message: \"ID du participant requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les infos du participant avec son √©quipe\n    const participant = await db('participants as p').leftJoin('equipes as e', 'p.id_participant', 'e.id_participant').where({\n      'p.id_participant': participantId\n    }).select('p.*', 'e.nom_equipe', 'e.categorie_equipe').first();\n    if (!participant) {\n      return res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n    res.status(200).json(participant);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du participant:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration du participant.\"\n    });\n  }\n};\n\n// Suppression d'une rencontre par ID\nexports.deleteMatch = async (req, res) => {\n  const {\n    matchId\n  } = req.params;\n  try {\n    const deletedRows = await db('rencontre').where('id_rencontre', matchId).del();\n    if (deletedRows === 0) {\n      return res.status(404).json({\n        message: \"Rencontre non trouv√©e.\"\n      });\n    }\n    res.status(200).json({\n      message: \"Rencontre supprim√©e avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression de la rencontre :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la suppression de la rencontre.\"\n    });\n  }\n};\n\n// Fonction pour r√©cup√©rer toutes les rencontres de tous les √©v√©nements d'un organisateur\nexports.getAllCalendarMatches = async (req, res) => {\n  try {\n    // R√©cup√©rer tous les √©v√©nements de l'organisateur\n    const events = await db('evenement').where('id_organisateur', req.user.id) // On suppose que l'organisateur est dans req.user.id\n    .select('id_evenement'); // On ne s√©lectionne que les ID des √©v√©nements\n\n    if (events.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\"\n      });\n    }\n\n    // R√©cup√©rer toutes les rencontres de tous les √©v√©nements\n    const allMatches = [];\n    for (const event of events) {\n      const matches = await db('rencontre').where({\n        id_evenement: event.id_evenement\n      }).select('*').orderBy('date_rencontre', 'asc').orderBy('heure_rencontre', 'asc');\n      allMatches.push(...matches);\n    }\n\n    // V√©rifier si la phase \"Aller-Retour\" est bien pr√©sente dans les r√©sultats\n    console.log(matches); // V√©rifiez dans la console si la phase est correcte\n\n    if (allMatches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e.\"\n      });\n    }\n    res.status(200).json(allMatches);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du calendrier des rencontres :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\"\n    });\n  }\n};\nexports.getCalendarMatchesByEvent = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n    const matches = await db('rencontre').where({\n      id_evenement: eventId\n    }).select('id_rencontre', 'date_rencontre', 'heure_rencontre', 'participant_a', 'participant_b', 'lieu_rencontre', 'phase', 'journee', 'tour_final');\n    console.log(\"Donn√©es envoy√©es par l'API :\", matches); // üîç V√©rification des donn√©es avant envoi\n\n    res.status(200).json(matches);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration du calendrier des rencontres.\"\n    });\n  }\n};\n\n// recuperation de toute participant \nexports.getAllParticipantsByOrganizer = async (req, res) => {\n  const organizerId = req.user?.id; // R√©cup√©rer l'ID de l'organisateur authentifi√©\n\n  if (!organizerId) {\n    return res.status(403).json({\n      message: \"L'ID de l'organisateur est introuvable.\"\n    });\n  }\n  try {\n    // Jointure entre `evenements`, `participer` et `participants`\n    const participants = await db('participer').join('participants', 'participer.id_participant', '=', 'participants.id_participant').join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement') // Correction ici\n    .select('participants.id_participant', 'participants.nom_part', 'evenement.nom_event', 'participer.id_evenement').where('evenement.id_organisateur', organizerId); // Filtrer par organisateur\n\n    if (!participants || participants.length === 0) {\n      return res.status(404).json({\n        message: 'Aucun participant trouv√© pour vos √©v√©nements.'\n      });\n    }\n    res.status(200).json(participants);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// **************************Resultats*****************************\n// pour r√©cup√©rer les informations d'un √©v√©nement s√©lectionn√©\n\nexports.getEventResultats = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    console.log(\"üîç eventId re√ßu :\", eventId);\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n\n    // üîπ R√©cup√©ration du nom de l'√©v√©nement\n    const event = await db('evenement').where({\n      id_evenement: eventId\n    }).select('nom_event').first();\n    if (!event) {\n      return res.status(404).json({\n        message: \"√âv√©nement non trouv√©.\"\n      });\n    }\n\n    // üîπ R√©cup√©ration des diff√©rentes phases, journ√©es et tours finaux associ√©s √† l'√©v√©nement\n    const matchInfo = await db('rencontre').where({\n      id_evenement: eventId\n    }).select('phase', 'journee', 'tour_final').groupBy('phase', 'journee', 'tour_final'); // üî• On r√©cup√®re toutes les valeurs uniques\n\n    console.log(\"‚úÖ Donn√©es matchInfo :\", matchInfo);\n    if (matchInfo.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n    res.status(200).json({\n      nom_event: event.nom_event,\n      details: matchInfo // üî• On envoie un tableau contenant toutes les phases, journ√©es et tours finaux\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\",\n      error: error.message\n    });\n  }\n};\n\n// pour r√©cup√©rer les rencontres filtr√©es :\nexports.getFilteredMatchesByEvent = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    const {\n      phase,\n      journee,\n      tour_final\n    } = req.query;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n    let query = db('rencontre').where({\n      id_evenement: eventId\n    }).select('id_rencontre', 'participant_a', 'participant_b', 'phase', 'journee', 'tour_final');\n\n    // Filtrage dynamique en fonction des param√®tres re√ßus\n    if (phase) {\n      query = query.where({\n        phase\n      });\n    }\n    if (journee) {\n      query = query.where({\n        journee\n      });\n    }\n    if (tour_final) {\n      query = query.where({\n        tour_final\n      });\n    }\n    const matches = await query;\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e pour ces crit√®res.\"\n      });\n    }\n    res.status(200).json(matches);\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des rencontres filtr√©es.\"\n    });\n  }\n};\n// pour enregistrer les r√©sultats des rencontres\nexports.saveMatchResults = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    let {\n      results,\n      point_victoire,\n      point_defaite,\n      point_matchnul\n    } = req.body;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"L'ID de l'√©v√©nement est requis.\"\n      });\n    }\n    if (!results || results.length === 0) {\n      return res.status(400).json({\n        message: \"Aucun r√©sultat fourni.\"\n      });\n    }\n\n    // Date actuelle pour l'enregistrement\n    const date_resultat = new Date();\n    const insertedResults = [];\n    const ignoredResults = [];\n    for (const match of results) {\n      const {\n        id_rencontre,\n        score_A,\n        score_B,\n        phase\n      } = match;\n\n      // üîπ V√©rification des phases qui ne doivent pas avoir de points\n      if ([\"Finale\", \"Barrage\", \"Aller Retour\"].includes(phase)) {\n        point_victoire = null;\n        point_defaite = null;\n        point_matchnul = null;\n      }\n\n      // V√©rifier si un r√©sultat existe d√©j√† pour ce match et cet √©v√©nement\n      const existingResult = await db('resultat').where({\n        id_rencontre,\n        id_evenement: eventId\n      }).first();\n      if (existingResult) {\n        // üîπ Ne pas ins√©rer et ajouter √† la liste des ignor√©s\n        ignoredResults.push({\n          id_rencontre,\n          message: \"R√©sultat d√©j√† existant\"\n        });\n      } else {\n        // üîπ Ins√©rer un nouveau r√©sultat\n        const [id_resultat] = await db('resultat').insert({\n          id_rencontre,\n          id_evenement: eventId,\n          score_A,\n          score_B,\n          point_victoire,\n          point_defaite,\n          point_matchnul,\n          date_resultat\n        });\n        insertedResults.push({\n          id_resultat,\n          id_rencontre,\n          score_A,\n          score_B,\n          status: \"Ins√©r√©\"\n        });\n      }\n    }\n    res.status(201).json({\n      message: \"R√©sultats trait√©s\",\n      inserted: insertedResults,\n      ignored: ignoredResults\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur lors de l'enregistrement des r√©sultats :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de l'enregistrement des r√©sultats.\"\n    });\n  }\n};\n\n// ************************** Liste Resultats*****************************\n// R√©cup√©rer les d√©tails d'un √©v√©nement et ses phases\nexports.getEventResultatList = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n\n    // V√©rifier si l'√©v√©nement existe\n    const event = await db('evenement').where({\n      id_evenement: eventId\n    }).select('nom_event').first();\n    if (!event) {\n      return res.status(404).json({\n        message: \"√âv√©nement non trouv√©.\"\n      });\n    }\n\n    // R√©cup√©rer les informations de rencontre li√©es √† cet √©v√©nement\n    const matchInfo = await db('rencontre').where({\n      id_evenement: eventId\n    }).select('phase', 'journee', 'tour_final').first(); // On r√©cup√®re un seul enregistrement\n\n    res.status(200).json({\n      nom_event: event.nom_event,\n      phase: matchInfo?.phase || 'N/A',\n      journee: matchInfo?.journee || 'N/A',\n      tour_final: matchInfo?.tour_final || 'N/A'\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\",\n      error: error.message\n    });\n  }\n};\n\n// R√©cup√©rer les r√©sultats des matchs avec jointure\nexports.getFilteredMatchesResultatList = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    let matches = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement').select('evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre', 'rencontre.heure_rencontre', 'rencontre.participant_a', 'rencontre.participant_b', 'resultat.score_A', 'resultat.score_B', 'rencontre.lieu_rencontre').where('resultat.id_evenement', eventId).orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun r√©sultat trouv√© pour cet √©v√©nement.\"\n      });\n    }\n\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\n    let groupedResults = {};\n    matches.forEach(match => {\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\n      if (!groupedResults[groupKey]) {\n        groupedResults[groupKey] = [];\n      }\n      groupedResults[groupKey].push(match);\n    });\n    res.status(200).json(groupedResults);\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\",\n      error: error.message\n    });\n  }\n};\n\n// ‚úÖ R√©cup√©rer les √©v√©nements SANS authentification\nexports.getPublicEvents = async (req, res) => {\n  try {\n    const events = await db('evenement').select('*'); // R√©cup√©rer tous les √©v√©nements\n    console.log(\"√âv√©nements r√©cup√©r√©s :\", events);\n    res.json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n\n// ********************************* Tous les r√©sultats des matchs *********************************\n// R√©cup√©rer les r√©sultats de tous les √©v√©nements\nexports.getAllMatchesResultatList = async (req, res) => {\n  try {\n    let matches = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement').select('evenement.nom_event', 'rencontre.id_rencontre', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre', 'rencontre.heure_rencontre', 'rencontre.participant_a', 'rencontre.participant_b', 'resultat.id_resultat',\n    // ‚úÖ Ajout de `id_resultat`\n    'resultat.score_A', 'resultat.score_B', 'rencontre.lieu_rencontre').orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun r√©sultat trouv√©.\"\n      });\n    }\n\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\n    let groupedResults = {};\n    matches.forEach(match => {\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\n      if (!groupedResults[groupKey]) {\n        groupedResults[groupKey] = [];\n      }\n      groupedResults[groupKey].push(match);\n    });\n    res.status(200).json(groupedResults);\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\",\n      error: error.message\n    });\n  }\n};\n\n// Contr√¥leur pour la mise √† jour du score\nexports.updateMatchScore = async (req, res) => {\n  try {\n    const {\n      matchId\n    } = req.params;\n    const {\n      score_A,\n      score_B\n    } = req.body;\n\n    // V√©rification des valeurs\n    if (score_A === undefined || score_B === undefined) {\n      return res.status(400).json({\n        message: \"Les scores sont requis.\"\n      });\n    }\n\n    // Mise √† jour du score dans la base de donn√©es\n    const updated = await db('resultat').where({\n      id_rencontre: matchId\n    }).update({\n      score_A,\n      score_B\n    });\n    if (updated) {\n      res.status(200).json({\n        message: \"Score mis √† jour avec succ√®s !\"\n      });\n    } else {\n      res.status(404).json({\n        message: \"Match non trouv√©.\"\n      });\n    }\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la mise √† jour du score :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la mise √† jour du score.\"\n    });\n  }\n};\n\n// Contr√¥leur pour supprimer un r√©sultat de match via `id_resultat`\nexports.deleteMatchResult = async (req, res) => {\n  try {\n    const {\n      resultId\n    } = req.params; // On r√©cup√®re `id_resultat` et non `id_rencontre`\n\n    // V√©rifier si le r√©sultat existe\n    const resultExists = await db('resultat').where({\n      id_resultat: resultId\n    }).first();\n    if (!resultExists) {\n      return res.status(404).json({\n        message: \"Le r√©sultat du match n'existe pas.\"\n      });\n    }\n\n    // Suppression du r√©sultat\n    await db('resultat').where({\n      id_resultat: resultId\n    }).del();\n    res.status(200).json({\n      message: \"R√©sultat supprim√© avec succ√®s !\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la suppression du r√©sultat :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la suppression du r√©sultat.\"\n    });\n  }\n};\n// ********************************* Classement *********************************\n\nexports.getClassement = async (req, res) => {\n  try {\n    const phasesAExclure = [\"Barrage\", \"√âliminatoire\", \"Aller Retour\", \"Finale\"];\n    let query = db(\"resultat\").join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\").join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\").join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\").select(\"evenement.nom_event\", \"evenement.nom_sport\", \"rencontre.id_evenement\", \"rencontre.phase\", \"rencontre.journee\", \"rencontre.id_poule\", \"poules.nom_poule\", \"rencontre.participant_a\", \"rencontre.participant_b\", \"resultat.score_A\", \"resultat.score_B\", \"resultat.point_victoire\", \"resultat.point_matchnul\", \"resultat.point_defaite\").whereNotIn(\"rencontre.phase\", phasesAExclure);\n    const resultats = await query;\n    if (!resultats.length) {\n      return res.status(200).json({\n        classement: {}\n      });\n    }\n    let classementParEvenement = {};\n    resultats.forEach(match => {\n      const eventKey = match.nom_event;\n      const phaseKey = `Phase: ${match.phase}`;\n      const journeeKey = `Journ√©e ${match.journee}`;\n      const pouleKey = `Poule ${match.nom_poule}`;\n      const sport = match.nom_sport.toLowerCase();\n      if (!classementParEvenement[eventKey]) {\n        classementParEvenement[eventKey] = {};\n      }\n      if (!classementParEvenement[eventKey][phaseKey]) {\n        classementParEvenement[eventKey][phaseKey] = {};\n      }\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey]) {\n        classementParEvenement[eventKey][phaseKey][journeeKey] = {};\n      }\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey]) {\n        classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey] = [];\n      }\n      [match.participant_a, match.participant_b].forEach((equipe, i) => {\n        const score = i === 0 ? match.score_A : match.score_B;\n        const adversaireScore = i === 0 ? match.score_B : match.score_A;\n        const victoire = score > adversaireScore ? 1 : 0;\n        const defaite = score < adversaireScore ? 1 : 0;\n        const matchJoue = 1;\n        let points = 0;\n        if (score > adversaireScore) {\n          points = match.point_victoire;\n        } else if (score === adversaireScore) {\n          points = match.point_matchnul;\n        } else {\n          points = match.point_defaite;\n        }\n        const team = classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].find(equipeData => equipeData.nom_equipe === equipe);\n        if (team) {\n          if (sport === \"basketball\") {\n            team.mj += matchJoue;\n            team.v += victoire;\n            team.d += defaite;\n            team.points_marques += score;\n            team.points_concedes += adversaireScore;\n            team.difference_points += score - adversaireScore;\n          } else if (sport === \"p√©tanque\") {\n            team.points += points;\n            team.points_marques += score;\n            team.points_concedes += adversaireScore;\n            team.difference_points += score - adversaireScore;\n          } else {\n            team.points += points;\n            team.buts_marques += score;\n            team.buts_encaisses += adversaireScore;\n            team.difference_buts += score - adversaireScore;\n          }\n        } else {\n          classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].push({\n            nom_equipe: equipe,\n            points: points,\n            buts_marques: sport !== \"basketball\" ? score : undefined,\n            buts_encaisses: sport !== \"basketball\" ? adversaireScore : undefined,\n            difference_buts: sport !== \"basketball\" ? score - adversaireScore : undefined,\n            points_marques: sport === \"basketball\" || sport === \"p√©tanque\" ? score : undefined,\n            points_concedes: sport === \"basketball\" || sport === \"p√©tanque\" ? adversaireScore : undefined,\n            difference_points: sport === \"basketball\" || sport === \"p√©tanque\" ? score - adversaireScore : undefined,\n            mj: sport === \"basketball\" ? matchJoue : undefined,\n            v: sport === \"basketball\" ? victoire : undefined,\n            d: sport === \"basketball\" ? defaite : undefined\n          });\n        }\n      });\n    });\n\n    // Ajout du Classement G√©n√©ral\n    Object.keys(classementParEvenement).forEach(eventKey => {\n      let classementGeneral = {};\n      Object.keys(classementParEvenement[eventKey]).forEach(phaseKey => {\n        Object.keys(classementParEvenement[eventKey][phaseKey]).forEach(journeeKey => {\n          Object.keys(classementParEvenement[eventKey][phaseKey][journeeKey]).forEach(pouleKey => {\n            classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].forEach(team => {\n              const equipeKey = team.nom_equipe;\n              if (!classementGeneral[equipeKey]) {\n                classementGeneral[equipeKey] = {\n                  ...team\n                };\n              } else {\n                Object.keys(team).forEach(stat => {\n                  if (typeof team[stat] === \"number\") {\n                    classementGeneral[equipeKey][stat] += team[stat];\n                  }\n                });\n              }\n            });\n          });\n        });\n      });\n      classementParEvenement[eventKey][\"Classement G√©n√©ral\"] = {\n        \"Classement G√©n√©ral\": Object.values(classementGeneral).sort((a, b) => b.points - a.points)\n      };\n    });\n    res.status(200).json({\n      classement: classementParEvenement\n    });\n  } catch (error) {\n    console.error(\"Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\",\n      error\n    });\n  }\n};\n\n//==================== gestion ticket par l'organisateur =====================\n\n// üìå R√©cup√©rer les ventes de billets de l‚Äôorganisateur\nexports.getOrganizerTickets = async (req, res) => {\n  const {\n    organizerId\n  } = req.params;\n  try {\n    const sales = await db(\"achatbillets\").join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\").where(\"evenement.id_organisateur\", organizerId).select(\"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", \"achatbillets.quantite as quantite\", \"achatbillets.total_billets_vendus\", \"achatbillets.montant_collecte\", \"achatbillets.prix_unitaire\", db.raw(\"achatbillets.quantite - achatbillets.total_billets_vendus AS quantite_restante\"));\n    res.json(sales);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des billets :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// üì• Exporter les ventes de billets en CSV\nexports.exportOrganizerTickets = async (req, res) => {\n  const {\n    organizerId\n  } = req.params;\n  try {\n    const sales = await db(\"achatbillets\").join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\").where(\"evenement.id_organisateur\", organizerId).select(\"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", \"achatbillets.quantite\", \"achatbillets.total_billets_vendus\", \"achatbillets.montant_collecte\", \"achatbillets.prix_unitaire\");\n    const fields = [\"nom_evenement\", \"type_ticket\", \"quantite\", \"total_billets_vendus\", \"montant_collecte\", \"prix_unitaire\"];\n    const json2csvParser = new Parser({\n      fields\n    });\n    const csv = json2csvParser.parse(sales);\n    res.header(\"Content-Type\", \"text/csv\");\n    res.attachment(\"ventes_billets.csv\");\n    res.send(csv);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'exportation CSV :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// R√©cup√©rer les √©v√©nements cr√©√©s par un organisateur\nexports.getEventsByOrganizer = async (req, res) => {\n  const organizerId = req.user.id; // R√©cup√©rer l'ID de l'organisateur connect√©\n\n  try {\n    const events = await db('evenement').where({\n      id_organisateur: organizerId\n    });\n    if (!events.length) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\"\n      });\n    }\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\nexports.getParticipantsAndCountByEvent = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  try {\n    // 1) R√©cup√©rer les participants avec le nom de leur √©quipe\n    const participants = await db('participants').join('participer', 'participants.id_participant', 'participer.id_participant').join('equipes', 'participants.id_participant', 'equipes.id_participant') // Jointure avec la table des √©quipes\n    .where('participer.id_evenement', eventId).select('participants.id_participant', 'equipes.nom_equipe' // On s√©lectionne le nom de l'√©quipe au lieu du nom du participant\n    );\n\n    // 2) Compter les participants\n    const nbrParticipant = participants.length;\n    res.status(200).json({\n      nbr_participant: nbrParticipant,\n      participants // Retourne la liste des participants avec leur √©quipe\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des participants :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// Fonction pour cr√©er les poules d'un √©v√©nement (une seule fois par √©v√©nement)\nexports.createPools = async (req, res) => {\n  const {\n    id_evenement,\n    pools\n  } = req.body;\n  if (!id_evenement || !pools || pools.length === 0) {\n    return res.status(400).json({\n      message: \"Donn√©es invalides. Assurez-vous de s√©lectionner un √©v√©nement et d'ajouter des poules.\"\n    });\n  }\n  try {\n    // V√©rifier si des poules existent d√©j√† pour cet √©v√©nement\n    const existingPools = await db('poules').where({\n      id_evenement\n    }).select('id_poule');\n    console.log(`Poules existantes pour l'√©v√©nement ${id_evenement} :`, existingPools);\n    if (existingPools.length > 0) {\n      console.warn(\"Tentative de cr√©ation de poules alors qu'elles existent d√©j√† !\");\n      return res.status(409).json({\n        message: \"Des poules existent d√©j√† pour cet √©v√©nement. Impossible d'en cr√©er de nouvelles.\"\n      });\n    }\n\n    // Ins√©rer les poules dans la table `poules`\n    const insertedPools = await db('poules').insert(pools.map(nom_poule => ({\n      id_evenement,\n      nom_poule,\n      created_at: new Date()\n    }))).returning('*'); // Retourne les nouvelles poules ins√©r√©es\n\n    res.status(201).json({\n      message: \"Poules cr√©√©es avec succ√®s.\",\n      pools: insertedPools\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation des poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la cr√©ation des poules.\",\n      error: error.message\n    });\n  }\n};\n\n// Fonction pour attribuer les participants aux poules √©quitablement\nexports.assignParticipantsToPools = async (req, res) => {\n  const {\n    id_evenement\n  } = req.body;\n  if (!id_evenement) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les poules associ√©es √† cet √©v√©nement\n    const pools = await db('poules').where({\n      id_evenement\n    }).select('id_poule');\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n\n    // R√©cup√©rer les participants inscrits √† cet √©v√©nement\n    const participants = await db('participer').where({\n      id_evenement\n    }).select('id_participant');\n    if (participants.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun participant trouv√© pour cet √©v√©nement.\"\n      });\n    }\n\n    // M√©langer les participants\n    function shuffleArray(array) {\n      for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]]; // √âchange des √©l√©ments\n      }\n      return array;\n    }\n    const shuffledParticipants = shuffleArray([...participants]);\n\n    // Calculer la r√©partition √©quitable\n    const numPools = pools.length;\n    const numParticipants = participants.length;\n    const minPerPool = Math.floor(numParticipants / numPools);\n    const extraParticipants = numParticipants % numPools;\n    console.log(\"üîπ Total Participants :\", numParticipants);\n    console.log(\"üîπ Total Poules :\", numPools);\n    console.log(\"üîπ Nombre min de participants par poule :\", minPerPool);\n    console.log(\"üîπ Participants suppl√©mentaires √† r√©partir :\", extraParticipants);\n    let assignments = [];\n    let index = 0;\n    let poolDistribution = {};\n    for (let i = 0; i < numPools; i++) {\n      const numToAssign = minPerPool + (i < extraParticipants ? 1 : 0);\n      poolDistribution[pools[i].id_poule] = numToAssign;\n      for (let j = 0; j < numToAssign; j++) {\n        assignments.push({\n          id_poule: pools[i].id_poule,\n          id_participant: shuffledParticipants[index].id_participant\n        });\n        index++;\n      }\n    }\n    console.log(\"üìå R√©partition des participants par poule :\", poolDistribution);\n\n    // Ins√©rer les assignations dans la table `poule_participants`\n    await db('poule_participants').insert(assignments);\n    res.status(201).json({\n      message: \"Participants r√©partis avec succ√®s.\",\n      assignments\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'affectation des participants :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de l'affectation des participants.\"\n    });\n  }\n};\nexports.getPoolsWithParticipants = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  if (!eventId) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les poules de cet √©v√©nement\n    const pools = await db('poules').where({\n      id_evenement: eventId\n    }).select('id_poule', 'nom_poule');\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n\n    // R√©cup√©rer les participants avec leur √©quipe pour chaque poule\n    const participants = await db('poule_participants').join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant').join('equipes', 'participants.id_participant', '=', 'equipes.id_participant') // Jointure avec la table √©quipes\n    .whereIn('poule_participants.id_poule', pools.map(p => p.id_poule)).select('poule_participants.id_poule', 'participants.id_participant', 'equipes.nom_equipe' // On r√©cup√®re le nom de l'√©quipe\n    );\n\n    // Organiser les participants par poule\n    const poolsWithParticipants = pools.map(pool => ({\n      id_poule: pool.id_poule,\n      nom_poule: pool.nom_poule,\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\n    }));\n    res.status(200).json({\n      pools: poolsWithParticipants\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des poules.\"\n    });\n  }\n};\nexports.getEventsWithPools = async (req, res) => {\n  try {\n    // R√©cup√©rer l'ID de l'organisateur depuis `verifyToken`\n    const organizerId = req.user?.id; // Correction ici\n\n    if (!organizerId) {\n      return res.status(401).json({\n        message: \"Organisateur non authentifi√©.\"\n      });\n    }\n\n    // V√©rification des logs pour s'assurer que l'ID est bien r√©cup√©r√©\n    console.log(\"üîç ID de l'organisateur r√©cup√©r√© :\", organizerId);\n    const eventsWithPools = await db('poules').join('evenement', 'poules.id_evenement', '=', 'evenement.id_evenement').where('evenement.id_organisateur', organizerId) // Correction ici\n    .distinct('evenement.id_evenement', 'evenement.nom_event').select();\n    if (eventsWithPools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement avec des poules trouv√© pour cet organisateur.\"\n      });\n    }\n    res.status(200).json(eventsWithPools);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements avec poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\"\n    });\n  }\n};\nexports.addParticipantManual = async (req, res) => {\n  try {\n    const {\n      id_evenement,\n      nom_poule,\n      id_participant\n    } = req.body;\n\n    // 0) V√©rifier que l'id_participant est fourni\n    if (!id_participant) {\n      return res.status(400).json({\n        message: \"L'id du participant est requis.\"\n      });\n    }\n\n    // 1) V√©rifier si le participant est d√©j√† inscrit dans une poule pour cet √©v√©nement\n    const alreadyAssigned = await db('poule_participants').join('poules', 'poule_participants.id_poule', '=', 'poules.id_poule').where('poules.id_evenement', id_evenement).andWhere('poule_participants.id_participant', id_participant).first();\n    if (alreadyAssigned) {\n      return res.status(400).json({\n        message: 'Ce participant est d√©j√† inscrit dans une poule pour cet √©v√©nement.'\n      });\n    }\n\n    // 2) V√©rifier si la poule existe d√©j√† pour cet √©v√©nement et ce nom\n    let existingPoule = await db('poules').where({\n      id_evenement,\n      nom_poule\n    }).first();\n\n    // 3) Si la poule n'existe pas, la cr√©er\n    if (!existingPoule) {\n      const [newPouleId] = await db('poules').insert({\n        id_evenement,\n        nom_poule,\n        created_at: new Date()\n      });\n      existingPoule = {\n        id_poule: newPouleId\n      };\n      console.log('Poule cr√©√©e avec ID:', newPouleId);\n    } else {\n      console.log('Poule existante trouv√©e:', existingPoule);\n    }\n\n    // 4) Ins√©rer dans la table poule_participants\n    await db('poule_participants').insert({\n      id_poule: existingPoule.id_poule,\n      id_participant\n    });\n    return res.status(200).json({\n      message: 'Participant ajout√© avec succ√®s !'\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de l'ajout manuel :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// Supprime les poules et leurs participants pour un √©v√©nement donn√©\nexports.deletePoolsForEvent = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  if (!eventId) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les id des poules de cet √©v√©nement\n    const pools = await db('poules').where({\n      id_evenement: eventId\n    }).select('id_poule');\n    if (pools.length > 0) {\n      const poolIds = pools.map(p => p.id_poule);\n      // Supprimer d'abord les participants li√©s aux poules\n      await db('poule_participants').whereIn('id_poule', poolIds).del();\n      // Supprimer ensuite les poules\n      await db('poules').where({\n        id_evenement: eventId\n      }).del();\n    }\n    return res.status(200).json({\n      message: \"Les poules et leurs participants ont √©t√© supprim√©s avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression des poules :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur lors de la suppression des poules.\"\n    });\n  }\n};\n\n// R√©cup√©rer les √©v√©nements avec des poules pour un organisateur\nexports.getEventsByOrganizerMatch = async (req, res) => {\n  try {\n    const organizerId = req.user?.id; // L'ID de l'organisateur est r√©cup√©r√© via le token\n\n    if (!organizerId) {\n      return res.status(401).json({\n        message: \"Organisateur non authentifi√©.\"\n      });\n    }\n    const events = await db('evenement').where('id_organisateur', organizerId).select('id_evenement', 'nom_event');\n    if (events.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\"\n      });\n    }\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\"\n    });\n  }\n};\n\n// R√©cup√©rer les poules et leurs participants pour un √©v√©nement s√©lectionn√©\nexports.getPoolsWithParticipantsMatch = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  if (!eventId) {\n    return res.status(400).json({\n      message: \"ID de l'√©v√©nement requis.\"\n    });\n  }\n  try {\n    const pools = await db('poules').where({\n      id_evenement: eventId\n    }).select('id_poule', 'nom_poule');\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n    const participants = await db('poule_participants').join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant').whereIn('poule_participants.id_poule', pools.map(p => p.id_poule)).select('poule_participants.id_poule', 'participants.id_participant', 'participants.nom_part');\n    const poolsWithParticipants = pools.map(pool => ({\n      id_poule: pool.id_poule,\n      nom_poule: pool.nom_poule,\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\n    }));\n    res.status(200).json(poolsWithParticipants);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des poules.\"\n    });\n  }\n};\n\n// exports.createMatch = async (req, res) => {\n//   try {\n//     const {\n//       phase,\n//       participant_a,\n//       participant_b,\n//       lieu_rencontre,\n//       id_resultat,\n//       date_rencontre,\n//       heure_rencontre,\n//       id_evenement,\n//       journee,\n//       tour_final\n//     } = req.body;\n\n//     // V√©rification des champs essentiels\n//     if (!phase || !participant_a || !participant_b || !lieu_rencontre || !id_resultat || !date_rencontre || !heure_rencontre || !id_evenement) {\n//       return res.status(400).json({ message: \"Tous les champs essentiels sont requis.\" });\n//     }\n\n//     if (![\"Barrage\", \"√âliminatoire\", \"Finale\"].includes(phase) && !journee) {\n//       return res.status(400).json({ message: \"Le champ 'journee' est requis.\" });\n//     }\n\n//     if (![\"Groupe\", \"Qualification\", \"Classement\", \"Barrage\"].includes(phase) && !tour_final) {\n//       return res.status(400).json({ message: \"Le champ 'tour_final' est requis.\" });\n//     }\n\n//     // üîç R√©cup√©rer l'ID des √©quipes\n//     const equipeA = await db(\"equipes\").where({ nom_equipe: participant_a }).first();\n//     const equipeB = await db(\"equipes\").where({ nom_equipe: participant_b }).first();\n\n//     if (!equipeA || !equipeB) {\n//       return res.status(400).json({ message: \"Les √©quipes s√©lectionn√©es n'existent pas.\" });\n//     }\n\n//     // üîç R√©cup√©rer les poules des √©quipes A et B\n//     const poulesA = await db(\"poule_participants\")\n//       .where({ id_participant: equipeA.id_participant })\n//       .pluck(\"id_poule\");\n\n//     const poulesB = await db(\"poule_participants\")\n//       .where({ id_participant: equipeB.id_participant })\n//       .pluck(\"id_poule\");\n\n//     if (!poulesA.length || !poulesB.length) {\n//       return res.status(400).json({ message: \"Impossible de trouver la poule des participants.\" });\n//     }\n\n//     // üîç V√©rifier si une poule est commune aux deux participants\n//     const pouleCommune = poulesA.find(poule => poulesB.includes(poule));\n\n//     if (!pouleCommune) {\n//       return res.status(400).json({ message: \"Les participants ne sont pas dans la m√™me poule.\" });\n//     }\n\n//     // üîç V√©rifier que cette poule appartient bien √† l'√©v√©nement donn√©\n//     const pouleInfo = await db(\"poules\")\n//       .where({ id_poule: pouleCommune, id_evenement })\n//       .first();\n\n//     if (!pouleInfo) {\n//       return res.status(400).json({ message: \"La poule des participants doit √™tre li√©e √† l'√©v√©nement.\" });\n//     }\n\n//     // üîπ Ins√©rer la rencontre\n//     const matchData = {\n//       phase,\n//       participant_a: equipeA.nom_equipe,\n//       participant_b: equipeB.nom_equipe,\n//       lieu_rencontre,\n//       id_resultat,\n//       date_rencontre,\n//       heure_rencontre,\n//       id_evenement,\n//       journee: journee || null,\n//       tour_final: tour_final || null,\n//       id_poule: pouleCommune\n//     };\n\n//     // Ins√©rer la rencontre\n//     const [newMatchId] = await db(\"rencontre\").insert(matchData);\n//     console.log(`‚úÖ Match ins√©r√© avec succ√®s (ID: ${newMatchId})`);\n\n//     // üîπ R√©cup√©rer la rencontre nouvellement cr√©√©e\n//     const newMatch = await db(\"rencontre\").where({ id_rencontre: newMatchId }).first();\n\n//     res.status(201).json({ message: \"Rencontre cr√©√©e avec succ√®s.\", match: newMatch });\n\n//   } catch (error) {\n//     console.error(\"‚ùå Erreur lors de la cr√©ation de la rencontre :\", error);\n//     res.status(500).json({ message: \"Erreur serveur lors de la cr√©ation de la rencontre.\" });\n//   }\n// };\n\nexports.createMatch = async (req, res) => {\n  try {\n    const {\n      phase,\n      participant_a,\n      participant_b,\n      lieu_rencontre,\n      date_rencontre,\n      heure_rencontre,\n      id_evenement,\n      journee,\n      tour_final\n    } = req.body;\n\n    // V√©rification des champs essentiels\n    if (!phase || !participant_a || !participant_b || !lieu_rencontre || !date_rencontre || !heure_rencontre || !id_evenement) {\n      return res.status(400).json({\n        message: \"Tous les champs essentiels sont requis.\"\n      });\n    }\n    if (![\"Barrage\", \"√âliminatoire\", \"Finale\"].includes(phase) && !journee) {\n      return res.status(400).json({\n        message: \"Le champ 'journee' est requis.\"\n      });\n    }\n    if (![\"Groupe\", \"Qualification\", \"Classement\", \"Barrage\"].includes(phase) && !tour_final) {\n      return res.status(400).json({\n        message: \"Le champ 'tour_final' est requis.\"\n      });\n    }\n\n    // üîç R√©cup√©rer les √©quipes\n    const equipeA = await db(\"equipes\").where({\n      nom_equipe: participant_a\n    }).first();\n    const equipeB = await db(\"equipes\").where({\n      nom_equipe: participant_b\n    }).first();\n    if (!equipeA || !equipeB) {\n      return res.status(400).json({\n        message: \"Les √©quipes s√©lectionn√©es n'existent pas.\"\n      });\n    }\n\n    // üîç V√©rifier les poules\n    const poulesA = await db(\"poule_participants\").where({\n      id_participant: equipeA.id_participant\n    }).pluck(\"id_poule\");\n    const poulesB = await db(\"poule_participants\").where({\n      id_participant: equipeB.id_participant\n    }).pluck(\"id_poule\");\n    const pouleCommune = poulesA.find(p => poulesB.includes(p));\n    if (!pouleCommune) {\n      return res.status(400).json({\n        message: \"Les participants ne sont pas dans la m√™me poule.\"\n      });\n    }\n    const pouleInfo = await db(\"poules\").where({\n      id_poule: pouleCommune,\n      id_evenement\n    }).first();\n    if (!pouleInfo) {\n      return res.status(400).json({\n        message: \"La poule n'est pas li√©e √† cet √©v√©nement.\"\n      });\n    }\n\n    // ‚úÖ √âTAPE 1 : Cr√©er un r√©sultat vide\n    const [idResultat] = await db(\"resultat\").insert({\n      score_A: 0,\n      score_B: 0,\n      point_victoire: null,\n      point_matchnul: null,\n      point_defaite: null,\n      classement_general: 0,\n      date_resultat: new Date(),\n      id_evenement: id_evenement,\n      id_calendrier: 0,\n      id_rencontre: 0 // temporairement null\n    });\n\n    // ‚úÖ √âTAPE 2 : Cr√©er la rencontre avec ce id_resultat\n    const [newMatchId] = await db(\"rencontre\").insert({\n      phase,\n      participant_a: equipeA.nom_equipe,\n      participant_b: equipeB.nom_equipe,\n      lieu_rencontre,\n      id_resultat: idResultat,\n      date_rencontre,\n      heure_rencontre,\n      id_evenement,\n      journee: journee || null,\n      tour_final: tour_final || null,\n      id_poule: pouleCommune\n    });\n\n    // ‚úÖ √âTAPE 3 : Mettre √† jour le r√©sultat avec l'ID de la rencontre\n    await db(\"resultat\").where({\n      id_resultat: idResultat\n    }).update({\n      id_rencontre: newMatchId\n    });\n    const newMatch = await db(\"rencontre\").where({\n      id_rencontre: newMatchId\n    }).first();\n    res.status(201).json({\n      message: \"Rencontre cr√©√©e avec succ√®s.\",\n      match: newMatch\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la cr√©ation de la rencontre :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la cr√©ation de la rencontre.\"\n    });\n  }\n};\nexports.getMatchesByEvent = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n    const matches = await db(\"rencontre\").select(\"id_rencontre\", \"participant_a\", \"participant_b\", \"date_rencontre\", \"heure_rencontre\", \"lieu_rencontre\", \"phase\", \"journee\", \"tour_final\").where(\"id_evenement\", eventId);\n\n    // Groupement des matchs par phase/journ√©e/tour final\n    const groupedMatches = matches.reduce((acc, match) => {\n      const key = `${match.phase}_${match.journee || \"0\"}_${match.tour_final || \"0\"}`;\n      if (!acc[key]) {\n        acc[key] = {\n          phase: match.phase,\n          journee: match.journee,\n          tour_final: match.tour_final,\n          matches: []\n        };\n      }\n      acc[key].matches.push({\n        id_rencontre: match.id_rencontre,\n        participant_a: match.participant_a,\n        // D√©j√† stock√© sous forme de nom\n        participant_b: match.participant_b,\n        // D√©j√† stock√© sous forme de nom\n        date_rencontre: match.date_rencontre,\n        heure_rencontre: match.heure_rencontre,\n        lieu_rencontre: match.lieu_rencontre\n      });\n      return acc;\n    }, {});\n    res.status(200).json(Object.values(groupedMatches));\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\"\n    });\n  }\n};\n\n// R√©cup√©rer les infos du participant avec son √©quipe\nexports.getParticipantById = async (req, res) => {\n  const {\n    participantId\n  } = req.params;\n  if (!participantId) {\n    return res.status(400).json({\n      message: \"ID du participant requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer les infos du participant avec son √©quipe\n    const participant = await db('participants as p').leftJoin('equipes as e', 'p.id_participant', 'e.id_participant').where({\n      'p.id_participant': participantId\n    }).select('p.*', 'e.nom_equipe', 'e.categorie_equipe').first();\n    if (!participant) {\n      return res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n    res.status(200).json(participant);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du participant:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration du participant.\"\n    });\n  }\n};\n\n// Suppression d'une rencontre par ID\nexports.deleteMatch = async (req, res) => {\n  const {\n    matchId\n  } = req.params;\n  try {\n    const deletedRows = await db('rencontre').where('id_rencontre', matchId).del();\n    if (deletedRows === 0) {\n      return res.status(404).json({\n        message: \"Rencontre non trouv√©e.\"\n      });\n    }\n    res.status(200).json({\n      message: \"Rencontre supprim√©e avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression de la rencontre :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la suppression de la rencontre.\"\n    });\n  }\n};\n\n// Fonction pour r√©cup√©rer toutes les rencontres de tous les √©v√©nements d'un organisateur\nexports.getAllCalendarMatches = async (req, res) => {\n  try {\n    // R√©cup√©rer tous les √©v√©nements de l'organisateur\n    const events = await db('evenement').where('id_organisateur', req.user.id) // On suppose que l'organisateur est dans req.user.id\n    .select('id_evenement'); // On ne s√©lectionne que les ID des √©v√©nements\n\n    if (events.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\"\n      });\n    }\n\n    // R√©cup√©rer toutes les rencontres de tous les √©v√©nements\n    const allMatches = [];\n    for (const event of events) {\n      const matches = await db('rencontre').where({\n        id_evenement: event.id_evenement\n      }).select('*').orderBy('date_rencontre', 'asc').orderBy('heure_rencontre', 'asc');\n      allMatches.push(...matches);\n    }\n\n    // V√©rifier si la phase \"Aller-Retour\" est bien pr√©sente dans les r√©sultats\n    console.log(matches); // V√©rifiez dans la console si la phase est correcte\n\n    if (allMatches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e.\"\n      });\n    }\n    res.status(200).json(allMatches);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du calendrier des rencontres :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\"\n    });\n  }\n};\nexports.getCalendarMatchesByEvent = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n    const matches = await db('rencontre').where({\n      id_evenement: eventId\n    }).select('id_rencontre', 'date_rencontre', 'heure_rencontre', 'participant_a', 'participant_b', 'lieu_rencontre', 'phase', 'journee', 'tour_final');\n    console.log(\"Donn√©es envoy√©es par l'API :\", matches); // üîç V√©rification des donn√©es avant envoi\n\n    res.status(200).json(matches);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration du calendrier des rencontres.\"\n    });\n  }\n};\n\n// recuperation de toute participant \nexports.getAllParticipantsByOrganizer = async (req, res) => {\n  const organizerId = req.user?.id; // R√©cup√©rer l'ID de l'organisateur authentifi√©\n\n  if (!organizerId) {\n    return res.status(403).json({\n      message: \"L'ID de l'organisateur est introuvable.\"\n    });\n  }\n  try {\n    // Jointure entre `evenements`, `participer` et `participants`\n    const participants = await db('participer').join('participants', 'participer.id_participant', '=', 'participants.id_participant').join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement') // Correction ici\n    .select('participants.id_participant', 'participants.nom_part', 'evenement.nom_event', 'participer.id_evenement').where('evenement.id_organisateur', organizerId); // Filtrer par organisateur\n\n    if (!participants || participants.length === 0) {\n      return res.status(404).json({\n        message: 'Aucun participant trouv√© pour vos √©v√©nements.'\n      });\n    }\n    res.status(200).json(participants);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// Envoi d'email depuis un organisateur vers un participant\nexports.sendEmailToParticipant = async (req, res) => {\n  const {\n    id\n  } = req.params; // ID du participant\n  const {\n    subject,\n    content\n  } = req.body; // Sujet et contenu du mail\n  const organizerId = req.user.id; // R√©cup√©ration de l'ID de l'organisateur depuis le token\n\n  try {\n    // V√©rifier si le participant existe\n    const participant = await getParticipantByIdQuery(id);\n    if (!participant) {\n      return res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n\n    // V√©rifier si l'organisateur existe\n    const organizer = await getOrganizerByIdQuery(organizerId);\n    if (!organizer) {\n      return res.status(404).json({\n        message: \"Organisateur non trouv√©.\"\n      });\n    }\n\n    // Configuration du service d'email (Nodemailer)\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: process.env.EMAIL_USER,\n        // Adresse email utilis√©e pour envoyer les emails\n        pass: process.env.EMAIL_PASS // Mot de passe ou cl√© d'application\n      }\n    });\n\n    // D√©finition de l'email √† envoyer\n    const mailOptions = {\n      from: organizer.email_organisateur,\n      // L'email de l'organisateur en tant qu'exp√©diteur\n      to: participant.email_part,\n      // Destinataire : le participant\n      subject: subject + \" (Message de votre organisateur)\",\n      text: `Bonjour ${participant.nom_part},\\n\\n${content}\\n\\nCordialement,\\n${organizer.nom_organisateur}`\n    };\n\n    // Envoi de l'email\n    await transporter.sendMail(mailOptions);\n    res.status(200).json({\n      message: `Email envoy√© avec succ√®s √† ${participant.email_part} depuis ${organizer.email_organisateur}.`\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de l'envoi de l'email :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de l'envoi de l'email.\"\n    });\n  }\n};\n\n// **************************Resultats*****************************\n// pour r√©cup√©rer les informations d'un √©v√©nement s√©lectionn√©\n\nexports.getEventResultats = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    console.log(\"üîç eventId re√ßu :\", eventId);\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n\n    // üîπ R√©cup√©ration du nom de l'√©v√©nement\n    const event = await db('evenement').where({\n      id_evenement: eventId\n    }).select('nom_event').first();\n    if (!event) {\n      return res.status(404).json({\n        message: \"√âv√©nement non trouv√©.\"\n      });\n    }\n\n    // üîπ R√©cup√©ration des diff√©rentes phases, journ√©es et tours finaux associ√©s √† l'√©v√©nement\n    const matchInfo = await db('rencontre').where({\n      id_evenement: eventId\n    }).select('phase', 'journee', 'tour_final').groupBy('phase', 'journee', 'tour_final'); // üî• On r√©cup√®re toutes les valeurs uniques\n\n    console.log(\"‚úÖ Donn√©es matchInfo :\", matchInfo);\n    if (matchInfo.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n    res.status(200).json({\n      nom_event: event.nom_event,\n      details: matchInfo // üî• On envoie un tableau contenant toutes les phases, journ√©es et tours finaux\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\",\n      error: error.message\n    });\n  }\n};\n\n// pour r√©cup√©rer les rencontres filtr√©es :\nexports.getFilteredMatchesByEvent = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    const {\n      phase,\n      journee,\n      tour_final\n    } = req.query;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"ID de l'√©v√©nement requis.\"\n      });\n    }\n    let query = db('rencontre').where({\n      id_evenement: eventId\n    }).select('id_rencontre', 'participant_a', 'participant_b', 'phase', 'journee', 'tour_final');\n\n    // Filtrage dynamique en fonction des param√®tres re√ßus\n    if (phase) {\n      query = query.where({\n        phase\n      });\n    }\n    if (journee) {\n      query = query.where({\n        journee\n      });\n    }\n    if (tour_final) {\n      query = query.where({\n        tour_final\n      });\n    }\n    const matches = await query;\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e pour ces crit√®res.\"\n      });\n    }\n    res.status(200).json(matches);\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des rencontres filtr√©es.\"\n    });\n  }\n};\n// pour enregistrer les r√©sultats des rencontres\nexports.saveMatchResults = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    let {\n      results,\n      point_victoire,\n      point_defaite,\n      point_matchnul\n    } = req.body;\n    if (!eventId) {\n      return res.status(400).json({\n        message: \"L'ID de l'√©v√©nement est requis.\"\n      });\n    }\n    if (!results || results.length === 0) {\n      return res.status(400).json({\n        message: \"Aucun r√©sultat fourni.\"\n      });\n    }\n\n    // Date actuelle pour l'enregistrement\n    const date_resultat = new Date();\n    const insertedResults = [];\n    const ignoredResults = [];\n    for (const match of results) {\n      const {\n        id_rencontre,\n        score_A,\n        score_B,\n        phase\n      } = match;\n\n      // üîπ V√©rification des phases qui ne doivent pas avoir de points\n      if ([\"Finale\", \"Barrage\", \"Aller Retour\"].includes(phase)) {\n        point_victoire = null;\n        point_defaite = null;\n        point_matchnul = null;\n      }\n\n      // V√©rifier si un r√©sultat existe d√©j√† pour ce match et cet √©v√©nement\n      const existingResult = await db('resultat').where({\n        id_rencontre,\n        id_evenement: eventId\n      }).first();\n      if (existingResult) {\n        // üîπ Ne pas ins√©rer et ajouter √† la liste des ignor√©s\n        ignoredResults.push({\n          id_rencontre,\n          message: \"R√©sultat d√©j√† existant\"\n        });\n      } else {\n        // üîπ Ins√©rer un nouveau r√©sultat\n        const [id_resultat] = await db('resultat').insert({\n          id_rencontre,\n          id_evenement: eventId,\n          score_A,\n          score_B,\n          point_victoire,\n          point_defaite,\n          point_matchnul,\n          date_resultat\n        });\n        insertedResults.push({\n          id_resultat,\n          id_rencontre,\n          score_A,\n          score_B,\n          status: \"Ins√©r√©\"\n        });\n      }\n    }\n    res.status(201).json({\n      message: \"R√©sultats trait√©s\",\n      inserted: insertedResults,\n      ignored: ignoredResults\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur lors de l'enregistrement des r√©sultats :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de l'enregistrement des r√©sultats.\"\n    });\n  }\n};\n\n// ************************** Liste Resultats*****************************\n// R√©cup√©rer les d√©tails d'un √©v√©nement et ses phases\nexports.getEventResultatList = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n\n    // V√©rifier si l'√©v√©nement existe\n    const event = await db('evenement').where({\n      id_evenement: eventId\n    }).select('nom_event').first();\n    if (!event) {\n      return res.status(404).json({\n        message: \"√âv√©nement non trouv√©.\"\n      });\n    }\n\n    // R√©cup√©rer les informations de rencontre li√©es √† cet √©v√©nement\n    const matchInfo = await db('rencontre').where({\n      id_evenement: eventId\n    }).select('phase', 'journee', 'tour_final').first(); // On r√©cup√®re un seul enregistrement\n\n    res.status(200).json({\n      nom_event: event.nom_event,\n      phase: matchInfo?.phase || 'N/A',\n      journee: matchInfo?.journee || 'N/A',\n      tour_final: matchInfo?.tour_final || 'N/A'\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\",\n      error: error.message\n    });\n  }\n};\n\n// R√©cup√©rer les r√©sultats des matchs avec jointure\nexports.getFilteredMatchesResultatList = async (req, res) => {\n  try {\n    const {\n      eventId\n    } = req.params;\n    let matches = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement').select('evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre', 'rencontre.heure_rencontre', 'rencontre.participant_a', 'rencontre.participant_b', 'resultat.score_A', 'resultat.score_B', 'rencontre.lieu_rencontre').where('resultat.id_evenement', eventId).orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun r√©sultat trouv√© pour cet √©v√©nement.\"\n      });\n    }\n\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\n    let groupedResults = {};\n    matches.forEach(match => {\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\n      if (!groupedResults[groupKey]) {\n        groupedResults[groupKey] = [];\n      }\n      groupedResults[groupKey].push(match);\n    });\n    res.status(200).json(groupedResults);\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\",\n      error: error.message\n    });\n  }\n};\n\n// ‚úÖ R√©cup√©rer les √©v√©nements SANS authentification\nexports.getPublicEvents = async (req, res) => {\n  try {\n    const events = await db('evenement').select('*'); // R√©cup√©rer tous les √©v√©nements\n    console.log(\"√âv√©nements r√©cup√©r√©s :\", events);\n    res.json(events);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n\n// ********************************* Tous les r√©sultats des matchs *********************************\n// R√©cup√©rer les r√©sultats de tous les √©v√©nements\nexports.getAllMatchesResultatList = async (req, res) => {\n  try {\n    let matches = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement').select('evenement.nom_event', 'rencontre.id_rencontre', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre', 'rencontre.heure_rencontre', 'rencontre.participant_a', 'rencontre.participant_b', 'resultat.id_resultat',\n    // ‚úÖ Ajout de `id_resultat`\n    'resultat.score_A', 'resultat.score_B', 'rencontre.lieu_rencontre').orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun r√©sultat trouv√©.\"\n      });\n    }\n\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\n    let groupedResults = {};\n    matches.forEach(match => {\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\n      if (!groupedResults[groupKey]) {\n        groupedResults[groupKey] = [];\n      }\n      groupedResults[groupKey].push(match);\n    });\n    res.status(200).json(groupedResults);\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\",\n      error: error.message\n    });\n  }\n};\n\n// Contr√¥leur pour la mise √† jour du score\nexports.updateMatchScore = async (req, res) => {\n  try {\n    const {\n      matchId\n    } = req.params;\n    const {\n      score_A,\n      score_B\n    } = req.body;\n\n    // V√©rification des valeurs\n    if (score_A === undefined || score_B === undefined) {\n      return res.status(400).json({\n        message: \"Les scores sont requis.\"\n      });\n    }\n\n    // Mise √† jour du score dans la base de donn√©es\n    const updated = await db('resultat').where({\n      id_rencontre: matchId\n    }).update({\n      score_A,\n      score_B\n    });\n    if (updated) {\n      res.status(200).json({\n        message: \"Score mis √† jour avec succ√®s !\"\n      });\n    } else {\n      res.status(404).json({\n        message: \"Match non trouv√©.\"\n      });\n    }\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la mise √† jour du score :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la mise √† jour du score.\"\n    });\n  }\n};\n\n// Contr√¥leur pour supprimer un r√©sultat de match via `id_resultat`\nexports.deleteMatchResult = async (req, res) => {\n  try {\n    const {\n      resultId\n    } = req.params; // On r√©cup√®re `id_resultat` et non `id_rencontre`\n\n    // V√©rifier si le r√©sultat existe\n    const resultExists = await db('resultat').where({\n      id_resultat: resultId\n    }).first();\n    if (!resultExists) {\n      return res.status(404).json({\n        message: \"Le r√©sultat du match n'existe pas.\"\n      });\n    }\n\n    // Suppression du r√©sultat\n    await db('resultat').where({\n      id_resultat: resultId\n    }).del();\n    res.status(200).json({\n      message: \"R√©sultat supprim√© avec succ√®s !\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la suppression du r√©sultat :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur lors de la suppression du r√©sultat.\"\n    });\n  }\n};\n// ********************************* Classement *********************************\n\nexports.getClassement = async (req, res) => {\n  try {\n    const phasesAExclure = [\"Barrage\", \"√âliminatoire\", \"Aller Retour\", \"Finale\"];\n    let query = db(\"resultat\").join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\").join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\").join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\").select(\"evenement.nom_event\", \"evenement.nom_sport\", \"rencontre.id_evenement\", \"rencontre.phase\", \"rencontre.journee\", \"rencontre.id_poule\", \"poules.nom_poule\", \"rencontre.participant_a\", \"rencontre.participant_b\", \"resultat.score_A\", \"resultat.score_B\", \"resultat.point_victoire\", \"resultat.point_matchnul\", \"resultat.point_defaite\").whereNotIn(\"rencontre.phase\", phasesAExclure);\n    const resultats = await query;\n    if (!resultats.length) {\n      return res.status(200).json({\n        classement: {}\n      });\n    }\n    let classementParEvenement = {};\n    resultats.forEach(match => {\n      const eventKey = match.nom_event;\n      const phaseKey = `Phase: ${match.phase}`;\n      const journeeKey = `Journ√©e ${match.journee}`;\n      const pouleKey = `Poule ${match.nom_poule}`;\n      const sport = match.nom_sport.toLowerCase();\n      if (!classementParEvenement[eventKey]) {\n        classementParEvenement[eventKey] = {};\n      }\n      if (!classementParEvenement[eventKey][phaseKey]) {\n        classementParEvenement[eventKey][phaseKey] = {};\n      }\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey]) {\n        classementParEvenement[eventKey][phaseKey][journeeKey] = {};\n      }\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey]) {\n        classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey] = [];\n      }\n      [match.participant_a, match.participant_b].forEach((equipe, i) => {\n        const score = i === 0 ? match.score_A : match.score_B;\n        const adversaireScore = i === 0 ? match.score_B : match.score_A;\n        const victoire = score > adversaireScore ? 1 : 0;\n        const defaite = score < adversaireScore ? 1 : 0;\n        const matchJoue = 1;\n        let points = 0;\n        if (score > adversaireScore) {\n          points = match.point_victoire;\n        } else if (score === adversaireScore) {\n          points = match.point_matchnul;\n        } else {\n          points = match.point_defaite;\n        }\n        const team = classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].find(equipeData => equipeData.nom_equipe === equipe);\n        if (team) {\n          if (sport === \"basketball\") {\n            team.mj += matchJoue;\n            team.v += victoire;\n            team.d += defaite;\n            team.points_marques += score;\n            team.points_concedes += adversaireScore;\n            team.difference_points += score - adversaireScore;\n          } else if (sport === \"p√©tanque\") {\n            team.points += points;\n            team.points_marques += score;\n            team.points_concedes += adversaireScore;\n            team.difference_points += score - adversaireScore;\n          } else {\n            team.points += points;\n            team.buts_marques += score;\n            team.buts_encaisses += adversaireScore;\n            team.difference_buts += score - adversaireScore;\n          }\n        } else {\n          classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].push({\n            nom_equipe: equipe,\n            points: points,\n            buts_marques: sport !== \"basketball\" ? score : undefined,\n            buts_encaisses: sport !== \"basketball\" ? adversaireScore : undefined,\n            difference_buts: sport !== \"basketball\" ? score - adversaireScore : undefined,\n            points_marques: sport === \"basketball\" || sport === \"p√©tanque\" ? score : undefined,\n            points_concedes: sport === \"basketball\" || sport === \"p√©tanque\" ? adversaireScore : undefined,\n            difference_points: sport === \"basketball\" || sport === \"p√©tanque\" ? score - adversaireScore : undefined,\n            mj: sport === \"basketball\" ? matchJoue : undefined,\n            v: sport === \"basketball\" ? victoire : undefined,\n            d: sport === \"basketball\" ? defaite : undefined\n          });\n        }\n      });\n    });\n\n    // Ajout du Classement G√©n√©ral\n    Object.keys(classementParEvenement).forEach(eventKey => {\n      let classementGeneral = {};\n      Object.keys(classementParEvenement[eventKey]).forEach(phaseKey => {\n        Object.keys(classementParEvenement[eventKey][phaseKey]).forEach(journeeKey => {\n          Object.keys(classementParEvenement[eventKey][phaseKey][journeeKey]).forEach(pouleKey => {\n            classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].forEach(team => {\n              const equipeKey = team.nom_equipe;\n              if (!classementGeneral[equipeKey]) {\n                classementGeneral[equipeKey] = {\n                  ...team\n                };\n              } else {\n                Object.keys(team).forEach(stat => {\n                  if (typeof team[stat] === \"number\") {\n                    classementGeneral[equipeKey][stat] += team[stat];\n                  }\n                });\n              }\n            });\n          });\n        });\n      });\n      classementParEvenement[eventKey][\"Classement G√©n√©ral\"] = {\n        \"Classement G√©n√©ral\": Object.values(classementGeneral).sort((a, b) => b.points - a.points)\n      };\n    });\n    res.status(200).json({\n      classement: classementParEvenement\n    });\n  } catch (error) {\n    console.error(\"Erreur serveur :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\",\n      error\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHQiLCJyZXF1aXJlIiwiZGIiLCJqd3QiLCJzZW5kQWN0aXZhdGlvbkVtYWlsIiwiVG9rZW4iLCJjcnlwdG8iLCJub2RlbWFpbGVyIiwiY3JlYXRlT3JnYW5pemVyUXVlcnkiLCJnZXRPcmdhbml6ZXJCeUVtYWlsUXVlcnkiLCJnZXRBbGxPcmdhbml6ZXJzUXVlcnkiLCJnZXRPcmdhbml6ZXJCeUlkUXVlcnkiLCJnZXRFdmVudFdpdGhPcmdhbml6ZXJRdWVyeSIsInVwZGF0ZU9yZ2FuaXplclF1ZXJ5IiwiZGVsZXRlT3JnYW5pemVyUXVlcnkiLCJpbnNlcnRUb2tlblF1ZXJ5IiwiZ2V0UGFydGljaXBhbnRCeUlkUXVlcnkiLCJsb2ciLCJQYXJzZXIiLCJleHBvcnRzIiwibG9naW4iLCJyZXEiLCJyZXMiLCJlbWFpbCIsInBhc3N3b3JkIiwiYm9keSIsImNvbnNvbGUiLCJvcmdhbml6ZXIiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImlzQWN0aXZlIiwidmFsaWRQYXNzd29yZCIsImNvbXBhcmUiLCJtZHBfb3JnYW5pc2F0ZXVyIiwidG9rZW4iLCJzaWduIiwiaWQiLCJpZF9vcmdhbmlzYXRldXIiLCJyb2xlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJvcmdhbml6ZXJJZCIsImVycm9yIiwiY3JlYXRlT3JnYW5pemVyIiwibm9tX29yZ2FuaXNhdGV1ciIsInByZW5vbV9vcmdhbmlzYXRldXIiLCJlbWFpbF9vcmdhbmlzYXRldXIiLCJ0ZWxfb3JnYW5pc2F0ZXVyIiwiZXhpc3RpbmdPcmdhbml6ZXIiLCJleGlzdGluZ1Rva2VuRW50cnkiLCJ3aGVyZSIsImZpcnN0IiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiYWN0aXZhdGlvblRva2VuIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsImV4cGlyZXNBdCIsIkRhdGUiLCJub3ciLCJnZXRPcmdhbml6ZXJCeUlkIiwicGFyYW1zIiwicGFyc2VJbnQiLCJpc05hTiIsImdldE9yZ2FuaXplckNvdW50IiwiY291bnQiLCJ0b3RhbCIsImdldFByb2ZpbE9yZ2FuaXplciIsInVzZXIiLCJuYW1lIiwicHJlbm9tIiwiZGF0ZV9pbnNjcmlwdGlvbiIsInVwZGF0ZVByb2ZpbE9yZ2FuaXplciIsIm9sZFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJ1cGRhdGVEYXRhIiwiU3RyaW5nIiwiaXNNYXRjaCIsInJlc3VsdCIsImdldEFsbE9yZ2FuaXplcnMiLCJvcmdhbml6ZXJzIiwibGVmdEpvaW4iLCJzZWxlY3QiLCJncm91cEJ5IiwiZWRpdE9yZ2FuaXplciIsImRlbGV0ZU9yZ2FuaXplciIsInRvZ2dsZU9yZ2FuaXplclN0YXR1cyIsIm5ld1N0YXR1cyIsImFjdGl2YXRlQWNjb3VudCIsInRva2VuRW50cnkiLCJleHBpcmVzX2F0IiwiYWxsVG9rZW5zIiwiZGVsIiwicmVkaXJlY3QiLCJjaGVja0VtYWlsIiwiaXNBdmFpbGFibGUiLCJjaGVja0ZpcnN0TmFtZSIsImZpcnN0TmFtZSIsImNoZWNrTGFzdE5hbWUiLCJsYXN0TmFtZSIsInNlbmRSZXNldENvZGUiLCJyZXNldENvZGUiLCJyZXNldENvZGVFeHBpcnkiLCJ1cGRhdGUiLCJyZXNldF9jb2RlIiwicmVzZXRfY29kZV9leHBpcnkiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwiRU1BSUxfVVNFUiIsInBhc3MiLCJFTUFJTF9QQVNTIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidG8iLCJzdWJqZWN0IiwidGV4dCIsInNlbmRNYWlsIiwiZXJyIiwidmVyaWZ5UmVzZXRDb2RlIiwiY29kZSIsInJlc2V0UGFzc3dvcmQiLCJjcmVhdGVFdmVudCIsIm5vbV9ldmVudCIsInR5cGVfZXZlbnQiLCJub21fc3BvcnQiLCJsaWV1X2V2ZW50IiwibmJyX3BhcnRpY2lwYW50IiwiZ2VucmVfcGFydGljaXBhbnQiLCJkYXRlX2RlYnV0IiwiZGF0ZV9maW4iLCJkYXRlX2NyZWF0aW9uRXZlbnQiLCJkZXNjcmlwdGlvbl9hY2N1ZWlsIiwiZGVzY3JpcHRpb25fZGV0YWlsIiwiY2F0ZWdvcmllX3BhcnRpY2lwYW50IiwiZnJhaXNfaW5zY3JpcHRpb24iLCJzdGF0dXRfZXZlbnQiLCJpZF9jaGFsbGVuZ2UiLCJ0aWNrZXRzIiwiaW5jbHVkZXMiLCJsb2dvX2V2ZW50IiwiZmlsZXMiLCJmaWxlbmFtZSIsImltYWdlc19hY2N1ZWlsIiwiaW1hZ2VzX2NvbnRlbnUiLCJ0eXBlc190aWNrZXRzIiwibmJyX3RvdGFsX3RpY2tldHMiLCJwYXJzZWRUaWNrZXRzIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwidGlja2V0IiwidHlwZSIsInR5cGVfdGlja2V0IiwicHJpeCIsInByaXhfdGlja2V0IiwicXVhbnRpdGUiLCJuYnJfdGlja2V0X2Rpc3BvbmlibGUiLCJyZWR1Y2UiLCJpbnNlcnQiLCJzdHJpbmdpZnkiLCJnZXRFdmVudEFsbCIsImV2ZW50cyIsImxlbmd0aCIsImdldEFsbEV2ZW50cyIsImV2ZW50c1dpdGhJbWFnZVBhdGhzIiwiZXZlbnQiLCJnZXRFdmVudEJ5SWQiLCJpZF9ldmVuZW1lbnQiLCJnZXRFdmVudFdpdGhPcmdhbml6ZXIiLCJ1cGRhdGVFdmVudCIsInVwZGF0ZWRFdmVudCIsImRlbGV0ZUV2ZW50IiwiZ2V0QWxsUHVibGljRXZlbnRzIiwiZ2V0RXZlbnREZXRhaWxCeUlkIiwiZ2V0RXZlbnRzQnlPcmdhbml6ZXJJZCIsImdldFBhcnRpY2lwYW50c0J5RXZlbnRJZCIsImV2ZW50SWQiLCJwYXJ0aWNpcGFudHMiLCJnZXRBbGxQYXJ0aWNpcGFudHNCeU9yZ2FuaXplciIsImpvaW4iLCJkZWxldGVQYXJ0aWNpcGFudCIsInBhcnRpY2lwYW50SWQiLCJwYXJ0aWNpcGFudCIsImlkX3BhcnRpY2lwYW50IiwiYWNoZXRlclRpY2tldCIsInF1YW50aXR5IiwidGlja2V0VXBkYXRlZCIsInVwZGF0ZWRUaWNrZXRzIiwiY3VycmVudFN0b2NrIiwid2FybiIsIk1hdGgiLCJtYXgiLCJnZXRFdmVudHNCeU9yZ2FuaXplciIsImdldFBhcnRpY2lwYW50c0FuZENvdW50QnlFdmVudCIsIm5iclBhcnRpY2lwYW50IiwiY3JlYXRlUG9vbHMiLCJwb29scyIsImV4aXN0aW5nUG9vbHMiLCJpbnNlcnRlZFBvb2xzIiwibm9tX3BvdWxlIiwiY3JlYXRlZF9hdCIsInJldHVybmluZyIsImFzc2lnblBhcnRpY2lwYW50c1RvUG9vbHMiLCJzaHVmZmxlQXJyYXkiLCJhcnJheSIsImkiLCJqIiwiZmxvb3IiLCJyYW5kb20iLCJzaHVmZmxlZFBhcnRpY2lwYW50cyIsIm51bVBvb2xzIiwibnVtUGFydGljaXBhbnRzIiwibWluUGVyUG9vbCIsImV4dHJhUGFydGljaXBhbnRzIiwiYXNzaWdubWVudHMiLCJpbmRleCIsInBvb2xEaXN0cmlidXRpb24iLCJudW1Ub0Fzc2lnbiIsImlkX3BvdWxlIiwicHVzaCIsImdldFBvb2xzV2l0aFBhcnRpY2lwYW50cyIsIndoZXJlSW4iLCJwIiwicG9vbHNXaXRoUGFydGljaXBhbnRzIiwicG9vbCIsImZpbHRlciIsImdldEV2ZW50c1dpdGhQb29scyIsImV2ZW50c1dpdGhQb29scyIsImRpc3RpbmN0IiwiYWRkUGFydGljaXBhbnRNYW51YWwiLCJhbHJlYWR5QXNzaWduZWQiLCJhbmRXaGVyZSIsImV4aXN0aW5nUG91bGUiLCJuZXdQb3VsZUlkIiwiZGVsZXRlUG9vbHNGb3JFdmVudCIsInBvb2xJZHMiLCJnZXRFdmVudHNCeU9yZ2FuaXplck1hdGNoIiwiZ2V0UG9vbHNXaXRoUGFydGljaXBhbnRzTWF0Y2giLCJjcmVhdGVNYXRjaCIsInBoYXNlIiwicGFydGljaXBhbnRfYSIsInBhcnRpY2lwYW50X2IiLCJsaWV1X3JlbmNvbnRyZSIsImRhdGVfcmVuY29udHJlIiwiaGV1cmVfcmVuY29udHJlIiwiam91cm5lZSIsInRvdXJfZmluYWwiLCJlcXVpcGVBIiwibm9tX2VxdWlwZSIsImVxdWlwZUIiLCJwb3VsZXNBIiwicGx1Y2siLCJwb3VsZXNCIiwicG91bGVDb21tdW5lIiwiZmluZCIsInBvdWxlIiwicG91bGVJbmZvIiwibWF0Y2hEYXRhIiwibmV3TWF0Y2hJZCIsIm5ld01hdGNoIiwiaWRfcmVuY29udHJlIiwibWF0Y2giLCJnZXRNYXRjaGVzQnlFdmVudCIsIm1hdGNoZXMiLCJncm91cGVkTWF0Y2hlcyIsImFjYyIsImtleSIsIk9iamVjdCIsInZhbHVlcyIsImdldFBhcnRpY2lwYW50QnlJZCIsImRlbGV0ZU1hdGNoIiwibWF0Y2hJZCIsImRlbGV0ZWRSb3dzIiwiZ2V0QWxsQ2FsZW5kYXJNYXRjaGVzIiwiYWxsTWF0Y2hlcyIsIm9yZGVyQnkiLCJnZXRDYWxlbmRhck1hdGNoZXNCeUV2ZW50IiwiZ2V0RXZlbnRSZXN1bHRhdHMiLCJtYXRjaEluZm8iLCJkZXRhaWxzIiwiZ2V0RmlsdGVyZWRNYXRjaGVzQnlFdmVudCIsInF1ZXJ5Iiwic2F2ZU1hdGNoUmVzdWx0cyIsInJlc3VsdHMiLCJwb2ludF92aWN0b2lyZSIsInBvaW50X2RlZmFpdGUiLCJwb2ludF9tYXRjaG51bCIsImRhdGVfcmVzdWx0YXQiLCJpbnNlcnRlZFJlc3VsdHMiLCJpZ25vcmVkUmVzdWx0cyIsInNjb3JlX0EiLCJzY29yZV9CIiwiZXhpc3RpbmdSZXN1bHQiLCJpZF9yZXN1bHRhdCIsImluc2VydGVkIiwiaWdub3JlZCIsImdldEV2ZW50UmVzdWx0YXRMaXN0IiwiZ2V0RmlsdGVyZWRNYXRjaGVzUmVzdWx0YXRMaXN0IiwiZ3JvdXBlZFJlc3VsdHMiLCJmb3JFYWNoIiwiZ3JvdXBLZXkiLCJnZXRQdWJsaWNFdmVudHMiLCJnZXRBbGxNYXRjaGVzUmVzdWx0YXRMaXN0IiwidXBkYXRlTWF0Y2hTY29yZSIsInVuZGVmaW5lZCIsInVwZGF0ZWQiLCJkZWxldGVNYXRjaFJlc3VsdCIsInJlc3VsdElkIiwicmVzdWx0RXhpc3RzIiwiZ2V0Q2xhc3NlbWVudCIsInBoYXNlc0FFeGNsdXJlIiwid2hlcmVOb3RJbiIsInJlc3VsdGF0cyIsImNsYXNzZW1lbnQiLCJjbGFzc2VtZW50UGFyRXZlbmVtZW50IiwiZXZlbnRLZXkiLCJwaGFzZUtleSIsImpvdXJuZWVLZXkiLCJwb3VsZUtleSIsInNwb3J0IiwidG9Mb3dlckNhc2UiLCJlcXVpcGUiLCJzY29yZSIsImFkdmVyc2FpcmVTY29yZSIsInZpY3RvaXJlIiwiZGVmYWl0ZSIsIm1hdGNoSm91ZSIsInBvaW50cyIsInRlYW0iLCJlcXVpcGVEYXRhIiwibWoiLCJ2IiwiZCIsInBvaW50c19tYXJxdWVzIiwicG9pbnRzX2NvbmNlZGVzIiwiZGlmZmVyZW5jZV9wb2ludHMiLCJidXRzX21hcnF1ZXMiLCJidXRzX2VuY2Fpc3NlcyIsImRpZmZlcmVuY2VfYnV0cyIsImtleXMiLCJjbGFzc2VtZW50R2VuZXJhbCIsImVxdWlwZUtleSIsInN0YXQiLCJzb3J0IiwiYSIsImIiLCJnZXRPcmdhbml6ZXJUaWNrZXRzIiwic2FsZXMiLCJyYXciLCJleHBvcnRPcmdhbml6ZXJUaWNrZXRzIiwiZmllbGRzIiwianNvbjJjc3ZQYXJzZXIiLCJjc3YiLCJoZWFkZXIiLCJhdHRhY2htZW50Iiwic2VuZCIsImlkUmVzdWx0YXQiLCJjbGFzc2VtZW50X2dlbmVyYWwiLCJpZF9jYWxlbmRyaWVyIiwic2VuZEVtYWlsVG9QYXJ0aWNpcGFudCIsImNvbnRlbnQiLCJlbWFpbF9wYXJ0Iiwibm9tX3BhcnQiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJPcmdhbml6ZXJDb250cm9sZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGInKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IHsgc2VuZEFjdGl2YXRpb25FbWFpbCB9ID0gcmVxdWlyZSgnLi9Pcmdhbml6ZXJFbWFpbFNlcnZpY2UnKTsgLy8gSW1wb3J0IGR1IHNlcnZpY2UgZCdlbnZvaSBkJ2VtYWlsXHJcbmNvbnN0IFRva2VuID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9qd3RNaWRkbGV3YXJlJyk7IC8vIE1vZMOobGUgcG91ciBsYSB0YWJsZSBUb2tlblxyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuY29uc3Qge1xyXG4gIGNyZWF0ZU9yZ2FuaXplclF1ZXJ5LFxyXG4gIGdldE9yZ2FuaXplckJ5RW1haWxRdWVyeSxcclxuICBnZXRBbGxPcmdhbml6ZXJzUXVlcnksXHJcbiAgZ2V0T3JnYW5pemVyQnlJZFF1ZXJ5LFxyXG4gIGdldEV2ZW50V2l0aE9yZ2FuaXplclF1ZXJ5LFxyXG4gIHVwZGF0ZU9yZ2FuaXplclF1ZXJ5LFxyXG4gIGRlbGV0ZU9yZ2FuaXplclF1ZXJ5LFxyXG4gIGluc2VydFRva2VuUXVlcnksXHJcbiAgZ2V0UGFydGljaXBhbnRCeUlkUXVlcnksXHJcblxyXG59ID0gcmVxdWlyZSgnLi4vcXVlcmllcycpOyAvLyBJbXBvcnQgZGVzIHJlcXXDqnRlc1xyXG5jb25zdCB7IGxvZyB9ID0gcmVxdWlyZSgnY29uc29sZScpO1xyXG5jb25zdCB7IFBhcnNlciB9ID0gcmVxdWlyZShcImpzb24yY3N2XCIpO1xyXG5cclxuLy8gRm9uY3Rpb24gZGUgY29ubmV4aW9uIHBvdXIgbCdvcmdhbmlzYXRldXJcclxuZXhwb3J0cy5sb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuICBjb25zb2xlLmxvZygnRG9ubsOpZXMgcmXDp3VlcyA6JywgcmVxLmJvZHkpOyAvLyBMb2cgZGVzIGRvbm7DqWVzIHJlw6d1ZXNcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG9yZ2FuaXplciA9IGF3YWl0IGdldE9yZ2FuaXplckJ5RW1haWxRdWVyeShlbWFpbCk7XHJcblxyXG4gICAgaWYgKCFvcmdhbml6ZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ09yZ2FuaXNhdGV1ciBub24gdHJvdXbDqScgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFbDqXJpZmlleiBzaSBsZSBjb21wdGUgZXN0IGFjdGl2w6lcclxuICAgIGlmICghb3JnYW5pemVyLmlzQWN0aXZlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiVmV1aWxsZXogYWN0aXZlciB2b3RyZSBjb21wdGUgZW4gdsOpcmlmaWFudCB2b3RyZSBlbWFpbC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB2YWxpZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIG9yZ2FuaXplci5tZHBfb3JnYW5pc2F0ZXVyKTtcclxuICAgIGlmICghdmFsaWRQYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTW90IGRlIHBhc3NlIGluY29ycmVjdCcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3LDqWVyIHVuIHRva2VuIEpXVCBhdmVjIGwnSUQgZGUgbCdvcmdhbmlzYXRldXJcclxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogb3JnYW5pemVyLmlkX29yZ2FuaXNhdGV1ciwgcm9sZTogJ29yZ2FuaXplcicgfSxcclxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcclxuICAgICAgeyBleHBpcmVzSW46ICcxaCcgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiAnQ29ubmV4aW9uIHLDqXVzc2llJyxcclxuICAgICAgdG9rZW4sIC8vIEVudm9pZSBsZSB0b2tlbiBhdSBmcm9udGVuZFxyXG4gICAgICBvcmdhbml6ZXJJZDogb3JnYW5pemVyLmlkX29yZ2FuaXNhdGV1ciAvLyBBam91dGUgbCdJRCBkZSBsJ29yZ2FuaXNhdGV1ciBwb3VyIHJlZGlyZWN0aW9uIGF1IGRhc2hib2FyZFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBzZXJ2ZXVyIDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1cicsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuY3JlYXRlT3JnYW5pemVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBub21fb3JnYW5pc2F0ZXVyLCBwcmVub21fb3JnYW5pc2F0ZXVyLCBlbWFpbF9vcmdhbmlzYXRldXIsIHRlbF9vcmdhbmlzYXRldXIsIG1kcF9vcmdhbmlzYXRldXIgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnNvbGUubG9nKFwiRG9ubsOpZXMgcmXDp3VlczpcIiwgcmVxLmJvZHkpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coXCJWw6lyaWZpY2F0aW9uIGRlIGwnZW1haWwgZXhpc3RhbnQuLi5cIik7XHJcbiAgICBjb25zdCBleGlzdGluZ09yZ2FuaXplciA9IGF3YWl0IGdldE9yZ2FuaXplckJ5RW1haWxRdWVyeShlbWFpbF9vcmdhbmlzYXRldXIpO1xyXG4gICAgY29uc3QgZXhpc3RpbmdUb2tlbkVudHJ5ID0gYXdhaXQgZGIoJ3Rva2VucycpLndoZXJlKHsgZW1haWw6IGVtYWlsX29yZ2FuaXNhdGV1ciB9KS5maXJzdCgpO1xyXG5cclxuICAgIGlmIChleGlzdGluZ09yZ2FuaXplciB8fCBleGlzdGluZ1Rva2VuRW50cnkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0NldCBlbWFpbCBlc3QgZMOpasOgIGVucmVnaXN0csOpLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJIYXNoaW5nIGR1IG1vdCBkZSBwYXNzZS4uLlwiKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gobWRwX29yZ2FuaXNhdGV1ciwgMTApO1xyXG5cclxuICAgIC8vIEfDqW7DqXJhdGlvbiBkJ3VuIHRva2VuIGQnYWN0aXZhdGlvbiB1bmlxdWVcclxuICAgIGNvbnN0IGFjdGl2YXRpb25Ub2tlbiA9IGNyeXB0by5yYW5kb21CeXRlcygyMCkudG9TdHJpbmcoJ2hleCcpO1xyXG4gICAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyBFeHBpcmF0aW9uIGRhbnMgMjQgaGV1cmVzXHJcblxyXG4gICAgLy8gU3RvY2tlciBsZXMgZG9ubsOpZXMgZGFucyBsYSB0YWJsZSAndG9rZW5zJ1xyXG4gICAgY29uc29sZS5sb2coXCJJbnNlcnRpb24gZHUgdG9rZW4gZXQgZGVzIGRvbm7DqWVzIHV0aWxpc2F0ZXVyIGRhbnMgbGEgdGFibGUgdG9rZW5zLi4uXCIpO1xyXG4gICAgYXdhaXQgaW5zZXJ0VG9rZW5RdWVyeSh7XHJcbiAgICAgIHRva2VuOiBhY3RpdmF0aW9uVG9rZW4sXHJcbiAgICAgIGV4cGlyZXNBdCxcclxuICAgICAgZW1haWw6IGVtYWlsX29yZ2FuaXNhdGV1cixcclxuICAgICAgbm9tX29yZ2FuaXNhdGV1cixcclxuICAgICAgcHJlbm9tX29yZ2FuaXNhdGV1cixcclxuICAgICAgdGVsX29yZ2FuaXNhdGV1cixcclxuICAgICAgbWRwX29yZ2FuaXNhdGV1cjogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFbnZveWVyIGwnZS1tYWlsIGQnYWN0aXZhdGlvbiBhdmVjIGxlIGxpZW4gY29udGVuYW50IGxlIG3Dqm1lIHRva2VuXHJcbiAgICBjb25zb2xlLmxvZyhcIkVudm9pIGRlIGwnZW1haWwgZCdhY3RpdmF0aW9uLi4uXCIpO1xyXG4gICAgYXdhaXQgc2VuZEFjdGl2YXRpb25FbWFpbChlbWFpbF9vcmdhbmlzYXRldXIsIGFjdGl2YXRpb25Ub2tlbik7IC8vIFRyYW5zbWV0dGV6IGxlIHRva2VuIGljaVxyXG4gICAgY29uc29sZS5sb2coXCJUb2tlbiBnw6luw6lyw6kgcG91ciBsJ2FjdGl2YXRpb24gOlwiLCBhY3RpdmF0aW9uVG9rZW4pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ0luc2NyaXB0aW9uIHLDqXVzc2llICEgVmV1aWxsZXogdsOpcmlmaWVyIHZvdHJlIGVtYWlsIHBvdXIgY29uZmlybWVyLicgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsJ2luc2NyaXB0aW9uOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbCdpbnNjcmlwdGlvbi4gVmV1aWxsZXogcsOpZXNzYXllci5cIiwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy9yw6ljdXDDqXJhdGlvbiBkZSBsJ29yZ2FuaXNhdGV1ciBwYXIgaWRcclxuZXhwb3J0cy5nZXRPcmdhbml6ZXJCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJSZXF1w6p0ZSByZcOndWUgYXZlYyBwYXJhbXMgOlwiLCByZXEucGFyYW1zKTsgLy8gVsOpcmlmaWVyIGxlcyBwYXJhbcOodHJlc1xyXG5cclxuICBjb25zdCBpZCA9IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQsIDEwKTsgLy8gQ29udmVydGlyIGwnSUQgZW4gZW50aWVyXHJcblxyXG4gIGlmIChpc05hTihpZCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBpbnZhbGlkZSwgZG9pdCDDqnRyZSB1biBub21icmUuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgICAvLyBDb3JyZWN0aW9uIDogQ29udmVydGlyIGwnSUQgZXQgdXRpbGlzZXIgbGUgYm9uIGNoYW1wIFwiaWRfb3JnYW5pc2F0ZXVyXCJcclxuICAgICAgY29uc3Qgb3JnYW5pemVyID0gYXdhaXQgZGIoJ29yZ2FuaXNhdGV1cicpLndoZXJlKCdpZF9vcmdhbmlzYXRldXInLCBpZCkuZmlyc3QoKTtcclxuXHJcbiAgICAgIGlmICghb3JnYW5pemVyKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIk9yZ2FuaXNhdGV1ciBub24gdHJvdXbDqVwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuanNvbihvcmdhbml6ZXIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUgbCdvcmdhbmlzYXRldXIgOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlIG5vbWJyZSB0b3RhbCBkJ29yZ2FuaXNhdGV1cnNcclxuXHJcbmV4cG9ydHMuZ2V0T3JnYW5pemVyQ291bnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBkYignb3JnYW5pc2F0ZXVyJykuY291bnQoJ2lkX29yZ2FuaXNhdGV1ciBhcyB0b3RhbCcpLmZpcnN0KCk7IC8vIOKchSBSw6ljdXDDqHJlIHNldWxlbWVudCBsZSBub21icmUgdG90YWxcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG90YWw6IGNvdW50LnRvdGFsIH0pOyAvLyDinIUgUmV0b3VybmUgeyB0b3RhbDogWCB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkdSBjb21wdGFnZSBkZXMgb3JnYW5pc2F0ZXVycyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFByb2ZpbE9yZ2FuaXplciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBBc3N1cmV6LXZvdXMgcXVlIG9yZ2FuaXplcklkIGVzdCB1biBlbnRpZXIuXHJcbiAgICBjb25zdCBvcmdhbml6ZXJJZCA9IHBhcnNlSW50KHJlcS51c2VyPy5pZCAsIDEwKTtcclxuICAgIGlmICghb3JnYW5pemVySWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0lEIGRlIGxcXCdvcmdhbmlzYXRldXIgbWFucXVhbnQgb3UgaW52YWxpZGUnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9yZ2FuaXplciA9IGF3YWl0IGdldE9yZ2FuaXplckJ5SWRRdWVyeShvcmdhbml6ZXJJZCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkRvbm7DqWVzIGRlIGwnb3JnYW5pc2F0ZXVyIDpcIiwgb3JnYW5pemVyKTtcclxuXHJcbiAgICBpZiAoIW9yZ2FuaXplcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnT3JnYW5pc2F0ZXVyIG5vbiB0cm91dsOpJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIG5hbWU6IG9yZ2FuaXplci5ub21fb3JnYW5pc2F0ZXVyLFxyXG4gICAgICBlbWFpbDogb3JnYW5pemVyLmVtYWlsX29yZ2FuaXNhdGV1cixcclxuICAgICAgcHJlbm9tOiBvcmdhbml6ZXIucHJlbm9tX29yZ2FuaXNhdGV1cixcclxuICAgICAgdGVsX29yZ2FuaXNhdGV1cjogb3JnYW5pemVyLnRlbF9vcmdhbmlzYXRldXIsXHJcbiAgICAgIGRhdGVfaW5zY3JpcHRpb246IG9yZ2FuaXplci5kYXRlX2luc2NyaXB0aW9uLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGR1IHByb2ZpbCA6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXInIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMudXBkYXRlUHJvZmlsT3JnYW5pemVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3Qgb3JnYW5pemVySWQgPSByZXEudXNlcj8uaWQ7XHJcbiAgY29uc3QgeyBuYW1lLCBwcmVub20sIGVtYWlsLCB0ZWxfb3JnYW5pc2F0ZXVyLCBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkRvbm7DqWVzIHJlw6d1ZXMgOlwiLCB7IG5hbWUsIHByZW5vbSwgZW1haWwsIHRlbF9vcmdhbmlzYXRldXIsIG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH0pO1xyXG5cclxuICAgIC8vIFLDqWN1cMOpcmF0aW9uIGRlIGwnb3JnYW5pc2F0ZXVyXHJcbiAgICBjb25zdCBvcmdhbml6ZXIgPSBhd2FpdCBnZXRPcmdhbml6ZXJCeUlkUXVlcnkob3JnYW5pemVySWQpO1xyXG4gICAgaWYgKCFvcmdhbml6ZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ09yZ2FuaXNhdGV1ciBub24gdHJvdXbDqScgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcIk9yZ2FuaXNhdGV1ciByw6ljdXDDqXLDqSA6XCIsIG9yZ2FuaXplcik7XHJcblxyXG4gICAgLy8gSW5pdGlhbGlzYXRpb24gZGVzIGRvbm7DqWVzIMOgIG1ldHRyZSDDoCBqb3VyXHJcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xyXG4gICAgICBub21fb3JnYW5pc2F0ZXVyOiBuYW1lLFxyXG4gICAgICBwcmVub21fb3JnYW5pc2F0ZXVyOiBwcmVub20sXHJcbiAgICAgIGVtYWlsX29yZ2FuaXNhdGV1cjogZW1haWwsXHJcbiAgICAgIHRlbF9vcmdhbmlzYXRldXI6IFN0cmluZyh0ZWxfb3JnYW5pc2F0ZXVyKSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gVsOpcmlmaWNhdGlvbiBkZSBsJ2FuY2llbiBtb3QgZGUgcGFzc2Ugc2kgbsOpY2Vzc2FpcmVcclxuICAgIGlmIChvbGRQYXNzd29yZCAmJiBvcmdhbml6ZXIubWRwX29yZ2FuaXNhdGV1cikge1xyXG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUob2xkUGFzc3dvcmQsIG9yZ2FuaXplci5tZHBfb3JnYW5pc2F0ZXVyKTtcclxuICAgICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0FuY2llbiBtb3QgZGUgcGFzc2UgaW5jb3JyZWN0JyB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChvbGRQYXNzd29yZCAmJiAhb3JnYW5pemVyLm1kcF9vcmdhbmlzYXRldXIpIHtcclxuICAgICAgLy8gU2kgYXVjdW4gYW5jaWVuIG1vdCBkZSBwYXNzZSBuJ2VzdCBkw6lmaW5pIHBvdXIgY2V0IHV0aWxpc2F0ZXVyLCBwZXJtZXR0cmUgbGEgbWlzZSDDoCBqb3VyXHJcbiAgICAgIGlmIChuZXdQYXNzd29yZCAmJiBuZXdQYXNzd29yZCA9PT0gY29uZmlybVBhc3N3b3JkKSB7XHJcbiAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChuZXdQYXNzd29yZCwgMTApO1xyXG4gICAgICAgIHVwZGF0ZURhdGEubWRwX29yZ2FuaXNhdGV1ciA9IGhhc2hlZFBhc3N3b3JkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdMZSBub3V2ZWF1IG1vdCBkZSBwYXNzZSBldCBsYSBjb25maXJtYXRpb24gbmUgY29ycmVzcG9uZGVudCBwYXMnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG5ld1Bhc3N3b3JkICYmIG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0xlIG5vdXZlYXUgbW90IGRlIHBhc3NlIGV0IGxhIGNvbmZpcm1hdGlvbiBuZSBjb3JyZXNwb25kZW50IHBhcycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFzaGFnZSBkdSBub3V2ZWF1IG1vdCBkZSBwYXNzZSBzaSBmb3Vybmkgc2FucyBhbmNpZW4gbW90IGRlIHBhc3NlXHJcbiAgICBpZiAobmV3UGFzc3dvcmQgJiYgIW9sZFBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gobmV3UGFzc3dvcmQsIDEwKTtcclxuICAgICAgdXBkYXRlRGF0YS5tZHBfb3JnYW5pc2F0ZXVyID0gaGFzaGVkUGFzc3dvcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlzZSDDoCBqb3VyIGRlIGwnb3JnYW5pc2F0ZXVyIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlT3JnYW5pemVyUXVlcnkob3JnYW5pemVySWQsIHVwZGF0ZURhdGEpO1xyXG4gICAgY29uc29sZS5sb2coJ0Rvbm7DqWVzIGRlIG1pc2Ugw6Agam91ciA6JywgdXBkYXRlRGF0YSk7XHJcbiAgICBjb25zb2xlLmxvZygnUsOpc3VsdGF0IGRlIGxhIG1pc2Ugw6Agam91cjonLCByZXN1bHQpO1xyXG5cclxuICAgIGlmIChyZXN1bHQgPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ8OJY2hlYyBkZSBsYSBtaXNlIMOgIGpvdXIgZHUgcHJvZmlsJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdQcm9maWwgbWlzIMOgIGpvdXIgYXZlYyBzdWNjw6hzJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyIGR1IHByb2ZpbDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZHUgcHJvZmlsJywgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRBbGxPcmdhbml6ZXJzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG9yZ2FuaXplcnMgPSBhd2FpdCBkYihcIm9yZ2FuaXNhdGV1clwiKVxyXG4gICAgICAubGVmdEpvaW4oXCJldmVuZW1lbnRcIiwgXCJvcmdhbmlzYXRldXIuaWRfb3JnYW5pc2F0ZXVyXCIsIFwiZXZlbmVtZW50LmlkX29yZ2FuaXNhdGV1clwiKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgIFwib3JnYW5pc2F0ZXVyLmlkX29yZ2FuaXNhdGV1clwiLFxyXG4gICAgICAgIFwib3JnYW5pc2F0ZXVyLm5vbV9vcmdhbmlzYXRldXJcIixcclxuICAgICAgICBcIm9yZ2FuaXNhdGV1ci5wcmVub21fb3JnYW5pc2F0ZXVyXCIsXHJcbiAgICAgICAgXCJvcmdhbmlzYXRldXIuZW1haWxfb3JnYW5pc2F0ZXVyXCJcclxuICAgICAgKVxyXG4gICAgICAuY291bnQoXCJldmVuZW1lbnQuaWRfZXZlbmVtZW50IGFzIGV2ZW50Q291bnRcIikgLy8gQ29tcHRlciBsZXMgw6l2w6luZW1lbnRzXHJcbiAgICAgIC5ncm91cEJ5KFwib3JnYW5pc2F0ZXVyLmlkX29yZ2FuaXNhdGV1clwiKTsgLy8gR3JvdXBlciBwYXIgb3JnYW5pc2F0ZXVyXHJcblxyXG4gICAgY29uc29sZS5sb2coXCJPcmdhbmlzYXRldXJzIHLDqWN1cMOpcsOpcyA6XCIsIG9yZ2FuaXplcnMpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ob3JnYW5pemVycyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgb3JnYW5pc2F0ZXVycyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBGb25jdGlvbiBwb3VyIG1vZGlmaWVyIHVuIG9yZ2FuaXNhdGV1clxyXG5leHBvcnRzLmVkaXRPcmdhbml6ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gIGNvbnN0IHsgbm9tX29yZ2FuaXNhdGV1ciwgcHJlbm9tX29yZ2FuaXNhdGV1ciwgZW1haWxfb3JnYW5pc2F0ZXVyLCB0ZWxfb3JnYW5pc2F0ZXVyLCBtZHBfb3JnYW5pc2F0ZXVyIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHVwZGF0ZU9yZ2FuaXplclF1ZXJ5KGlkLCB7IG5vbV9vcmdhbmlzYXRldXIsIHByZW5vbV9vcmdhbmlzYXRldXIsIGVtYWlsX29yZ2FuaXNhdGV1ciwgdGVsX29yZ2FuaXNhdGV1ciwgbWRwX29yZ2FuaXNhdGV1ciB9KTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ09yZ2FuaXNhdGV1ciBtb2RpZmnDqSBhdmVjIHN1Y2PDqHMnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSBtb2RpZmljYXRpb24gZGUgbFxcJ29yZ2FuaXNhdGV1cicsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZvbmN0aW9uIHBvdXIgc3VwcHJpbWVyIHVuIG9yZ2FuaXNhdGV1clxyXG5leHBvcnRzLmRlbGV0ZU9yZ2FuaXplciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBkZWxldGVPcmdhbml6ZXJRdWVyeShpZCk7IC8vIFV0aWxpc2F0aW9uIGRlIGxhIHJlcXXDqnRlIGV4dGVybmFsaXPDqWVcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ09yZ2FuaXNhdGV1ciBzdXBwcmltw6kgYXZlYyBzdWNjw6hzJyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbFxcJ29yZ2FuaXNhdGV1cicsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5leHBvcnRzLnRvZ2dsZU9yZ2FuaXplclN0YXR1cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBvcmdhbml6ZXIgPSBhd2FpdCBnZXRPcmdhbml6ZXJCeUlkUXVlcnkoaWQpO1xyXG5cclxuICAgIGlmICghb3JnYW5pemVyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdPcmdhbmlzYXRldXIgbm9uIHRyb3V2w6knIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld1N0YXR1cyA9ICFvcmdhbml6ZXIuaXNBY3RpdmU7XHJcbiAgICBhd2FpdCB1cGRhdGVPcmdhbml6ZXJRdWVyeShpZCwgeyBpc0FjdGl2ZTogbmV3U3RhdHVzIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaXNBY3RpdmU6IG5ld1N0YXR1cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbFxcJ2FjdGl2YXRpb24vZMOpc2FjdGl2YXRpb24gOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxcXCdhY3RpdmF0aW9uL2TDqXNhY3RpdmF0aW9uJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmFjdGl2YXRlQWNjb3VudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBBZmZpY2hhZ2UgZHUgdG9rZW4gcmXDp3UgZGFucyBsJ1VSTCBwb3VyIHbDqXJpZmljYXRpb25cclxuICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gZGUgbCdVUkw6XCIsIGBcIiR7dG9rZW59XCJgKTtcclxuXHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgZG9ubsOpZXMgdXRpbGlzYXRldXIgZW4gdXRpbGlzYW50IGxlIHRva2VuXHJcbiAgICBjb25zdCB0b2tlbkVudHJ5ID0gYXdhaXQgZGIoJ3Rva2VucycpLndoZXJlKHsgdG9rZW4gfSkuZmlyc3QoKTtcclxuICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gRW50cnkgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzOlwiLCB0b2tlbkVudHJ5KTtcclxuXHJcbiAgICAvLyBWw6lyaWZpY2F0aW9uIGRlIGxhIGNvcnJlc3BvbmRhbmNlIGRlcyB0b2tlbnNcclxuICAgIGlmICh0b2tlbkVudHJ5ICYmIHRva2VuICE9PSB0b2tlbkVudHJ5LnRva2VuKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiTGVzIHRva2VucyBuZSBjb3JyZXNwb25kZW50IHBhcyAhXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdG9rZW5FbnRyeSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlRva2VuIG5vbiB0cm91dsOpIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZmZpY2hlciBsYSBkYXRlIGQnZXhwaXJhdGlvbiBldCBsYSBkYXRlIGFjdHVlbGxlIHBvdXIgdsOpcmlmaWNhdGlvblxyXG4gICAgY29uc29sZS5sb2coXCJEYXRlIGQnZXhwaXJhdGlvbiA6XCIsIHRva2VuRW50cnkuZXhwaXJlc19hdCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkRhdGUgYWN0dWVsbGUgOlwiLCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgICBpZiAobmV3IERhdGUodG9rZW5FbnRyeS5leHBpcmVzX2F0KSA8IG5ldyBEYXRlKCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMZSBsaWVuIGQnYWN0aXZhdGlvbiBhIGV4cGlyw6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUsOpY3Vww6lyYXRpb24gZXQgYWZmaWNoYWdlIGRlIHRvdXMgbGVzIHRva2VucyBwb3VyIGRpYWdub3N0aWNcclxuICAgIGNvbnN0IGFsbFRva2VucyA9IGF3YWl0IGRiKCd0b2tlbnMnKS5zZWxlY3QoJyonKTtcclxuICAgIGNvbnNvbGUubG9nKFwiVG91cyBsZXMgdG9rZW5zIGVucmVnaXN0csOpcyA6XCIsIGFsbFRva2Vucyk7XHJcblxyXG4gICAgLy8gQ3LDqWVyIGwnb3JnYW5pc2F0ZXVyIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgY29uc3Qgb3JnYW5pemVySWQgPSBhd2FpdCBjcmVhdGVPcmdhbml6ZXJRdWVyeSh7XHJcbiAgICAgIG5vbV9vcmdhbmlzYXRldXI6IHRva2VuRW50cnkubm9tX29yZ2FuaXNhdGV1cixcclxuICAgICAgcHJlbm9tX29yZ2FuaXNhdGV1cjogdG9rZW5FbnRyeS5wcmVub21fb3JnYW5pc2F0ZXVyLFxyXG4gICAgICBlbWFpbF9vcmdhbmlzYXRldXI6IHRva2VuRW50cnkuZW1haWwsXHJcbiAgICAgIHRlbF9vcmdhbmlzYXRldXI6IHRva2VuRW50cnkudGVsX29yZ2FuaXNhdGV1cixcclxuICAgICAgbWRwX29yZ2FuaXNhdGV1cjogdG9rZW5FbnRyeS5tZHBfb3JnYW5pc2F0ZXVyLFxyXG4gICAgICBkYXRlX2luc2NyaXB0aW9uOiBuZXcgRGF0ZSgpLFxyXG4gICAgICBpc0FjdGl2ZTogdHJ1ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU3VwcHJpbWVyIGxlIHRva2VuIGFwcsOocyBhY3RpdmF0aW9uXHJcbiAgICBhd2FpdCBkYigndG9rZW5zJykud2hlcmUoeyB0b2tlbiB9KS5kZWwoKTtcclxuXHJcbiAgICAvLyBSZWRpcmVjdGlvbiB2ZXJzIGxhIHBhZ2UgZGUgY29ubmV4aW9uIG91IGF1dHJlXHJcbiAgICByZXMucmVkaXJlY3QoYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sb2dpbj9hY3RpdmF0aW9uPXN1Y2Nlc3NgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGwnYWN0aXZhdGlvbiBkdSBjb21wdGUgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbCdhY3RpdmF0aW9uIGR1IGNvbXB0ZS5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBWw6lyaWZpZXogc2kgbCdlbWFpbCBleGlzdGUgZMOpasOgIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG5leHBvcnRzLmNoZWNrRW1haWwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGVtYWlsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFbDqXJpZmlleiBzaSBsJ2VtYWlsIGV4aXN0ZSBkw6lqw6AgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbiAgICBjb25zdCBleGlzdGluZ09yZ2FuaXplciA9IGF3YWl0IGRiKCdvcmdhbmlzYXRldXInKS53aGVyZSh7IGVtYWlsX29yZ2FuaXNhdGV1cjogZW1haWwgfSkuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoZXhpc3RpbmdPcmdhbml6ZXIpIHtcclxuICAgICAgLy8gU2kgbCdlbWFpbCBlc3QgZMOpasOgIHV0aWxpc8OpXHJcbiAgICAgIHJlcy5qc29uKHsgaXNBdmFpbGFibGU6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gU2kgbCdlbWFpbCBuJ2VzdCBwYXMgdXRpbGlzw6lcclxuICAgICAgcmVzLmpzb24oeyBpc0F2YWlsYWJsZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHbDqXJpZmljYXRpb24gZGUgbCdlbWFpbCA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5leHBvcnRzLmNoZWNrRmlyc3ROYW1lID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBmaXJzdE5hbWUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZXhpc3RpbmdPcmdhbml6ZXIgPSBhd2FpdCBkYignb3JnYW5pc2F0ZXVyJykud2hlcmUoeyBwcmVub21fb3JnYW5pc2F0ZXVyOiBmaXJzdE5hbWUgfSkuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoZXhpc3RpbmdPcmdhbml6ZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKHsgaXNBdmFpbGFibGU6IGZhbHNlIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKHsgaXNBdmFpbGFibGU6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSB2w6lyaWZpY2F0aW9uIGR1IHByw6lub20gOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gVsOpcmlmaWNhdGlvbiBkZSBsJ3VuaWNpdMOpIGR1IG5vbSAobGFzdE5hbWUpXHJcbmV4cG9ydHMuY2hlY2tMYXN0TmFtZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgbGFzdE5hbWUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZXhpc3RpbmdPcmdhbml6ZXIgPSBhd2FpdCBkYignb3JnYW5pc2F0ZXVyJykud2hlcmUoeyBub21fb3JnYW5pc2F0ZXVyOiBsYXN0TmFtZSB9KS5maXJzdCgpO1xyXG5cclxuICAgIGlmIChleGlzdGluZ09yZ2FuaXplcikge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oeyBpc0F2YWlsYWJsZTogZmFsc2UgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oeyBpc0F2YWlsYWJsZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHbDqXJpZmljYXRpb24gZHUgbm9tIDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBFbnZveWVyIGxlIGNvZGUgZGUgcsOpaW5pdGlhbGlzYXRpb24gbW90IGRlIHBhc3NlIG91YmxpZXIgT3JnYW5pc2F0ZXVyXHJcbmV4cG9ydHMuc2VuZFJlc2V0Q29kZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3Qgb3JnYW5pemVyID0gYXdhaXQgZGIoJ29yZ2FuaXNhdGV1cicpLndoZXJlKHsgZW1haWxfb3JnYW5pc2F0ZXVyOiBlbWFpbCB9KS5maXJzdCgpO1xyXG4gICAgaWYgKCFvcmdhbml6ZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0VtYWlsIG5vbiB0cm91dsOpLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzZXRDb2RlID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDMpLnRvU3RyaW5nKCdoZXgnKTsgLy8gR8OpbsOocmUgdW4gY29kZSBkZSByw6lpbml0aWFsaXNhdGlvblxyXG4gICAgY29uc3QgcmVzZXRDb2RlRXhwaXJ5ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDE1ICogNjAgKiAxMDAwKTsgLy8gRXhwaXJlIGFwcsOocyAxNSBtaW51dGVzXHJcblxyXG4gICAgLy8gTWV0dHJlIMOgIGpvdXIgbGEgYmFzZSBkZSBkb25uw6llcyBhdmVjIGxlIGNvZGUgZXQgbGEgZGF0ZSBkJ2V4cGlyYXRpb25cclxuICAgIGF3YWl0IGRiKCdvcmdhbmlzYXRldXInKVxyXG4gICAgICAud2hlcmUoeyBlbWFpbF9vcmdhbmlzYXRldXI6IGVtYWlsIH0pXHJcbiAgICAgIC51cGRhdGUoeyByZXNldF9jb2RlOiByZXNldENvZGUsIHJlc2V0X2NvZGVfZXhwaXJ5OiByZXNldENvZGVFeHBpcnkgfSk7XHJcblxyXG4gICAgLy8gRW52b3llciBsJ2VtYWlsXHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgc2VydmljZTogJ2dtYWlsJyxcclxuICAgICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsXHJcbiAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfUEFTUyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxyXG4gICAgICB0bzogZW1haWwsXHJcbiAgICAgIHN1YmplY3Q6ICdDb2RlIGRlIHLDqWluaXRpYWxpc2F0aW9uIGRlIG1vdCBkZSBwYXNzZScsXHJcbiAgICAgIHRleHQ6IGBWb3RyZSBjb2RlIGRlIHLDqWluaXRpYWxpc2F0aW9uIGVzdCA6ICR7cmVzZXRDb2RlfS4gQ2UgY29kZSBleHBpcmVyYSBkYW5zIDE1IG1pbnV0ZXMuYCxcclxuICAgIH07XHJcblxyXG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0NvZGUgZGUgcsOpaW5pdGlhbGlzYXRpb24gZW52b3nDqSDDoCB2b3RyZSBlbWFpbC4nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbFxcJ2Vudm9pIGR1IGNvZGUgZGUgcsOpaW5pdGlhbGlzYXRpb24gOicsIGVycik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFZhbGlkZXIgbGUgY29kZSBkZSByw6lpbml0aWFsaXNhdGlvbiBtb3QgZGUgcGFzc2Ugb3VibGllciBPcmdhbmlzYXRldXJcclxuZXhwb3J0cy52ZXJpZnlSZXNldENvZGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGVtYWlsLCBjb2RlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG9yZ2FuaXplciA9IGF3YWl0IGRiKCdvcmdhbmlzYXRldXInKVxyXG4gICAgICAud2hlcmUoeyBlbWFpbF9vcmdhbmlzYXRldXI6IGVtYWlsLCByZXNldF9jb2RlOiBjb2RlIH0pXHJcbiAgICAgIC5maXJzdCgpO1xyXG5cclxuICAgIGlmICghb3JnYW5pemVyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdDb2RlIGludmFsaWRlIG91IGV4cGlyw6kuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgaWYgKG5ldyBEYXRlKG9yZ2FuaXplci5yZXNldF9jb2RlX2V4cGlyeSkgPCBub3cpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0NvZGUgZXhwaXLDqS4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0NvZGUgdmFsaWRlLicgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSB2w6lyaWZpY2F0aW9uIGR1IGNvZGUgOicsIGVycik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFLDqWluaXRpYWxpc2VyIGxlIG1vdCBkZSBwYXNzZSBtb3QgZGUgcGFzc2Ugb3VibGllciBPcmdhbmlzYXRldXJcclxuZXhwb3J0cy5yZXNldFBhc3N3b3JkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xyXG5cclxuICAgIGF3YWl0IGRiKCdvcmdhbmlzYXRldXInKVxyXG4gICAgICAud2hlcmUoeyBlbWFpbF9vcmdhbmlzYXRldXI6IGVtYWlsIH0pXHJcbiAgICAgIC51cGRhdGUoeyBtZHBfb3JnYW5pc2F0ZXVyOiBoYXNoZWRQYXNzd29yZCwgcmVzZXRfY29kZTogbnVsbCwgcmVzZXRfY29kZV9leHBpcnk6IG51bGwgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTW90IGRlIHBhc3NlIHLDqWluaXRpYWxpc8OpIGF2ZWMgc3VjY8Oocy4nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpaW5pdGlhbGlzYXRpb24gZHUgbW90IGRlIHBhc3NlIDonLCBlcnIpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXIuJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyoqKioqKioqKioqKioqKioqKioqKkNyZWF0aW9uIGQnZXZlbmVtZW50KioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcblxyXG5leHBvcnRzLmNyZWF0ZUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgbm9tX2V2ZW50LFxyXG4gICAgdHlwZV9ldmVudCxcclxuICAgIG5vbV9zcG9ydCxcclxuICAgIGxpZXVfZXZlbnQsXHJcbiAgICBuYnJfcGFydGljaXBhbnQsXHJcbiAgICBnZW5yZV9wYXJ0aWNpcGFudCwgLy8gSW5jbHV0IGdlbnJlX3BhcnRpY2lwYW50XHJcbiAgICBkYXRlX2RlYnV0LFxyXG4gICAgZGF0ZV9maW4sXHJcbiAgICBkYXRlX2NyZWF0aW9uRXZlbnQsXHJcbiAgICBkZXNjcmlwdGlvbl9hY2N1ZWlsLFxyXG4gICAgZGVzY3JpcHRpb25fZGV0YWlsLFxyXG4gICAgY2F0ZWdvcmllX3BhcnRpY2lwYW50LFxyXG4gICAgZnJhaXNfaW5zY3JpcHRpb24sXHJcbiAgICBzdGF0dXRfZXZlbnQsXHJcbiAgICBpZF9jaGFsbGVuZ2UsXHJcbiAgICB0aWNrZXRzXHJcbiAgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gVmFsaWRhdGlvbiBwb3VyIGdlbnJlX3BhcnRpY2lwYW50XHJcbiAgICBpZiAoIVsnTWFzY3VsaW4nLCAnRsOpbWluaW4nLCAnTWl4dGUnXS5pbmNsdWRlcyhnZW5yZV9wYXJ0aWNpcGFudCkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1ZhbGV1ciBpbnZhbGlkZSBwb3VyIGdlbnJlX3BhcnRpY2lwYW50JyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvcmdhbml6ZXJJZCA9IHJlcS51c2VyPy5pZDtcclxuXHJcbiAgICBjb25zdCBsb2dvX2V2ZW50ID0gcmVxLmZpbGVzLmxvZ29fZXZlbnQgPyByZXEuZmlsZXMubG9nb19ldmVudFswXS5maWxlbmFtZSA6IG51bGw7XHJcbiAgICBjb25zdCBpbWFnZXNfYWNjdWVpbCA9IHJlcS5maWxlcy5pbWFnZXNfYWNjdWVpbCA/IHJlcS5maWxlcy5pbWFnZXNfYWNjdWVpbFswXS5maWxlbmFtZSA6IG51bGw7XHJcbiAgICBjb25zdCBpbWFnZXNfY29udGVudSA9IHJlcS5maWxlcy5pbWFnZXNfY29udGVudSA/IHJlcS5maWxlcy5pbWFnZXNfY29udGVudVswXS5maWxlbmFtZSA6IG51bGw7XHJcbiAgICAvLyBWw6lyaWZpY2F0aW9uIGV0IHRyYW5zZm9ybWF0aW9uIGRlcyB0aWNrZXRzIGVuIEpTT05cclxuICAgIGxldCB0eXBlc190aWNrZXRzID0gW107XHJcbiAgICBsZXQgbmJyX3RvdGFsX3RpY2tldHMgPSAwO1xyXG5cclxuICAgIGlmICh0aWNrZXRzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkVGlja2V0cyA9IHR5cGVvZiB0aWNrZXRzID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UodGlja2V0cykgOiB0aWNrZXRzO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZFRpY2tldHMpKSB7XHJcbiAgICAgICAgICB0eXBlc190aWNrZXRzID0gcGFyc2VkVGlja2V0cy5tYXAodGlja2V0ID0+ICh7XHJcbiAgICAgICAgICAgIHR5cGU6IHRpY2tldC50eXBlX3RpY2tldCxcclxuICAgICAgICAgICAgcHJpeDogdGlja2V0LnByaXhfdGlja2V0LFxyXG4gICAgICAgICAgICBxdWFudGl0ZTogcGFyc2VJbnQodGlja2V0Lm5icl90aWNrZXRfZGlzcG9uaWJsZSwgMTApXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICBuYnJfdG90YWxfdGlja2V0cyA9IHR5cGVzX3RpY2tldHMucmVkdWNlKCh0b3RhbCwgdGlja2V0KSA9PiB0b3RhbCArIHRpY2tldC5xdWFudGl0ZSwgMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdMZSBmb3JtYXQgZGVzIHRpY2tldHMgZXN0IGludmFsaWRlJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBkZSBwYXJzaW5nIGRlcyB0aWNrZXRzIDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdGb3JtYXQgSlNPTiBpbnZhbGlkZSBwb3VyIHRpY2tldHMnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgZGIoJ2V2ZW5lbWVudCcpLmluc2VydCh7XHJcbiAgICAgIG5vbV9ldmVudCxcclxuICAgICAgdHlwZV9ldmVudCxcclxuICAgICAgbm9tX3Nwb3J0LFxyXG4gICAgICBsaWV1X2V2ZW50LFxyXG4gICAgICBuYnJfcGFydGljaXBhbnQsXHJcbiAgICAgIGdlbnJlX3BhcnRpY2lwYW50LCAvLyBEw6lqw6AgaW5jbHVzIGljaVxyXG4gICAgICBkYXRlX2RlYnV0LFxyXG4gICAgICBkYXRlX2ZpbixcclxuICAgICAgZGF0ZV9jcmVhdGlvbkV2ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbl9hY2N1ZWlsLFxyXG4gICAgICBkZXNjcmlwdGlvbl9kZXRhaWwsXHJcbiAgICAgIGNhdGVnb3JpZV9wYXJ0aWNpcGFudCxcclxuICAgICAgZnJhaXNfaW5zY3JpcHRpb24sXHJcbiAgICAgIHN0YXR1dF9ldmVudCxcclxuICAgICAgaWRfY2hhbGxlbmdlLFxyXG4gICAgICBsb2dvX2V2ZW50LFxyXG4gICAgICBpbWFnZXNfYWNjdWVpbCxcclxuICAgICAgaW1hZ2VzX2NvbnRlbnUsXHJcbiAgICAgIGlkX29yZ2FuaXNhdGV1cjogb3JnYW5pemVySWQsXHJcbiAgICAgIHR5cGVzX3RpY2tldHM6IEpTT04uc3RyaW5naWZ5KHR5cGVzX3RpY2tldHMpLCAvLyBTdG9ja2FnZSBlbiBKU09OXHJcbiAgICAgIG5icl90b3RhbF90aWNrZXRzXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnw4l2w6luZW1lbnQgY3LDqcOpIGF2ZWMgc3VjY8OocycgfSk7XHJcbiAgfVxyXG5cclxuICBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGUgbCfDqXbDqW5lbWVudDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXInLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0cy5nZXRFdmVudEFsbCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50Jykuc2VsZWN0KCcqJyk7XHJcblxyXG4gICAgaWYgKGV2ZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJBdWN1biDDqXbDqW5lbWVudCB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGV2ZW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBpbnRlcm5lIGR1IHNlcnZldXJcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcbi8vIENvbnRyw7RsZXVyIHBvdXIgYWZmaWNoZXIgbGVzIMOpdsOpbmVtZW50cyBhdmVjIGxlcyBjaGVtaW5zIGRlcyBpbWFnZXNcclxuZXhwb3J0cy5nZXRBbGxFdmVudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgb3JnYW5pemVySWQgPSByZXEudXNlcj8uaWQ7XHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9vcmdhbmlzYXRldXI6IG9yZ2FuaXplcklkIH0pO1xyXG5cclxuICAgIGNvbnN0IGV2ZW50c1dpdGhJbWFnZVBhdGhzID0gZXZlbnRzLm1hcCgoZXZlbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5ldmVudCxcclxuICAgICAgICBsb2dvX2V2ZW50OiBldmVudC5sb2dvX2V2ZW50ID8gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS91cGxvYWRzLyR7ZXZlbnQubG9nb19ldmVudH1gIDogbnVsbCxcclxuICAgICAgICBpbWFnZXNfYWNjdWVpbDogZXZlbnQuaW1hZ2VzX2FjY3VlaWwgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5pbWFnZXNfYWNjdWVpbH1gIDogbnVsbCxcclxuICAgICAgICBpbWFnZXNfY29udGVudTogZXZlbnQuaW1hZ2VzX2NvbnRlbnUgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5pbWFnZXNfY29udGVudX1gIDogbnVsbCxcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGV2ZW50c1dpdGhJbWFnZVBhdGhzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIMOpdsOpbmVtZW50czonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1cicgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gIGNvbnRyb2xlciBwb3VyIGxhIGdldCB1biBldmVuZW1lbnQgcG91ciBtb2RpZmllclxyXG5leHBvcnRzLmdldEV2ZW50QnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpLndoZXJlKHsgaWRfZXZlbmVtZW50OiBpZCB9KS5maXJzdCgpO1xyXG4gICAgaWYgKCFldmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnw4l2w6luZW1lbnQgbm9uIHRyb3V2w6knIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCLDiXbDqW5lbWVudCByw6ljdXDDqXLDqSA6XCIsIGV2ZW50KTsgLy8gQWZmaWNoZXogbGVzIGTDqXRhaWxzIHLDqWN1cMOpcsOpc1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAuLi5ldmVudCxcclxuICAgICAgbG9nb19ldmVudDogZXZlbnQubG9nb19ldmVudCA/IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvdXBsb2Fkcy8ke2V2ZW50LmxvZ29fZXZlbnR9YCA6IG51bGwsXHJcbiAgICAgIGltYWdlc19hY2N1ZWlsOiBldmVudC5pbWFnZXNfYWNjdWVpbCA/IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvdXBsb2Fkcy8ke2V2ZW50LmltYWdlc19hY2N1ZWlsfWAgOiBudWxsLFxyXG4gICAgICBpbWFnZXNfY29udGVudTogZXZlbnQuaW1hZ2VzX2NvbnRlbnUgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5pbWFnZXNfY29udGVudX1gIDogbnVsbCxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZSBs4oCZw6l2w6luZW1lbnQgOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBzZXJ2ZXVyJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmdldEV2ZW50V2l0aE9yZ2FuaXplciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudCA9IGF3YWl0IGdldEV2ZW50V2l0aE9yZ2FuaXplclF1ZXJ5KGlkKTtcclxuXHJcblxyXG4gICAgaWYgKCFldmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnw4l2w6luZW1lbnQgbm9uIHRyb3V2w6knIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgLi4uZXZlbnQsXHJcbiAgICAgIGxvZ29fZXZlbnQ6IGV2ZW50LmxvZ29fZXZlbnQgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5sb2dvX2V2ZW50fWAgOiBudWxsLFxyXG4gICAgICBpbWFnZXNfYWNjdWVpbDogZXZlbnQuaW1hZ2VzX2FjY3VlaWwgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5pbWFnZXNfYWNjdWVpbH1gIDogbnVsbCxcclxuICAgICAgaW1hZ2VzX2NvbnRlbnU6IGV2ZW50LmltYWdlc19jb250ZW51ID8gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS91cGxvYWRzLyR7ZXZlbnQuaW1hZ2VzX2NvbnRlbnV9YCA6IG51bGwsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUgbOKAmcOpdsOpbmVtZW50IGF2ZWMgbOKAmW9yZ2FuaXNhdGV1ciA6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXIuJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vL21pcyBhIGpvdXIgb3UgbW9kaWZpY2F0aW9uIGV2ZW5lbWVudFxyXG5leHBvcnRzLnVwZGF0ZUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtczsgLy8gSUQgZGUgbCfDqXbDqW5lbWVudFxyXG4gIGNvbnN0IHtcclxuICAgIG5vbV9ldmVudCxcclxuICAgIHR5cGVfZXZlbnQsXHJcbiAgICBub21fc3BvcnQsXHJcbiAgICBsaWV1X2V2ZW50LFxyXG4gICAgbmJyX3BhcnRpY2lwYW50LFxyXG4gICAgZ2VucmVfcGFydGljaXBhbnQsXHJcbiAgICBkYXRlX2RlYnV0LFxyXG4gICAgZGF0ZV9maW4sXHJcbiAgICBmcmFpc19pbnNjcmlwdGlvbixcclxuICAgIHN0YXR1dF9ldmVudCxcclxuICAgIGNhdGVnb3JpZV9wYXJ0aWNpcGFudCxcclxuICAgIGRlc2NyaXB0aW9uX2FjY3VlaWwsXHJcbiAgICBkZXNjcmlwdGlvbl9kZXRhaWwsXHJcbiAgICB0aWNrZXRzXHJcbiAgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IG9yZ2FuaXplcklkID0gcmVxLnVzZXI/LmlkO1xyXG4gIGNvbnN0IGxvZ29fZXZlbnQgPSByZXEuZmlsZXMubG9nb19ldmVudCA/IHJlcS5maWxlcy5sb2dvX2V2ZW50WzBdLmZpbGVuYW1lIDogbnVsbDtcclxuICBjb25zdCBpbWFnZXNfYWNjdWVpbCA9IHJlcS5maWxlcy5pbWFnZXNfYWNjdWVpbCA/IHJlcS5maWxlcy5pbWFnZXNfYWNjdWVpbFswXS5maWxlbmFtZSA6IG51bGw7XHJcbiAgY29uc3QgaW1hZ2VzX2NvbnRlbnUgPSByZXEuZmlsZXMuaW1hZ2VzX2NvbnRlbnUgPyByZXEuZmlsZXMuaW1hZ2VzX2NvbnRlbnVbMF0uZmlsZW5hbWUgOiBudWxsO1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gVsOpcmlmaWNhdGlvbiBldCB0cmFuc2Zvcm1hdGlvbiBkZXMgdGlja2V0cyBlbiBKU09OXHJcbiAgICBsZXQgdHlwZXNfdGlja2V0cyA9IFtdO1xyXG4gICAgbGV0IG5icl90b3RhbF90aWNrZXRzID0gMDtcclxuXHJcbiAgICBpZiAodGlja2V0cykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZFRpY2tldHMgPSB0eXBlb2YgdGlja2V0cyA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHRpY2tldHMpIDogdGlja2V0cztcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWRUaWNrZXRzKSkge1xyXG4gICAgICAgICAgdHlwZXNfdGlja2V0cyA9IHBhcnNlZFRpY2tldHMubWFwKHRpY2tldCA9PiAoe1xyXG4gICAgICAgICAgICB0eXBlOiB0aWNrZXQudHlwZV90aWNrZXQsXHJcbiAgICAgICAgICAgIHByaXg6IHRpY2tldC5wcml4X3RpY2tldCxcclxuICAgICAgICAgICAgcXVhbnRpdGU6IHBhcnNlSW50KHRpY2tldC5uYnJfdGlja2V0X2Rpc3BvbmlibGUsIDEwKVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgbmJyX3RvdGFsX3RpY2tldHMgPSB0eXBlc190aWNrZXRzLnJlZHVjZSgodG90YWwsIHRpY2tldCkgPT4gdG90YWwgKyB0aWNrZXQucXVhbnRpdGUsIDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTGUgZm9ybWF0IGRlcyB0aWNrZXRzIGVzdCBpbnZhbGlkZScgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgZGUgcGFyc2luZyBkZXMgdGlja2V0cyA6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnRm9ybWF0IEpTT04gaW52YWxpZGUgcG91ciB0aWNrZXRzJyB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZWRFdmVudCA9IHtcclxuICAgICAgbm9tX2V2ZW50LFxyXG4gICAgICB0eXBlX2V2ZW50LFxyXG4gICAgICBub21fc3BvcnQsXHJcbiAgICAgIGxpZXVfZXZlbnQsXHJcbiAgICAgIG5icl9wYXJ0aWNpcGFudCxcclxuICAgICAgZ2VucmVfcGFydGljaXBhbnQsXHJcbiAgICAgIGRhdGVfZGVidXQ6IGRhdGVfZGVidXQgPyBkYXRlX2RlYnV0IDogbnVsbCwgLy8g4pyFIFJlbXBsYWNlICcnIHBhciBOVUxMXHJcbiAgICAgIGRhdGVfZmluOiBkYXRlX2ZpbiA/IGRhdGVfZmluIDogbnVsbCwgIFxyXG4gICAgICBmcmFpc19pbnNjcmlwdGlvbixcclxuICAgICAgc3RhdHV0X2V2ZW50LFxyXG4gICAgICBjYXRlZ29yaWVfcGFydGljaXBhbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uX2FjY3VlaWwsXHJcbiAgICAgIGRlc2NyaXB0aW9uX2RldGFpbCxcclxuICAgICAgLi4uKGxvZ29fZXZlbnQgJiYgeyBsb2dvX2V2ZW50IH0pLCAvLyBBam91dGVyIHVuaXF1ZW1lbnQgc2kgZm91cm5pXHJcbiAgICAgIC4uLihpbWFnZXNfYWNjdWVpbCAmJiB7IGltYWdlc19hY2N1ZWlsIH0pLCAvLyBBam91dGVyIHVuaXF1ZW1lbnQgc2kgZm91cm5pXHJcbiAgICAgIC4uLihpbWFnZXNfY29udGVudSAmJiB7IGltYWdlc19jb250ZW51IH0pLCAvLyBBam91dGVyIHVuaXF1ZW1lbnQgc2kgZm91cm5pXHJcbiAgICAgIC4uLih0aWNrZXRzICYmIHtcclxuICAgICAgICB0eXBlc190aWNrZXRzOiBKU09OLnN0cmluZ2lmeSh0aWNrZXRzKSwgLy8g4pyFIFMnYXNzdXJlciBxdWUgbGVzIHRpY2tldHMgc29udCBiaWVuIHVuIHRhYmxlYXVcclxuICAgICAgICBuYnJfdG90YWxfdGlja2V0c1xyXG4gICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGlkIH0pLnVwZGF0ZSh1cGRhdGVkRXZlbnQpO1xyXG5cclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnw4l2w6luZW1lbnQgbWlzIMOgIGpvdXIgYXZlYyBzdWNjw6hzLicgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICfDiXbDqW5lbWVudCBub24gdHJvdXbDqS4nIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZGUgbOKAmcOpdsOpbmVtZW50IDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBTdXBwcmltZXIgdW4gw6l2w6luZW1lbnRcclxuZXhwb3J0cy5kZWxldGVFdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudCA9IGF3YWl0IGRiKCdldmVuZW1lbnQnKS53aGVyZSh7IGlkX2V2ZW5lbWVudDogaWQgfSkuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoIWV2ZW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICfDiXbDqW5lbWVudCBub24gdHJvdXbDqS4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGRiKCdldmVuZW1lbnQnKS53aGVyZSh7IGlkX2V2ZW5lbWVudDogaWQgfSkuZGVsKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnw4l2w6luZW1lbnQgc3VwcHJpbcOpIGF2ZWMgc3VjY8Oocy4nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkZSBs4oCZw6l2w6luZW1lbnQgOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBzZXJ2ZXVyLicgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ29udHLDtGxldXIgcG91ciBhZmZpY2hlciB0b3VzIGxlcyDDqXbDqW5lbWVudHMgKHB1YmxpYylcclxuZXhwb3J0cy5nZXRBbGxQdWJsaWNFdmVudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXZlbnRzID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpOyAvLyBQYXMgZGUgZmlsdHJlIHBhciBgaWRfb3JnYW5pc2F0ZXVyYCBpY2lcclxuXHJcbiAgICAvLyBBam91dCBkZXMgY2hlbWlucyBkZXMgaW1hZ2VzIHBvdXIgY2hhcXVlIMOpdsOpbmVtZW50XHJcbiAgICBjb25zdCBldmVudHNXaXRoSW1hZ2VQYXRocyA9IGV2ZW50cy5tYXAoKGV2ZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uZXZlbnQsXHJcbiAgICAgICAgbG9nb19ldmVudDogZXZlbnQubG9nb19ldmVudCA/IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvdXBsb2Fkcy8ke2V2ZW50LmxvZ29fZXZlbnR9YCA6IG51bGwsXHJcbiAgICAgICAgaW1hZ2VzX2FjY3VlaWw6IGV2ZW50LmltYWdlc19hY2N1ZWlsID8gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS91cGxvYWRzLyR7ZXZlbnQuaW1hZ2VzX2FjY3VlaWx9YCA6IG51bGwsXHJcbiAgICAgICAgaW1hZ2VzX2NvbnRlbnU6IGV2ZW50LmltYWdlc19jb250ZW51ID8gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS91cGxvYWRzLyR7ZXZlbnQuaW1hZ2VzX2NvbnRlbnV9YCA6IG51bGwsXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihldmVudHNXaXRoSW1hZ2VQYXRocyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgcHVibGljczonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1cicgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRFdmVudERldGFpbEJ5SWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zOyAvLyBSw6ljdXDDqHJlIGwnSUQgZGVwdWlzIGxlcyBwYXJhbcOodHJlcyBkZSBsYSByb3V0ZVxyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVxdcOqdGUgcG91ciByw6ljdXDDqXJlciBsXFwnw6l2w6luZW1lbnQgYXZlYyBJRCA6JywgaWQpO1xyXG5cclxuICAgIC8vIFJlY2hlcmNoZSBsJ8OpdsOpbmVtZW50IHBhciBJRFxyXG4gICAgY29uc3QgZXZlbnQgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGlkIH0pLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKCFldmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnw4l2w6luZW1lbnQgaW50cm91dmFibGUnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFqb3V0ZXIgbGVzIGNoZW1pbnMgZCdpbWFnZSBldCByZXRvdXJuZXIgbGVzIGRvbm7DqWVzXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIC4uLmV2ZW50LCAvLyBJbmNsdXQgdG91dGVzIGxlcyBkb25uw6llcyBkZSBsJ8OpdsOpbmVtZW50XHJcbiAgICAgIGxvZ29fZXZlbnQ6IGV2ZW50LmxvZ29fZXZlbnRcclxuICAgICAgICA/IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvdXBsb2Fkcy8ke2V2ZW50LmxvZ29fZXZlbnR9YFxyXG4gICAgICAgIDogbnVsbCxcclxuICAgICAgaW1hZ2VzX2FjY3VlaWw6IGV2ZW50LmltYWdlc19hY2N1ZWlsXHJcbiAgICAgICAgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5pbWFnZXNfYWNjdWVpbH1gXHJcbiAgICAgICAgOiBudWxsLFxyXG4gICAgICBpbWFnZXNfY29udGVudTogZXZlbnQuaW1hZ2VzX2NvbnRlbnVcclxuICAgICAgICA/IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvdXBsb2Fkcy8ke2V2ZW50LmltYWdlc19jb250ZW51fWBcclxuICAgICAgICA6IG51bGwsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGUgbFxcJ8OpdsOpbmVtZW50IDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIG5vdXZlYXUgXHJcbi8vIENvbnRyw7RsZXVyIHBvdXIgcsOpY3Vww6lyZXIgdG91cyBsZXMgw6l2w6luZW1lbnRzIGQndW4gb3JnYW5pc2F0ZXVyXHJcbmV4cG9ydHMuZ2V0RXZlbnRzQnlPcmdhbml6ZXJJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7IC8vIElEIGRlIGwnb3JnYW5pc2F0ZXVyXHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9vcmdhbmlzYXRldXI6IGlkIH0pO1xyXG5cclxuICAgIC8vIEFqb3V0IGRlcyBjaGVtaW5zIGRlcyBpbWFnZXMgcG91ciBjaGFxdWUgw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IGV2ZW50c1dpdGhJbWFnZVBhdGhzID0gZXZlbnRzLm1hcCgoZXZlbnQpID0+ICh7XHJcbiAgICAgIC4uLmV2ZW50LFxyXG4gICAgICBsb2dvX2V2ZW50OiBldmVudC5sb2dvX2V2ZW50XHJcbiAgICAgICAgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5sb2dvX2V2ZW50fWBcclxuICAgICAgICA6IG51bGwsXHJcbiAgICAgIGltYWdlc19hY2N1ZWlsOiBldmVudC5pbWFnZXNfYWNjdWVpbFxyXG4gICAgICAgID8gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS91cGxvYWRzLyR7ZXZlbnQuaW1hZ2VzX2FjY3VlaWx9YFxyXG4gICAgICAgIDogbnVsbCxcclxuICAgICAgaW1hZ2VzX2NvbnRlbnU6IGV2ZW50LmltYWdlc19jb250ZW51XHJcbiAgICAgICAgPyBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VwbG9hZHMvJHtldmVudC5pbWFnZXNfY29udGVudX1gXHJcbiAgICAgICAgOiBudWxsLFxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGV2ZW50c1dpdGhJbWFnZVBhdGhzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIMOpdsOpbmVtZW50cy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBmb25jdGlvbiBwb3VyIHLDqWN1cMOpcmVyIGxlcyBwYXJ0aWNpcGFudHMgZGVwdWlzIGxhIGJhc2UgZGUgZG9ubsOpZXMgXHJcbmV4cG9ydHMuZ2V0UGFydGljaXBhbnRzQnlFdmVudElkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG4gIGNvbnNvbGUubG9nKGBSZXF1w6p0ZSByZcOndWUgcG91ciByw6ljdXDDqXJlciBsZXMgcGFydGljaXBhbnRzIGRlIGwnw6l2w6luZW1lbnQgSUQgOiAke2V2ZW50SWR9YCk7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFV0aWxpc2VyICdpZF9ldmVuZW1lbnQnIMOgIGxhIHBsYWNlIGRlICdldmVudF9pZCdcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiKCdwYXJ0aWNpcGFudHMnKS53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KTtcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50cyB8fCBwYXJ0aWNpcGFudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdBdWN1biBwYXJ0aWNpcGFudCB0cm91dsOpIHBvdXIgY2V0IMOpdsOpbmVtZW50LicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocGFydGljaXBhbnRzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHBhcnRpY2lwYW50cyA6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXIuJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0cy5nZXRBbGxQYXJ0aWNpcGFudHNCeU9yZ2FuaXplciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IG9yZ2FuaXplcklkID0gcmVxLnVzZXI/LmlkOyAvLyBSw6ljdXDDqXJlciBsJ0lEIGRlIGwnb3JnYW5pc2F0ZXVyIGF1dGhlbnRpZmnDqVxyXG5cclxuICBpZiAoIW9yZ2FuaXplcklkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIkwnSUQgZGUgbCdvcmdhbmlzYXRldXIgZXN0IGludHJvdXZhYmxlLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEpvaW50dXJlIGVudHJlIGBldmVuZW1lbnRzYCwgYHBhcnRpY2lwZXJgIGV0IGBwYXJ0aWNpcGFudHNgXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBhd2FpdCBkYigncGFydGljaXBlcicpXHJcbiAgICAgIC5qb2luKCdwYXJ0aWNpcGFudHMnLCAncGFydGljaXBlci5pZF9wYXJ0aWNpcGFudCcsICc9JywgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcpXHJcbiAgICAgIC5qb2luKCdldmVuZW1lbnQnLCAncGFydGljaXBlci5pZF9ldmVuZW1lbnQnLCAnPScsICdldmVuZW1lbnQuaWRfZXZlbmVtZW50JylcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JyxcclxuICAgICAgICAncGFydGljaXBhbnRzLm5vbV9wYXJ0JyxcclxuICAgICAgICAnZXZlbmVtZW50Lm5vbV9ldmVudCcsXHJcbiAgICAgICAgJ3BhcnRpY2lwZXIuaWRfZXZlbmVtZW50J1xyXG4gICAgICApXHJcbiAgICAgIC53aGVyZSgnZXZlbmVtZW50LmlkX29yZ2FuaXNhdGV1cicsIG9yZ2FuaXplcklkKTsgLy8gRmlsdHJlciBwYXIgb3JnYW5pc2F0ZXVyXHJcblxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudHMgfHwgcGFydGljaXBhbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnQXVjdW4gcGFydGljaXBhbnQgdHJvdXbDqSBwb3VyIHZvcyDDqXbDqW5lbWVudHMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwYXJ0aWNpcGFudHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcGFydGljaXBhbnRzIDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcbi8vIEZvbmN0aW9uIHBvdXIgc3VwcHJpbWVyIHVuIHBhcnRpY2lwYW50IGRhbnMgbGUgVEIgb3JnYW5pc2F0ZXVyXHJcbmV4cG9ydHMuZGVsZXRlUGFydGljaXBhbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHBhcnRpY2lwYW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgY29uc29sZS5sb2coXCJJRCBkdSBwYXJ0aWNpcGFudCDDoCBzdXBwcmltZXIgOlwiLCBwYXJ0aWNpcGFudElkKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFbDqXJpZmllciBzaSBsZSBwYXJ0aWNpcGFudCBleGlzdGVcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gYXdhaXQgZGIoJ3BhcnRpY2lwYW50cycpLndoZXJlKHsgaWRfcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50SWQgfSkuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUGFydGljaXBhbnQgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3VwcHJpbWVyIGxlIHBhcnRpY2lwYW50IGRlIGxhIGJhc2UgZGUgZG9ubsOpZXNcclxuICAgIGF3YWl0IGRiKCdwYXJ0aWNpcGFudHMnKS53aGVyZSh7IGlkX3BhcnRpY2lwYW50OiBwYXJ0aWNpcGFudElkIH0pLmRlbCgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJQYXJ0aWNpcGFudCBzdXBwcmltw6kgYXZlYyBzdWNjw6hzLlwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZHUgcGFydGljaXBhbnQgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFjaGF0IGQndW4gYmlsbGV0IGV0IG1pc2Ugw6Agam91ciBkZXMgdGlja2V0cyBkaXNwb25pYmxlcy5cclxuICovXHJcbmV4cG9ydHMuYWNoZXRlclRpY2tldCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWRfZXZlbmVtZW50LCB0eXBlX3RpY2tldCwgcXVhbnRpdHkgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIvCfk6UgRG9ubsOpZXMgcmXDp3VlcyA6XCIsIHJlcS5ib2R5KTtcclxuXHJcbiAgICAgIC8vIFLDqWN1cMOpcmVyIGwnw6l2w6luZW1lbnRcclxuICAgICAgY29uc3QgZXZlbnQgPSBhd2FpdCBkYihcImV2ZW5lbWVudFwiKS53aGVyZSh7IGlkX2V2ZW5lbWVudCB9KS5maXJzdCgpO1xyXG4gICAgICBpZiAoIWV2ZW50KSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIsOJdsOpbmVtZW50IGludHJvdXZhYmxlXCIgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB0aWNrZXRzID0gSlNPTi5wYXJzZShldmVudC50eXBlc190aWNrZXRzKTtcclxuICAgICAgbGV0IHRpY2tldFVwZGF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIFbDqXJpZmllciBzaSBsZSBiaWxsZXQgZXhpc3RlIGV0IGxlIG1ldHRyZSDDoCBqb3VyXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRUaWNrZXRzID0gdGlja2V0cy5tYXAodGlja2V0ID0+IHtcclxuICAgICAgICAgIGlmICgodGlja2V0LnR5cGVfdGlja2V0IHx8IHRpY2tldC50eXBlKSA9PT0gdHlwZV90aWNrZXQpIHtcclxuICAgICAgICAgICAgICAvLyBWw6lyaWZpZXIgcXVlIGBuYnJfdGlja2V0X2Rpc3BvbmlibGVgIGVzdCB1biBub21icmUgdmFsaWRlXHJcbiAgICAgICAgICAgICAgbGV0IGN1cnJlbnRTdG9jayA9IHBhcnNlSW50KHRpY2tldC5uYnJfdGlja2V0X2Rpc3BvbmlibGUsIDEwKTtcclxuICAgICAgICAgICAgICBpZiAoaXNOYU4oY3VycmVudFN0b2NrKSkge1xyXG4gICAgICAgICAgICAgICAgICBjdXJyZW50U3RvY2sgPSBwYXJzZUludCh0aWNrZXQucXVhbnRpdGUsIDEwKSB8fCAwOyAvLyBQcmVuZHJlIGBxdWFudGl0ZWAgc2kgYG5icl90aWNrZXRfZGlzcG9uaWJsZWAgZXN0IGludmFsaWRlXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OnyBNaXNlIMOgIGpvdXIgZHUgYmlsbGV0ICR7dGlja2V0LnR5cGUgfHwgdGlja2V0LnR5cGVfdGlja2V0fSAoYXZhbnQ6ICR7Y3VycmVudFN0b2NrfSlgKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gVsOpcmlmaWVyIHNpIGxlIHN0b2NrIGVzdCBzdWZmaXNhbnRcclxuICAgICAgICAgICAgICBpZiAoY3VycmVudFN0b2NrIDwgcXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwi4pqg77iPIFN0b2NrIGluc3VmZmlzYW50ICFcIik7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0aWNrZXQ7IC8vIFJldG91cm5lIGxlIGJpbGxldCBpbmNoYW5nw6lcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIE1pc2Ugw6Agam91ciBkdSBzdG9ja1xyXG4gICAgICAgICAgICAgIHRpY2tldC5uYnJfdGlja2V0X2Rpc3BvbmlibGUgPSBNYXRoLm1heCgwLCBjdXJyZW50U3RvY2sgLSBxdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBOb3V2ZWF1IHN0b2NrOiAke3RpY2tldC5uYnJfdGlja2V0X2Rpc3BvbmlibGV9YCk7XHJcbiAgICAgICAgICAgICAgdGlja2V0VXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdGlja2V0O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNpIGxlIGJpbGxldCBuJ2V4aXN0ZSBwYXMgb3UgbidhIHBhcyDDqXTDqSBtaXMgw6Agam91clxyXG4gICAgICBpZiAoIXRpY2tldFVwZGF0ZWQpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiVHlwZSBkZSBiaWxsZXQgbm9uIHRyb3V2w6kgb3Ugc3RvY2sgaW5zdWZmaXNhbnRcIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTWV0dHJlIMOgIGpvdXIgbGEgYmFzZSBkZSBkb25uw6llcyBhdmVjIGxhIG5vdXZlbGxlIGxpc3RlIGRlIHRpY2tldHNcclxuICAgICAgYXdhaXQgZGIoXCJldmVuZW1lbnRcIikud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSkudXBkYXRlKHsgdHlwZXNfdGlja2V0czogSlNPTi5zdHJpbmdpZnkodXBkYXRlZFRpY2tldHMpIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCLwn5SEIE1pc2Ugw6Agam91ciByw6l1c3NpZSAhIFRpY2tldHMgbWlzIMOgIGpvdXIgOlwiLCB1cGRhdGVkVGlja2V0cyk7XHJcbiAgICAgIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6IFwiQmlsbGV0IGFjaGV0w6kgYXZlYyBzdWNjw6hzXCIsIHRpY2tldHM6IHVwZGF0ZWRUaWNrZXRzIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGwnYWNoYXQgZHUgYmlsbGV0IDpcIiwgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBpbnRlcm5lIGR1IHNlcnZldXJcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gUsOpY3Vww6lyZXIgbGVzIMOpdsOpbmVtZW50cyBjcsOpw6lzIHBhciB1biBvcmdhbmlzYXRldXJcclxuZXhwb3J0cy5nZXRFdmVudHNCeU9yZ2FuaXplciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IG9yZ2FuaXplcklkID0gcmVxLnVzZXIuaWQ7IC8vIFLDqWN1cMOpcmVyIGwnSUQgZGUgbCdvcmdhbmlzYXRldXIgY29ubmVjdMOpXHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9vcmdhbmlzYXRldXI6IG9yZ2FuaXplcklkIH0pO1xyXG5cclxuICAgIGlmICghZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuIMOpdsOpbmVtZW50IHRyb3V2w6kgcG91ciBjZXQgb3JnYW5pc2F0ZXVyLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGV2ZW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0UGFydGljaXBhbnRzQW5kQ291bnRCeUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gMSkgUsOpY3Vww6lyZXIgbGVzIHBhcnRpY2lwYW50cyBhdmVjIGxlIG5vbSBkZSBsZXVyIMOpcXVpcGVcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiKCdwYXJ0aWNpcGFudHMnKVxyXG4gICAgICAuam9pbigncGFydGljaXBlcicsICdwYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnLCAncGFydGljaXBlci5pZF9wYXJ0aWNpcGFudCcpXHJcbiAgICAgIC5qb2luKCdlcXVpcGVzJywgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsICdlcXVpcGVzLmlkX3BhcnRpY2lwYW50JykgLy8gSm9pbnR1cmUgYXZlYyBsYSB0YWJsZSBkZXMgw6lxdWlwZXNcclxuICAgICAgLndoZXJlKCdwYXJ0aWNpcGVyLmlkX2V2ZW5lbWVudCcsIGV2ZW50SWQpXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgJ2VxdWlwZXMubm9tX2VxdWlwZScgLy8gT24gc8OpbGVjdGlvbm5lIGxlIG5vbSBkZSBsJ8OpcXVpcGUgYXUgbGlldSBkdSBub20gZHUgcGFydGljaXBhbnRcclxuICAgICAgKTtcclxuXHJcbiAgICAvLyAyKSBDb21wdGVyIGxlcyBwYXJ0aWNpcGFudHNcclxuICAgIGNvbnN0IG5iclBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmxlbmd0aDtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIG5icl9wYXJ0aWNpcGFudDogbmJyUGFydGljaXBhbnQsXHJcbiAgICAgIHBhcnRpY2lwYW50cyAvLyBSZXRvdXJuZSBsYSBsaXN0ZSBkZXMgcGFydGljaXBhbnRzIGF2ZWMgbGV1ciDDqXF1aXBlXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBwYXJ0aWNpcGFudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vIEZvbmN0aW9uIHBvdXIgY3LDqWVyIGxlcyBwb3VsZXMgZCd1biDDqXbDqW5lbWVudCAodW5lIHNldWxlIGZvaXMgcGFyIMOpdsOpbmVtZW50KVxyXG5leHBvcnRzLmNyZWF0ZVBvb2xzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBpZF9ldmVuZW1lbnQsIHBvb2xzIH0gPSByZXEuYm9keTtcclxuXHJcbiAgaWYgKCFpZF9ldmVuZW1lbnQgfHwgIXBvb2xzIHx8IHBvb2xzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJEb25uw6llcyBpbnZhbGlkZXMuIEFzc3VyZXotdm91cyBkZSBzw6lsZWN0aW9ubmVyIHVuIMOpdsOpbmVtZW50IGV0IGQnYWpvdXRlciBkZXMgcG91bGVzLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFbDqXJpZmllciBzaSBkZXMgcG91bGVzIGV4aXN0ZW50IGTDqWrDoCBwb3VyIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgZXhpc3RpbmdQb29scyA9IGF3YWl0IGRiKCdwb3VsZXMnKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSlcclxuICAgICAgLnNlbGVjdCgnaWRfcG91bGUnKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgUG91bGVzIGV4aXN0YW50ZXMgcG91ciBsJ8OpdsOpbmVtZW50ICR7aWRfZXZlbmVtZW50fSA6YCwgZXhpc3RpbmdQb29scyk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nUG9vbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJUZW50YXRpdmUgZGUgY3LDqWF0aW9uIGRlIHBvdWxlcyBhbG9ycyBxdSdlbGxlcyBleGlzdGVudCBkw6lqw6AgIVwiKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgbWVzc2FnZTogXCJEZXMgcG91bGVzIGV4aXN0ZW50IGTDqWrDoCBwb3VyIGNldCDDqXbDqW5lbWVudC4gSW1wb3NzaWJsZSBkJ2VuIGNyw6llciBkZSBub3V2ZWxsZXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5zw6lyZXIgbGVzIHBvdWxlcyBkYW5zIGxhIHRhYmxlIGBwb3VsZXNgXHJcbiAgICBjb25zdCBpbnNlcnRlZFBvb2xzID0gYXdhaXQgZGIoJ3BvdWxlcycpLmluc2VydChcclxuICAgICAgcG9vbHMubWFwKG5vbV9wb3VsZSA9PiAoe1xyXG4gICAgICAgIGlkX2V2ZW5lbWVudCxcclxuICAgICAgICBub21fcG91bGUsXHJcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKVxyXG4gICAgICB9KSlcclxuICAgICkucmV0dXJuaW5nKCcqJyk7IC8vIFJldG91cm5lIGxlcyBub3V2ZWxsZXMgcG91bGVzIGluc8OpcsOpZXNcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiUG91bGVzIGNyw6nDqWVzIGF2ZWMgc3VjY8Oocy5cIiwgcG9vbHM6IGluc2VydGVkUG9vbHMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGVzIHBvdWxlcyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZXMgcG91bGVzLlwiLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gRm9uY3Rpb24gcG91ciBhdHRyaWJ1ZXIgbGVzIHBhcnRpY2lwYW50cyBhdXggcG91bGVzIMOpcXVpdGFibGVtZW50XHJcbmV4cG9ydHMuYXNzaWduUGFydGljaXBhbnRzVG9Qb29scyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWRfZXZlbmVtZW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgaWYgKCFpZF9ldmVuZW1lbnQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIHBvdWxlcyBhc3NvY2nDqWVzIMOgIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgcG9vbHMgPSBhd2FpdCBkYigncG91bGVzJykud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSkuc2VsZWN0KCdpZF9wb3VsZScpO1xyXG5cclxuICAgIGlmIChwb29scy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcG91bGUgdHJvdXbDqWUgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIHBhcnRpY2lwYW50cyBpbnNjcml0cyDDoCBjZXQgw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiKCdwYXJ0aWNpcGVyJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50IH0pXHJcbiAgICAgIC5zZWxlY3QoJ2lkX3BhcnRpY2lwYW50Jyk7XHJcblxyXG4gICAgaWYgKHBhcnRpY2lwYW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1biBwYXJ0aWNpcGFudCB0cm91dsOpIHBvdXIgY2V0IMOpdsOpbmVtZW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE3DqWxhbmdlciBsZXMgcGFydGljaXBhbnRzXHJcbiAgICBmdW5jdGlvbiBzaHVmZmxlQXJyYXkoYXJyYXkpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XHJcbiAgICAgICAgW2FycmF5W2ldLCBhcnJheVtqXV0gPSBbYXJyYXlbal0sIGFycmF5W2ldXTsgLy8gw4ljaGFuZ2UgZGVzIMOpbMOpbWVudHNcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2h1ZmZsZWRQYXJ0aWNpcGFudHMgPSBzaHVmZmxlQXJyYXkoWy4uLnBhcnRpY2lwYW50c10pO1xyXG5cclxuICAgIC8vIENhbGN1bGVyIGxhIHLDqXBhcnRpdGlvbiDDqXF1aXRhYmxlXHJcbiAgICBjb25zdCBudW1Qb29scyA9IHBvb2xzLmxlbmd0aDtcclxuICAgIGNvbnN0IG51bVBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50cy5sZW5ndGg7XHJcbiAgICBjb25zdCBtaW5QZXJQb29sID0gTWF0aC5mbG9vcihudW1QYXJ0aWNpcGFudHMgLyBudW1Qb29scyk7XHJcbiAgICBjb25zdCBleHRyYVBhcnRpY2lwYW50cyA9IG51bVBhcnRpY2lwYW50cyAlIG51bVBvb2xzO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi8J+UuSBUb3RhbCBQYXJ0aWNpcGFudHMgOlwiLCBudW1QYXJ0aWNpcGFudHMpO1xyXG4gICAgY29uc29sZS5sb2coXCLwn5S5IFRvdGFsIFBvdWxlcyA6XCIsIG51bVBvb2xzKTtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UuSBOb21icmUgbWluIGRlIHBhcnRpY2lwYW50cyBwYXIgcG91bGUgOlwiLCBtaW5QZXJQb29sKTtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UuSBQYXJ0aWNpcGFudHMgc3VwcGzDqW1lbnRhaXJlcyDDoCByw6lwYXJ0aXIgOlwiLCBleHRyYVBhcnRpY2lwYW50cyk7XHJcblxyXG4gICAgbGV0IGFzc2lnbm1lbnRzID0gW107XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgbGV0IHBvb2xEaXN0cmlidXRpb24gPSB7fTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVBvb2xzOyBpKyspIHtcclxuICAgICAgY29uc3QgbnVtVG9Bc3NpZ24gPSBtaW5QZXJQb29sICsgKGkgPCBleHRyYVBhcnRpY2lwYW50cyA/IDEgOiAwKTtcclxuICAgICAgcG9vbERpc3RyaWJ1dGlvbltwb29sc1tpXS5pZF9wb3VsZV0gPSBudW1Ub0Fzc2lnbjtcclxuXHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtVG9Bc3NpZ247IGorKykge1xyXG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2goe1xyXG4gICAgICAgICAgaWRfcG91bGU6IHBvb2xzW2ldLmlkX3BvdWxlLFxyXG4gICAgICAgICAgaWRfcGFydGljaXBhbnQ6IHNodWZmbGVkUGFydGljaXBhbnRzW2luZGV4XS5pZF9wYXJ0aWNpcGFudFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGluZGV4Kys7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIvCfk4wgUsOpcGFydGl0aW9uIGRlcyBwYXJ0aWNpcGFudHMgcGFyIHBvdWxlIDpcIiwgcG9vbERpc3RyaWJ1dGlvbik7XHJcblxyXG4gICAgLy8gSW5zw6lyZXIgbGVzIGFzc2lnbmF0aW9ucyBkYW5zIGxhIHRhYmxlIGBwb3VsZV9wYXJ0aWNpcGFudHNgXHJcbiAgICBhd2FpdCBkYigncG91bGVfcGFydGljaXBhbnRzJykuaW5zZXJ0KGFzc2lnbm1lbnRzKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiUGFydGljaXBhbnRzIHLDqXBhcnRpcyBhdmVjIHN1Y2PDqHMuXCIsIGFzc2lnbm1lbnRzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGwnYWZmZWN0YXRpb24gZGVzIHBhcnRpY2lwYW50cyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGwnYWZmZWN0YXRpb24gZGVzIHBhcnRpY2lwYW50cy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcbmV4cG9ydHMuZ2V0UG9vbHNXaXRoUGFydGljaXBhbnRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICBpZiAoIWV2ZW50SWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIHBvdWxlcyBkZSBjZXQgw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IHBvb2xzID0gYXdhaXQgZGIoJ3BvdWxlcycpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAuc2VsZWN0KCdpZF9wb3VsZScsICdub21fcG91bGUnKTtcclxuXHJcbiAgICBpZiAocG9vbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW5lIHBvdWxlIHRyb3V2w6llIHBvdXIgY2V0IMOpdsOpbmVtZW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFLDqWN1cMOpcmVyIGxlcyBwYXJ0aWNpcGFudHMgYXZlYyBsZXVyIMOpcXVpcGUgcG91ciBjaGFxdWUgcG91bGVcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiKCdwb3VsZV9wYXJ0aWNpcGFudHMnKVxyXG4gICAgICAuam9pbigncGFydGljaXBhbnRzJywgJ3BvdWxlX3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsICc9JywgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcpXHJcbiAgICAgIC5qb2luKCdlcXVpcGVzJywgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsICc9JywgJ2VxdWlwZXMuaWRfcGFydGljaXBhbnQnKSAvLyBKb2ludHVyZSBhdmVjIGxhIHRhYmxlIMOpcXVpcGVzXHJcbiAgICAgIC53aGVyZUluKCdwb3VsZV9wYXJ0aWNpcGFudHMuaWRfcG91bGUnLCBwb29scy5tYXAocCA9PiBwLmlkX3BvdWxlKSlcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAncG91bGVfcGFydGljaXBhbnRzLmlkX3BvdWxlJyxcclxuICAgICAgICAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JyxcclxuICAgICAgICAnZXF1aXBlcy5ub21fZXF1aXBlJyAvLyBPbiByw6ljdXDDqHJlIGxlIG5vbSBkZSBsJ8OpcXVpcGVcclxuICAgICAgKTtcclxuXHJcbiAgICAvLyBPcmdhbmlzZXIgbGVzIHBhcnRpY2lwYW50cyBwYXIgcG91bGVcclxuICAgIGNvbnN0IHBvb2xzV2l0aFBhcnRpY2lwYW50cyA9IHBvb2xzLm1hcChwb29sID0+ICh7XHJcbiAgICAgIGlkX3BvdWxlOiBwb29sLmlkX3BvdWxlLFxyXG4gICAgICBub21fcG91bGU6IHBvb2wubm9tX3BvdWxlLFxyXG4gICAgICBwYXJ0aWNpcGFudHM6IHBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlkX3BvdWxlID09PSBwb29sLmlkX3BvdWxlKVxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcG9vbHM6IHBvb2xzV2l0aFBhcnRpY2lwYW50cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBwb3VsZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcG91bGVzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0RXZlbnRzV2l0aFBvb2xzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFLDqWN1cMOpcmVyIGwnSUQgZGUgbCdvcmdhbmlzYXRldXIgZGVwdWlzIGB2ZXJpZnlUb2tlbmBcclxuICAgIGNvbnN0IG9yZ2FuaXplcklkID0gcmVxLnVzZXI/LmlkOyAvLyBDb3JyZWN0aW9uIGljaVxyXG5cclxuICAgIGlmICghb3JnYW5pemVySWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJPcmdhbmlzYXRldXIgbm9uIGF1dGhlbnRpZmnDqS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWw6lyaWZpY2F0aW9uIGRlcyBsb2dzIHBvdXIgcydhc3N1cmVyIHF1ZSBsJ0lEIGVzdCBiaWVuIHLDqWN1cMOpcsOpXHJcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gSUQgZGUgbCdvcmdhbmlzYXRldXIgcsOpY3Vww6lyw6kgOlwiLCBvcmdhbml6ZXJJZCk7XHJcblxyXG4gICAgY29uc3QgZXZlbnRzV2l0aFBvb2xzID0gYXdhaXQgZGIoJ3BvdWxlcycpXHJcbiAgICAgIC5qb2luKCdldmVuZW1lbnQnLCAncG91bGVzLmlkX2V2ZW5lbWVudCcsICc9JywgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnKVxyXG4gICAgICAud2hlcmUoJ2V2ZW5lbWVudC5pZF9vcmdhbmlzYXRldXInLCBvcmdhbml6ZXJJZCkgLy8gQ29ycmVjdGlvbiBpY2lcclxuICAgICAgLmRpc3RpbmN0KCdldmVuZW1lbnQuaWRfZXZlbmVtZW50JywgJ2V2ZW5lbWVudC5ub21fZXZlbnQnKVxyXG4gICAgICAuc2VsZWN0KCk7XHJcblxyXG4gICAgaWYgKGV2ZW50c1dpdGhQb29scy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1biDDqXbDqW5lbWVudCBhdmVjIGRlcyBwb3VsZXMgdHJvdXbDqSBwb3VyIGNldCBvcmdhbmlzYXRldXIuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZXZlbnRzV2l0aFBvb2xzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzIGF2ZWMgcG91bGVzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIMOpdsOpbmVtZW50cy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmFkZFBhcnRpY2lwYW50TWFudWFsID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgaWRfZXZlbmVtZW50LCBub21fcG91bGUsIGlkX3BhcnRpY2lwYW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyAwKSBWw6lyaWZpZXIgcXVlIGwnaWRfcGFydGljaXBhbnQgZXN0IGZvdXJuaVxyXG4gICAgaWYgKCFpZF9wYXJ0aWNpcGFudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiTCdpZCBkdSBwYXJ0aWNpcGFudCBlc3QgcmVxdWlzLlwiXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDEpIFbDqXJpZmllciBzaSBsZSBwYXJ0aWNpcGFudCBlc3QgZMOpasOgIGluc2NyaXQgZGFucyB1bmUgcG91bGUgcG91ciBjZXQgw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IGFscmVhZHlBc3NpZ25lZCA9IGF3YWl0IGRiKCdwb3VsZV9wYXJ0aWNpcGFudHMnKVxyXG4gICAgICAuam9pbigncG91bGVzJywgJ3BvdWxlX3BhcnRpY2lwYW50cy5pZF9wb3VsZScsICc9JywgJ3BvdWxlcy5pZF9wb3VsZScpXHJcbiAgICAgIC53aGVyZSgncG91bGVzLmlkX2V2ZW5lbWVudCcsIGlkX2V2ZW5lbWVudClcclxuICAgICAgLmFuZFdoZXJlKCdwb3VsZV9wYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnLCBpZF9wYXJ0aWNpcGFudClcclxuICAgICAgLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKGFscmVhZHlBc3NpZ25lZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6ICdDZSBwYXJ0aWNpcGFudCBlc3QgZMOpasOgIGluc2NyaXQgZGFucyB1bmUgcG91bGUgcG91ciBjZXQgw6l2w6luZW1lbnQuJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAyKSBWw6lyaWZpZXIgc2kgbGEgcG91bGUgZXhpc3RlIGTDqWrDoCBwb3VyIGNldCDDqXbDqW5lbWVudCBldCBjZSBub21cclxuICAgIGxldCBleGlzdGluZ1BvdWxlID0gYXdhaXQgZGIoJ3BvdWxlcycpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudCwgbm9tX3BvdWxlIH0pXHJcbiAgICAgIC5maXJzdCgpO1xyXG5cclxuICAgIC8vIDMpIFNpIGxhIHBvdWxlIG4nZXhpc3RlIHBhcywgbGEgY3LDqWVyXHJcbiAgICBpZiAoIWV4aXN0aW5nUG91bGUpIHtcclxuICAgICAgY29uc3QgW25ld1BvdWxlSWRdID0gYXdhaXQgZGIoJ3BvdWxlcycpLmluc2VydCh7XHJcbiAgICAgICAgaWRfZXZlbmVtZW50LFxyXG4gICAgICAgIG5vbV9wb3VsZSxcclxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpXHJcbiAgICAgIH0pO1xyXG4gICAgICBleGlzdGluZ1BvdWxlID0geyBpZF9wb3VsZTogbmV3UG91bGVJZCB9O1xyXG4gICAgICBjb25zb2xlLmxvZygnUG91bGUgY3LDqcOpZSBhdmVjIElEOicsIG5ld1BvdWxlSWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ1BvdWxlIGV4aXN0YW50ZSB0cm91dsOpZTonLCBleGlzdGluZ1BvdWxlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA0KSBJbnPDqXJlciBkYW5zIGxhIHRhYmxlIHBvdWxlX3BhcnRpY2lwYW50c1xyXG4gICAgYXdhaXQgZGIoJ3BvdWxlX3BhcnRpY2lwYW50cycpLmluc2VydCh7XHJcbiAgICAgIGlkX3BvdWxlOiBleGlzdGluZ1BvdWxlLmlkX3BvdWxlLFxyXG4gICAgICBpZF9wYXJ0aWNpcGFudFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1BhcnRpY2lwYW50IGFqb3V0w6kgYXZlYyBzdWNjw6hzICEnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbCdham91dCBtYW51ZWwgOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFN1cHByaW1lIGxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIHBvdXIgdW4gw6l2w6luZW1lbnQgZG9ubsOpXHJcbmV4cG9ydHMuZGVsZXRlUG9vbHNGb3JFdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgaWYgKCFldmVudElkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGRlIGwnw6l2w6luZW1lbnQgcmVxdWlzLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFLDqWN1cMOpcmVyIGxlcyBpZCBkZXMgcG91bGVzIGRlIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgcG9vbHMgPSBhd2FpdCBkYigncG91bGVzJykud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSkuc2VsZWN0KCdpZF9wb3VsZScpO1xyXG5cclxuICAgIGlmIChwb29scy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IHBvb2xJZHMgPSBwb29scy5tYXAocCA9PiBwLmlkX3BvdWxlKTtcclxuICAgICAgLy8gU3VwcHJpbWVyIGQnYWJvcmQgbGVzIHBhcnRpY2lwYW50cyBsacOpcyBhdXggcG91bGVzXHJcbiAgICAgIGF3YWl0IGRiKCdwb3VsZV9wYXJ0aWNpcGFudHMnKS53aGVyZUluKCdpZF9wb3VsZScsIHBvb2xJZHMpLmRlbCgpO1xyXG4gICAgICAvLyBTdXBwcmltZXIgZW5zdWl0ZSBsZXMgcG91bGVzXHJcbiAgICAgIGF3YWl0IGRiKCdwb3VsZXMnKS53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KS5kZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIG9udCDDqXTDqSBzdXBwcmltw6lzIGF2ZWMgc3VjY8Oocy5cIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGRlcyBwb3VsZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGVzIHBvdWxlcy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBSw6ljdXDDqXJlciBsZXMgw6l2w6luZW1lbnRzIGF2ZWMgZGVzIHBvdWxlcyBwb3VyIHVuIG9yZ2FuaXNhdGV1clxyXG5leHBvcnRzLmdldEV2ZW50c0J5T3JnYW5pemVyTWF0Y2ggPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgb3JnYW5pemVySWQgPSByZXEudXNlcj8uaWQ7IC8vIEwnSUQgZGUgbCdvcmdhbmlzYXRldXIgZXN0IHLDqWN1cMOpcsOpIHZpYSBsZSB0b2tlblxyXG5cclxuICAgIGlmICghb3JnYW5pemVySWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJPcmdhbmlzYXRldXIgbm9uIGF1dGhlbnRpZmnDqS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50JylcclxuICAgICAgLndoZXJlKCdpZF9vcmdhbmlzYXRldXInLCBvcmdhbml6ZXJJZClcclxuICAgICAgLnNlbGVjdCgnaWRfZXZlbmVtZW50JywgJ25vbV9ldmVudCcpO1xyXG5cclxuICAgIGlmIChldmVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gw6l2w6luZW1lbnQgdHJvdXbDqSBwb3VyIGNldCBvcmdhbmlzYXRldXIuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZXZlbnRzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIHBvdXIgdW4gw6l2w6luZW1lbnQgc8OpbGVjdGlvbm7DqVxyXG5leHBvcnRzLmdldFBvb2xzV2l0aFBhcnRpY2lwYW50c01hdGNoID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICBpZiAoIWV2ZW50SWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcG9vbHMgPSBhd2FpdCBkYigncG91bGVzJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ2lkX3BvdWxlJywgJ25vbV9wb3VsZScpO1xyXG5cclxuICAgIGlmIChwb29scy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcG91bGUgdHJvdXbDqWUgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgZGIoJ3BvdWxlX3BhcnRpY2lwYW50cycpXHJcbiAgICAgIC5qb2luKCdwYXJ0aWNpcGFudHMnLCAncG91bGVfcGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JywgJz0nLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JylcclxuICAgICAgLndoZXJlSW4oJ3BvdWxlX3BhcnRpY2lwYW50cy5pZF9wb3VsZScsIHBvb2xzLm1hcChwID0+IHAuaWRfcG91bGUpKVxyXG4gICAgICAuc2VsZWN0KCdwb3VsZV9wYXJ0aWNpcGFudHMuaWRfcG91bGUnLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JywgJ3BhcnRpY2lwYW50cy5ub21fcGFydCcpO1xyXG5cclxuICAgIGNvbnN0IHBvb2xzV2l0aFBhcnRpY2lwYW50cyA9IHBvb2xzLm1hcChwb29sID0+ICh7XHJcbiAgICAgIGlkX3BvdWxlOiBwb29sLmlkX3BvdWxlLFxyXG4gICAgICBub21fcG91bGU6IHBvb2wubm9tX3BvdWxlLFxyXG4gICAgICBwYXJ0aWNpcGFudHM6IHBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlkX3BvdWxlID09PSBwb29sLmlkX3BvdWxlKVxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBvb2xzV2l0aFBhcnRpY2lwYW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcG91bGVzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHBvdWxlcy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmNyZWF0ZU1hdGNoID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgcGhhc2UsXHJcbiAgICAgIHBhcnRpY2lwYW50X2EsXHJcbiAgICAgIHBhcnRpY2lwYW50X2IsXHJcbiAgICAgIGxpZXVfcmVuY29udHJlLFxyXG4gICAgICBkYXRlX3JlbmNvbnRyZSxcclxuICAgICAgaGV1cmVfcmVuY29udHJlLFxyXG4gICAgICBpZF9ldmVuZW1lbnQsXHJcbiAgICAgIGpvdXJuZWUsXHJcbiAgICAgIHRvdXJfZmluYWxcclxuICAgIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBWw6lyaWZpY2F0aW9uIGRlcyBjaGFtcHMgZXNzZW50aWVsc1xyXG4gICAgaWYgKCFwaGFzZSB8fCAhcGFydGljaXBhbnRfYSB8fCAhcGFydGljaXBhbnRfYiB8fCAhbGlldV9yZW5jb250cmUgfHwgIWRhdGVfcmVuY29udHJlIHx8ICFoZXVyZV9yZW5jb250cmUgfHwgIWlkX2V2ZW5lbWVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlRvdXMgbGVzIGNoYW1wcyBlc3NlbnRpZWxzIHNvbnQgcmVxdWlzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghW1wiQmFycmFnZVwiLCBcIsOJbGltaW5hdG9pcmVcIiwgXCJGaW5hbGVcIl0uaW5jbHVkZXMocGhhc2UpICYmICFqb3VybmVlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGUgY2hhbXAgJ2pvdXJuZWUnIGVzdCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFbXCJHcm91cGVcIiwgXCJRdWFsaWZpY2F0aW9uXCIsIFwiQ2xhc3NlbWVudFwiLCBcIkJhcnJhZ2VcIl0uaW5jbHVkZXMocGhhc2UpICYmICF0b3VyX2ZpbmFsKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGUgY2hhbXAgJ3RvdXJfZmluYWwnIGVzdCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UjSBSw6ljdXDDqXJlciBsJ0lEIGRlcyDDqXF1aXBlc1xyXG4gICAgY29uc3QgZXF1aXBlQSA9IGF3YWl0IGRiKFwiZXF1aXBlc1wiKS53aGVyZSh7IG5vbV9lcXVpcGU6IHBhcnRpY2lwYW50X2EgfSkuZmlyc3QoKTtcclxuICAgIGNvbnN0IGVxdWlwZUIgPSBhd2FpdCBkYihcImVxdWlwZXNcIikud2hlcmUoeyBub21fZXF1aXBlOiBwYXJ0aWNpcGFudF9iIH0pLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKCFlcXVpcGVBIHx8ICFlcXVpcGVCKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGVzIMOpcXVpcGVzIHPDqWxlY3Rpb25uw6llcyBuJ2V4aXN0ZW50IHBhcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDwn5SNIFLDqWN1cMOpcmVyIGxlcyBwb3VsZXMgZGVzIMOpcXVpcGVzIEEgZXQgQlxyXG4gICAgY29uc3QgcG91bGVzQSA9IGF3YWl0IGRiKFwicG91bGVfcGFydGljaXBhbnRzXCIpXHJcbiAgICAgIC53aGVyZSh7IGlkX3BhcnRpY2lwYW50OiBlcXVpcGVBLmlkX3BhcnRpY2lwYW50IH0pXHJcbiAgICAgIC5wbHVjayhcImlkX3BvdWxlXCIpO1xyXG5cclxuICAgIGNvbnN0IHBvdWxlc0IgPSBhd2FpdCBkYihcInBvdWxlX3BhcnRpY2lwYW50c1wiKVxyXG4gICAgICAud2hlcmUoeyBpZF9wYXJ0aWNpcGFudDogZXF1aXBlQi5pZF9wYXJ0aWNpcGFudCB9KVxyXG4gICAgICAucGx1Y2soXCJpZF9wb3VsZVwiKTtcclxuXHJcbiAgICBpZiAoIXBvdWxlc0EubGVuZ3RoIHx8ICFwb3VsZXNCLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkltcG9zc2libGUgZGUgdHJvdXZlciBsYSBwb3VsZSBkZXMgcGFydGljaXBhbnRzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIPCflI0gVsOpcmlmaWVyIHNpIHVuZSBwb3VsZSBlc3QgY29tbXVuZSBhdXggZGV1eCBwYXJ0aWNpcGFudHNcclxuICAgIGNvbnN0IHBvdWxlQ29tbXVuZSA9IHBvdWxlc0EuZmluZChwb3VsZSA9PiBwb3VsZXNCLmluY2x1ZGVzKHBvdWxlKSk7XHJcblxyXG4gICAgaWYgKCFwb3VsZUNvbW11bmUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMZXMgcGFydGljaXBhbnRzIG5lIHNvbnQgcGFzIGRhbnMgbGEgbcOqbWUgcG91bGUuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UjSBWw6lyaWZpZXIgcXVlIGNldHRlIHBvdWxlIGFwcGFydGllbnQgYmllbiDDoCBsJ8OpdsOpbmVtZW50IGRvbm7DqVxyXG4gICAgY29uc3QgcG91bGVJbmZvID0gYXdhaXQgZGIoXCJwb3VsZXNcIilcclxuICAgICAgLndoZXJlKHsgaWRfcG91bGU6IHBvdWxlQ29tbXVuZSwgaWRfZXZlbmVtZW50IH0pXHJcbiAgICAgIC5maXJzdCgpO1xyXG5cclxuICAgIGlmICghcG91bGVJbmZvKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGEgcG91bGUgZGVzIHBhcnRpY2lwYW50cyBkb2l0IMOqdHJlIGxpw6llIMOgIGwnw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UuSBJbnPDqXJlciBsYSByZW5jb250cmVcclxuICAgIGNvbnN0IG1hdGNoRGF0YSA9IHtcclxuICAgICAgcGhhc2UsXHJcbiAgICAgIHBhcnRpY2lwYW50X2E6IGVxdWlwZUEubm9tX2VxdWlwZSxcclxuICAgICAgcGFydGljaXBhbnRfYjogZXF1aXBlQi5ub21fZXF1aXBlLFxyXG4gICAgICBsaWV1X3JlbmNvbnRyZSxcclxuICAgICAgZGF0ZV9yZW5jb250cmUsXHJcbiAgICAgIGhldXJlX3JlbmNvbnRyZSxcclxuICAgICAgaWRfZXZlbmVtZW50LFxyXG4gICAgICBqb3VybmVlOiBqb3VybmVlIHx8IG51bGwsXHJcbiAgICAgIHRvdXJfZmluYWw6IHRvdXJfZmluYWwgfHwgbnVsbCxcclxuICAgICAgaWRfcG91bGU6IHBvdWxlQ29tbXVuZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJbnPDqXJlciBsYSByZW5jb250cmVcclxuICAgIGNvbnN0IFtuZXdNYXRjaElkXSA9IGF3YWl0IGRiKFwicmVuY29udHJlXCIpLmluc2VydChtYXRjaERhdGEpO1xyXG4gICAgY29uc29sZS5sb2coYOKchSBNYXRjaCBpbnPDqXLDqSBhdmVjIHN1Y2PDqHMgKElEOiAke25ld01hdGNoSWR9KWApO1xyXG5cclxuICAgIC8vIPCflLkgUsOpY3Vww6lyZXIgbGEgcmVuY29udHJlIG5vdXZlbGxlbWVudCBjcsOpw6llXHJcbiAgICBjb25zdCBuZXdNYXRjaCA9IGF3YWl0IGRiKFwicmVuY29udHJlXCIpLndoZXJlKHsgaWRfcmVuY29udHJlOiBuZXdNYXRjaElkIH0pLmZpcnN0KCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlJlbmNvbnRyZSBjcsOpw6llIGF2ZWMgc3VjY8Oocy5cIiwgbWF0Y2g6IG5ld01hdGNoIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGUgbGEgcmVuY29udHJlIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxhIHJlbmNvbnRyZS5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0cy5nZXRNYXRjaGVzQnlFdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCFldmVudElkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWF0Y2hlcyA9IGF3YWl0IGRiKFwicmVuY29udHJlXCIpXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgXCJpZF9yZW5jb250cmVcIixcclxuICAgICAgICBcInBhcnRpY2lwYW50X2FcIixcclxuICAgICAgICBcInBhcnRpY2lwYW50X2JcIixcclxuICAgICAgICBcImRhdGVfcmVuY29udHJlXCIsXHJcbiAgICAgICAgXCJoZXVyZV9yZW5jb250cmVcIixcclxuICAgICAgICBcImxpZXVfcmVuY29udHJlXCIsXHJcbiAgICAgICAgXCJwaGFzZVwiLFxyXG4gICAgICAgIFwiam91cm5lZVwiLFxyXG4gICAgICAgIFwidG91cl9maW5hbFwiXHJcbiAgICAgIClcclxuICAgICAgLndoZXJlKFwiaWRfZXZlbmVtZW50XCIsIGV2ZW50SWQpO1xyXG5cclxuICAgIC8vIEdyb3VwZW1lbnQgZGVzIG1hdGNocyBwYXIgcGhhc2Uvam91cm7DqWUvdG91ciBmaW5hbFxyXG4gICAgY29uc3QgZ3JvdXBlZE1hdGNoZXMgPSBtYXRjaGVzLnJlZHVjZSgoYWNjLCBtYXRjaCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSBgJHttYXRjaC5waGFzZX1fJHttYXRjaC5qb3VybmVlIHx8IFwiMFwifV8ke21hdGNoLnRvdXJfZmluYWwgfHwgXCIwXCJ9YDtcclxuXHJcbiAgICAgIGlmICghYWNjW2tleV0pIHtcclxuICAgICAgICBhY2Nba2V5XSA9IHtcclxuICAgICAgICAgIHBoYXNlOiBtYXRjaC5waGFzZSxcclxuICAgICAgICAgIGpvdXJuZWU6IG1hdGNoLmpvdXJuZWUsXHJcbiAgICAgICAgICB0b3VyX2ZpbmFsOiBtYXRjaC50b3VyX2ZpbmFsLFxyXG4gICAgICAgICAgbWF0Y2hlczogW10sXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWNjW2tleV0ubWF0Y2hlcy5wdXNoKHtcclxuICAgICAgICBpZF9yZW5jb250cmU6IG1hdGNoLmlkX3JlbmNvbnRyZSxcclxuICAgICAgICBwYXJ0aWNpcGFudF9hOiBtYXRjaC5wYXJ0aWNpcGFudF9hLCAvLyBEw6lqw6Agc3RvY2vDqSBzb3VzIGZvcm1lIGRlIG5vbVxyXG4gICAgICAgIHBhcnRpY2lwYW50X2I6IG1hdGNoLnBhcnRpY2lwYW50X2IsIC8vIETDqWrDoCBzdG9ja8OpIHNvdXMgZm9ybWUgZGUgbm9tXHJcbiAgICAgICAgZGF0ZV9yZW5jb250cmU6IG1hdGNoLmRhdGVfcmVuY29udHJlLFxyXG4gICAgICAgIGhldXJlX3JlbmNvbnRyZTogbWF0Y2guaGV1cmVfcmVuY29udHJlLFxyXG4gICAgICAgIGxpZXVfcmVuY29udHJlOiBtYXRjaC5saWV1X3JlbmNvbnRyZSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gYWNjO1xyXG4gICAgfSwge30pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKE9iamVjdC52YWx1ZXMoZ3JvdXBlZE1hdGNoZXMpKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcmVuY29udHJlcyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyByZW5jb250cmVzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBSw6ljdXDDqXJlciBsZXMgaW5mb3MgZHUgcGFydGljaXBhbnQgYXZlYyBzb24gw6lxdWlwZVxyXG5leHBvcnRzLmdldFBhcnRpY2lwYW50QnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgcGFydGljaXBhbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgaWYgKCFwYXJ0aWNpcGFudElkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGR1IHBhcnRpY2lwYW50IHJlcXVpcy5cIiB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgaW5mb3MgZHUgcGFydGljaXBhbnQgYXZlYyBzb24gw6lxdWlwZVxyXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBhd2FpdCBkYigncGFydGljaXBhbnRzIGFzIHAnKVxyXG4gICAgICAubGVmdEpvaW4oJ2VxdWlwZXMgYXMgZScsICdwLmlkX3BhcnRpY2lwYW50JywgJ2UuaWRfcGFydGljaXBhbnQnKVxyXG4gICAgICAud2hlcmUoeyAncC5pZF9wYXJ0aWNpcGFudCc6IHBhcnRpY2lwYW50SWQgfSlcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAncC4qJyxcclxuICAgICAgICAnZS5ub21fZXF1aXBlJyxcclxuICAgICAgICAnZS5jYXRlZ29yaWVfZXF1aXBlJ1xyXG4gICAgICApXHJcbiAgICAgIC5maXJzdCgpO1xyXG5cclxuICAgIGlmICghcGFydGljaXBhbnQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJQYXJ0aWNpcGFudCBub24gdHJvdXbDqS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwYXJ0aWNpcGFudCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkdSBwYXJ0aWNpcGFudDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgcGFydGljaXBhbnQuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gU3VwcHJlc3Npb24gZCd1bmUgcmVuY29udHJlIHBhciBJRFxyXG5leHBvcnRzLmRlbGV0ZU1hdGNoID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBtYXRjaElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGVsZXRlZFJvd3MgPSBhd2FpdCBkYigncmVuY29udHJlJykud2hlcmUoJ2lkX3JlbmNvbnRyZScsIG1hdGNoSWQpLmRlbCgpO1xyXG5cclxuICAgIGlmIChkZWxldGVkUm93cyA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIlJlbmNvbnRyZSBub24gdHJvdXbDqWUuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIlJlbmNvbnRyZSBzdXBwcmltw6llIGF2ZWMgc3VjY8Oocy5cIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGRlIGxhIHJlbmNvbnRyZSA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGRlIGxhIHJlbmNvbnRyZS5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gRm9uY3Rpb24gcG91ciByw6ljdXDDqXJlciB0b3V0ZXMgbGVzIHJlbmNvbnRyZXMgZGUgdG91cyBsZXMgw6l2w6luZW1lbnRzIGQndW4gb3JnYW5pc2F0ZXVyXHJcbmV4cG9ydHMuZ2V0QWxsQ2FsZW5kYXJNYXRjaGVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFLDqWN1cMOpcmVyIHRvdXMgbGVzIMOpdsOpbmVtZW50cyBkZSBsJ29yZ2FuaXNhdGV1clxyXG4gICAgY29uc3QgZXZlbnRzID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpXHJcbiAgICAgIC53aGVyZSgnaWRfb3JnYW5pc2F0ZXVyJywgcmVxLnVzZXIuaWQpICAvLyBPbiBzdXBwb3NlIHF1ZSBsJ29yZ2FuaXNhdGV1ciBlc3QgZGFucyByZXEudXNlci5pZFxyXG4gICAgICAuc2VsZWN0KCdpZF9ldmVuZW1lbnQnKTsgIC8vIE9uIG5lIHPDqWxlY3Rpb25uZSBxdWUgbGVzIElEIGRlcyDDqXbDqW5lbWVudHNcclxuXHJcbiAgICBpZiAoZXZlbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuIMOpdsOpbmVtZW50IHRyb3V2w6kgcG91ciBjZXQgb3JnYW5pc2F0ZXVyLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFLDqWN1cMOpcmVyIHRvdXRlcyBsZXMgcmVuY29udHJlcyBkZSB0b3VzIGxlcyDDqXbDqW5lbWVudHNcclxuICAgIGNvbnN0IGFsbE1hdGNoZXMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGV2ZW50cykge1xyXG4gICAgICBjb25zdCBtYXRjaGVzID0gYXdhaXQgZGIoJ3JlbmNvbnRyZScpXHJcbiAgICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudC5pZF9ldmVuZW1lbnQgfSlcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAub3JkZXJCeSgnZGF0ZV9yZW5jb250cmUnLCAnYXNjJylcclxuICAgICAgICAub3JkZXJCeSgnaGV1cmVfcmVuY29udHJlJywgJ2FzYycpO1xyXG4gICAgICBhbGxNYXRjaGVzLnB1c2goLi4ubWF0Y2hlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVsOpcmlmaWVyIHNpIGxhIHBoYXNlIFwiQWxsZXItUmV0b3VyXCIgZXN0IGJpZW4gcHLDqXNlbnRlIGRhbnMgbGVzIHLDqXN1bHRhdHNcclxuICAgIGNvbnNvbGUubG9nKG1hdGNoZXMpOyAgLy8gVsOpcmlmaWV6IGRhbnMgbGEgY29uc29sZSBzaSBsYSBwaGFzZSBlc3QgY29ycmVjdGVcclxuXHJcbiAgICBpZiAoYWxsTWF0Y2hlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcmVuY29udHJlIHRyb3V2w6llLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFsbE1hdGNoZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgY2FsZW5kcmllciBkZXMgcmVuY29udHJlcyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyByZW5jb250cmVzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0Q2FsZW5kYXJNYXRjaGVzQnlFdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCFldmVudElkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWF0Y2hlcyA9IGF3YWl0IGRiKCdyZW5jb250cmUnKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSlcclxuICAgICAgLnNlbGVjdCgnaWRfcmVuY29udHJlJywgJ2RhdGVfcmVuY29udHJlJywgJ2hldXJlX3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3BhcnRpY2lwYW50X2EnLCAncGFydGljaXBhbnRfYicsICdsaWV1X3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3BoYXNlJywgJ2pvdXJuZWUnLCAndG91cl9maW5hbCcpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiRG9ubsOpZXMgZW52b3nDqWVzIHBhciBsJ0FQSSA6XCIsIG1hdGNoZXMpOyAvLyDwn5SNIFbDqXJpZmljYXRpb24gZGVzIGRvbm7DqWVzIGF2YW50IGVudm9pXHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24obWF0Y2hlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcmVuY29udHJlcyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGR1IGNhbGVuZHJpZXIgZGVzIHJlbmNvbnRyZXMuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuLy8gcmVjdXBlcmF0aW9uIGRlIHRvdXRlIHBhcnRpY2lwYW50IFxyXG5leHBvcnRzLmdldEFsbFBhcnRpY2lwYW50c0J5T3JnYW5pemVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3Qgb3JnYW5pemVySWQgPSByZXEudXNlcj8uaWQ7IC8vIFLDqWN1cMOpcmVyIGwnSUQgZGUgbCdvcmdhbmlzYXRldXIgYXV0aGVudGlmacOpXHJcblxyXG4gIGlmICghb3JnYW5pemVySWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiTCdJRCBkZSBsJ29yZ2FuaXNhdGV1ciBlc3QgaW50cm91dmFibGUuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gSm9pbnR1cmUgZW50cmUgYGV2ZW5lbWVudHNgLCBgcGFydGljaXBlcmAgZXQgYHBhcnRpY2lwYW50c2BcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiKCdwYXJ0aWNpcGVyJylcclxuICAgICAgLmpvaW4oJ3BhcnRpY2lwYW50cycsICdwYXJ0aWNpcGVyLmlkX3BhcnRpY2lwYW50JywgJz0nLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JylcclxuICAgICAgLmpvaW4oJ2V2ZW5lbWVudCcsICdwYXJ0aWNpcGVyLmlkX2V2ZW5lbWVudCcsICc9JywgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnKSAvLyBDb3JyZWN0aW9uIGljaVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgICdwYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnLFxyXG4gICAgICAgICdwYXJ0aWNpcGFudHMubm9tX3BhcnQnLFxyXG4gICAgICAgICdldmVuZW1lbnQubm9tX2V2ZW50JyxcclxuICAgICAgICAncGFydGljaXBlci5pZF9ldmVuZW1lbnQnXHJcbiAgICAgIClcclxuICAgICAgLndoZXJlKCdldmVuZW1lbnQuaWRfb3JnYW5pc2F0ZXVyJywgb3JnYW5pemVySWQpOyAvLyBGaWx0cmVyIHBhciBvcmdhbmlzYXRldXJcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50cyB8fCBwYXJ0aWNpcGFudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdBdWN1biBwYXJ0aWNpcGFudCB0cm91dsOpIHBvdXIgdm9zIMOpdsOpbmVtZW50cy4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBhcnRpY2lwYW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBwYXJ0aWNpcGFudHMgOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBzZXJ2ZXVyLicgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKipSZXN1bHRhdHMqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyBwb3VyIHLDqWN1cMOpcmVyIGxlcyBpbmZvcm1hdGlvbnMgZCd1biDDqXbDqW5lbWVudCBzw6lsZWN0aW9ubsOpXHJcblxyXG5leHBvcnRzLmdldEV2ZW50UmVzdWx0YXRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBldmVudElkIHJlw6d1IDpcIiwgZXZlbnRJZCk7XHJcblxyXG4gICAgaWYgKCFldmVudElkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UuSBSw6ljdXDDqXJhdGlvbiBkdSBub20gZGUgbCfDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgZXZlbnQgPSBhd2FpdCBkYignZXZlbmVtZW50JylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ25vbV9ldmVudCcpXHJcbiAgICAgIC5maXJzdCgpO1xyXG5cclxuICAgIGlmICghZXZlbnQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCLDiXbDqW5lbWVudCBub24gdHJvdXbDqS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDwn5S5IFLDqWN1cMOpcmF0aW9uIGRlcyBkaWZmw6lyZW50ZXMgcGhhc2VzLCBqb3VybsOpZXMgZXQgdG91cnMgZmluYXV4IGFzc29jacOpcyDDoCBsJ8OpdsOpbmVtZW50XHJcbiAgICBjb25zdCBtYXRjaEluZm8gPSBhd2FpdCBkYigncmVuY29udHJlJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ3BoYXNlJywgJ2pvdXJuZWUnLCAndG91cl9maW5hbCcpXHJcbiAgICAgIC5ncm91cEJ5KCdwaGFzZScsICdqb3VybmVlJywgJ3RvdXJfZmluYWwnKSAgLy8g8J+UpSBPbiByw6ljdXDDqHJlIHRvdXRlcyBsZXMgdmFsZXVycyB1bmlxdWVzXHJcblxyXG4gICAgY29uc29sZS5sb2coXCLinIUgRG9ubsOpZXMgbWF0Y2hJbmZvIDpcIiwgbWF0Y2hJbmZvKTtcclxuXHJcbiAgICBpZiAobWF0Y2hJbmZvLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuZSByZW5jb250cmUgdHJvdXbDqWUgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBub21fZXZlbnQ6IGV2ZW50Lm5vbV9ldmVudCxcclxuICAgICAgZGV0YWlsczogbWF0Y2hJbmZvIC8vIPCflKUgT24gZW52b2llIHVuIHRhYmxlYXUgY29udGVuYW50IHRvdXRlcyBsZXMgcGhhc2VzLCBqb3VybsOpZXMgZXQgdG91cnMgZmluYXV4XHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIHNlcnZldXIgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgZMOpdGFpbHMgZGUgbCfDqXbDqW5lbWVudC5cIiwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gcG91ciByw6ljdXDDqXJlciBsZXMgcmVuY29udHJlcyBmaWx0csOpZXMgOlxyXG5leHBvcnRzLmdldEZpbHRlcmVkTWF0Y2hlc0J5RXZlbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBwaGFzZSwgam91cm5lZSwgdG91cl9maW5hbCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGlmICghZXZlbnRJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGRlIGwnw6l2w6luZW1lbnQgcmVxdWlzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBxdWVyeSA9IGRiKCdyZW5jb250cmUnKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSlcclxuICAgICAgLnNlbGVjdCgnaWRfcmVuY29udHJlJywgJ3BhcnRpY2lwYW50X2EnLCAncGFydGljaXBhbnRfYicsICdwaGFzZScsICdqb3VybmVlJywgJ3RvdXJfZmluYWwnKTtcclxuXHJcbiAgICAvLyBGaWx0cmFnZSBkeW5hbWlxdWUgZW4gZm9uY3Rpb24gZGVzIHBhcmFtw6h0cmVzIHJlw6d1c1xyXG4gICAgaWYgKHBoYXNlKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoeyBwaGFzZSB9KTtcclxuICAgIH1cclxuICAgIGlmIChqb3VybmVlKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoeyBqb3VybmVlIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRvdXJfZmluYWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS53aGVyZSh7IHRvdXJfZmluYWwgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWF0Y2hlcyA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuZSByZW5jb250cmUgdHJvdXbDqWUgcG91ciBjZXMgY3JpdMOocmVzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG1hdGNoZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHJlbmNvbnRyZXMgZmlsdHLDqWVzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuLy8gcG91ciBlbnJlZ2lzdHJlciBsZXMgcsOpc3VsdGF0cyBkZXMgcmVuY29udHJlc1xyXG5leHBvcnRzLnNhdmVNYXRjaFJlc3VsdHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgbGV0IHsgcmVzdWx0cywgcG9pbnRfdmljdG9pcmUsIHBvaW50X2RlZmFpdGUsIHBvaW50X21hdGNobnVsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIWV2ZW50SWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMJ0lEIGRlIGwnw6l2w6luZW1lbnQgZXN0IHJlcXVpcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlc3VsdHMgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJBdWN1biByw6lzdWx0YXQgZm91cm5pLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERhdGUgYWN0dWVsbGUgcG91ciBsJ2VucmVnaXN0cmVtZW50XHJcbiAgICBjb25zdCBkYXRlX3Jlc3VsdGF0ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGluc2VydGVkUmVzdWx0cyA9IFtdO1xyXG4gICAgY29uc3QgaWdub3JlZFJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIHJlc3VsdHMpIHtcclxuICAgICAgY29uc3QgeyBpZF9yZW5jb250cmUsIHNjb3JlX0EsIHNjb3JlX0IsIHBoYXNlIH0gPSBtYXRjaDtcclxuXHJcbiAgICAgIC8vIPCflLkgVsOpcmlmaWNhdGlvbiBkZXMgcGhhc2VzIHF1aSBuZSBkb2l2ZW50IHBhcyBhdm9pciBkZSBwb2ludHNcclxuICAgICAgaWYgKFtcIkZpbmFsZVwiLCBcIkJhcnJhZ2VcIiwgXCJBbGxlciBSZXRvdXJcIl0uaW5jbHVkZXMocGhhc2UpKSB7XHJcbiAgICAgICAgcG9pbnRfdmljdG9pcmUgPSBudWxsO1xyXG4gICAgICAgIHBvaW50X2RlZmFpdGUgPSBudWxsO1xyXG4gICAgICAgIHBvaW50X21hdGNobnVsID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVsOpcmlmaWVyIHNpIHVuIHLDqXN1bHRhdCBleGlzdGUgZMOpasOgIHBvdXIgY2UgbWF0Y2ggZXQgY2V0IMOpdsOpbmVtZW50XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nUmVzdWx0ID0gYXdhaXQgZGIoJ3Jlc3VsdGF0JylcclxuICAgICAgICAud2hlcmUoeyBpZF9yZW5jb250cmUsIGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAgIC5maXJzdCgpO1xyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nUmVzdWx0KSB7XHJcbiAgICAgICAgLy8g8J+UuSBOZSBwYXMgaW5zw6lyZXIgZXQgYWpvdXRlciDDoCBsYSBsaXN0ZSBkZXMgaWdub3LDqXNcclxuICAgICAgICBpZ25vcmVkUmVzdWx0cy5wdXNoKHsgaWRfcmVuY29udHJlLCBtZXNzYWdlOiBcIlLDqXN1bHRhdCBkw6lqw6AgZXhpc3RhbnRcIiB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDwn5S5IEluc8OpcmVyIHVuIG5vdXZlYXUgcsOpc3VsdGF0XHJcbiAgICAgICAgY29uc3QgW2lkX3Jlc3VsdGF0XSA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpLmluc2VydCh7XHJcbiAgICAgICAgICBpZF9yZW5jb250cmUsXHJcbiAgICAgICAgICBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQsXHJcbiAgICAgICAgICBzY29yZV9BLFxyXG4gICAgICAgICAgc2NvcmVfQixcclxuICAgICAgICAgIHBvaW50X3ZpY3RvaXJlLFxyXG4gICAgICAgICAgcG9pbnRfZGVmYWl0ZSxcclxuICAgICAgICAgIHBvaW50X21hdGNobnVsLFxyXG4gICAgICAgICAgZGF0ZV9yZXN1bHRhdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbnNlcnRlZFJlc3VsdHMucHVzaCh7IGlkX3Jlc3VsdGF0LCBpZF9yZW5jb250cmUsIHNjb3JlX0EsIHNjb3JlX0IsIHN0YXR1czogXCJJbnPDqXLDqVwiIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBcIlLDqXN1bHRhdHMgdHJhaXTDqXNcIixcclxuICAgICAgaW5zZXJ0ZWQ6IGluc2VydGVkUmVzdWx0cyxcclxuICAgICAgaWdub3JlZDogaWdub3JlZFJlc3VsdHNcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbCdlbnJlZ2lzdHJlbWVudCBkZXMgcsOpc3VsdGF0cyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGwnZW5yZWdpc3RyZW1lbnQgZGVzIHLDqXN1bHRhdHMuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKiogTGlzdGUgUmVzdWx0YXRzKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8gUsOpY3Vww6lyZXIgbGVzIGTDqXRhaWxzIGQndW4gw6l2w6luZW1lbnQgZXQgc2VzIHBoYXNlc1xyXG5leHBvcnRzLmdldEV2ZW50UmVzdWx0YXRMaXN0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgc2kgbCfDqXbDqW5lbWVudCBleGlzdGVcclxuICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAuc2VsZWN0KCdub21fZXZlbnQnKVxyXG4gICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoIWV2ZW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiw4l2w6luZW1lbnQgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIGluZm9ybWF0aW9ucyBkZSByZW5jb250cmUgbGnDqWVzIMOgIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgbWF0Y2hJbmZvID0gYXdhaXQgZGIoJ3JlbmNvbnRyZScpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAuc2VsZWN0KCdwaGFzZScsICdqb3VybmVlJywgJ3RvdXJfZmluYWwnKVxyXG4gICAgICAuZmlyc3QoKTsgLy8gT24gcsOpY3Vww6hyZSB1biBzZXVsIGVucmVnaXN0cmVtZW50XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBub21fZXZlbnQ6IGV2ZW50Lm5vbV9ldmVudCxcclxuICAgICAgcGhhc2U6IG1hdGNoSW5mbz8ucGhhc2UgfHwgJ04vQScsXHJcbiAgICAgIGpvdXJuZWU6IG1hdGNoSW5mbz8uam91cm5lZSB8fCAnTi9BJyxcclxuICAgICAgdG91cl9maW5hbDogbWF0Y2hJbmZvPy50b3VyX2ZpbmFsIHx8ICdOL0EnXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIHNlcnZldXIgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgZMOpdGFpbHMgZGUgbCfDqXbDqW5lbWVudC5cIiwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gUsOpY3Vww6lyZXIgbGVzIHLDqXN1bHRhdHMgZGVzIG1hdGNocyBhdmVjIGpvaW50dXJlXHJcbmV4cG9ydHMuZ2V0RmlsdGVyZWRNYXRjaGVzUmVzdWx0YXRMaXN0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBsZXQgbWF0Y2hlcyA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpXHJcbiAgICAgIC5qb2luKCdyZW5jb250cmUnLCAncmVzdWx0YXQuaWRfcmVuY29udHJlJywgJz0nLCAncmVuY29udHJlLmlkX3JlbmNvbnRyZScpXHJcbiAgICAgIC5qb2luKCdldmVuZW1lbnQnLCAncmVuY29udHJlLmlkX2V2ZW5lbWVudCcsICc9JywgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgICdldmVuZW1lbnQubm9tX2V2ZW50JyxcclxuICAgICAgICAncmVuY29udHJlLnBoYXNlJyxcclxuICAgICAgICAncmVuY29udHJlLmpvdXJuZWUnLFxyXG4gICAgICAgICdyZW5jb250cmUudG91cl9maW5hbCcsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5kYXRlX3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5oZXVyZV9yZW5jb250cmUnLFxyXG4gICAgICAgICdyZW5jb250cmUucGFydGljaXBhbnRfYScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5wYXJ0aWNpcGFudF9iJyxcclxuICAgICAgICAncmVzdWx0YXQuc2NvcmVfQScsXHJcbiAgICAgICAgJ3Jlc3VsdGF0LnNjb3JlX0InLFxyXG4gICAgICAgICdyZW5jb250cmUubGlldV9yZW5jb250cmUnXHJcbiAgICAgIClcclxuICAgICAgLndoZXJlKCdyZXN1bHRhdC5pZF9ldmVuZW1lbnQnLCBldmVudElkKVxyXG4gICAgICAub3JkZXJCeShbJ2V2ZW5lbWVudC5ub21fZXZlbnQnLCAncmVuY29udHJlLnBoYXNlJywgJ3JlbmNvbnRyZS5qb3VybmVlJywgJ3JlbmNvbnRyZS50b3VyX2ZpbmFsJywgJ3JlbmNvbnRyZS5kYXRlX3JlbmNvbnRyZSddKTtcclxuXHJcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1biByw6lzdWx0YXQgdHJvdXbDqSBwb3VyIGNldCDDqXbDqW5lbWVudC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWdyb3VwZXIgbGVzIHLDqXN1bHRhdHMgcGFyIMOpdsOpbmVtZW50LCBwaGFzZSwgam91cm7DqWUgZXQgdG91clxyXG4gICAgbGV0IGdyb3VwZWRSZXN1bHRzID0ge307XHJcbiAgICBtYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xyXG4gICAgICBjb25zdCBncm91cEtleSA9IGAke21hdGNoLm5vbV9ldmVudH0gfCAke21hdGNoLnBoYXNlfSB8IEpvdXJuw6llOiAke21hdGNoLmpvdXJuZWUgIT09ICdOL0EnID8gbWF0Y2guam91cm5lZSA6ICdOb24gZMOpZmluaSd9ICR7bWF0Y2gudG91cl9maW5hbCAhPT0gJ04vQScgPyBgVG91ciBGaW5hbDogJHttYXRjaC50b3VyX2ZpbmFsfWAgOiAnJ31gO1xyXG5cclxuICAgICAgaWYgKCFncm91cGVkUmVzdWx0c1tncm91cEtleV0pIHtcclxuICAgICAgICBncm91cGVkUmVzdWx0c1tncm91cEtleV0gPSBbXTtcclxuICAgICAgfVxyXG4gICAgICBncm91cGVkUmVzdWx0c1tncm91cEtleV0ucHVzaChtYXRjaCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihncm91cGVkUmVzdWx0cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIHNlcnZldXIgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcsOpc3VsdGF0cy5cIiwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcblxyXG4vLyDinIUgUsOpY3Vww6lyZXIgbGVzIMOpdsOpbmVtZW50cyBTQU5TIGF1dGhlbnRpZmljYXRpb25cclxuZXhwb3J0cy5nZXRQdWJsaWNFdmVudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXZlbnRzID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpLnNlbGVjdCgnKicpOyAvLyBSw6ljdXDDqXJlciB0b3VzIGxlcyDDqXbDqW5lbWVudHNcclxuICAgIGNvbnNvbGUubG9nKFwiw4l2w6luZW1lbnRzIHLDqWN1cMOpcsOpcyA6XCIsIGV2ZW50cyk7XHJcbiAgICByZXMuanNvbihldmVudHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIMOpdsOpbmVtZW50cyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIFRvdXMgbGVzIHLDqXN1bHRhdHMgZGVzIG1hdGNocyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8gUsOpY3Vww6lyZXIgbGVzIHLDqXN1bHRhdHMgZGUgdG91cyBsZXMgw6l2w6luZW1lbnRzXHJcbmV4cG9ydHMuZ2V0QWxsTWF0Y2hlc1Jlc3VsdGF0TGlzdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgbWF0Y2hlcyA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpXHJcbiAgICAgIC5qb2luKCdyZW5jb250cmUnLCAncmVzdWx0YXQuaWRfcmVuY29udHJlJywgJz0nLCAncmVuY29udHJlLmlkX3JlbmNvbnRyZScpXHJcbiAgICAgIC5qb2luKCdldmVuZW1lbnQnLCAncmVuY29udHJlLmlkX2V2ZW5lbWVudCcsICc9JywgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgICdldmVuZW1lbnQubm9tX2V2ZW50JyxcclxuICAgICAgICAncmVuY29udHJlLmlkX3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5waGFzZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5qb3VybmVlJyxcclxuICAgICAgICAncmVuY29udHJlLnRvdXJfZmluYWwnLFxyXG4gICAgICAgICdyZW5jb250cmUuZGF0ZV9yZW5jb250cmUnLFxyXG4gICAgICAgICdyZW5jb250cmUuaGV1cmVfcmVuY29udHJlJyxcclxuICAgICAgICAncmVuY29udHJlLnBhcnRpY2lwYW50X2EnLFxyXG4gICAgICAgICdyZW5jb250cmUucGFydGljaXBhbnRfYicsXHJcbiAgICAgICAgJ3Jlc3VsdGF0LmlkX3Jlc3VsdGF0JywgLy8g4pyFIEFqb3V0IGRlIGBpZF9yZXN1bHRhdGBcclxuICAgICAgICAncmVzdWx0YXQuc2NvcmVfQScsXHJcbiAgICAgICAgJ3Jlc3VsdGF0LnNjb3JlX0InLFxyXG4gICAgICAgICdyZW5jb250cmUubGlldV9yZW5jb250cmUnXHJcbiAgICAgIClcclxuICAgICAgLm9yZGVyQnkoWydldmVuZW1lbnQubm9tX2V2ZW50JywgJ3JlbmNvbnRyZS5waGFzZScsICdyZW5jb250cmUuam91cm5lZScsICdyZW5jb250cmUudG91cl9maW5hbCcsICdyZW5jb250cmUuZGF0ZV9yZW5jb250cmUnXSk7XHJcblxyXG4gICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gcsOpc3VsdGF0IHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVncm91cGVyIGxlcyByw6lzdWx0YXRzIHBhciDDqXbDqW5lbWVudCwgcGhhc2UsIGpvdXJuw6llIGV0IHRvdXJcclxuICAgIGxldCBncm91cGVkUmVzdWx0cyA9IHt9O1xyXG4gICAgbWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHtcclxuICAgICAgY29uc3QgZ3JvdXBLZXkgPSBgJHttYXRjaC5ub21fZXZlbnR9IHwgJHttYXRjaC5waGFzZX0gfCBKb3VybsOpZTogJHttYXRjaC5qb3VybmVlICE9PSAnTi9BJyA/IG1hdGNoLmpvdXJuZWUgOiAnTm9uIGTDqWZpbmknfSAke21hdGNoLnRvdXJfZmluYWwgIT09ICdOL0EnID8gYFRvdXIgRmluYWw6ICR7bWF0Y2gudG91cl9maW5hbH1gIDogJyd9YDtcclxuXHJcbiAgICAgIGlmICghZ3JvdXBlZFJlc3VsdHNbZ3JvdXBLZXldKSB7XHJcbiAgICAgICAgZ3JvdXBlZFJlc3VsdHNbZ3JvdXBLZXldID0gW107XHJcbiAgICAgIH1cclxuICAgICAgZ3JvdXBlZFJlc3VsdHNbZ3JvdXBLZXldLnB1c2gobWF0Y2gpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZ3JvdXBlZFJlc3VsdHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHLDqXN1bHRhdHMuXCIsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIENvbnRyw7RsZXVyIHBvdXIgbGEgbWlzZSDDoCBqb3VyIGR1IHNjb3JlXHJcbmV4cG9ydHMudXBkYXRlTWF0Y2hTY29yZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IG1hdGNoSWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IHNjb3JlX0EsIHNjb3JlX0IgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIFbDqXJpZmljYXRpb24gZGVzIHZhbGV1cnNcclxuICAgIGlmIChzY29yZV9BID09PSB1bmRlZmluZWQgfHwgc2NvcmVfQiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGVzIHNjb3JlcyBzb250IHJlcXVpcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNaXNlIMOgIGpvdXIgZHUgc2NvcmUgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgZGIoJ3Jlc3VsdGF0JylcclxuICAgICAgLndoZXJlKHsgaWRfcmVuY29udHJlOiBtYXRjaElkIH0pXHJcbiAgICAgIC51cGRhdGUoeyBzY29yZV9BLCBzY29yZV9CIH0pO1xyXG5cclxuICAgIGlmICh1cGRhdGVkKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJTY29yZSBtaXMgw6Agam91ciBhdmVjIHN1Y2PDqHMgIVwiIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIk1hdGNoIG5vbiB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkdSBzY29yZSA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkdSBzY29yZS5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBDb250csO0bGV1ciBwb3VyIHN1cHByaW1lciB1biByw6lzdWx0YXQgZGUgbWF0Y2ggdmlhIGBpZF9yZXN1bHRhdGBcclxuZXhwb3J0cy5kZWxldGVNYXRjaFJlc3VsdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHJlc3VsdElkIH0gPSByZXEucGFyYW1zOyAvLyBPbiByw6ljdXDDqHJlIGBpZF9yZXN1bHRhdGAgZXQgbm9uIGBpZF9yZW5jb250cmVgXHJcblxyXG4gICAgLy8gVsOpcmlmaWVyIHNpIGxlIHLDqXN1bHRhdCBleGlzdGVcclxuICAgIGNvbnN0IHJlc3VsdEV4aXN0cyA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpLndoZXJlKHsgaWRfcmVzdWx0YXQ6IHJlc3VsdElkIH0pLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKCFyZXN1bHRFeGlzdHMpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJMZSByw6lzdWx0YXQgZHUgbWF0Y2ggbidleGlzdGUgcGFzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN1cHByZXNzaW9uIGR1IHLDqXN1bHRhdFxyXG4gICAgYXdhaXQgZGIoJ3Jlc3VsdGF0Jykud2hlcmUoeyBpZF9yZXN1bHRhdDogcmVzdWx0SWQgfSkuZGVsKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIlLDqXN1bHRhdCBzdXBwcmltw6kgYXZlYyBzdWNjw6hzICFcIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkdSByw6lzdWx0YXQgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkdSByw6lzdWx0YXQuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQ2xhc3NlbWVudCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbmV4cG9ydHMuZ2V0Q2xhc3NlbWVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwaGFzZXNBRXhjbHVyZSA9IFtcIkJhcnJhZ2VcIiwgXCLDiWxpbWluYXRvaXJlXCIsIFwiQWxsZXIgUmV0b3VyXCIsIFwiRmluYWxlXCJdO1xyXG5cclxuICAgIGxldCBxdWVyeSA9IGRiKFwicmVzdWx0YXRcIilcclxuICAgICAgLmpvaW4oXCJyZW5jb250cmVcIiwgXCJyZXN1bHRhdC5pZF9yZW5jb250cmVcIiwgXCI9XCIsIFwicmVuY29udHJlLmlkX3JlbmNvbnRyZVwiKVxyXG4gICAgICAuam9pbihcImV2ZW5lbWVudFwiLCBcInJlbmNvbnRyZS5pZF9ldmVuZW1lbnRcIiwgXCI9XCIsIFwiZXZlbmVtZW50LmlkX2V2ZW5lbWVudFwiKVxyXG4gICAgICAuam9pbihcInBvdWxlc1wiLCBcInJlbmNvbnRyZS5pZF9wb3VsZVwiLCBcIj1cIiwgXCJwb3VsZXMuaWRfcG91bGVcIilcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICBcImV2ZW5lbWVudC5ub21fZXZlbnRcIixcclxuICAgICAgICBcImV2ZW5lbWVudC5ub21fc3BvcnRcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5pZF9ldmVuZW1lbnRcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5waGFzZVwiLFxyXG4gICAgICAgIFwicmVuY29udHJlLmpvdXJuZWVcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5pZF9wb3VsZVwiLFxyXG4gICAgICAgIFwicG91bGVzLm5vbV9wb3VsZVwiLFxyXG4gICAgICAgIFwicmVuY29udHJlLnBhcnRpY2lwYW50X2FcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5wYXJ0aWNpcGFudF9iXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5zY29yZV9BXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5zY29yZV9CXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5wb2ludF92aWN0b2lyZVwiLFxyXG4gICAgICAgIFwicmVzdWx0YXQucG9pbnRfbWF0Y2hudWxcIixcclxuICAgICAgICBcInJlc3VsdGF0LnBvaW50X2RlZmFpdGVcIlxyXG4gICAgICApXHJcbiAgICAgIC53aGVyZU5vdEluKFwicmVuY29udHJlLnBoYXNlXCIsIHBoYXNlc0FFeGNsdXJlKTtcclxuXHJcbiAgICBjb25zdCByZXN1bHRhdHMgPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoIXJlc3VsdGF0cy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY2xhc3NlbWVudDoge30gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNsYXNzZW1lbnRQYXJFdmVuZW1lbnQgPSB7fTtcclxuXHJcbiAgICByZXN1bHRhdHMuZm9yRWFjaCgobWF0Y2gpID0+IHtcclxuICAgICAgY29uc3QgZXZlbnRLZXkgPSBtYXRjaC5ub21fZXZlbnQ7XHJcbiAgICAgIGNvbnN0IHBoYXNlS2V5ID0gYFBoYXNlOiAke21hdGNoLnBoYXNlfWA7XHJcbiAgICAgIGNvbnN0IGpvdXJuZWVLZXkgPSBgSm91cm7DqWUgJHttYXRjaC5qb3VybmVlfWA7XHJcbiAgICAgIGNvbnN0IHBvdWxlS2V5ID0gYFBvdWxlICR7bWF0Y2gubm9tX3BvdWxlfWA7XHJcbiAgICAgIGNvbnN0IHNwb3J0ID0gbWF0Y2gubm9tX3Nwb3J0LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICBpZiAoIWNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldKSB7XHJcbiAgICAgICAgY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV0gPSB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV0pIHtcclxuICAgICAgICBjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV0gPSB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV1bam91cm5lZUtleV0pIHtcclxuICAgICAgICBjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV1bam91cm5lZUtleV0gPSB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldKSB7XHJcbiAgICAgICAgY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldW2pvdXJuZWVLZXldW3BvdWxlS2V5XSA9IFtdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBbbWF0Y2gucGFydGljaXBhbnRfYSwgbWF0Y2gucGFydGljaXBhbnRfYl0uZm9yRWFjaCgoZXF1aXBlLCBpKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2NvcmUgPSBpID09PSAwID8gbWF0Y2guc2NvcmVfQSA6IG1hdGNoLnNjb3JlX0I7XHJcbiAgICAgICAgY29uc3QgYWR2ZXJzYWlyZVNjb3JlID0gaSA9PT0gMCA/IG1hdGNoLnNjb3JlX0IgOiBtYXRjaC5zY29yZV9BO1xyXG4gICAgICAgIGNvbnN0IHZpY3RvaXJlID0gc2NvcmUgPiBhZHZlcnNhaXJlU2NvcmUgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBkZWZhaXRlID0gc2NvcmUgPCBhZHZlcnNhaXJlU2NvcmUgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBtYXRjaEpvdWUgPSAxO1xyXG5cclxuICAgICAgICBsZXQgcG9pbnRzID0gMDtcclxuICAgICAgICBpZiAoc2NvcmUgPiBhZHZlcnNhaXJlU2NvcmUpIHtcclxuICAgICAgICAgIHBvaW50cyA9IG1hdGNoLnBvaW50X3ZpY3RvaXJlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2NvcmUgPT09IGFkdmVyc2FpcmVTY29yZSkge1xyXG4gICAgICAgICAgcG9pbnRzID0gbWF0Y2gucG9pbnRfbWF0Y2hudWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHBvaW50cyA9IG1hdGNoLnBvaW50X2RlZmFpdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0ZWFtID0gY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldW2pvdXJuZWVLZXldW3BvdWxlS2V5XS5maW5kKFxyXG4gICAgICAgICAgKGVxdWlwZURhdGEpID0+IGVxdWlwZURhdGEubm9tX2VxdWlwZSA9PT0gZXF1aXBlXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRlYW0pIHtcclxuICAgICAgICAgIGlmIChzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIpIHtcclxuICAgICAgICAgICAgdGVhbS5taiArPSBtYXRjaEpvdWU7XHJcbiAgICAgICAgICAgIHRlYW0udiArPSB2aWN0b2lyZTtcclxuICAgICAgICAgICAgdGVhbS5kICs9IGRlZmFpdGU7XHJcbiAgICAgICAgICAgIHRlYW0ucG9pbnRzX21hcnF1ZXMgKz0gc2NvcmU7XHJcbiAgICAgICAgICAgIHRlYW0ucG9pbnRzX2NvbmNlZGVzICs9IGFkdmVyc2FpcmVTY29yZTtcclxuICAgICAgICAgICAgdGVhbS5kaWZmZXJlbmNlX3BvaW50cyArPSBzY29yZSAtIGFkdmVyc2FpcmVTY29yZTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoc3BvcnQgPT09IFwicMOpdGFucXVlXCIpIHtcclxuICAgICAgICAgICAgdGVhbS5wb2ludHMgKz0gcG9pbnRzO1xyXG4gICAgICAgICAgICB0ZWFtLnBvaW50c19tYXJxdWVzICs9IHNjb3JlO1xyXG4gICAgICAgICAgICB0ZWFtLnBvaW50c19jb25jZWRlcyArPSBhZHZlcnNhaXJlU2NvcmU7XHJcbiAgICAgICAgICAgIHRlYW0uZGlmZmVyZW5jZV9wb2ludHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0ZWFtLnBvaW50cyArPSBwb2ludHM7XHJcbiAgICAgICAgICAgIHRlYW0uYnV0c19tYXJxdWVzICs9IHNjb3JlO1xyXG4gICAgICAgICAgICB0ZWFtLmJ1dHNfZW5jYWlzc2VzICs9IGFkdmVyc2FpcmVTY29yZTtcclxuICAgICAgICAgICAgdGVhbS5kaWZmZXJlbmNlX2J1dHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0ucHVzaCh7XHJcbiAgICAgICAgICAgIG5vbV9lcXVpcGU6IGVxdWlwZSxcclxuICAgICAgICAgICAgcG9pbnRzOiBwb2ludHMsXHJcbiAgICAgICAgICAgIGJ1dHNfbWFycXVlczogc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGJ1dHNfZW5jYWlzc2VzOiBzcG9ydCAhPT0gXCJiYXNrZXRiYWxsXCIgPyBhZHZlcnNhaXJlU2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGRpZmZlcmVuY2VfYnV0czogc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBvaW50c19tYXJxdWVzOiBzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgfHwgc3BvcnQgPT09IFwicMOpdGFucXVlXCIgPyBzY29yZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcG9pbnRzX2NvbmNlZGVzOiBzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgfHwgc3BvcnQgPT09IFwicMOpdGFucXVlXCIgPyBhZHZlcnNhaXJlU2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGRpZmZlcmVuY2VfcG9pbnRzOiBzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgfHwgc3BvcnQgPT09IFwicMOpdGFucXVlXCIgPyBzY29yZSAtIGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgbWo6IHNwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IG1hdGNoSm91ZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdjogc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiID8gdmljdG9pcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGQ6IHNwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IGRlZmFpdGUgOiB1bmRlZmluZWRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBam91dCBkdSBDbGFzc2VtZW50IEfDqW7DqXJhbFxyXG4gICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhckV2ZW5lbWVudCkuZm9yRWFjaChldmVudEtleSA9PiB7XHJcbiAgICAgIGxldCBjbGFzc2VtZW50R2VuZXJhbCA9IHt9O1xyXG5cclxuICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV0pLmZvckVhY2gocGhhc2VLZXkgPT4ge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW3BoYXNlS2V5XSkuZm9yRWFjaChqb3VybmVlS2V5ID0+IHtcclxuICAgICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW3BoYXNlS2V5XVtqb3VybmVlS2V5XSkuZm9yRWFjaChwb3VsZUtleSA9PiB7XHJcbiAgICAgICAgICAgIGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0uZm9yRWFjaCh0ZWFtID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBlcXVpcGVLZXkgPSB0ZWFtLm5vbV9lcXVpcGU7XHJcbiAgICAgICAgICAgICAgaWYgKCFjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldKSB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldID0geyAuLi50ZWFtIH07XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRlYW0pLmZvckVhY2goc3RhdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVhbVtzdGF0XSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZW1lbnRHZW5lcmFsW2VxdWlwZUtleV1bc3RhdF0gKz0gdGVhbVtzdGF0XTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW1wiQ2xhc3NlbWVudCBHw6luw6lyYWxcIl0gPSB7XHJcbiAgICAgICAgXCJDbGFzc2VtZW50IEfDqW7DqXJhbFwiOiBPYmplY3QudmFsdWVzKGNsYXNzZW1lbnRHZW5lcmFsKS5zb3J0KChhLCBiKSA9PiBiLnBvaW50cyAtIGEucG9pbnRzKVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBjbGFzc2VtZW50OiBjbGFzc2VtZW50UGFyRXZlbmVtZW50IH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIHNlcnZldXIgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXJcIiwgZXJyb3IgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PSBnZXN0aW9uIHRpY2tldCBwYXIgbCdvcmdhbmlzYXRldXIgPT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyDwn5OMIFLDqWN1cMOpcmVyIGxlcyB2ZW50ZXMgZGUgYmlsbGV0cyBkZSBs4oCZb3JnYW5pc2F0ZXVyXHJcbmV4cG9ydHMuZ2V0T3JnYW5pemVyVGlja2V0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgb3JnYW5pemVySWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2FsZXMgPSBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKVxyXG4gICAgICAgICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJhY2hhdGJpbGxldHMubm9tX2V2ZW5lbWVudFwiLCBcIj1cIiwgXCJldmVuZW1lbnQubm9tX2V2ZW50XCIpXHJcbiAgICAgICAgICAud2hlcmUoXCJldmVuZW1lbnQuaWRfb3JnYW5pc2F0ZXVyXCIsIG9yZ2FuaXplcklkKVxyXG4gICAgICAgICAgLnNlbGVjdChcclxuICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5ub21fZXZlbmVtZW50XCIsXHJcbiAgICAgICAgICAgICAgXCJhY2hhdGJpbGxldHMudHlwZV90aWNrZXRcIixcclxuICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5xdWFudGl0ZSBhcyBxdWFudGl0ZVwiLFxyXG4gICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLnRvdGFsX2JpbGxldHNfdmVuZHVzXCIsXHJcbiAgICAgICAgICAgICAgXCJhY2hhdGJpbGxldHMubW9udGFudF9jb2xsZWN0ZVwiLFxyXG4gICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLnByaXhfdW5pdGFpcmVcIixcclxuICAgICAgICAgICAgICBkYi5yYXcoXCJhY2hhdGJpbGxldHMucXVhbnRpdGUgLSBhY2hhdGJpbGxldHMudG90YWxfYmlsbGV0c192ZW5kdXMgQVMgcXVhbnRpdGVfcmVzdGFudGVcIilcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICByZXMuanNvbihzYWxlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgYmlsbGV0cyA6XCIsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g8J+TpSBFeHBvcnRlciBsZXMgdmVudGVzIGRlIGJpbGxldHMgZW4gQ1NWXHJcbmV4cG9ydHMuZXhwb3J0T3JnYW5pemVyVGlja2V0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgb3JnYW5pemVySWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2FsZXMgPSBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKVxyXG4gICAgICAgICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJhY2hhdGJpbGxldHMubm9tX2V2ZW5lbWVudFwiLCBcIj1cIiwgXCJldmVuZW1lbnQubm9tX2V2ZW50XCIpXHJcbiAgICAgICAgICAud2hlcmUoXCJldmVuZW1lbnQuaWRfb3JnYW5pc2F0ZXVyXCIsIG9yZ2FuaXplcklkKVxyXG4gICAgICAgICAgLnNlbGVjdChcclxuICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5ub21fZXZlbmVtZW50XCIsXHJcbiAgICAgICAgICAgICAgXCJhY2hhdGJpbGxldHMudHlwZV90aWNrZXRcIixcclxuICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5xdWFudGl0ZVwiLFxyXG4gICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLnRvdGFsX2JpbGxldHNfdmVuZHVzXCIsXHJcbiAgICAgICAgICAgICAgXCJhY2hhdGJpbGxldHMubW9udGFudF9jb2xsZWN0ZVwiLFxyXG4gICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLnByaXhfdW5pdGFpcmVcIlxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpZWxkcyA9IFtcIm5vbV9ldmVuZW1lbnRcIiwgXCJ0eXBlX3RpY2tldFwiLCBcInF1YW50aXRlXCIsIFwidG90YWxfYmlsbGV0c192ZW5kdXNcIiwgXCJtb250YW50X2NvbGxlY3RlXCIsIFwicHJpeF91bml0YWlyZVwiXTtcclxuICAgICAgY29uc3QganNvbjJjc3ZQYXJzZXIgPSBuZXcgUGFyc2VyKHsgZmllbGRzIH0pO1xyXG4gICAgICBjb25zdCBjc3YgPSBqc29uMmNzdlBhcnNlci5wYXJzZShzYWxlcyk7XHJcblxyXG4gICAgICByZXMuaGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwidGV4dC9jc3ZcIik7XHJcbiAgICAgIHJlcy5hdHRhY2htZW50KFwidmVudGVzX2JpbGxldHMuY3N2XCIpO1xyXG4gICAgICByZXMuc2VuZChjc3YpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbCdleHBvcnRhdGlvbiBDU1YgOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuLy8gUsOpY3Vww6lyZXIgbGVzIMOpdsOpbmVtZW50cyBjcsOpw6lzIHBhciB1biBvcmdhbmlzYXRldXJcclxuZXhwb3J0cy5nZXRFdmVudHNCeU9yZ2FuaXplciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IG9yZ2FuaXplcklkID0gcmVxLnVzZXIuaWQ7IC8vIFLDqWN1cMOpcmVyIGwnSUQgZGUgbCdvcmdhbmlzYXRldXIgY29ubmVjdMOpXHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9vcmdhbmlzYXRldXI6IG9yZ2FuaXplcklkIH0pO1xyXG5cclxuICAgIGlmICghZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuIMOpdsOpbmVtZW50IHRyb3V2w6kgcG91ciBjZXQgb3JnYW5pc2F0ZXVyLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGV2ZW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0UGFydGljaXBhbnRzQW5kQ291bnRCeUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gMSkgUsOpY3Vww6lyZXIgbGVzIHBhcnRpY2lwYW50cyBhdmVjIGxlIG5vbSBkZSBsZXVyIMOpcXVpcGVcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiKCdwYXJ0aWNpcGFudHMnKVxyXG4gICAgICAuam9pbigncGFydGljaXBlcicsICdwYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnLCAncGFydGljaXBlci5pZF9wYXJ0aWNpcGFudCcpXHJcbiAgICAgIC5qb2luKCdlcXVpcGVzJywgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsICdlcXVpcGVzLmlkX3BhcnRpY2lwYW50JykgLy8gSm9pbnR1cmUgYXZlYyBsYSB0YWJsZSBkZXMgw6lxdWlwZXNcclxuICAgICAgLndoZXJlKCdwYXJ0aWNpcGVyLmlkX2V2ZW5lbWVudCcsIGV2ZW50SWQpXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgJ2VxdWlwZXMubm9tX2VxdWlwZScgLy8gT24gc8OpbGVjdGlvbm5lIGxlIG5vbSBkZSBsJ8OpcXVpcGUgYXUgbGlldSBkdSBub20gZHUgcGFydGljaXBhbnRcclxuICAgICAgKTtcclxuXHJcbiAgICAvLyAyKSBDb21wdGVyIGxlcyBwYXJ0aWNpcGFudHNcclxuICAgIGNvbnN0IG5iclBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmxlbmd0aDtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIG5icl9wYXJ0aWNpcGFudDogbmJyUGFydGljaXBhbnQsXHJcbiAgICAgIHBhcnRpY2lwYW50cyAvLyBSZXRvdXJuZSBsYSBsaXN0ZSBkZXMgcGFydGljaXBhbnRzIGF2ZWMgbGV1ciDDqXF1aXBlXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBwYXJ0aWNpcGFudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vIEZvbmN0aW9uIHBvdXIgY3LDqWVyIGxlcyBwb3VsZXMgZCd1biDDqXbDqW5lbWVudCAodW5lIHNldWxlIGZvaXMgcGFyIMOpdsOpbmVtZW50KVxyXG5leHBvcnRzLmNyZWF0ZVBvb2xzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBpZF9ldmVuZW1lbnQsIHBvb2xzIH0gPSByZXEuYm9keTtcclxuXHJcbiAgaWYgKCFpZF9ldmVuZW1lbnQgfHwgIXBvb2xzIHx8IHBvb2xzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJEb25uw6llcyBpbnZhbGlkZXMuIEFzc3VyZXotdm91cyBkZSBzw6lsZWN0aW9ubmVyIHVuIMOpdsOpbmVtZW50IGV0IGQnYWpvdXRlciBkZXMgcG91bGVzLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFbDqXJpZmllciBzaSBkZXMgcG91bGVzIGV4aXN0ZW50IGTDqWrDoCBwb3VyIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgZXhpc3RpbmdQb29scyA9IGF3YWl0IGRiKCdwb3VsZXMnKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSlcclxuICAgICAgLnNlbGVjdCgnaWRfcG91bGUnKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgUG91bGVzIGV4aXN0YW50ZXMgcG91ciBsJ8OpdsOpbmVtZW50ICR7aWRfZXZlbmVtZW50fSA6YCwgZXhpc3RpbmdQb29scyk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nUG9vbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJUZW50YXRpdmUgZGUgY3LDqWF0aW9uIGRlIHBvdWxlcyBhbG9ycyBxdSdlbGxlcyBleGlzdGVudCBkw6lqw6AgIVwiKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgbWVzc2FnZTogXCJEZXMgcG91bGVzIGV4aXN0ZW50IGTDqWrDoCBwb3VyIGNldCDDqXbDqW5lbWVudC4gSW1wb3NzaWJsZSBkJ2VuIGNyw6llciBkZSBub3V2ZWxsZXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5zw6lyZXIgbGVzIHBvdWxlcyBkYW5zIGxhIHRhYmxlIGBwb3VsZXNgXHJcbiAgICBjb25zdCBpbnNlcnRlZFBvb2xzID0gYXdhaXQgZGIoJ3BvdWxlcycpLmluc2VydChcclxuICAgICAgcG9vbHMubWFwKG5vbV9wb3VsZSA9PiAoe1xyXG4gICAgICAgIGlkX2V2ZW5lbWVudCxcclxuICAgICAgICBub21fcG91bGUsXHJcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKVxyXG4gICAgICB9KSlcclxuICAgICkucmV0dXJuaW5nKCcqJyk7IC8vIFJldG91cm5lIGxlcyBub3V2ZWxsZXMgcG91bGVzIGluc8OpcsOpZXNcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiUG91bGVzIGNyw6nDqWVzIGF2ZWMgc3VjY8Oocy5cIiwgcG9vbHM6IGluc2VydGVkUG9vbHMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGVzIHBvdWxlcyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZXMgcG91bGVzLlwiLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGb25jdGlvbiBwb3VyIGF0dHJpYnVlciBsZXMgcGFydGljaXBhbnRzIGF1eCBwb3VsZXMgw6lxdWl0YWJsZW1lbnRcclxuZXhwb3J0cy5hc3NpZ25QYXJ0aWNpcGFudHNUb1Bvb2xzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBpZF9ldmVuZW1lbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICBpZiAoIWlkX2V2ZW5lbWVudCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBkZSBsJ8OpdsOpbmVtZW50IHJlcXVpcy5cIiB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgcG91bGVzIGFzc29jacOpZXMgw6AgY2V0IMOpdsOpbmVtZW50XHJcbiAgICBjb25zdCBwb29scyA9IGF3YWl0IGRiKCdwb3VsZXMnKS53aGVyZSh7IGlkX2V2ZW5lbWVudCB9KS5zZWxlY3QoJ2lkX3BvdWxlJyk7XHJcblxyXG4gICAgaWYgKHBvb2xzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuZSBwb3VsZSB0cm91dsOpZSBwb3VyIGNldCDDqXbDqW5lbWVudC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgcGFydGljaXBhbnRzIGluc2NyaXRzIMOgIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgZGIoJ3BhcnRpY2lwZXInKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSlcclxuICAgICAgLnNlbGVjdCgnaWRfcGFydGljaXBhbnQnKTtcclxuXHJcbiAgICBpZiAocGFydGljaXBhbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuIHBhcnRpY2lwYW50IHRyb3V2w6kgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTcOpbGFuZ2VyIGxlcyBwYXJ0aWNpcGFudHNcclxuICAgIGZ1bmN0aW9uIHNodWZmbGVBcnJheShhcnJheSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuICAgICAgICBbYXJyYXlbaV0sIGFycmF5W2pdXSA9IFthcnJheVtqXSwgYXJyYXlbaV1dOyAvLyDDiWNoYW5nZSBkZXMgw6lsw6ltZW50c1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzaHVmZmxlZFBhcnRpY2lwYW50cyA9IHNodWZmbGVBcnJheShbLi4ucGFydGljaXBhbnRzXSk7XHJcblxyXG4gICAgLy8gQ2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIMOpcXVpdGFibGVcclxuICAgIGNvbnN0IG51bVBvb2xzID0gcG9vbHMubGVuZ3RoO1xyXG4gICAgY29uc3QgbnVtUGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzLmxlbmd0aDtcclxuICAgIGNvbnN0IG1pblBlclBvb2wgPSBNYXRoLmZsb29yKG51bVBhcnRpY2lwYW50cyAvIG51bVBvb2xzKTtcclxuICAgIGNvbnN0IGV4dHJhUGFydGljaXBhbnRzID0gbnVtUGFydGljaXBhbnRzICUgbnVtUG9vbHM7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLwn5S5IFRvdGFsIFBhcnRpY2lwYW50cyA6XCIsIG51bVBhcnRpY2lwYW50cyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCflLkgVG90YWwgUG91bGVzIDpcIiwgbnVtUG9vbHMpO1xyXG4gICAgY29uc29sZS5sb2coXCLwn5S5IE5vbWJyZSBtaW4gZGUgcGFydGljaXBhbnRzIHBhciBwb3VsZSA6XCIsIG1pblBlclBvb2wpO1xyXG4gICAgY29uc29sZS5sb2coXCLwn5S5IFBhcnRpY2lwYW50cyBzdXBwbMOpbWVudGFpcmVzIMOgIHLDqXBhcnRpciA6XCIsIGV4dHJhUGFydGljaXBhbnRzKTtcclxuXHJcbiAgICBsZXQgYXNzaWdubWVudHMgPSBbXTtcclxuICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICBsZXQgcG9vbERpc3RyaWJ1dGlvbiA9IHt9O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtUG9vbHM7IGkrKykge1xyXG4gICAgICBjb25zdCBudW1Ub0Fzc2lnbiA9IG1pblBlclBvb2wgKyAoaSA8IGV4dHJhUGFydGljaXBhbnRzID8gMSA6IDApO1xyXG4gICAgICBwb29sRGlzdHJpYnV0aW9uW3Bvb2xzW2ldLmlkX3BvdWxlXSA9IG51bVRvQXNzaWduO1xyXG5cclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1Ub0Fzc2lnbjsgaisrKSB7XHJcbiAgICAgICAgYXNzaWdubWVudHMucHVzaCh7XHJcbiAgICAgICAgICBpZF9wb3VsZTogcG9vbHNbaV0uaWRfcG91bGUsXHJcbiAgICAgICAgICBpZF9wYXJ0aWNpcGFudDogc2h1ZmZsZWRQYXJ0aWNpcGFudHNbaW5kZXhdLmlkX3BhcnRpY2lwYW50XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaW5kZXgrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi8J+TjCBSw6lwYXJ0aXRpb24gZGVzIHBhcnRpY2lwYW50cyBwYXIgcG91bGUgOlwiLCBwb29sRGlzdHJpYnV0aW9uKTtcclxuXHJcbiAgICAvLyBJbnPDqXJlciBsZXMgYXNzaWduYXRpb25zIGRhbnMgbGEgdGFibGUgYHBvdWxlX3BhcnRpY2lwYW50c2BcclxuICAgIGF3YWl0IGRiKCdwb3VsZV9wYXJ0aWNpcGFudHMnKS5pbnNlcnQoYXNzaWdubWVudHMpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJQYXJ0aWNpcGFudHMgcsOpcGFydGlzIGF2ZWMgc3VjY8Oocy5cIiwgYXNzaWdubWVudHMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbCdhZmZlY3RhdGlvbiBkZXMgcGFydGljaXBhbnRzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbCdhZmZlY3RhdGlvbiBkZXMgcGFydGljaXBhbnRzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuZXhwb3J0cy5nZXRQb29sc1dpdGhQYXJ0aWNpcGFudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIGlmICghZXZlbnRJZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBkZSBsJ8OpdsOpbmVtZW50IHJlcXVpcy5cIiB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgcG91bGVzIGRlIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgcG9vbHMgPSBhd2FpdCBkYigncG91bGVzJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ2lkX3BvdWxlJywgJ25vbV9wb3VsZScpO1xyXG5cclxuICAgIGlmIChwb29scy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcG91bGUgdHJvdXbDqWUgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIHBhcnRpY2lwYW50cyBhdmVjIGxldXIgw6lxdWlwZSBwb3VyIGNoYXF1ZSBwb3VsZVxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgZGIoJ3BvdWxlX3BhcnRpY2lwYW50cycpXHJcbiAgICAgIC5qb2luKCdwYXJ0aWNpcGFudHMnLCAncG91bGVfcGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JywgJz0nLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JylcclxuICAgICAgLmpvaW4oJ2VxdWlwZXMnLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JywgJz0nLCAnZXF1aXBlcy5pZF9wYXJ0aWNpcGFudCcpIC8vIEpvaW50dXJlIGF2ZWMgbGEgdGFibGUgw6lxdWlwZXNcclxuICAgICAgLndoZXJlSW4oJ3BvdWxlX3BhcnRpY2lwYW50cy5pZF9wb3VsZScsIHBvb2xzLm1hcChwID0+IHAuaWRfcG91bGUpKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgICdwb3VsZV9wYXJ0aWNpcGFudHMuaWRfcG91bGUnLFxyXG4gICAgICAgICdwYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnLFxyXG4gICAgICAgICdlcXVpcGVzLm5vbV9lcXVpcGUnIC8vIE9uIHLDqWN1cMOocmUgbGUgbm9tIGRlIGwnw6lxdWlwZVxyXG4gICAgICApO1xyXG5cclxuICAgIC8vIE9yZ2FuaXNlciBsZXMgcGFydGljaXBhbnRzIHBhciBwb3VsZVxyXG4gICAgY29uc3QgcG9vbHNXaXRoUGFydGljaXBhbnRzID0gcG9vbHMubWFwKHBvb2wgPT4gKHtcclxuICAgICAgaWRfcG91bGU6IHBvb2wuaWRfcG91bGUsXHJcbiAgICAgIG5vbV9wb3VsZTogcG9vbC5ub21fcG91bGUsXHJcbiAgICAgIHBhcnRpY2lwYW50czogcGFydGljaXBhbnRzLmZpbHRlcihwID0+IHAuaWRfcG91bGUgPT09IHBvb2wuaWRfcG91bGUpXHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBwb29sczogcG9vbHNXaXRoUGFydGljaXBhbnRzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHBvdWxlcyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBwb3VsZXMuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRFdmVudHNXaXRoUG9vbHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gUsOpY3Vww6lyZXIgbCdJRCBkZSBsJ29yZ2FuaXNhdGV1ciBkZXB1aXMgYHZlcmlmeVRva2VuYFxyXG4gICAgY29uc3Qgb3JnYW5pemVySWQgPSByZXEudXNlcj8uaWQ7IC8vIENvcnJlY3Rpb24gaWNpXHJcblxyXG4gICAgaWYgKCFvcmdhbml6ZXJJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIk9yZ2FuaXNhdGV1ciBub24gYXV0aGVudGlmacOpLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFbDqXJpZmljYXRpb24gZGVzIGxvZ3MgcG91ciBzJ2Fzc3VyZXIgcXVlIGwnSUQgZXN0IGJpZW4gcsOpY3Vww6lyw6lcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBJRCBkZSBsJ29yZ2FuaXNhdGV1ciByw6ljdXDDqXLDqSA6XCIsIG9yZ2FuaXplcklkKTtcclxuXHJcbiAgICBjb25zdCBldmVudHNXaXRoUG9vbHMgPSBhd2FpdCBkYigncG91bGVzJylcclxuICAgICAgLmpvaW4oJ2V2ZW5lbWVudCcsICdwb3VsZXMuaWRfZXZlbmVtZW50JywgJz0nLCAnZXZlbmVtZW50LmlkX2V2ZW5lbWVudCcpXHJcbiAgICAgIC53aGVyZSgnZXZlbmVtZW50LmlkX29yZ2FuaXNhdGV1cicsIG9yZ2FuaXplcklkKSAvLyBDb3JyZWN0aW9uIGljaVxyXG4gICAgICAuZGlzdGluY3QoJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnLCAnZXZlbmVtZW50Lm5vbV9ldmVudCcpXHJcbiAgICAgIC5zZWxlY3QoKTtcclxuXHJcbiAgICBpZiAoZXZlbnRzV2l0aFBvb2xzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuIMOpdsOpbmVtZW50IGF2ZWMgZGVzIHBvdWxlcyB0cm91dsOpIHBvdXIgY2V0IG9yZ2FuaXNhdGV1ci5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihldmVudHNXaXRoUG9vbHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgYXZlYyBwb3VsZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydHMuYWRkUGFydGljaXBhbnRNYW51YWwgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZF9ldmVuZW1lbnQsIG5vbV9wb3VsZSwgaWRfcGFydGljaXBhbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIDApIFbDqXJpZmllciBxdWUgbCdpZF9wYXJ0aWNpcGFudCBlc3QgZm91cm5pXHJcbiAgICBpZiAoIWlkX3BhcnRpY2lwYW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJMJ2lkIGR1IHBhcnRpY2lwYW50IGVzdCByZXF1aXMuXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMSkgVsOpcmlmaWVyIHNpIGxlIHBhcnRpY2lwYW50IGVzdCBkw6lqw6AgaW5zY3JpdCBkYW5zIHVuZSBwb3VsZSBwb3VyIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgYWxyZWFkeUFzc2lnbmVkID0gYXdhaXQgZGIoJ3BvdWxlX3BhcnRpY2lwYW50cycpXHJcbiAgICAgIC5qb2luKCdwb3VsZXMnLCAncG91bGVfcGFydGljaXBhbnRzLmlkX3BvdWxlJywgJz0nLCAncG91bGVzLmlkX3BvdWxlJylcclxuICAgICAgLndoZXJlKCdwb3VsZXMuaWRfZXZlbmVtZW50JywgaWRfZXZlbmVtZW50KVxyXG4gICAgICAuYW5kV2hlcmUoJ3BvdWxlX3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsIGlkX3BhcnRpY2lwYW50KVxyXG4gICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoYWxyZWFkeUFzc2lnbmVkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ0NlIHBhcnRpY2lwYW50IGVzdCBkw6lqw6AgaW5zY3JpdCBkYW5zIHVuZSBwb3VsZSBwb3VyIGNldCDDqXbDqW5lbWVudC4nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDIpIFbDqXJpZmllciBzaSBsYSBwb3VsZSBleGlzdGUgZMOpasOgIHBvdXIgY2V0IMOpdsOpbmVtZW50IGV0IGNlIG5vbVxyXG4gICAgbGV0IGV4aXN0aW5nUG91bGUgPSBhd2FpdCBkYigncG91bGVzJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50LCBub21fcG91bGUgfSlcclxuICAgICAgLmZpcnN0KCk7XHJcblxyXG4gICAgLy8gMykgU2kgbGEgcG91bGUgbidleGlzdGUgcGFzLCBsYSBjcsOpZXJcclxuICAgIGlmICghZXhpc3RpbmdQb3VsZSkge1xyXG4gICAgICBjb25zdCBbbmV3UG91bGVJZF0gPSBhd2FpdCBkYigncG91bGVzJykuaW5zZXJ0KHtcclxuICAgICAgICBpZF9ldmVuZW1lbnQsXHJcbiAgICAgICAgbm9tX3BvdWxlLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKClcclxuICAgICAgfSk7XHJcbiAgICAgIGV4aXN0aW5nUG91bGUgPSB7IGlkX3BvdWxlOiBuZXdQb3VsZUlkIH07XHJcbiAgICAgIGNvbnNvbGUubG9nKCdQb3VsZSBjcsOpw6llIGF2ZWMgSUQ6JywgbmV3UG91bGVJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZygnUG91bGUgZXhpc3RhbnRlIHRyb3V2w6llOicsIGV4aXN0aW5nUG91bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDQpIEluc8OpcmVyIGRhbnMgbGEgdGFibGUgcG91bGVfcGFydGljaXBhbnRzXHJcbiAgICBhd2FpdCBkYigncG91bGVfcGFydGljaXBhbnRzJykuaW5zZXJ0KHtcclxuICAgICAgaWRfcG91bGU6IGV4aXN0aW5nUG91bGUuaWRfcG91bGUsXHJcbiAgICAgIGlkX3BhcnRpY2lwYW50XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUGFydGljaXBhbnQgYWpvdXTDqSBhdmVjIHN1Y2PDqHMgIScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsJ2Fqb3V0IG1hbnVlbCA6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vIFN1cHByaW1lIGxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIHBvdXIgdW4gw6l2w6luZW1lbnQgZG9ubsOpXHJcbmV4cG9ydHMuZGVsZXRlUG9vbHNGb3JFdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgaWYgKCFldmVudElkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGRlIGwnw6l2w6luZW1lbnQgcmVxdWlzLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFLDqWN1cMOpcmVyIGxlcyBpZCBkZXMgcG91bGVzIGRlIGNldCDDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgcG9vbHMgPSBhd2FpdCBkYigncG91bGVzJykud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSkuc2VsZWN0KCdpZF9wb3VsZScpO1xyXG5cclxuICAgIGlmIChwb29scy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IHBvb2xJZHMgPSBwb29scy5tYXAocCA9PiBwLmlkX3BvdWxlKTtcclxuICAgICAgLy8gU3VwcHJpbWVyIGQnYWJvcmQgbGVzIHBhcnRpY2lwYW50cyBsacOpcyBhdXggcG91bGVzXHJcbiAgICAgIGF3YWl0IGRiKCdwb3VsZV9wYXJ0aWNpcGFudHMnKS53aGVyZUluKCdpZF9wb3VsZScsIHBvb2xJZHMpLmRlbCgpO1xyXG4gICAgICAvLyBTdXBwcmltZXIgZW5zdWl0ZSBsZXMgcG91bGVzXHJcbiAgICAgIGF3YWl0IGRiKCdwb3VsZXMnKS53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KS5kZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIG9udCDDqXTDqSBzdXBwcmltw6lzIGF2ZWMgc3VjY8Oocy5cIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGRlcyBwb3VsZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGVzIHBvdWxlcy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBSw6ljdXDDqXJlciBsZXMgw6l2w6luZW1lbnRzIGF2ZWMgZGVzIHBvdWxlcyBwb3VyIHVuIG9yZ2FuaXNhdGV1clxyXG5leHBvcnRzLmdldEV2ZW50c0J5T3JnYW5pemVyTWF0Y2ggPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgb3JnYW5pemVySWQgPSByZXEudXNlcj8uaWQ7IC8vIEwnSUQgZGUgbCdvcmdhbmlzYXRldXIgZXN0IHLDqWN1cMOpcsOpIHZpYSBsZSB0b2tlblxyXG5cclxuICAgIGlmICghb3JnYW5pemVySWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJPcmdhbmlzYXRldXIgbm9uIGF1dGhlbnRpZmnDqS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50JylcclxuICAgICAgLndoZXJlKCdpZF9vcmdhbmlzYXRldXInLCBvcmdhbml6ZXJJZClcclxuICAgICAgLnNlbGVjdCgnaWRfZXZlbmVtZW50JywgJ25vbV9ldmVudCcpO1xyXG5cclxuICAgIGlmIChldmVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gw6l2w6luZW1lbnQgdHJvdXbDqSBwb3VyIGNldCBvcmdhbmlzYXRldXIuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZXZlbnRzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIHBvdXIgdW4gw6l2w6luZW1lbnQgc8OpbGVjdGlvbm7DqVxyXG5leHBvcnRzLmdldFBvb2xzV2l0aFBhcnRpY2lwYW50c01hdGNoID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICBpZiAoIWV2ZW50SWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZGUgbCfDqXbDqW5lbWVudCByZXF1aXMuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcG9vbHMgPSBhd2FpdCBkYigncG91bGVzJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ2lkX3BvdWxlJywgJ25vbV9wb3VsZScpO1xyXG5cclxuICAgIGlmIChwb29scy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcG91bGUgdHJvdXbDqWUgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgZGIoJ3BvdWxlX3BhcnRpY2lwYW50cycpXHJcbiAgICAgIC5qb2luKCdwYXJ0aWNpcGFudHMnLCAncG91bGVfcGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JywgJz0nLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JylcclxuICAgICAgLndoZXJlSW4oJ3BvdWxlX3BhcnRpY2lwYW50cy5pZF9wb3VsZScsIHBvb2xzLm1hcChwID0+IHAuaWRfcG91bGUpKVxyXG4gICAgICAuc2VsZWN0KCdwb3VsZV9wYXJ0aWNpcGFudHMuaWRfcG91bGUnLCAncGFydGljaXBhbnRzLmlkX3BhcnRpY2lwYW50JywgJ3BhcnRpY2lwYW50cy5ub21fcGFydCcpO1xyXG5cclxuICAgIGNvbnN0IHBvb2xzV2l0aFBhcnRpY2lwYW50cyA9IHBvb2xzLm1hcChwb29sID0+ICh7XHJcbiAgICAgIGlkX3BvdWxlOiBwb29sLmlkX3BvdWxlLFxyXG4gICAgICBub21fcG91bGU6IHBvb2wubm9tX3BvdWxlLFxyXG4gICAgICBwYXJ0aWNpcGFudHM6IHBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlkX3BvdWxlID09PSBwb29sLmlkX3BvdWxlKVxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBvb2xzV2l0aFBhcnRpY2lwYW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcG91bGVzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHBvdWxlcy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBleHBvcnRzLmNyZWF0ZU1hdGNoID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHtcclxuLy8gICAgICAgcGhhc2UsXHJcbi8vICAgICAgIHBhcnRpY2lwYW50X2EsXHJcbi8vICAgICAgIHBhcnRpY2lwYW50X2IsXHJcbi8vICAgICAgIGxpZXVfcmVuY29udHJlLFxyXG4vLyAgICAgICBpZF9yZXN1bHRhdCxcclxuLy8gICAgICAgZGF0ZV9yZW5jb250cmUsXHJcbi8vICAgICAgIGhldXJlX3JlbmNvbnRyZSxcclxuLy8gICAgICAgaWRfZXZlbmVtZW50LFxyXG4vLyAgICAgICBqb3VybmVlLFxyXG4vLyAgICAgICB0b3VyX2ZpbmFsXHJcbi8vICAgICB9ID0gcmVxLmJvZHk7XHJcblxyXG4vLyAgICAgLy8gVsOpcmlmaWNhdGlvbiBkZXMgY2hhbXBzIGVzc2VudGllbHNcclxuLy8gICAgIGlmICghcGhhc2UgfHwgIXBhcnRpY2lwYW50X2EgfHwgIXBhcnRpY2lwYW50X2IgfHwgIWxpZXVfcmVuY29udHJlIHx8ICFpZF9yZXN1bHRhdCB8fCAhZGF0ZV9yZW5jb250cmUgfHwgIWhldXJlX3JlbmNvbnRyZSB8fCAhaWRfZXZlbmVtZW50KSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiVG91cyBsZXMgY2hhbXBzIGVzc2VudGllbHMgc29udCByZXF1aXMuXCIgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgaWYgKCFbXCJCYXJyYWdlXCIsIFwiw4lsaW1pbmF0b2lyZVwiLCBcIkZpbmFsZVwiXS5pbmNsdWRlcyhwaGFzZSkgJiYgIWpvdXJuZWUpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMZSBjaGFtcCAnam91cm5lZScgZXN0IHJlcXVpcy5cIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoIVtcIkdyb3VwZVwiLCBcIlF1YWxpZmljYXRpb25cIiwgXCJDbGFzc2VtZW50XCIsIFwiQmFycmFnZVwiXS5pbmNsdWRlcyhwaGFzZSkgJiYgIXRvdXJfZmluYWwpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMZSBjaGFtcCAndG91cl9maW5hbCcgZXN0IHJlcXVpcy5cIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyDwn5SNIFLDqWN1cMOpcmVyIGwnSUQgZGVzIMOpcXVpcGVzXHJcbi8vICAgICBjb25zdCBlcXVpcGVBID0gYXdhaXQgZGIoXCJlcXVpcGVzXCIpLndoZXJlKHsgbm9tX2VxdWlwZTogcGFydGljaXBhbnRfYSB9KS5maXJzdCgpO1xyXG4vLyAgICAgY29uc3QgZXF1aXBlQiA9IGF3YWl0IGRiKFwiZXF1aXBlc1wiKS53aGVyZSh7IG5vbV9lcXVpcGU6IHBhcnRpY2lwYW50X2IgfSkuZmlyc3QoKTtcclxuXHJcbi8vICAgICBpZiAoIWVxdWlwZUEgfHwgIWVxdWlwZUIpIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMZXMgw6lxdWlwZXMgc8OpbGVjdGlvbm7DqWVzIG4nZXhpc3RlbnQgcGFzLlwiIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIC8vIPCflI0gUsOpY3Vww6lyZXIgbGVzIHBvdWxlcyBkZXMgw6lxdWlwZXMgQSBldCBCXHJcbi8vICAgICBjb25zdCBwb3VsZXNBID0gYXdhaXQgZGIoXCJwb3VsZV9wYXJ0aWNpcGFudHNcIilcclxuLy8gICAgICAgLndoZXJlKHsgaWRfcGFydGljaXBhbnQ6IGVxdWlwZUEuaWRfcGFydGljaXBhbnQgfSlcclxuLy8gICAgICAgLnBsdWNrKFwiaWRfcG91bGVcIik7XHJcblxyXG4vLyAgICAgY29uc3QgcG91bGVzQiA9IGF3YWl0IGRiKFwicG91bGVfcGFydGljaXBhbnRzXCIpXHJcbi8vICAgICAgIC53aGVyZSh7IGlkX3BhcnRpY2lwYW50OiBlcXVpcGVCLmlkX3BhcnRpY2lwYW50IH0pXHJcbi8vICAgICAgIC5wbHVjayhcImlkX3BvdWxlXCIpO1xyXG5cclxuLy8gICAgIGlmICghcG91bGVzQS5sZW5ndGggfHwgIXBvdWxlc0IubGVuZ3RoKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSW1wb3NzaWJsZSBkZSB0cm91dmVyIGxhIHBvdWxlIGRlcyBwYXJ0aWNpcGFudHMuXCIgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgLy8g8J+UjSBWw6lyaWZpZXIgc2kgdW5lIHBvdWxlIGVzdCBjb21tdW5lIGF1eCBkZXV4IHBhcnRpY2lwYW50c1xyXG4vLyAgICAgY29uc3QgcG91bGVDb21tdW5lID0gcG91bGVzQS5maW5kKHBvdWxlID0+IHBvdWxlc0IuaW5jbHVkZXMocG91bGUpKTtcclxuXHJcbi8vICAgICBpZiAoIXBvdWxlQ29tbXVuZSkge1xyXG4vLyAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkxlcyBwYXJ0aWNpcGFudHMgbmUgc29udCBwYXMgZGFucyBsYSBtw6ptZSBwb3VsZS5cIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyDwn5SNIFbDqXJpZmllciBxdWUgY2V0dGUgcG91bGUgYXBwYXJ0aWVudCBiaWVuIMOgIGwnw6l2w6luZW1lbnQgZG9ubsOpXHJcbi8vICAgICBjb25zdCBwb3VsZUluZm8gPSBhd2FpdCBkYihcInBvdWxlc1wiKVxyXG4vLyAgICAgICAud2hlcmUoeyBpZF9wb3VsZTogcG91bGVDb21tdW5lLCBpZF9ldmVuZW1lbnQgfSlcclxuLy8gICAgICAgLmZpcnN0KCk7XHJcblxyXG4vLyAgICAgaWYgKCFwb3VsZUluZm8pIHtcclxuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMYSBwb3VsZSBkZXMgcGFydGljaXBhbnRzIGRvaXQgw6p0cmUgbGnDqWUgw6AgbCfDqXbDqW5lbWVudC5cIiB9KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyDwn5S5IEluc8OpcmVyIGxhIHJlbmNvbnRyZVxyXG4vLyAgICAgY29uc3QgbWF0Y2hEYXRhID0ge1xyXG4vLyAgICAgICBwaGFzZSxcclxuLy8gICAgICAgcGFydGljaXBhbnRfYTogZXF1aXBlQS5ub21fZXF1aXBlLFxyXG4vLyAgICAgICBwYXJ0aWNpcGFudF9iOiBlcXVpcGVCLm5vbV9lcXVpcGUsXHJcbi8vICAgICAgIGxpZXVfcmVuY29udHJlLFxyXG4vLyAgICAgICBpZF9yZXN1bHRhdCxcclxuLy8gICAgICAgZGF0ZV9yZW5jb250cmUsXHJcbi8vICAgICAgIGhldXJlX3JlbmNvbnRyZSxcclxuLy8gICAgICAgaWRfZXZlbmVtZW50LFxyXG4vLyAgICAgICBqb3VybmVlOiBqb3VybmVlIHx8IG51bGwsXHJcbi8vICAgICAgIHRvdXJfZmluYWw6IHRvdXJfZmluYWwgfHwgbnVsbCxcclxuLy8gICAgICAgaWRfcG91bGU6IHBvdWxlQ29tbXVuZVxyXG4vLyAgICAgfTtcclxuXHJcbi8vICAgICAvLyBJbnPDqXJlciBsYSByZW5jb250cmVcclxuLy8gICAgIGNvbnN0IFtuZXdNYXRjaElkXSA9IGF3YWl0IGRiKFwicmVuY29udHJlXCIpLmluc2VydChtYXRjaERhdGEpO1xyXG4vLyAgICAgY29uc29sZS5sb2coYOKchSBNYXRjaCBpbnPDqXLDqSBhdmVjIHN1Y2PDqHMgKElEOiAke25ld01hdGNoSWR9KWApO1xyXG5cclxuLy8gICAgIC8vIPCflLkgUsOpY3Vww6lyZXIgbGEgcmVuY29udHJlIG5vdXZlbGxlbWVudCBjcsOpw6llXHJcbi8vICAgICBjb25zdCBuZXdNYXRjaCA9IGF3YWl0IGRiKFwicmVuY29udHJlXCIpLndoZXJlKHsgaWRfcmVuY29udHJlOiBuZXdNYXRjaElkIH0pLmZpcnN0KCk7XHJcblxyXG4vLyAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIlJlbmNvbnRyZSBjcsOpw6llIGF2ZWMgc3VjY8Oocy5cIiwgbWF0Y2g6IG5ld01hdGNoIH0pO1xyXG5cclxuLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSBjcsOpYXRpb24gZGUgbGEgcmVuY29udHJlIDpcIiwgZXJyb3IpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxhIHJlbmNvbnRyZS5cIiB9KTtcclxuLy8gICB9XHJcbi8vIH07XHJcblxyXG5leHBvcnRzLmNyZWF0ZU1hdGNoID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgcGhhc2UsXHJcbiAgICAgIHBhcnRpY2lwYW50X2EsXHJcbiAgICAgIHBhcnRpY2lwYW50X2IsXHJcbiAgICAgIGxpZXVfcmVuY29udHJlLFxyXG4gICAgICBkYXRlX3JlbmNvbnRyZSxcclxuICAgICAgaGV1cmVfcmVuY29udHJlLFxyXG4gICAgICBpZF9ldmVuZW1lbnQsXHJcbiAgICAgIGpvdXJuZWUsXHJcbiAgICAgIHRvdXJfZmluYWxcclxuICAgIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBWw6lyaWZpY2F0aW9uIGRlcyBjaGFtcHMgZXNzZW50aWVsc1xyXG4gICAgaWYgKCFwaGFzZSB8fCAhcGFydGljaXBhbnRfYSB8fCAhcGFydGljaXBhbnRfYiB8fCAhbGlldV9yZW5jb250cmUgfHwgIWRhdGVfcmVuY29udHJlIHx8ICFoZXVyZV9yZW5jb250cmUgfHwgIWlkX2V2ZW5lbWVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlRvdXMgbGVzIGNoYW1wcyBlc3NlbnRpZWxzIHNvbnQgcmVxdWlzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghW1wiQmFycmFnZVwiLCBcIsOJbGltaW5hdG9pcmVcIiwgXCJGaW5hbGVcIl0uaW5jbHVkZXMocGhhc2UpICYmICFqb3VybmVlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGUgY2hhbXAgJ2pvdXJuZWUnIGVzdCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFbXCJHcm91cGVcIiwgXCJRdWFsaWZpY2F0aW9uXCIsIFwiQ2xhc3NlbWVudFwiLCBcIkJhcnJhZ2VcIl0uaW5jbHVkZXMocGhhc2UpICYmICF0b3VyX2ZpbmFsKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGUgY2hhbXAgJ3RvdXJfZmluYWwnIGVzdCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UjSBSw6ljdXDDqXJlciBsZXMgw6lxdWlwZXNcclxuICAgIGNvbnN0IGVxdWlwZUEgPSBhd2FpdCBkYihcImVxdWlwZXNcIikud2hlcmUoeyBub21fZXF1aXBlOiBwYXJ0aWNpcGFudF9hIH0pLmZpcnN0KCk7XHJcbiAgICBjb25zdCBlcXVpcGVCID0gYXdhaXQgZGIoXCJlcXVpcGVzXCIpLndoZXJlKHsgbm9tX2VxdWlwZTogcGFydGljaXBhbnRfYiB9KS5maXJzdCgpO1xyXG5cclxuICAgIGlmICghZXF1aXBlQSB8fCAhZXF1aXBlQikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkxlcyDDqXF1aXBlcyBzw6lsZWN0aW9ubsOpZXMgbidleGlzdGVudCBwYXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UjSBWw6lyaWZpZXIgbGVzIHBvdWxlc1xyXG4gICAgY29uc3QgcG91bGVzQSA9IGF3YWl0IGRiKFwicG91bGVfcGFydGljaXBhbnRzXCIpLndoZXJlKHsgaWRfcGFydGljaXBhbnQ6IGVxdWlwZUEuaWRfcGFydGljaXBhbnQgfSkucGx1Y2soXCJpZF9wb3VsZVwiKTtcclxuICAgIGNvbnN0IHBvdWxlc0IgPSBhd2FpdCBkYihcInBvdWxlX3BhcnRpY2lwYW50c1wiKS53aGVyZSh7IGlkX3BhcnRpY2lwYW50OiBlcXVpcGVCLmlkX3BhcnRpY2lwYW50IH0pLnBsdWNrKFwiaWRfcG91bGVcIik7XHJcblxyXG4gICAgY29uc3QgcG91bGVDb21tdW5lID0gcG91bGVzQS5maW5kKHAgPT4gcG91bGVzQi5pbmNsdWRlcyhwKSk7XHJcbiAgICBpZiAoIXBvdWxlQ29tbXVuZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkxlcyBwYXJ0aWNpcGFudHMgbmUgc29udCBwYXMgZGFucyBsYSBtw6ptZSBwb3VsZS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwb3VsZUluZm8gPSBhd2FpdCBkYihcInBvdWxlc1wiKS53aGVyZSh7IGlkX3BvdWxlOiBwb3VsZUNvbW11bmUsIGlkX2V2ZW5lbWVudCB9KS5maXJzdCgpO1xyXG4gICAgaWYgKCFwb3VsZUluZm8pIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJMYSBwb3VsZSBuJ2VzdCBwYXMgbGnDqWUgw6AgY2V0IMOpdsOpbmVtZW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOKchSDDiVRBUEUgMSA6IENyw6llciB1biByw6lzdWx0YXQgdmlkZVxyXG4gICAgY29uc3QgW2lkUmVzdWx0YXRdID0gYXdhaXQgZGIoXCJyZXN1bHRhdFwiKS5pbnNlcnQoe1xyXG4gICAgICBzY29yZV9BOiAwLFxyXG4gICAgICBzY29yZV9COiAwLFxyXG4gICAgICBwb2ludF92aWN0b2lyZTogbnVsbCxcclxuICAgICAgcG9pbnRfbWF0Y2hudWw6IG51bGwsXHJcbiAgICAgIHBvaW50X2RlZmFpdGU6IG51bGwsXHJcbiAgICAgIGNsYXNzZW1lbnRfZ2VuZXJhbDogMCxcclxuICAgICAgZGF0ZV9yZXN1bHRhdDogbmV3IERhdGUoKSwgXHJcbiAgICAgIGlkX2V2ZW5lbWVudDogaWRfZXZlbmVtZW50LFxyXG4gICAgICBpZF9jYWxlbmRyaWVyOiAwLFxyXG4gICAgICBpZF9yZW5jb250cmU6IDAgLy8gdGVtcG9yYWlyZW1lbnQgbnVsbFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g4pyFIMOJVEFQRSAyIDogQ3LDqWVyIGxhIHJlbmNvbnRyZSBhdmVjIGNlIGlkX3Jlc3VsdGF0XHJcbiAgICBjb25zdCBbbmV3TWF0Y2hJZF0gPSBhd2FpdCBkYihcInJlbmNvbnRyZVwiKS5pbnNlcnQoe1xyXG4gICAgICBwaGFzZSxcclxuICAgICAgcGFydGljaXBhbnRfYTogZXF1aXBlQS5ub21fZXF1aXBlLFxyXG4gICAgICBwYXJ0aWNpcGFudF9iOiBlcXVpcGVCLm5vbV9lcXVpcGUsXHJcbiAgICAgIGxpZXVfcmVuY29udHJlLFxyXG4gICAgICBpZF9yZXN1bHRhdDogaWRSZXN1bHRhdCxcclxuICAgICAgZGF0ZV9yZW5jb250cmUsXHJcbiAgICAgIGhldXJlX3JlbmNvbnRyZSxcclxuICAgICAgaWRfZXZlbmVtZW50LFxyXG4gICAgICBqb3VybmVlOiBqb3VybmVlIHx8IG51bGwsXHJcbiAgICAgIHRvdXJfZmluYWw6IHRvdXJfZmluYWwgfHwgbnVsbCxcclxuICAgICAgaWRfcG91bGU6IHBvdWxlQ29tbXVuZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g4pyFIMOJVEFQRSAzIDogTWV0dHJlIMOgIGpvdXIgbGUgcsOpc3VsdGF0IGF2ZWMgbCdJRCBkZSBsYSByZW5jb250cmVcclxuICAgIGF3YWl0IGRiKFwicmVzdWx0YXRcIikud2hlcmUoeyBpZF9yZXN1bHRhdDogaWRSZXN1bHRhdCB9KS51cGRhdGUoe1xyXG4gICAgICBpZF9yZW5jb250cmU6IG5ld01hdGNoSWRcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG5ld01hdGNoID0gYXdhaXQgZGIoXCJyZW5jb250cmVcIikud2hlcmUoeyBpZF9yZW5jb250cmU6IG5ld01hdGNoSWQgfSkuZmlyc3QoKTtcclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJSZW5jb250cmUgY3LDqcOpZSBhdmVjIHN1Y2PDqHMuXCIsIG1hdGNoOiBuZXdNYXRjaCB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxhIHJlbmNvbnRyZSA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZSBsYSByZW5jb250cmUuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydHMuZ2V0TWF0Y2hlc0J5RXZlbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIGlmICghZXZlbnRJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGRlIGwnw6l2w6luZW1lbnQgcmVxdWlzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBkYihcInJlbmNvbnRyZVwiKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgIFwiaWRfcmVuY29udHJlXCIsXHJcbiAgICAgICAgXCJwYXJ0aWNpcGFudF9hXCIsXHJcbiAgICAgICAgXCJwYXJ0aWNpcGFudF9iXCIsXHJcbiAgICAgICAgXCJkYXRlX3JlbmNvbnRyZVwiLFxyXG4gICAgICAgIFwiaGV1cmVfcmVuY29udHJlXCIsXHJcbiAgICAgICAgXCJsaWV1X3JlbmNvbnRyZVwiLFxyXG4gICAgICAgIFwicGhhc2VcIixcclxuICAgICAgICBcImpvdXJuZWVcIixcclxuICAgICAgICBcInRvdXJfZmluYWxcIlxyXG4gICAgICApXHJcbiAgICAgIC53aGVyZShcImlkX2V2ZW5lbWVudFwiLCBldmVudElkKTtcclxuXHJcbiAgICAvLyBHcm91cGVtZW50IGRlcyBtYXRjaHMgcGFyIHBoYXNlL2pvdXJuw6llL3RvdXIgZmluYWxcclxuICAgIGNvbnN0IGdyb3VwZWRNYXRjaGVzID0gbWF0Y2hlcy5yZWR1Y2UoKGFjYywgbWF0Y2gpID0+IHtcclxuICAgICAgY29uc3Qga2V5ID0gYCR7bWF0Y2gucGhhc2V9XyR7bWF0Y2guam91cm5lZSB8fCBcIjBcIn1fJHttYXRjaC50b3VyX2ZpbmFsIHx8IFwiMFwifWA7XHJcblxyXG4gICAgICBpZiAoIWFjY1trZXldKSB7XHJcbiAgICAgICAgYWNjW2tleV0gPSB7XHJcbiAgICAgICAgICBwaGFzZTogbWF0Y2gucGhhc2UsXHJcbiAgICAgICAgICBqb3VybmVlOiBtYXRjaC5qb3VybmVlLFxyXG4gICAgICAgICAgdG91cl9maW5hbDogbWF0Y2gudG91cl9maW5hbCxcclxuICAgICAgICAgIG1hdGNoZXM6IFtdLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFjY1trZXldLm1hdGNoZXMucHVzaCh7XHJcbiAgICAgICAgaWRfcmVuY29udHJlOiBtYXRjaC5pZF9yZW5jb250cmUsXHJcbiAgICAgICAgcGFydGljaXBhbnRfYTogbWF0Y2gucGFydGljaXBhbnRfYSwgLy8gRMOpasOgIHN0b2Nrw6kgc291cyBmb3JtZSBkZSBub21cclxuICAgICAgICBwYXJ0aWNpcGFudF9iOiBtYXRjaC5wYXJ0aWNpcGFudF9iLCAvLyBEw6lqw6Agc3RvY2vDqSBzb3VzIGZvcm1lIGRlIG5vbVxyXG4gICAgICAgIGRhdGVfcmVuY29udHJlOiBtYXRjaC5kYXRlX3JlbmNvbnRyZSxcclxuICAgICAgICBoZXVyZV9yZW5jb250cmU6IG1hdGNoLmhldXJlX3JlbmNvbnRyZSxcclxuICAgICAgICBsaWV1X3JlbmNvbnRyZTogbWF0Y2gubGlldV9yZW5jb250cmUsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGFjYztcclxuICAgIH0sIHt9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihPYmplY3QudmFsdWVzKGdyb3VwZWRNYXRjaGVzKSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHJlbmNvbnRyZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcmVuY29udHJlcy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8gUsOpY3Vww6lyZXIgbGVzIGluZm9zIGR1IHBhcnRpY2lwYW50IGF2ZWMgc29uIMOpcXVpcGVcclxuZXhwb3J0cy5nZXRQYXJ0aWNpcGFudEJ5SWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHBhcnRpY2lwYW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIGlmICghcGFydGljaXBhbnRJZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBkdSBwYXJ0aWNpcGFudCByZXF1aXMuXCIgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIGluZm9zIGR1IHBhcnRpY2lwYW50IGF2ZWMgc29uIMOpcXVpcGVcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gYXdhaXQgZGIoJ3BhcnRpY2lwYW50cyBhcyBwJylcclxuICAgICAgLmxlZnRKb2luKCdlcXVpcGVzIGFzIGUnLCAncC5pZF9wYXJ0aWNpcGFudCcsICdlLmlkX3BhcnRpY2lwYW50JylcclxuICAgICAgLndoZXJlKHsgJ3AuaWRfcGFydGljaXBhbnQnOiBwYXJ0aWNpcGFudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgJ3AuKicsXHJcbiAgICAgICAgJ2Uubm9tX2VxdWlwZScsXHJcbiAgICAgICAgJ2UuY2F0ZWdvcmllX2VxdWlwZSdcclxuICAgICAgKVxyXG4gICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUGFydGljaXBhbnQgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocGFydGljaXBhbnQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgcGFydGljaXBhbnQ6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGR1IHBhcnRpY2lwYW50LlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBTdXBwcmVzc2lvbiBkJ3VuZSByZW5jb250cmUgcGFyIElEXHJcbmV4cG9ydHMuZGVsZXRlTWF0Y2ggPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IG1hdGNoSWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWxldGVkUm93cyA9IGF3YWl0IGRiKCdyZW5jb250cmUnKS53aGVyZSgnaWRfcmVuY29udHJlJywgbWF0Y2hJZCkuZGVsKCk7XHJcblxyXG4gICAgaWYgKGRlbGV0ZWRSb3dzID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUmVuY29udHJlIG5vbiB0cm91dsOpZS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiUmVuY29udHJlIHN1cHByaW3DqWUgYXZlYyBzdWNjw6hzLlwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbGEgcmVuY29udHJlIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbGEgcmVuY29udHJlLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBGb25jdGlvbiBwb3VyIHLDqWN1cMOpcmVyIHRvdXRlcyBsZXMgcmVuY29udHJlcyBkZSB0b3VzIGxlcyDDqXbDqW5lbWVudHMgZCd1biBvcmdhbmlzYXRldXJcclxuZXhwb3J0cy5nZXRBbGxDYWxlbmRhck1hdGNoZXMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gUsOpY3Vww6lyZXIgdG91cyBsZXMgw6l2w6luZW1lbnRzIGRlIGwnb3JnYW5pc2F0ZXVyXHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYignZXZlbmVtZW50JylcclxuICAgICAgLndoZXJlKCdpZF9vcmdhbmlzYXRldXInLCByZXEudXNlci5pZCkgIC8vIE9uIHN1cHBvc2UgcXVlIGwnb3JnYW5pc2F0ZXVyIGVzdCBkYW5zIHJlcS51c2VyLmlkXHJcbiAgICAgIC5zZWxlY3QoJ2lkX2V2ZW5lbWVudCcpOyAgLy8gT24gbmUgc8OpbGVjdGlvbm5lIHF1ZSBsZXMgSUQgZGVzIMOpdsOpbmVtZW50c1xyXG5cclxuICAgIGlmIChldmVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gw6l2w6luZW1lbnQgdHJvdXbDqSBwb3VyIGNldCBvcmdhbmlzYXRldXIuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUsOpY3Vww6lyZXIgdG91dGVzIGxlcyByZW5jb250cmVzIGRlIHRvdXMgbGVzIMOpdsOpbmVtZW50c1xyXG4gICAgY29uc3QgYWxsTWF0Y2hlcyA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XHJcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBkYigncmVuY29udHJlJylcclxuICAgICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50LmlkX2V2ZW5lbWVudCB9KVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5vcmRlckJ5KCdkYXRlX3JlbmNvbnRyZScsICdhc2MnKVxyXG4gICAgICAgIC5vcmRlckJ5KCdoZXVyZV9yZW5jb250cmUnLCAnYXNjJyk7XHJcbiAgICAgIGFsbE1hdGNoZXMucHVzaCguLi5tYXRjaGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgc2kgbGEgcGhhc2UgXCJBbGxlci1SZXRvdXJcIiBlc3QgYmllbiBwcsOpc2VudGUgZGFucyBsZXMgcsOpc3VsdGF0c1xyXG4gICAgY29uc29sZS5sb2cobWF0Y2hlcyk7ICAvLyBWw6lyaWZpZXogZGFucyBsYSBjb25zb2xlIHNpIGxhIHBoYXNlIGVzdCBjb3JyZWN0ZVxyXG5cclxuICAgIGlmIChhbGxNYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuZSByZW5jb250cmUgdHJvdXbDqWUuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oYWxsTWF0Y2hlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkdSBjYWxlbmRyaWVyIGRlcyByZW5jb250cmVzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHJlbmNvbnRyZXMuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRDYWxlbmRhck1hdGNoZXNCeUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgICBpZiAoIWV2ZW50SWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBkZSBsJ8OpdsOpbmVtZW50IHJlcXVpcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBtYXRjaGVzID0gYXdhaXQgZGIoJ3JlbmNvbnRyZScpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAuc2VsZWN0KCdpZF9yZW5jb250cmUnLCAnZGF0ZV9yZW5jb250cmUnLCAnaGV1cmVfcmVuY29udHJlJyxcclxuICAgICAgICAncGFydGljaXBhbnRfYScsICdwYXJ0aWNpcGFudF9iJywgJ2xpZXVfcmVuY29udHJlJyxcclxuICAgICAgICAncGhhc2UnLCAnam91cm5lZScsICd0b3VyX2ZpbmFsJyk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJEb25uw6llcyBlbnZvecOpZXMgcGFyIGwnQVBJIDpcIiwgbWF0Y2hlcyk7IC8vIPCflI0gVsOpcmlmaWNhdGlvbiBkZXMgZG9ubsOpZXMgYXZhbnQgZW52b2lcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihtYXRjaGVzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyByZW5jb250cmVzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgY2FsZW5kcmllciBkZXMgcmVuY29udHJlcy5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG4vLyByZWN1cGVyYXRpb24gZGUgdG91dGUgcGFydGljaXBhbnQgXHJcbmV4cG9ydHMuZ2V0QWxsUGFydGljaXBhbnRzQnlPcmdhbml6ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCBvcmdhbml6ZXJJZCA9IHJlcS51c2VyPy5pZDsgLy8gUsOpY3Vww6lyZXIgbCdJRCBkZSBsJ29yZ2FuaXNhdGV1ciBhdXRoZW50aWZpw6lcclxuXHJcbiAgaWYgKCFvcmdhbml6ZXJJZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJMJ0lEIGRlIGwnb3JnYW5pc2F0ZXVyIGVzdCBpbnRyb3V2YWJsZS5cIiB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBKb2ludHVyZSBlbnRyZSBgZXZlbmVtZW50c2AsIGBwYXJ0aWNpcGVyYCBldCBgcGFydGljaXBhbnRzYFxyXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgZGIoJ3BhcnRpY2lwZXInKVxyXG4gICAgICAuam9pbigncGFydGljaXBhbnRzJywgJ3BhcnRpY2lwZXIuaWRfcGFydGljaXBhbnQnLCAnPScsICdwYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnKVxyXG4gICAgICAuam9pbignZXZlbmVtZW50JywgJ3BhcnRpY2lwZXIuaWRfZXZlbmVtZW50JywgJz0nLCAnZXZlbmVtZW50LmlkX2V2ZW5lbWVudCcpIC8vIENvcnJlY3Rpb24gaWNpXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgJ3BhcnRpY2lwYW50cy5pZF9wYXJ0aWNpcGFudCcsXHJcbiAgICAgICAgJ3BhcnRpY2lwYW50cy5ub21fcGFydCcsXHJcbiAgICAgICAgJ2V2ZW5lbWVudC5ub21fZXZlbnQnLFxyXG4gICAgICAgICdwYXJ0aWNpcGVyLmlkX2V2ZW5lbWVudCdcclxuICAgICAgKVxyXG4gICAgICAud2hlcmUoJ2V2ZW5lbWVudC5pZF9vcmdhbmlzYXRldXInLCBvcmdhbml6ZXJJZCk7IC8vIEZpbHRyZXIgcGFyIG9yZ2FuaXNhdGV1clxyXG5cclxuICAgIGlmICghcGFydGljaXBhbnRzIHx8IHBhcnRpY2lwYW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ0F1Y3VuIHBhcnRpY2lwYW50IHRyb3V2w6kgcG91ciB2b3Mgw6l2w6luZW1lbnRzLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocGFydGljaXBhbnRzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHBhcnRpY2lwYW50cyA6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIHNlcnZldXIuJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBFbnZvaSBkJ2VtYWlsIGRlcHVpcyB1biBvcmdhbmlzYXRldXIgdmVycyB1biBwYXJ0aWNpcGFudFxyXG5leHBvcnRzLnNlbmRFbWFpbFRvUGFydGljaXBhbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zOyAvLyBJRCBkdSBwYXJ0aWNpcGFudFxyXG4gIGNvbnN0IHsgc3ViamVjdCwgY29udGVudCB9ID0gcmVxLmJvZHk7IC8vIFN1amV0IGV0IGNvbnRlbnUgZHUgbWFpbFxyXG4gIGNvbnN0IG9yZ2FuaXplcklkID0gcmVxLnVzZXIuaWQ7IC8vIFLDqWN1cMOpcmF0aW9uIGRlIGwnSUQgZGUgbCdvcmdhbmlzYXRldXIgZGVwdWlzIGxlIHRva2VuXHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBWw6lyaWZpZXIgc2kgbGUgcGFydGljaXBhbnQgZXhpc3RlXHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IGF3YWl0IGdldFBhcnRpY2lwYW50QnlJZFF1ZXJ5KGlkKTtcclxuICAgIGlmICghcGFydGljaXBhbnQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJQYXJ0aWNpcGFudCBub24gdHJvdXbDqS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgc2kgbCdvcmdhbmlzYXRldXIgZXhpc3RlXHJcbiAgICBjb25zdCBvcmdhbml6ZXIgPSBhd2FpdCBnZXRPcmdhbml6ZXJCeUlkUXVlcnkob3JnYW5pemVySWQpO1xyXG4gICAgaWYgKCFvcmdhbml6ZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJPcmdhbmlzYXRldXIgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29uZmlndXJhdGlvbiBkdSBzZXJ2aWNlIGQnZW1haWwgKE5vZGVtYWlsZXIpXHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgICAgc2VydmljZTogXCJnbWFpbFwiLFxyXG4gICAgICBhdXRoOiB7XHJcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiwgLy8gQWRyZXNzZSBlbWFpbCB1dGlsaXPDqWUgcG91ciBlbnZveWVyIGxlcyBlbWFpbHNcclxuICAgICAgICBwYXNzOiBwcm9jZXNzLmVudi5FTUFJTF9QQVNTLCAvLyBNb3QgZGUgcGFzc2Ugb3UgY2zDqSBkJ2FwcGxpY2F0aW9uXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEw6lmaW5pdGlvbiBkZSBsJ2VtYWlsIMOgIGVudm95ZXJcclxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICBmcm9tOiBvcmdhbml6ZXIuZW1haWxfb3JnYW5pc2F0ZXVyLCAvLyBMJ2VtYWlsIGRlIGwnb3JnYW5pc2F0ZXVyIGVuIHRhbnQgcXUnZXhww6lkaXRldXJcclxuICAgICAgdG86IHBhcnRpY2lwYW50LmVtYWlsX3BhcnQsIC8vIERlc3RpbmF0YWlyZSA6IGxlIHBhcnRpY2lwYW50XHJcbiAgICAgIHN1YmplY3Q6IHN1YmplY3QgKyBcIiAoTWVzc2FnZSBkZSB2b3RyZSBvcmdhbmlzYXRldXIpXCIsXHJcbiAgICAgIHRleHQ6IGBCb25qb3VyICR7cGFydGljaXBhbnQubm9tX3BhcnR9LFxcblxcbiR7Y29udGVudH1cXG5cXG5Db3JkaWFsZW1lbnQsXFxuJHtvcmdhbml6ZXIubm9tX29yZ2FuaXNhdGV1cn1gLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBFbnZvaSBkZSBsJ2VtYWlsXHJcbiAgICBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBgRW1haWwgZW52b3nDqSBhdmVjIHN1Y2PDqHMgw6AgJHtwYXJ0aWNpcGFudC5lbWFpbF9wYXJ0fSBkZXB1aXMgJHtvcmdhbml6ZXIuZW1haWxfb3JnYW5pc2F0ZXVyfS5gLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGRlIGwnZW1haWwgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbCdlbnZvaSBkZSBsJ2VtYWlsLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqUmVzdWx0YXRzKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8gcG91ciByw6ljdXDDqXJlciBsZXMgaW5mb3JtYXRpb25zIGQndW4gw6l2w6luZW1lbnQgc8OpbGVjdGlvbm7DqVxyXG5cclxuZXhwb3J0cy5nZXRFdmVudFJlc3VsdGF0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gZXZlbnRJZCByZcOndSA6XCIsIGV2ZW50SWQpO1xyXG5cclxuICAgIGlmICghZXZlbnRJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGRlIGwnw6l2w6luZW1lbnQgcmVxdWlzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIPCflLkgUsOpY3Vww6lyYXRpb24gZHUgbm9tIGRlIGwnw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IGV2ZW50ID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAuc2VsZWN0KCdub21fZXZlbnQnKVxyXG4gICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICBpZiAoIWV2ZW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiw4l2w6luZW1lbnQgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g8J+UuSBSw6ljdXDDqXJhdGlvbiBkZXMgZGlmZsOpcmVudGVzIHBoYXNlcywgam91cm7DqWVzIGV0IHRvdXJzIGZpbmF1eCBhc3NvY2nDqXMgw6AgbCfDqXbDqW5lbWVudFxyXG4gICAgY29uc3QgbWF0Y2hJbmZvID0gYXdhaXQgZGIoJ3JlbmNvbnRyZScpXHJcbiAgICAgIC53aGVyZSh7IGlkX2V2ZW5lbWVudDogZXZlbnRJZCB9KVxyXG4gICAgICAuc2VsZWN0KCdwaGFzZScsICdqb3VybmVlJywgJ3RvdXJfZmluYWwnKVxyXG4gICAgICAuZ3JvdXBCeSgncGhhc2UnLCAnam91cm5lZScsICd0b3VyX2ZpbmFsJykgIC8vIPCflKUgT24gcsOpY3Vww6hyZSB0b3V0ZXMgbGVzIHZhbGV1cnMgdW5pcXVlc1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIERvbm7DqWVzIG1hdGNoSW5mbyA6XCIsIG1hdGNoSW5mbyk7XHJcblxyXG4gICAgaWYgKG1hdGNoSW5mby5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcmVuY29udHJlIHRyb3V2w6llIHBvdXIgY2V0IMOpdsOpbmVtZW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgbm9tX2V2ZW50OiBldmVudC5ub21fZXZlbnQsXHJcbiAgICAgIGRldGFpbHM6IG1hdGNoSW5mbyAvLyDwn5SlIE9uIGVudm9pZSB1biB0YWJsZWF1IGNvbnRlbmFudCB0b3V0ZXMgbGVzIHBoYXNlcywgam91cm7DqWVzIGV0IHRvdXJzIGZpbmF1eFxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGTDqXRhaWxzIGRlIGwnw6l2w6luZW1lbnQuXCIsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIHBvdXIgcsOpY3Vww6lyZXIgbGVzIHJlbmNvbnRyZXMgZmlsdHLDqWVzIDpcclxuZXhwb3J0cy5nZXRGaWx0ZXJlZE1hdGNoZXNCeUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgcGhhc2UsIGpvdXJuZWUsIHRvdXJfZmluYWwgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBpZiAoIWV2ZW50SWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBkZSBsJ8OpdsOpbmVtZW50IHJlcXVpcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcXVlcnkgPSBkYigncmVuY29udHJlJylcclxuICAgICAgLndoZXJlKHsgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ2lkX3JlbmNvbnRyZScsICdwYXJ0aWNpcGFudF9hJywgJ3BhcnRpY2lwYW50X2InLCAncGhhc2UnLCAnam91cm5lZScsICd0b3VyX2ZpbmFsJyk7XHJcblxyXG4gICAgLy8gRmlsdHJhZ2UgZHluYW1pcXVlIGVuIGZvbmN0aW9uIGRlcyBwYXJhbcOodHJlcyByZcOndXNcclxuICAgIGlmIChwaGFzZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKHsgcGhhc2UgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoam91cm5lZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKHsgam91cm5lZSB9KTtcclxuICAgIH1cclxuICAgIGlmICh0b3VyX2ZpbmFsKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoeyB0b3VyX2ZpbmFsIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcmVuY29udHJlIHRyb3V2w6llIHBvdXIgY2VzIGNyaXTDqHJlcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihtYXRjaGVzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgc2VydmV1ciA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyByZW5jb250cmVzIGZpbHRyw6llcy5cIiB9KTtcclxuICB9XHJcbn07XHJcbi8vIHBvdXIgZW5yZWdpc3RyZXIgbGVzIHLDqXN1bHRhdHMgZGVzIHJlbmNvbnRyZXNcclxuZXhwb3J0cy5zYXZlTWF0Y2hSZXN1bHRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGxldCB7IHJlc3VsdHMsIHBvaW50X3ZpY3RvaXJlLCBwb2ludF9kZWZhaXRlLCBwb2ludF9tYXRjaG51bCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCFldmVudElkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTCdJRCBkZSBsJ8OpdsOpbmVtZW50IGVzdCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFyZXN1bHRzIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gcsOpc3VsdGF0IGZvdXJuaS5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEYXRlIGFjdHVlbGxlIHBvdXIgbCdlbnJlZ2lzdHJlbWVudFxyXG4gICAgY29uc3QgZGF0ZV9yZXN1bHRhdCA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBpbnNlcnRlZFJlc3VsdHMgPSBbXTtcclxuICAgIGNvbnN0IGlnbm9yZWRSZXN1bHRzID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBtYXRjaCBvZiByZXN1bHRzKSB7XHJcbiAgICAgIGNvbnN0IHsgaWRfcmVuY29udHJlLCBzY29yZV9BLCBzY29yZV9CLCBwaGFzZSB9ID0gbWF0Y2g7XHJcblxyXG4gICAgICAvLyDwn5S5IFbDqXJpZmljYXRpb24gZGVzIHBoYXNlcyBxdWkgbmUgZG9pdmVudCBwYXMgYXZvaXIgZGUgcG9pbnRzXHJcbiAgICAgIGlmIChbXCJGaW5hbGVcIiwgXCJCYXJyYWdlXCIsIFwiQWxsZXIgUmV0b3VyXCJdLmluY2x1ZGVzKHBoYXNlKSkge1xyXG4gICAgICAgIHBvaW50X3ZpY3RvaXJlID0gbnVsbDtcclxuICAgICAgICBwb2ludF9kZWZhaXRlID0gbnVsbDtcclxuICAgICAgICBwb2ludF9tYXRjaG51bCA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFbDqXJpZmllciBzaSB1biByw6lzdWx0YXQgZXhpc3RlIGTDqWrDoCBwb3VyIGNlIG1hdGNoIGV0IGNldCDDqXbDqW5lbWVudFxyXG4gICAgICBjb25zdCBleGlzdGluZ1Jlc3VsdCA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpXHJcbiAgICAgICAgLndoZXJlKHsgaWRfcmVuY29udHJlLCBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSlcclxuICAgICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICAgIGlmIChleGlzdGluZ1Jlc3VsdCkge1xyXG4gICAgICAgIC8vIPCflLkgTmUgcGFzIGluc8OpcmVyIGV0IGFqb3V0ZXIgw6AgbGEgbGlzdGUgZGVzIGlnbm9yw6lzXHJcbiAgICAgICAgaWdub3JlZFJlc3VsdHMucHVzaCh7IGlkX3JlbmNvbnRyZSwgbWVzc2FnZTogXCJSw6lzdWx0YXQgZMOpasOgIGV4aXN0YW50XCIgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g8J+UuSBJbnPDqXJlciB1biBub3V2ZWF1IHLDqXN1bHRhdFxyXG4gICAgICAgIGNvbnN0IFtpZF9yZXN1bHRhdF0gPSBhd2FpdCBkYigncmVzdWx0YXQnKS5pbnNlcnQoe1xyXG4gICAgICAgICAgaWRfcmVuY29udHJlLFxyXG4gICAgICAgICAgaWRfZXZlbmVtZW50OiBldmVudElkLFxyXG4gICAgICAgICAgc2NvcmVfQSxcclxuICAgICAgICAgIHNjb3JlX0IsXHJcbiAgICAgICAgICBwb2ludF92aWN0b2lyZSxcclxuICAgICAgICAgIHBvaW50X2RlZmFpdGUsXHJcbiAgICAgICAgICBwb2ludF9tYXRjaG51bCxcclxuICAgICAgICAgIGRhdGVfcmVzdWx0YXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5zZXJ0ZWRSZXN1bHRzLnB1c2goeyBpZF9yZXN1bHRhdCwgaWRfcmVuY29udHJlLCBzY29yZV9BLCBzY29yZV9CLCBzdGF0dXM6IFwiSW5zw6lyw6lcIiB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogXCJSw6lzdWx0YXRzIHRyYWl0w6lzXCIsXHJcbiAgICAgIGluc2VydGVkOiBpbnNlcnRlZFJlc3VsdHMsXHJcbiAgICAgIGlnbm9yZWQ6IGlnbm9yZWRSZXN1bHRzXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgc2VydmV1ciBsb3JzIGRlIGwnZW5yZWdpc3RyZW1lbnQgZGVzIHLDqXN1bHRhdHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsJ2VucmVnaXN0cmVtZW50IGRlcyByw6lzdWx0YXRzLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqIExpc3RlIFJlc3VsdGF0cyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyBkw6l0YWlscyBkJ3VuIMOpdsOpbmVtZW50IGV0IHNlcyBwaGFzZXNcclxuZXhwb3J0cy5nZXRFdmVudFJlc3VsdGF0TGlzdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgLy8gVsOpcmlmaWVyIHNpIGwnw6l2w6luZW1lbnQgZXhpc3RlXHJcbiAgICBjb25zdCBldmVudCA9IGF3YWl0IGRiKCdldmVuZW1lbnQnKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSlcclxuICAgICAgLnNlbGVjdCgnbm9tX2V2ZW50JylcclxuICAgICAgLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKCFldmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIsOJdsOpbmVtZW50IG5vbiB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFLDqWN1cMOpcmVyIGxlcyBpbmZvcm1hdGlvbnMgZGUgcmVuY29udHJlIGxpw6llcyDDoCBjZXQgw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IG1hdGNoSW5mbyA9IGF3YWl0IGRiKCdyZW5jb250cmUnKVxyXG4gICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSlcclxuICAgICAgLnNlbGVjdCgncGhhc2UnLCAnam91cm5lZScsICd0b3VyX2ZpbmFsJylcclxuICAgICAgLmZpcnN0KCk7IC8vIE9uIHLDqWN1cMOocmUgdW4gc2V1bCBlbnJlZ2lzdHJlbWVudFxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgbm9tX2V2ZW50OiBldmVudC5ub21fZXZlbnQsXHJcbiAgICAgIHBoYXNlOiBtYXRjaEluZm8/LnBoYXNlIHx8ICdOL0EnLFxyXG4gICAgICBqb3VybmVlOiBtYXRjaEluZm8/LmpvdXJuZWUgfHwgJ04vQScsXHJcbiAgICAgIHRvdXJfZmluYWw6IG1hdGNoSW5mbz8udG91cl9maW5hbCB8fCAnTi9BJ1xyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGTDqXRhaWxzIGRlIGwnw6l2w6luZW1lbnQuXCIsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyByw6lzdWx0YXRzIGRlcyBtYXRjaHMgYXZlYyBqb2ludHVyZVxyXG5leHBvcnRzLmdldEZpbHRlcmVkTWF0Y2hlc1Jlc3VsdGF0TGlzdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgbGV0IG1hdGNoZXMgPSBhd2FpdCBkYigncmVzdWx0YXQnKVxyXG4gICAgICAuam9pbigncmVuY29udHJlJywgJ3Jlc3VsdGF0LmlkX3JlbmNvbnRyZScsICc9JywgJ3JlbmNvbnRyZS5pZF9yZW5jb250cmUnKVxyXG4gICAgICAuam9pbignZXZlbmVtZW50JywgJ3JlbmNvbnRyZS5pZF9ldmVuZW1lbnQnLCAnPScsICdldmVuZW1lbnQuaWRfZXZlbmVtZW50JylcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAnZXZlbmVtZW50Lm5vbV9ldmVudCcsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5waGFzZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5qb3VybmVlJyxcclxuICAgICAgICAncmVuY29udHJlLnRvdXJfZmluYWwnLFxyXG4gICAgICAgICdyZW5jb250cmUuZGF0ZV9yZW5jb250cmUnLFxyXG4gICAgICAgICdyZW5jb250cmUuaGV1cmVfcmVuY29udHJlJyxcclxuICAgICAgICAncmVuY29udHJlLnBhcnRpY2lwYW50X2EnLFxyXG4gICAgICAgICdyZW5jb250cmUucGFydGljaXBhbnRfYicsXHJcbiAgICAgICAgJ3Jlc3VsdGF0LnNjb3JlX0EnLFxyXG4gICAgICAgICdyZXN1bHRhdC5zY29yZV9CJyxcclxuICAgICAgICAncmVuY29udHJlLmxpZXVfcmVuY29udHJlJ1xyXG4gICAgICApXHJcbiAgICAgIC53aGVyZSgncmVzdWx0YXQuaWRfZXZlbmVtZW50JywgZXZlbnRJZClcclxuICAgICAgLm9yZGVyQnkoWydldmVuZW1lbnQubm9tX2V2ZW50JywgJ3JlbmNvbnRyZS5waGFzZScsICdyZW5jb250cmUuam91cm5lZScsICdyZW5jb250cmUudG91cl9maW5hbCcsICdyZW5jb250cmUuZGF0ZV9yZW5jb250cmUnXSk7XHJcblxyXG4gICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gcsOpc3VsdGF0IHRyb3V2w6kgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVncm91cGVyIGxlcyByw6lzdWx0YXRzIHBhciDDqXbDqW5lbWVudCwgcGhhc2UsIGpvdXJuw6llIGV0IHRvdXJcclxuICAgIGxldCBncm91cGVkUmVzdWx0cyA9IHt9O1xyXG4gICAgbWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHtcclxuICAgICAgY29uc3QgZ3JvdXBLZXkgPSBgJHttYXRjaC5ub21fZXZlbnR9IHwgJHttYXRjaC5waGFzZX0gfCBKb3VybsOpZTogJHttYXRjaC5qb3VybmVlICE9PSAnTi9BJyA/IG1hdGNoLmpvdXJuZWUgOiAnTm9uIGTDqWZpbmknfSAke21hdGNoLnRvdXJfZmluYWwgIT09ICdOL0EnID8gYFRvdXIgRmluYWw6ICR7bWF0Y2gudG91cl9maW5hbH1gIDogJyd9YDtcclxuXHJcbiAgICAgIGlmICghZ3JvdXBlZFJlc3VsdHNbZ3JvdXBLZXldKSB7XHJcbiAgICAgICAgZ3JvdXBlZFJlc3VsdHNbZ3JvdXBLZXldID0gW107XHJcbiAgICAgIH1cclxuICAgICAgZ3JvdXBlZFJlc3VsdHNbZ3JvdXBLZXldLnB1c2gobWF0Y2gpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZ3JvdXBlZFJlc3VsdHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHLDqXN1bHRhdHMuXCIsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuLy8g4pyFIFLDqWN1cMOpcmVyIGxlcyDDqXbDqW5lbWVudHMgU0FOUyBhdXRoZW50aWZpY2F0aW9uXHJcbmV4cG9ydHMuZ2V0UHVibGljRXZlbnRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGRiKCdldmVuZW1lbnQnKS5zZWxlY3QoJyonKTsgLy8gUsOpY3Vww6lyZXIgdG91cyBsZXMgw6l2w6luZW1lbnRzXHJcbiAgICBjb25zb2xlLmxvZyhcIsOJdsOpbmVtZW50cyByw6ljdXDDqXLDqXMgOlwiLCBldmVudHMpO1xyXG4gICAgcmVzLmpzb24oZXZlbnRzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBUb3VzIGxlcyByw6lzdWx0YXRzIGRlcyBtYXRjaHMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyByw6lzdWx0YXRzIGRlIHRvdXMgbGVzIMOpdsOpbmVtZW50c1xyXG5leHBvcnRzLmdldEFsbE1hdGNoZXNSZXN1bHRhdExpc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgbGV0IG1hdGNoZXMgPSBhd2FpdCBkYigncmVzdWx0YXQnKVxyXG4gICAgICAuam9pbigncmVuY29udHJlJywgJ3Jlc3VsdGF0LmlkX3JlbmNvbnRyZScsICc9JywgJ3JlbmNvbnRyZS5pZF9yZW5jb250cmUnKVxyXG4gICAgICAuam9pbignZXZlbmVtZW50JywgJ3JlbmNvbnRyZS5pZF9ldmVuZW1lbnQnLCAnPScsICdldmVuZW1lbnQuaWRfZXZlbmVtZW50JylcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAnZXZlbmVtZW50Lm5vbV9ldmVudCcsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5pZF9yZW5jb250cmUnLFxyXG4gICAgICAgICdyZW5jb250cmUucGhhc2UnLFxyXG4gICAgICAgICdyZW5jb250cmUuam91cm5lZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS50b3VyX2ZpbmFsJyxcclxuICAgICAgICAncmVuY29udHJlLmRhdGVfcmVuY29udHJlJyxcclxuICAgICAgICAncmVuY29udHJlLmhldXJlX3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5wYXJ0aWNpcGFudF9hJyxcclxuICAgICAgICAncmVuY29udHJlLnBhcnRpY2lwYW50X2InLFxyXG4gICAgICAgICdyZXN1bHRhdC5pZF9yZXN1bHRhdCcsIC8vIOKchSBBam91dCBkZSBgaWRfcmVzdWx0YXRgXHJcbiAgICAgICAgJ3Jlc3VsdGF0LnNjb3JlX0EnLFxyXG4gICAgICAgICdyZXN1bHRhdC5zY29yZV9CJyxcclxuICAgICAgICAncmVuY29udHJlLmxpZXVfcmVuY29udHJlJ1xyXG4gICAgICApXHJcbiAgICAgIC5vcmRlckJ5KFsnZXZlbmVtZW50Lm5vbV9ldmVudCcsICdyZW5jb250cmUucGhhc2UnLCAncmVuY29udHJlLmpvdXJuZWUnLCAncmVuY29udHJlLnRvdXJfZmluYWwnLCAncmVuY29udHJlLmRhdGVfcmVuY29udHJlJ10pO1xyXG5cclxuICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuIHLDqXN1bHRhdCB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlZ3JvdXBlciBsZXMgcsOpc3VsdGF0cyBwYXIgw6l2w6luZW1lbnQsIHBoYXNlLCBqb3VybsOpZSBldCB0b3VyXHJcbiAgICBsZXQgZ3JvdXBlZFJlc3VsdHMgPSB7fTtcclxuICAgIG1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7XHJcbiAgICAgIGNvbnN0IGdyb3VwS2V5ID0gYCR7bWF0Y2gubm9tX2V2ZW50fSB8ICR7bWF0Y2gucGhhc2V9IHwgSm91cm7DqWU6ICR7bWF0Y2guam91cm5lZSAhPT0gJ04vQScgPyBtYXRjaC5qb3VybmVlIDogJ05vbiBkw6lmaW5pJ30gJHttYXRjaC50b3VyX2ZpbmFsICE9PSAnTi9BJyA/IGBUb3VyIEZpbmFsOiAke21hdGNoLnRvdXJfZmluYWx9YCA6ICcnfWA7XHJcblxyXG4gICAgICBpZiAoIWdyb3VwZWRSZXN1bHRzW2dyb3VwS2V5XSkge1xyXG4gICAgICAgIGdyb3VwZWRSZXN1bHRzW2dyb3VwS2V5XSA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIGdyb3VwZWRSZXN1bHRzW2dyb3VwS2V5XS5wdXNoKG1hdGNoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGdyb3VwZWRSZXN1bHRzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgc2VydmV1ciA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyByw6lzdWx0YXRzLlwiLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBDb250csO0bGV1ciBwb3VyIGxhIG1pc2Ugw6Agam91ciBkdSBzY29yZVxyXG5leHBvcnRzLnVwZGF0ZU1hdGNoU2NvcmUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBtYXRjaElkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBzY29yZV9BLCBzY29yZV9CIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBWw6lyaWZpY2F0aW9uIGRlcyB2YWxldXJzXHJcbiAgICBpZiAoc2NvcmVfQSA9PT0gdW5kZWZpbmVkIHx8IHNjb3JlX0IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkxlcyBzY29yZXMgc29udCByZXF1aXMuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlzZSDDoCBqb3VyIGR1IHNjb3JlIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpXHJcbiAgICAgIC53aGVyZSh7IGlkX3JlbmNvbnRyZTogbWF0Y2hJZCB9KVxyXG4gICAgICAudXBkYXRlKHsgc2NvcmVfQSwgc2NvcmVfQiB9KTtcclxuXHJcbiAgICBpZiAodXBkYXRlZCkge1xyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiU2NvcmUgbWlzIMOgIGpvdXIgYXZlYyBzdWNjw6hzICFcIiB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJNYXRjaCBub24gdHJvdXbDqS5cIiB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZHUgc2NvcmUgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXIgZHUgc2NvcmUuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ29udHLDtGxldXIgcG91ciBzdXBwcmltZXIgdW4gcsOpc3VsdGF0IGRlIG1hdGNoIHZpYSBgaWRfcmVzdWx0YXRgXHJcbmV4cG9ydHMuZGVsZXRlTWF0Y2hSZXN1bHQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyByZXN1bHRJZCB9ID0gcmVxLnBhcmFtczsgLy8gT24gcsOpY3Vww6hyZSBgaWRfcmVzdWx0YXRgIGV0IG5vbiBgaWRfcmVuY29udHJlYFxyXG5cclxuICAgIC8vIFbDqXJpZmllciBzaSBsZSByw6lzdWx0YXQgZXhpc3RlXHJcbiAgICBjb25zdCByZXN1bHRFeGlzdHMgPSBhd2FpdCBkYigncmVzdWx0YXQnKS53aGVyZSh7IGlkX3Jlc3VsdGF0OiByZXN1bHRJZCB9KS5maXJzdCgpO1xyXG5cclxuICAgIGlmICghcmVzdWx0RXhpc3RzKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiTGUgcsOpc3VsdGF0IGR1IG1hdGNoIG4nZXhpc3RlIHBhcy5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdXBwcmVzc2lvbiBkdSByw6lzdWx0YXRcclxuICAgIGF3YWl0IGRiKCdyZXN1bHRhdCcpLndoZXJlKHsgaWRfcmVzdWx0YXQ6IHJlc3VsdElkIH0pLmRlbCgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJSw6lzdWx0YXQgc3VwcHJpbcOpIGF2ZWMgc3VjY8OocyAhXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZHUgcsOpc3VsdGF0IDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZHUgcsOpc3VsdGF0LlwiIH0pO1xyXG4gIH1cclxufTtcclxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIENsYXNzZW1lbnQgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5leHBvcnRzLmdldENsYXNzZW1lbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcGhhc2VzQUV4Y2x1cmUgPSBbXCJCYXJyYWdlXCIsIFwiw4lsaW1pbmF0b2lyZVwiLCBcIkFsbGVyIFJldG91clwiLCBcIkZpbmFsZVwiXTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBkYihcInJlc3VsdGF0XCIpXHJcbiAgICAgIC5qb2luKFwicmVuY29udHJlXCIsIFwicmVzdWx0YXQuaWRfcmVuY29udHJlXCIsIFwiPVwiLCBcInJlbmNvbnRyZS5pZF9yZW5jb250cmVcIilcclxuICAgICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJyZW5jb250cmUuaWRfZXZlbmVtZW50XCIsIFwiPVwiLCBcImV2ZW5lbWVudC5pZF9ldmVuZW1lbnRcIilcclxuICAgICAgLmpvaW4oXCJwb3VsZXNcIiwgXCJyZW5jb250cmUuaWRfcG91bGVcIiwgXCI9XCIsIFwicG91bGVzLmlkX3BvdWxlXCIpXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgXCJldmVuZW1lbnQubm9tX2V2ZW50XCIsXHJcbiAgICAgICAgXCJldmVuZW1lbnQubm9tX3Nwb3J0XCIsXHJcbiAgICAgICAgXCJyZW5jb250cmUuaWRfZXZlbmVtZW50XCIsXHJcbiAgICAgICAgXCJyZW5jb250cmUucGhhc2VcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5qb3VybmVlXCIsXHJcbiAgICAgICAgXCJyZW5jb250cmUuaWRfcG91bGVcIixcclxuICAgICAgICBcInBvdWxlcy5ub21fcG91bGVcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5wYXJ0aWNpcGFudF9hXCIsXHJcbiAgICAgICAgXCJyZW5jb250cmUucGFydGljaXBhbnRfYlwiLFxyXG4gICAgICAgIFwicmVzdWx0YXQuc2NvcmVfQVwiLFxyXG4gICAgICAgIFwicmVzdWx0YXQuc2NvcmVfQlwiLFxyXG4gICAgICAgIFwicmVzdWx0YXQucG9pbnRfdmljdG9pcmVcIixcclxuICAgICAgICBcInJlc3VsdGF0LnBvaW50X21hdGNobnVsXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5wb2ludF9kZWZhaXRlXCJcclxuICAgICAgKVxyXG4gICAgICAud2hlcmVOb3RJbihcInJlbmNvbnRyZS5waGFzZVwiLCBwaGFzZXNBRXhjbHVyZSk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0YXRzID0gYXdhaXQgcXVlcnk7XHJcblxyXG4gICAgaWYgKCFyZXN1bHRhdHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNsYXNzZW1lbnQ6IHt9IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjbGFzc2VtZW50UGFyRXZlbmVtZW50ID0ge307XHJcblxyXG4gICAgcmVzdWx0YXRzLmZvckVhY2goKG1hdGNoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV2ZW50S2V5ID0gbWF0Y2gubm9tX2V2ZW50O1xyXG4gICAgICBjb25zdCBwaGFzZUtleSA9IGBQaGFzZTogJHttYXRjaC5waGFzZX1gO1xyXG4gICAgICBjb25zdCBqb3VybmVlS2V5ID0gYEpvdXJuw6llICR7bWF0Y2guam91cm5lZX1gO1xyXG4gICAgICBjb25zdCBwb3VsZUtleSA9IGBQb3VsZSAke21hdGNoLm5vbV9wb3VsZX1gO1xyXG4gICAgICBjb25zdCBzcG9ydCA9IG1hdGNoLm5vbV9zcG9ydC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgaWYgKCFjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XSkge1xyXG4gICAgICAgIGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldID0ge307XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldKSB7XHJcbiAgICAgICAgY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldID0ge307XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldW2pvdXJuZWVLZXldKSB7XHJcbiAgICAgICAgY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldW2pvdXJuZWVLZXldID0ge307XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY2xhc3NlbWVudFBhckV2ZW5lbWVudFtldmVudEtleV1bcGhhc2VLZXldW2pvdXJuZWVLZXldW3BvdWxlS2V5XSkge1xyXG4gICAgICAgIGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0gPSBbXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgW21hdGNoLnBhcnRpY2lwYW50X2EsIG1hdGNoLnBhcnRpY2lwYW50X2JdLmZvckVhY2goKGVxdWlwZSwgaSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNjb3JlID0gaSA9PT0gMCA/IG1hdGNoLnNjb3JlX0EgOiBtYXRjaC5zY29yZV9CO1xyXG4gICAgICAgIGNvbnN0IGFkdmVyc2FpcmVTY29yZSA9IGkgPT09IDAgPyBtYXRjaC5zY29yZV9CIDogbWF0Y2guc2NvcmVfQTtcclxuICAgICAgICBjb25zdCB2aWN0b2lyZSA9IHNjb3JlID4gYWR2ZXJzYWlyZVNjb3JlID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgZGVmYWl0ZSA9IHNjb3JlIDwgYWR2ZXJzYWlyZVNjb3JlID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hKb3VlID0gMTtcclxuXHJcbiAgICAgICAgbGV0IHBvaW50cyA9IDA7XHJcbiAgICAgICAgaWYgKHNjb3JlID4gYWR2ZXJzYWlyZVNjb3JlKSB7XHJcbiAgICAgICAgICBwb2ludHMgPSBtYXRjaC5wb2ludF92aWN0b2lyZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNjb3JlID09PSBhZHZlcnNhaXJlU2NvcmUpIHtcclxuICAgICAgICAgIHBvaW50cyA9IG1hdGNoLnBvaW50X21hdGNobnVsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwb2ludHMgPSBtYXRjaC5wb2ludF9kZWZhaXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGVhbSA9IGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0uZmluZChcclxuICAgICAgICAgIChlcXVpcGVEYXRhKSA9PiBlcXVpcGVEYXRhLm5vbV9lcXVpcGUgPT09IGVxdWlwZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0ZWFtKSB7XHJcbiAgICAgICAgICBpZiAoc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiKSB7XHJcbiAgICAgICAgICAgIHRlYW0ubWogKz0gbWF0Y2hKb3VlO1xyXG4gICAgICAgICAgICB0ZWFtLnYgKz0gdmljdG9pcmU7XHJcbiAgICAgICAgICAgIHRlYW0uZCArPSBkZWZhaXRlO1xyXG4gICAgICAgICAgICB0ZWFtLnBvaW50c19tYXJxdWVzICs9IHNjb3JlO1xyXG4gICAgICAgICAgICB0ZWFtLnBvaW50c19jb25jZWRlcyArPSBhZHZlcnNhaXJlU2NvcmU7XHJcbiAgICAgICAgICAgIHRlYW0uZGlmZmVyZW5jZV9wb2ludHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHNwb3J0ID09PSBcInDDqXRhbnF1ZVwiKSB7XHJcbiAgICAgICAgICAgIHRlYW0ucG9pbnRzICs9IHBvaW50cztcclxuICAgICAgICAgICAgdGVhbS5wb2ludHNfbWFycXVlcyArPSBzY29yZTtcclxuICAgICAgICAgICAgdGVhbS5wb2ludHNfY29uY2VkZXMgKz0gYWR2ZXJzYWlyZVNjb3JlO1xyXG4gICAgICAgICAgICB0ZWFtLmRpZmZlcmVuY2VfcG9pbnRzICs9IHNjb3JlIC0gYWR2ZXJzYWlyZVNjb3JlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGVhbS5wb2ludHMgKz0gcG9pbnRzO1xyXG4gICAgICAgICAgICB0ZWFtLmJ1dHNfbWFycXVlcyArPSBzY29yZTtcclxuICAgICAgICAgICAgdGVhbS5idXRzX2VuY2Fpc3NlcyArPSBhZHZlcnNhaXJlU2NvcmU7XHJcbiAgICAgICAgICAgIHRlYW0uZGlmZmVyZW5jZV9idXRzICs9IHNjb3JlIC0gYWR2ZXJzYWlyZVNjb3JlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLnB1c2goe1xyXG4gICAgICAgICAgICBub21fZXF1aXBlOiBlcXVpcGUsXHJcbiAgICAgICAgICAgIHBvaW50czogcG9pbnRzLFxyXG4gICAgICAgICAgICBidXRzX21hcnF1ZXM6IHNwb3J0ICE9PSBcImJhc2tldGJhbGxcIiA/IHNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBidXRzX2VuY2Fpc3Nlczogc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gYWR2ZXJzYWlyZVNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkaWZmZXJlbmNlX2J1dHM6IHNwb3J0ICE9PSBcImJhc2tldGJhbGxcIiA/IHNjb3JlIC0gYWR2ZXJzYWlyZVNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwb2ludHNfbWFycXVlczogc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiIHx8IHNwb3J0ID09PSBcInDDqXRhbnF1ZVwiID8gc2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBvaW50c19jb25jZWRlczogc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiIHx8IHNwb3J0ID09PSBcInDDqXRhbnF1ZVwiID8gYWR2ZXJzYWlyZVNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkaWZmZXJlbmNlX3BvaW50czogc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiIHx8IHNwb3J0ID09PSBcInDDqXRhbnF1ZVwiID8gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIG1qOiBzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBtYXRjaEpvdWUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHY6IHNwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IHZpY3RvaXJlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkOiBzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBkZWZhaXRlIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWpvdXQgZHUgQ2xhc3NlbWVudCBHw6luw6lyYWxcclxuICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRQYXJFdmVuZW1lbnQpLmZvckVhY2goZXZlbnRLZXkgPT4ge1xyXG4gICAgICBsZXQgY2xhc3NlbWVudEdlbmVyYWwgPSB7fTtcclxuXHJcbiAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRQYXJFdmVuZW1lbnRbZXZlbnRLZXldKS5mb3JFYWNoKHBoYXNlS2V5ID0+IHtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV0pLmZvckVhY2goam91cm5lZUtleSA9PiB7XHJcbiAgICAgICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV1bam91cm5lZUtleV0pLmZvckVhY2gocG91bGVLZXkgPT4ge1xyXG4gICAgICAgICAgICBjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLmZvckVhY2godGVhbSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXF1aXBlS2V5ID0gdGVhbS5ub21fZXF1aXBlO1xyXG4gICAgICAgICAgICAgIGlmICghY2xhc3NlbWVudEdlbmVyYWxbZXF1aXBlS2V5XSkge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NlbWVudEdlbmVyYWxbZXF1aXBlS2V5XSA9IHsgLi4udGVhbSB9O1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0ZWFtKS5mb3JFYWNoKHN0YXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlYW1bc3RhdF0gPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldW3N0YXRdICs9IHRlYW1bc3RhdF07XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjbGFzc2VtZW50UGFyRXZlbmVtZW50W2V2ZW50S2V5XVtcIkNsYXNzZW1lbnQgR8OpbsOpcmFsXCJdID0ge1xyXG4gICAgICAgIFwiQ2xhc3NlbWVudCBHw6luw6lyYWxcIjogT2JqZWN0LnZhbHVlcyhjbGFzc2VtZW50R2VuZXJhbCkuc29ydCgoYSwgYikgPT4gYi5wb2ludHMgLSBhLnBvaW50cylcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY2xhc3NlbWVudDogY2xhc3NlbWVudFBhckV2ZW5lbWVudCB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyXCIsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxu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","map":{"version":3,"names":["bcrypt","require","db","jwt","sendActivationEmail","Token","crypto","nodemailer","createOrganizerQuery","getOrganizerByEmailQuery","getAllOrganizersQuery","getOrganizerByIdQuery","getEventWithOrganizerQuery","updateOrganizerQuery","deleteOrganizerQuery","insertTokenQuery","getParticipantByIdQuery","log","Parser","exports","login","req","res","email","password","body","console","organizer","status","json","message","isActive","validPassword","compare","mdp_organisateur","token","sign","id","id_organisateur","role","process","env","JWT_SECRET","expiresIn","organizerId","error","createOrganizer","nom_organisateur","prenom_organisateur","email_organisateur","tel_organisateur","existingOrganizer","existingTokenEntry","where","first","hashedPassword","hash","activationToken","randomBytes","toString","expiresAt","Date","now","getOrganizerById","params","parseInt","isNaN","getOrganizerCount","count","total","getProfilOrganizer","user","name","prenom","date_inscription","updateProfilOrganizer","oldPassword","newPassword","confirmPassword","updateData","String","isMatch","result","getAllOrganizers","organizers","leftJoin","select","groupBy","editOrganizer","deleteOrganizer","toggleOrganizerStatus","newStatus","activateAccount","tokenEntry","expires_at","allTokens","del","redirect","checkEmail","isAvailable","checkFirstName","firstName","checkLastName","lastName","sendResetCode","resetCode","resetCodeExpiry","update","reset_code","reset_code_expiry","transporter","createTransport","service","auth","EMAIL_USER","pass","EMAIL_PASS","mailOptions","from","to","subject","text","sendMail","err","verifyResetCode","code","resetPassword","createEvent","nom_event","type_event","nom_sport","lieu_event","nbr_participant","genre_participant","date_debut","date_fin","date_creationEvent","description_accueil","description_detail","categorie_participant","frais_inscription","statut_event","id_challenge","tickets","includes","logo_event","files","filename","images_accueil","images_contenu","types_tickets","nbr_total_tickets","parsedTickets","JSON","parse","Array","isArray","map","ticket","type","type_ticket","prix","prix_ticket","quantite","nbr_ticket_disponible","reduce","insert","stringify","getEventAll","events","length","getAllEvents","eventsWithImagePaths","event","getEventById","id_evenement","getEventWithOrganizer","updateEvent","updatedEvent","deleteEvent","getAllPublicEvents","getEventDetailById","getEventsByOrganizerId","getParticipantsByEventId","eventId","participants","getAllParticipantsByOrganizer","join","deleteParticipant","participantId","participant","id_participant","acheterTicket","quantity","ticketUpdated","updatedTickets","currentStock","warn","Math","max","getEventsByOrganizer","getParticipantsAndCountByEvent","nbrParticipant","createPools","pools","existingPools","insertedPools","nom_poule","created_at","returning","assignParticipantsToPools","shuffleArray","array","i","j","floor","random","shuffledParticipants","numPools","numParticipants","minPerPool","extraParticipants","assignments","index","poolDistribution","numToAssign","id_poule","push","getPoolsWithParticipants","whereIn","p","poolsWithParticipants","pool","filter","getEventsWithPools","eventsWithPools","distinct","addParticipantManual","alreadyAssigned","andWhere","existingPoule","newPouleId","deletePoolsForEvent","poolIds","getEventsByOrganizerMatch","getPoolsWithParticipantsMatch","createMatch","phase","participant_a","participant_b","lieu_rencontre","date_rencontre","heure_rencontre","journee","tour_final","equipeA","nom_equipe","equipeB","poulesA","pluck","poulesB","pouleCommune","find","poule","pouleInfo","matchData","newMatchId","newMatch","id_rencontre","match","getMatchesByEvent","matches","groupedMatches","acc","key","Object","values","getParticipantById","deleteMatch","matchId","deletedRows","getAllCalendarMatches","allMatches","orderBy","getCalendarMatchesByEvent","getEventResultats","matchInfo","details","getFilteredMatchesByEvent","query","saveMatchResults","results","point_victoire","point_defaite","point_matchnul","date_resultat","insertedResults","ignoredResults","score_A","score_B","existingResult","id_resultat","inserted","ignored","getEventResultatList","getFilteredMatchesResultatList","groupedResults","forEach","groupKey","getPublicEvents","getAllMatchesResultatList","updateMatchScore","undefined","updated","deleteMatchResult","resultId","resultExists","getClassement","phasesAExclure","whereNotIn","resultats","classement","classementParEvenement","eventKey","phaseKey","journeeKey","pouleKey","sport","toLowerCase","equipe","score","adversaireScore","victoire","defaite","matchJoue","points","team","equipeData","mj","v","d","points_marques","points_concedes","difference_points","buts_marques","buts_encaisses","difference_buts","keys","classementGeneral","equipeKey","stat","sort","a","b","getOrganizerTickets","sales","raw","exportOrganizerTickets","fields","json2csvParser","csv","header","attachment","send","idResultat","classement_general","id_calendrier","sendEmailToParticipant","content","email_part","nom_part"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["OrganizerControler.js"],"sourcesContent":["const bcrypt = require('bcrypt');\r\nconst db = require('../db');\r\nconst jwt = require('jsonwebtoken');\r\nconst { sendActivationEmail } = require('./OrganizerEmailService'); // Import du service d'envoi d'email\r\nconst Token = require('../middleware/jwtMiddleware'); // Mod√®le pour la table Token\r\nconst crypto = require('crypto');\r\nconst nodemailer = require('nodemailer');\r\nconst {\r\n  createOrganizerQuery,\r\n  getOrganizerByEmailQuery,\r\n  getAllOrganizersQuery,\r\n  getOrganizerByIdQuery,\r\n  getEventWithOrganizerQuery,\r\n  updateOrganizerQuery,\r\n  deleteOrganizerQuery,\r\n  insertTokenQuery,\r\n  getParticipantByIdQuery,\r\n\r\n} = require('../queries'); // Import des requ√™tes\r\nconst { log } = require('console');\r\nconst { Parser } = require(\"json2csv\");\r\n\r\n// Fonction de connexion pour l'organisateur\r\nexports.login = async (req, res) => {\r\n  const { email, password } = req.body;\r\n  console.log('Donn√©es re√ßues :', req.body); // Log des donn√©es re√ßues\r\n\r\n  try {\r\n    const organizer = await getOrganizerByEmailQuery(email);\r\n\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: 'Organisateur non trouv√©' });\r\n    }\r\n\r\n\r\n    // V√©rifiez si le compte est activ√©\r\n    if (!organizer.isActive) {\r\n      return res.status(403).json({ message: \"Veuillez activer votre compte en v√©rifiant votre email.\" });\r\n    }\r\n\r\n    const validPassword = await bcrypt.compare(password, organizer.mdp_organisateur);\r\n    if (!validPassword) {\r\n      return res.status(400).json({ message: 'Mot de passe incorrect' });\r\n    }\r\n\r\n    // Cr√©er un token JWT avec l'ID de l'organisateur\r\n    const token = jwt.sign({ id: organizer.id_organisateur, role: 'organizer' },\r\n      process.env.JWT_SECRET,\r\n      { expiresIn: '1h' });\r\n\r\n    res.status(200).json({\r\n      message: 'Connexion r√©ussie',\r\n      token, // Envoie le token au frontend\r\n      organizerId: organizer.id_organisateur // Ajoute l'ID de l'organisateur pour redirection au dashboard\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur serveur :', error);\r\n    res.status(500).json({ message: 'Erreur serveur', error });\r\n  }\r\n};\r\n\r\nexports.createOrganizer = async (req, res) => {\r\n  const { nom_organisateur, prenom_organisateur, email_organisateur, tel_organisateur, mdp_organisateur } = req.body;\r\n  console.log(\"Donn√©es re√ßues:\", req.body);\r\n\r\n  try {\r\n    console.log(\"V√©rification de l'email existant...\");\r\n    const existingOrganizer = await getOrganizerByEmailQuery(email_organisateur);\r\n    const existingTokenEntry = await db('tokens').where({ email: email_organisateur }).first();\r\n\r\n    if (existingOrganizer || existingTokenEntry) {\r\n      return res.status(400).json({ message: 'Cet email est d√©j√† enregistr√©.' });\r\n    }\r\n\r\n    console.log(\"Hashing du mot de passe...\");\r\n    const hashedPassword = await bcrypt.hash(mdp_organisateur, 10);\r\n\r\n    // G√©n√©ration d'un token d'activation unique\r\n    const activationToken = crypto.randomBytes(20).toString('hex');\r\n    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // Expiration dans 24 heures\r\n\r\n    // Stocker les donn√©es dans la table 'tokens'\r\n    console.log(\"Insertion du token et des donn√©es utilisateur dans la table tokens...\");\r\n    await insertTokenQuery({\r\n      token: activationToken,\r\n      expiresAt,\r\n      email: email_organisateur,\r\n      nom_organisateur,\r\n      prenom_organisateur,\r\n      tel_organisateur,\r\n      mdp_organisateur: hashedPassword,\r\n    });\r\n\r\n    // Envoyer l'e-mail d'activation avec le lien contenant le m√™me token\r\n    console.log(\"Envoi de l'email d'activation...\");\r\n    await sendActivationEmail(email_organisateur, activationToken); // Transmettez le token ici\r\n    console.log(\"Token g√©n√©r√© pour l'activation :\", activationToken);\r\n\r\n    res.status(201).json({ message: 'Inscription r√©ussie ! Veuillez v√©rifier votre email pour confirmer.' });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'inscription:\", error);\r\n    res.status(500).json({ message: \"Erreur lors de l'inscription. Veuillez r√©essayer.\", error: error.message });\r\n  }\r\n};\r\n\r\n//r√©cup√©ration de l'organisateur par id\r\nexports.getOrganizerById = async (req, res) => {\r\n  console.log(\"Requ√™te re√ßue avec params :\", req.params); // V√©rifier les param√®tres\r\n\r\n  const id = parseInt(req.params.id, 10); // Convertir l'ID en entier\r\n\r\n  if (isNaN(id)) {\r\n      return res.status(400).json({ message: \"ID invalide, doit √™tre un nombre.\" });\r\n  }\r\n\r\n  try {\r\n      // Correction : Convertir l'ID et utiliser le bon champ \"id_organisateur\"\r\n      const organizer = await db('organisateur').where('id_organisateur', id).first();\r\n\r\n      if (!organizer) {\r\n          return res.status(404).json({ message: \"Organisateur non trouv√©\" });\r\n      }\r\n\r\n      res.json(organizer);\r\n  } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de la r√©cup√©ration de l'organisateur :\", error);\r\n      res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer le nombre total d'organisateurs\r\n\r\nexports.getOrganizerCount = async (req, res) => {\r\n  try {\r\n    const count = await db('organisateur').count('id_organisateur as total').first(); // ‚úÖ R√©cup√®re seulement le nombre total\r\n    res.status(200).json({ total: count.total }); // ‚úÖ Retourne { total: X }\r\n  } catch (error) {\r\n    console.error(\"Erreur lors du comptage des organisateurs :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\nexports.getProfilOrganizer = async (req, res) => {\r\n  try {\r\n    // Assurez-vous que organizerId est un entier.\r\n    const organizerId = parseInt(req.user?.id , 10);\r\n    if (!organizerId) {\r\n      return res.status(400).json({ message: 'ID de l\\'organisateur manquant ou invalide' });\r\n    }\r\n\r\n    const organizer = await getOrganizerByIdQuery(organizerId);\r\n    console.log(\"Donn√©es de l'organisateur :\", organizer);\r\n\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: 'Organisateur non trouv√©' });\r\n    }\r\n\r\n    res.status(200).json({\r\n      name: organizer.nom_organisateur,\r\n      email: organizer.email_organisateur,\r\n      prenom: organizer.prenom_organisateur,\r\n      tel_organisateur: organizer.tel_organisateur,\r\n      date_inscription: organizer.date_inscription,\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration du profil :', error);\r\n    res.status(500).json({ message: 'Erreur serveur' });\r\n  }\r\n};\r\n\r\nexports.updateProfilOrganizer = async (req, res) => {\r\n  const organizerId = req.user?.id;\r\n  const { name, prenom, email, tel_organisateur, oldPassword, newPassword, confirmPassword } = req.body;\r\n\r\n  try {\r\n    console.log(\"Donn√©es re√ßues :\", { name, prenom, email, tel_organisateur, oldPassword, newPassword, confirmPassword });\r\n\r\n    // R√©cup√©ration de l'organisateur\r\n    const organizer = await getOrganizerByIdQuery(organizerId);\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: 'Organisateur non trouv√©' });\r\n    }\r\n    console.log(\"Organisateur r√©cup√©r√© :\", organizer);\r\n\r\n    // Initialisation des donn√©es √† mettre √† jour\r\n    const updateData = {\r\n      nom_organisateur: name,\r\n      prenom_organisateur: prenom,\r\n      email_organisateur: email,\r\n      tel_organisateur: String(tel_organisateur),\r\n    };\r\n\r\n    // V√©rification de l'ancien mot de passe si n√©cessaire\r\n    if (oldPassword && organizer.mdp_organisateur) {\r\n      const isMatch = await bcrypt.compare(oldPassword, organizer.mdp_organisateur);\r\n      if (!isMatch) {\r\n        return res.status(400).json({ message: 'Ancien mot de passe incorrect' });\r\n      }\r\n    } else if (oldPassword && !organizer.mdp_organisateur) {\r\n      // Si aucun ancien mot de passe n'est d√©fini pour cet utilisateur, permettre la mise √† jour\r\n      if (newPassword && newPassword === confirmPassword) {\r\n        const hashedPassword = await bcrypt.hash(newPassword, 10);\r\n        updateData.mdp_organisateur = hashedPassword;\r\n      } else {\r\n        return res.status(400).json({ message: 'Le nouveau mot de passe et la confirmation ne correspondent pas' });\r\n      }\r\n    } else if (newPassword && newPassword !== confirmPassword) {\r\n      return res.status(400).json({ message: 'Le nouveau mot de passe et la confirmation ne correspondent pas' });\r\n    }\r\n\r\n    // Hashage du nouveau mot de passe si fourni sans ancien mot de passe\r\n    if (newPassword && !oldPassword) {\r\n      const hashedPassword = await bcrypt.hash(newPassword, 10);\r\n      updateData.mdp_organisateur = hashedPassword;\r\n    }\r\n\r\n    // Mise √† jour de l'organisateur dans la base de donn√©es\r\n    const result = await updateOrganizerQuery(organizerId, updateData);\r\n    console.log('Donn√©es de mise √† jour :', updateData);\r\n    console.log('R√©sultat de la mise √† jour:', result);\r\n\r\n    if (result === 0) {\r\n      return res.status(400).json({ message: '√âchec de la mise √† jour du profil' });\r\n    }\r\n\r\n    res.status(200).json({ message: 'Profil mis √† jour avec succ√®s' });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise √† jour du profil:', error);\r\n    res.status(500).json({ message: 'Erreur lors de la mise √† jour du profil', error: error.message });\r\n  }\r\n};\r\n\r\nexports.getAllOrganizers = async (req, res) => {\r\n  try {\r\n    const organizers = await db(\"organisateur\")\r\n      .leftJoin(\"evenement\", \"organisateur.id_organisateur\", \"evenement.id_organisateur\")\r\n      .select(\r\n        \"organisateur.id_organisateur\",\r\n        \"organisateur.nom_organisateur\",\r\n        \"organisateur.prenom_organisateur\",\r\n        \"organisateur.email_organisateur\"\r\n      )\r\n      .count(\"evenement.id_evenement as eventCount\") // Compter les √©v√©nements\r\n      .groupBy(\"organisateur.id_organisateur\"); // Grouper par organisateur\r\n\r\n    console.log(\"Organisateurs r√©cup√©r√©s :\", organizers);\r\n    res.status(200).json(organizers);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des organisateurs :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// Fonction pour modifier un organisateur\r\nexports.editOrganizer = async (req, res) => {\r\n  const { id } = req.params;\r\n  const { nom_organisateur, prenom_organisateur, email_organisateur, tel_organisateur, mdp_organisateur } = req.body;\r\n\r\n  try {\r\n    await updateOrganizerQuery(id, { nom_organisateur, prenom_organisateur, email_organisateur, tel_organisateur, mdp_organisateur });\r\n    res.status(200).json({ message: 'Organisateur modifi√© avec succ√®s' });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la modification de l\\'organisateur', error });\r\n  }\r\n};\r\n\r\n// Fonction pour supprimer un organisateur\r\nexports.deleteOrganizer = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    await deleteOrganizerQuery(id); // Utilisation de la requ√™te externalis√©e\r\n    res.status(200).json({ message: 'Organisateur supprim√© avec succ√®s' });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la suppression de l\\'organisateur', error });\r\n  }\r\n};\r\n\r\n\r\nexports.toggleOrganizerStatus = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    const organizer = await getOrganizerByIdQuery(id);\r\n\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: 'Organisateur non trouv√©' });\r\n    }\r\n\r\n    const newStatus = !organizer.isActive;\r\n    await updateOrganizerQuery(id, { isActive: newStatus });\r\n\r\n    res.status(200).json({ isActive: newStatus });\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'activation/d√©sactivation :', error);\r\n    res.status(500).json({ message: 'Erreur lors de l\\'activation/d√©sactivation' });\r\n  }\r\n};\r\n\r\nexports.activateAccount = async (req, res) => {\r\n  const { token } = req.params;\r\n\r\n  try {\r\n    // Affichage du token re√ßu dans l'URL pour v√©rification\r\n    console.log(\"Token de l'URL:\", `\"${token}\"`);\r\n\r\n    // R√©cup√©rer les donn√©es utilisateur en utilisant le token\r\n    const tokenEntry = await db('tokens').where({ token }).first();\r\n    console.log(\"Token Entry dans la base de donn√©es:\", tokenEntry);\r\n\r\n    // V√©rification de la correspondance des tokens\r\n    if (tokenEntry && token !== tokenEntry.token) {\r\n      console.log(\"Les tokens ne correspondent pas !\");\r\n    }\r\n\r\n    if (!tokenEntry) {\r\n      return res.status(400).json({ message: \"Token non trouv√© dans la base de donn√©es.\" });\r\n    }\r\n\r\n    // Afficher la date d'expiration et la date actuelle pour v√©rification\r\n    console.log(\"Date d'expiration :\", tokenEntry.expires_at);\r\n    console.log(\"Date actuelle :\", new Date());\r\n\r\n    if (new Date(tokenEntry.expires_at) < new Date()) {\r\n      return res.status(400).json({ message: \"Le lien d'activation a expir√©.\" });\r\n    }\r\n\r\n    // R√©cup√©ration et affichage de tous les tokens pour diagnostic\r\n    const allTokens = await db('tokens').select('*');\r\n    console.log(\"Tous les tokens enregistr√©s :\", allTokens);\r\n\r\n    // Cr√©er l'organisateur dans la base de donn√©es\r\n    const organizerId = await createOrganizerQuery({\r\n      nom_organisateur: tokenEntry.nom_organisateur,\r\n      prenom_organisateur: tokenEntry.prenom_organisateur,\r\n      email_organisateur: tokenEntry.email,\r\n      tel_organisateur: tokenEntry.tel_organisateur,\r\n      mdp_organisateur: tokenEntry.mdp_organisateur,\r\n      date_inscription: new Date(),\r\n      isActive: true\r\n    });\r\n\r\n    // Supprimer le token apr√®s activation\r\n    await db('tokens').where({ token }).del();\r\n\r\n    // Redirection vers la page de connexion ou autre\r\n    res.redirect(`http://localhost:3000/login?activation=success`);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'activation du compte :\", error);\r\n    res.status(500).json({ message: \"Erreur lors de l'activation du compte.\" });\r\n  }\r\n};\r\n\r\n// V√©rifiez si l'email existe d√©j√† dans la base de donn√©es\r\nexports.checkEmail = async (req, res) => {\r\n  const { email } = req.body;\r\n\r\n  try {\r\n    // V√©rifiez si l'email existe d√©j√† dans la base de donn√©es\r\n    const existingOrganizer = await db('organisateur').where({ email_organisateur: email }).first();\r\n\r\n    if (existingOrganizer) {\r\n      // Si l'email est d√©j√† utilis√©\r\n      res.json({ isAvailable: false });\r\n    } else {\r\n      // Si l'email n'est pas utilis√©\r\n      res.json({ isAvailable: true });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la v√©rification de l'email :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\nexports.checkFirstName = async (req, res) => {\r\n  const { firstName } = req.body;\r\n\r\n  try {\r\n    const existingOrganizer = await db('organisateur').where({ prenom_organisateur: firstName }).first();\r\n\r\n    if (existingOrganizer) {\r\n      return res.json({ isAvailable: false });\r\n    } else {\r\n      return res.json({ isAvailable: true });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la v√©rification du pr√©nom :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n// V√©rification de l'unicit√© du nom (lastName)\r\nexports.checkLastName = async (req, res) => {\r\n  const { lastName } = req.body;\r\n\r\n  try {\r\n    const existingOrganizer = await db('organisateur').where({ nom_organisateur: lastName }).first();\r\n\r\n    if (existingOrganizer) {\r\n      return res.json({ isAvailable: false });\r\n    } else {\r\n      return res.json({ isAvailable: true });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la v√©rification du nom :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// Envoyer le code de r√©initialisation mot de passe oublier Organisateur\r\nexports.sendResetCode = async (req, res) => {\r\n  const { email } = req.body;\r\n\r\n  try {\r\n    const organizer = await db('organisateur').where({ email_organisateur: email }).first();\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: 'Email non trouv√©.' });\r\n    }\r\n\r\n    const resetCode = crypto.randomBytes(3).toString('hex'); // G√©n√®re un code de r√©initialisation\r\n    const resetCodeExpiry = new Date(Date.now() + 15 * 60 * 1000); // Expire apr√®s 15 minutes\r\n\r\n    // Mettre √† jour la base de donn√©es avec le code et la date d'expiration\r\n    await db('organisateur')\r\n      .where({ email_organisateur: email })\r\n      .update({ reset_code: resetCode, reset_code_expiry: resetCodeExpiry });\r\n\r\n    // Envoyer l'email\r\n    const transporter = nodemailer.createTransport({\r\n      service: 'gmail',\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS,\r\n      },\r\n    });\r\n\r\n    const mailOptions = {\r\n      from: process.env.EMAIL_USER,\r\n      to: email,\r\n      subject: 'Code de r√©initialisation de mot de passe',\r\n      text: `Votre code de r√©initialisation est : ${resetCode}. Ce code expirera dans 15 minutes.`,\r\n    };\r\n\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    res.status(200).json({ message: 'Code de r√©initialisation envoy√© √† votre email.' });\r\n  } catch (err) {\r\n    console.error('Erreur lors de l\\'envoi du code de r√©initialisation :', err);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// Valider le code de r√©initialisation mot de passe oublier Organisateur\r\nexports.verifyResetCode = async (req, res) => {\r\n  const { email, code } = req.body;\r\n\r\n  try {\r\n    const organizer = await db('organisateur')\r\n      .where({ email_organisateur: email, reset_code: code })\r\n      .first();\r\n\r\n    if (!organizer) {\r\n      return res.status(400).json({ message: 'Code invalide ou expir√©.' });\r\n    }\r\n\r\n    const now = new Date();\r\n    if (new Date(organizer.reset_code_expiry) < now) {\r\n      return res.status(400).json({ message: 'Code expir√©.' });\r\n    }\r\n\r\n    res.status(200).json({ message: 'Code valide.' });\r\n  } catch (err) {\r\n    console.error('Erreur lors de la v√©rification du code :', err);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// R√©initialiser le mot de passe mot de passe oublier Organisateur\r\nexports.resetPassword = async (req, res) => {\r\n  const { email, password } = req.body;\r\n\r\n  try {\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    await db('organisateur')\r\n      .where({ email_organisateur: email })\r\n      .update({ mdp_organisateur: hashedPassword, reset_code: null, reset_code_expiry: null });\r\n\r\n    res.status(200).json({ message: 'Mot de passe r√©initialis√© avec succ√®s.' });\r\n  } catch (err) {\r\n    console.error('Erreur lors de la r√©initialisation du mot de passe :', err);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n//*********************Creation d'evenement**************************\r\n\r\n\r\nexports.createEvent = async (req, res) => {\r\n  const {\r\n    nom_event,\r\n    type_event,\r\n    nom_sport,\r\n    lieu_event,\r\n    nbr_participant,\r\n    genre_participant, // Inclut genre_participant\r\n    date_debut,\r\n    date_fin,\r\n    date_creationEvent,\r\n    description_accueil,\r\n    description_detail,\r\n    categorie_participant,\r\n    frais_inscription,\r\n    statut_event,\r\n    id_challenge,\r\n    tickets\r\n  } = req.body;\r\n\r\n  try {\r\n    // Validation pour genre_participant\r\n    if (!['Masculin', 'F√©minin', 'Mixte'].includes(genre_participant)) {\r\n      return res.status(400).json({ message: 'Valeur invalide pour genre_participant' });\r\n    }\r\n\r\n    const organizerId = req.user?.id;\r\n\r\n    const logo_event = req.files.logo_event ? req.files.logo_event[0].filename : null;\r\n    const images_accueil = req.files.images_accueil ? req.files.images_accueil[0].filename : null;\r\n    const images_contenu = req.files.images_contenu ? req.files.images_contenu[0].filename : null;\r\n    // V√©rification et transformation des tickets en JSON\r\n    let types_tickets = [];\r\n    let nbr_total_tickets = 0;\r\n\r\n    if (tickets) {\r\n      try {\r\n        const parsedTickets = typeof tickets === 'string' ? JSON.parse(tickets) : tickets;\r\n        if (Array.isArray(parsedTickets)) {\r\n          types_tickets = parsedTickets.map(ticket => ({\r\n            type: ticket.type_ticket,\r\n            prix: ticket.prix_ticket,\r\n            quantite: parseInt(ticket.nbr_ticket_disponible, 10)\r\n          }));\r\n          nbr_total_tickets = types_tickets.reduce((total, ticket) => total + ticket.quantite, 0);\r\n        } else {\r\n          return res.status(400).json({ message: 'Le format des tickets est invalide' });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur de parsing des tickets :\", error);\r\n        return res.status(400).json({ message: 'Format JSON invalide pour tickets' });\r\n      }\r\n    }\r\n\r\n    await db('evenement').insert({\r\n      nom_event,\r\n      type_event,\r\n      nom_sport,\r\n      lieu_event,\r\n      nbr_participant,\r\n      genre_participant, // D√©j√† inclus ici\r\n      date_debut,\r\n      date_fin,\r\n      date_creationEvent,\r\n      description_accueil,\r\n      description_detail,\r\n      categorie_participant,\r\n      frais_inscription,\r\n      statut_event,\r\n      id_challenge,\r\n      logo_event,\r\n      images_accueil,\r\n      images_contenu,\r\n      id_organisateur: organizerId,\r\n      types_tickets: JSON.stringify(types_tickets), // Stockage en JSON\r\n      nbr_total_tickets\r\n    });\r\n\r\n\r\n    res.status(201).json({ message: '√âv√©nement cr√©√© avec succ√®s' });\r\n  }\r\n\r\n  catch (error) {\r\n    console.error(\"Erreur lors de la cr√©ation de l'√©v√©nement:\", error);\r\n    res.status(500).json({ message: 'Erreur serveur', error });\r\n  }\r\n};\r\n\r\n\r\nexports.getEventAll = async (req, res) => {\r\n  try {\r\n    const events = await db('evenement').select('*');\r\n\r\n    if (events.length === 0) {\r\n      return res.status(200).json({ message: \"Aucun √©v√©nement trouv√©.\" });\r\n    }\r\n\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ message: \"Erreur interne du serveur\" });\r\n  }\r\n};\r\n\r\n\r\n\r\n// Contr√¥leur pour afficher les √©v√©nements avec les chemins des images\r\nexports.getAllEvents = async (req, res) => {\r\n  try {\r\n    const organizerId = req.user?.id;\r\n    const events = await db('evenement').where({ id_organisateur: organizerId });\r\n\r\n    const eventsWithImagePaths = events.map((event) => {\r\n      return {\r\n        ...event,\r\n        logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\r\n        images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\r\n        images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null,\r\n      };\r\n    });\r\n\r\n    res.status(200).json(eventsWithImagePaths);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des √©v√©nements:', error);\r\n    res.status(500).json({ message: 'Erreur serveur' });\r\n  }\r\n};\r\n\r\n//  controler pour la get un evenement pour modifier\r\nexports.getEventById = async (req, res) => {\r\n  const { id } = req.params;\r\n  try {\r\n    const event = await db('evenement').where({ id_evenement: id }).first();\r\n    if (!event) {\r\n      return res.status(404).json({ message: '√âv√©nement non trouv√©' });\r\n    }\r\n    console.log(\"√âv√©nement r√©cup√©r√© :\", event); // Affichez les d√©tails r√©cup√©r√©s\r\n    res.status(200).json({\r\n      ...event,\r\n      logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\r\n      images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\r\n      images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null,\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration de l‚Äô√©v√©nement :', error);\r\n    res.status(500).json({ message: 'Erreur serveur' });\r\n  }\r\n};\r\n\r\nexports.getEventWithOrganizer = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    const event = await getEventWithOrganizerQuery(id);\r\n\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: '√âv√©nement non trouv√©' });\r\n    }\r\n\r\n    res.status(200).json({\r\n      ...event,\r\n      logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\r\n      images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\r\n      images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null,\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration de l‚Äô√©v√©nement avec l‚Äôorganisateur :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n//mis a jour ou modification evenement\r\nexports.updateEvent = async (req, res) => {\r\n  const { id } = req.params; // ID de l'√©v√©nement\r\n  const {\r\n    nom_event,\r\n    type_event,\r\n    nom_sport,\r\n    lieu_event,\r\n    nbr_participant,\r\n    genre_participant,\r\n    date_debut,\r\n    date_fin,\r\n    frais_inscription,\r\n    statut_event,\r\n    categorie_participant,\r\n    description_accueil,\r\n    description_detail,\r\n    tickets\r\n  } = req.body;\r\n  const organizerId = req.user?.id;\r\n  const logo_event = req.files.logo_event ? req.files.logo_event[0].filename : null;\r\n  const images_accueil = req.files.images_accueil ? req.files.images_accueil[0].filename : null;\r\n  const images_contenu = req.files.images_contenu ? req.files.images_contenu[0].filename : null;\r\n\r\n  try {\r\n    // V√©rification et transformation des tickets en JSON\r\n    let types_tickets = [];\r\n    let nbr_total_tickets = 0;\r\n\r\n    if (tickets) {\r\n      try {\r\n        const parsedTickets = typeof tickets === 'string' ? JSON.parse(tickets) : tickets;\r\n        if (Array.isArray(parsedTickets)) {\r\n          types_tickets = parsedTickets.map(ticket => ({\r\n            type: ticket.type_ticket,\r\n            prix: ticket.prix_ticket,\r\n            quantite: parseInt(ticket.nbr_ticket_disponible, 10)\r\n          }));\r\n          nbr_total_tickets = types_tickets.reduce((total, ticket) => total + ticket.quantite, 0);\r\n        } else {\r\n          return res.status(400).json({ message: 'Le format des tickets est invalide' });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur de parsing des tickets :\", error);\r\n        return res.status(400).json({ message: 'Format JSON invalide pour tickets' });\r\n      }\r\n    }\r\n\r\n    const updatedEvent = {\r\n      nom_event,\r\n      type_event,\r\n      nom_sport,\r\n      lieu_event,\r\n      nbr_participant,\r\n      genre_participant,\r\n      date_debut: date_debut ? date_debut : null, // ‚úÖ Remplace '' par NULL\r\n      date_fin: date_fin ? date_fin : null,  \r\n      frais_inscription,\r\n      statut_event,\r\n      categorie_participant,\r\n      description_accueil,\r\n      description_detail,\r\n      ...(logo_event && { logo_event }), // Ajouter uniquement si fourni\r\n      ...(images_accueil && { images_accueil }), // Ajouter uniquement si fourni\r\n      ...(images_contenu && { images_contenu }), // Ajouter uniquement si fourni\r\n      ...(tickets && {\r\n        types_tickets: JSON.stringify(tickets), // ‚úÖ S'assurer que les tickets sont bien un tableau\r\n        nbr_total_tickets\r\n      })\r\n    };\r\n\r\n    const result = await db('evenement').where({ id_evenement: id }).update(updatedEvent);\r\n\r\n    if (result) {\r\n      res.status(200).json({ message: '√âv√©nement mis √† jour avec succ√®s.' });\r\n    } else {\r\n      res.status(404).json({ message: '√âv√©nement non trouv√©.' });\r\n    }\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise √† jour de l‚Äô√©v√©nement :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n\r\n// Supprimer un √©v√©nement\r\nexports.deleteEvent = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    const event = await db('evenement').where({ id_evenement: id }).first();\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: '√âv√©nement non trouv√©.' });\r\n    }\r\n\r\n    await db('evenement').where({ id_evenement: id }).del();\r\n\r\n    res.status(200).json({ message: '√âv√©nement supprim√© avec succ√®s.' });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression de l‚Äô√©v√©nement :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// Contr√¥leur pour afficher tous les √©v√©nements (public)\r\nexports.getAllPublicEvents = async (req, res) => {\r\n  try {\r\n    const events = await db('evenement'); // Pas de filtre par `id_organisateur` ici\r\n\r\n    // Ajout des chemins des images pour chaque √©v√©nement\r\n    const eventsWithImagePaths = events.map((event) => {\r\n      return {\r\n        ...event,\r\n        logo_event: event.logo_event ? `http://localhost:3001/uploads/${event.logo_event}` : null,\r\n        images_accueil: event.images_accueil ? `http://localhost:3001/uploads/${event.images_accueil}` : null,\r\n        images_contenu: event.images_contenu ? `http://localhost:3001/uploads/${event.images_contenu}` : null,\r\n      };\r\n    });\r\n\r\n    res.status(200).json(eventsWithImagePaths);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des √©v√©nements publics:', error);\r\n    res.status(500).json({ message: 'Erreur serveur' });\r\n  }\r\n};\r\n\r\nexports.getEventDetailById = async (req, res) => {\r\n  const { id } = req.params; // R√©cup√®re l'ID depuis les param√®tres de la route\r\n  try {\r\n    console.log('Requ√™te pour r√©cup√©rer l\\'√©v√©nement avec ID :', id);\r\n\r\n    // Recherche l'√©v√©nement par ID\r\n    const event = await db('evenement').where({ id_evenement: id }).first();\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: '√âv√©nement introuvable' });\r\n    }\r\n\r\n    // Ajouter les chemins d'image et retourner les donn√©es\r\n    res.status(200).json({\r\n      ...event, // Inclut toutes les donn√©es de l'√©v√©nement\r\n      logo_event: event.logo_event\r\n        ? `http://localhost:3001/uploads/${event.logo_event}`\r\n        : null,\r\n      images_accueil: event.images_accueil\r\n        ? `http://localhost:3001/uploads/${event.images_accueil}`\r\n        : null,\r\n      images_contenu: event.images_contenu\r\n        ? `http://localhost:3001/uploads/${event.images_contenu}`\r\n        : null,\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration de l\\'√©v√©nement :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// nouveau \r\n// Contr√¥leur pour r√©cup√©rer tous les √©v√©nements d'un organisateur\r\nexports.getEventsByOrganizerId = async (req, res) => {\r\n  const { id } = req.params; // ID de l'organisateur\r\n\r\n  try {\r\n    const events = await db('evenement').where({ id_organisateur: id });\r\n\r\n    // Ajout des chemins des images pour chaque √©v√©nement\r\n    const eventsWithImagePaths = events.map((event) => ({\r\n      ...event,\r\n      logo_event: event.logo_event\r\n        ? `http://localhost:3001/uploads/${event.logo_event}`\r\n        : null,\r\n      images_accueil: event.images_accueil\r\n        ? `http://localhost:3001/uploads/${event.images_accueil}`\r\n        : null,\r\n      images_contenu: event.images_contenu\r\n        ? `http://localhost:3001/uploads/${event.images_contenu}`\r\n        : null,\r\n    }));\r\n\r\n    res.status(200).json(eventsWithImagePaths);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ message: \"Erreur lors de la r√©cup√©ration des √©v√©nements.\" });\r\n  }\r\n};\r\n\r\n// fonction pour r√©cup√©rer les participants depuis la base de donn√©es \r\nexports.getParticipantsByEventId = async (req, res) => {\r\n  const { eventId } = req.params;\r\n  console.log(`Requ√™te re√ßue pour r√©cup√©rer les participants de l'√©v√©nement ID : ${eventId}`);\r\n  try {\r\n    // Utiliser 'id_evenement' √† la place de 'event_id'\r\n    const participants = await db('participants').where({ id_evenement: eventId });\r\n\r\n    if (!participants || participants.length === 0) {\r\n      return res.status(404).json({ message: 'Aucun participant trouv√© pour cet √©v√©nement.' });\r\n    }\r\n\r\n    res.status(200).json(participants);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n\r\nexports.getAllParticipantsByOrganizer = async (req, res) => {\r\n  const organizerId = req.user?.id; // R√©cup√©rer l'ID de l'organisateur authentifi√©\r\n\r\n  if (!organizerId) {\r\n    return res.status(403).json({ message: \"L'ID de l'organisateur est introuvable.\" });\r\n  }\r\n\r\n  try {\r\n    // Jointure entre `evenements`, `participer` et `participants`\r\n    const participants = await db('participer')\r\n      .join('participants', 'participer.id_participant', '=', 'participants.id_participant')\r\n      .join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement')\r\n      .select(\r\n        'participants.id_participant',\r\n        'participants.nom_part',\r\n        'evenement.nom_event',\r\n        'participer.id_evenement'\r\n      )\r\n      .where('evenement.id_organisateur', organizerId); // Filtrer par organisateur\r\n\r\n    if (!participants || participants.length === 0) {\r\n      return res.status(404).json({ message: 'Aucun participant trouv√© pour vos √©v√©nements.' });\r\n    }\r\n\r\n    res.status(200).json(participants);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n// Fonction pour supprimer un participant dans le TB organisateur\r\nexports.deleteParticipant = async (req, res) => {\r\n  const { participantId } = req.params;\r\n  console.log(\"ID du participant √† supprimer :\", participantId);\r\n\r\n  try {\r\n    // V√©rifier si le participant existe\r\n    const participant = await db('participants').where({ id_participant: participantId }).first();\r\n\r\n    if (!participant) {\r\n      return res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n    }\r\n\r\n    // Supprimer le participant de la base de donn√©es\r\n    await db('participants').where({ id_participant: participantId }).del();\r\n\r\n    res.status(200).json({ message: \"Participant supprim√© avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression du participant :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n/**\r\n * Achat d'un billet et mise √† jour des tickets disponibles.\r\n */\r\nexports.acheterTicket = async (req, res) => {\r\n  const { id_evenement, type_ticket, quantity } = req.body;\r\n\r\n  try {\r\n      console.log(\"üì• Donn√©es re√ßues :\", req.body);\r\n\r\n      // R√©cup√©rer l'√©v√©nement\r\n      const event = await db(\"evenement\").where({ id_evenement }).first();\r\n      if (!event) {\r\n          return res.status(404).json({ message: \"√âv√©nement introuvable\" });\r\n      }\r\n\r\n      let tickets = JSON.parse(event.types_tickets);\r\n      let ticketUpdated = false;\r\n\r\n      // V√©rifier si le billet existe et le mettre √† jour\r\n      const updatedTickets = tickets.map(ticket => {\r\n          if ((ticket.type_ticket || ticket.type) === type_ticket) {\r\n              // V√©rifier que `nbr_ticket_disponible` est un nombre valide\r\n              let currentStock = parseInt(ticket.nbr_ticket_disponible, 10);\r\n              if (isNaN(currentStock)) {\r\n                  currentStock = parseInt(ticket.quantite, 10) || 0; // Prendre `quantite` si `nbr_ticket_disponible` est invalide\r\n              }\r\n\r\n              console.log(`üéü Mise √† jour du billet ${ticket.type || ticket.type_ticket} (avant: ${currentStock})`);\r\n\r\n              // V√©rifier si le stock est suffisant\r\n              if (currentStock < quantity) {\r\n                  console.warn(\"‚ö†Ô∏è Stock insuffisant !\");\r\n                  return ticket; // Retourne le billet inchang√©\r\n              }\r\n\r\n              // Mise √† jour du stock\r\n              ticket.nbr_ticket_disponible = Math.max(0, currentStock - quantity);\r\n              console.log(`‚úÖ Nouveau stock: ${ticket.nbr_ticket_disponible}`);\r\n              ticketUpdated = true;\r\n          }\r\n          return ticket;\r\n      });\r\n\r\n      // Si le billet n'existe pas ou n'a pas √©t√© mis √† jour\r\n      if (!ticketUpdated) {\r\n          return res.status(400).json({ message: \"Type de billet non trouv√© ou stock insuffisant\" });\r\n      }\r\n\r\n      // Mettre √† jour la base de donn√©es avec la nouvelle liste de tickets\r\n      await db(\"evenement\").where({ id_evenement }).update({ types_tickets: JSON.stringify(updatedTickets) });\r\n\r\n      console.log(\"üîÑ Mise √† jour r√©ussie ! Tickets mis √† jour :\", updatedTickets);\r\n      return res.json({ message: \"Billet achet√© avec succ√®s\", tickets: updatedTickets });\r\n\r\n  } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de l'achat du billet :\", error);\r\n      return res.status(500).json({ message: \"Erreur interne du serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// R√©cup√©rer les √©v√©nements cr√©√©s par un organisateur\r\nexports.getEventsByOrganizer = async (req, res) => {\r\n  const organizerId = req.user.id; // R√©cup√©rer l'ID de l'organisateur connect√©\r\n\r\n  try {\r\n    const events = await db('evenement').where({ id_organisateur: organizerId });\r\n\r\n    if (!events.length) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\nexports.getParticipantsAndCountByEvent = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  try {\r\n    // 1) R√©cup√©rer les participants avec le nom de leur √©quipe\r\n    const participants = await db('participants')\r\n      .join('participer', 'participants.id_participant', 'participer.id_participant')\r\n      .join('equipes', 'participants.id_participant', 'equipes.id_participant') // Jointure avec la table des √©quipes\r\n      .where('participer.id_evenement', eventId)\r\n      .select(\r\n        'participants.id_participant',\r\n        'equipes.nom_equipe' // On s√©lectionne le nom de l'√©quipe au lieu du nom du participant\r\n      );\r\n\r\n    // 2) Compter les participants\r\n    const nbrParticipant = participants.length;\r\n\r\n    res.status(200).json({\r\n      nbr_participant: nbrParticipant,\r\n      participants // Retourne la liste des participants avec leur √©quipe\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des participants :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n\r\n// Fonction pour cr√©er les poules d'un √©v√©nement (une seule fois par √©v√©nement)\r\nexports.createPools = async (req, res) => {\r\n  const { id_evenement, pools } = req.body;\r\n\r\n  if (!id_evenement || !pools || pools.length === 0) {\r\n    return res.status(400).json({ message: \"Donn√©es invalides. Assurez-vous de s√©lectionner un √©v√©nement et d'ajouter des poules.\" });\r\n  }\r\n\r\n  try {\r\n    // V√©rifier si des poules existent d√©j√† pour cet √©v√©nement\r\n    const existingPools = await db('poules')\r\n      .where({ id_evenement })\r\n      .select('id_poule');\r\n\r\n    console.log(`Poules existantes pour l'√©v√©nement ${id_evenement} :`, existingPools);\r\n\r\n    if (existingPools.length > 0) {\r\n      console.warn(\"Tentative de cr√©ation de poules alors qu'elles existent d√©j√† !\");\r\n      return res.status(409).json({ message: \"Des poules existent d√©j√† pour cet √©v√©nement. Impossible d'en cr√©er de nouvelles.\" });\r\n    }\r\n\r\n    // Ins√©rer les poules dans la table `poules`\r\n    const insertedPools = await db('poules').insert(\r\n      pools.map(nom_poule => ({\r\n        id_evenement,\r\n        nom_poule,\r\n        created_at: new Date()\r\n      }))\r\n    ).returning('*'); // Retourne les nouvelles poules ins√©r√©es\r\n\r\n    res.status(201).json({ message: \"Poules cr√©√©es avec succ√®s.\", pools: insertedPools });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la cr√©ation des poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la cr√©ation des poules.\", error: error.message });\r\n  }\r\n};\r\n\r\n\r\n// Fonction pour attribuer les participants aux poules √©quitablement\r\nexports.assignParticipantsToPools = async (req, res) => {\r\n  const { id_evenement } = req.body;\r\n\r\n  if (!id_evenement) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les poules associ√©es √† cet √©v√©nement\r\n    const pools = await db('poules').where({ id_evenement }).select('id_poule');\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // R√©cup√©rer les participants inscrits √† cet √©v√©nement\r\n    const participants = await db('participer')\r\n      .where({ id_evenement })\r\n      .select('id_participant');\r\n\r\n    if (participants.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun participant trouv√© pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // M√©langer les participants\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]]; // √âchange des √©l√©ments\r\n      }\r\n      return array;\r\n    }\r\n\r\n    const shuffledParticipants = shuffleArray([...participants]);\r\n\r\n    // Calculer la r√©partition √©quitable\r\n    const numPools = pools.length;\r\n    const numParticipants = participants.length;\r\n    const minPerPool = Math.floor(numParticipants / numPools);\r\n    const extraParticipants = numParticipants % numPools;\r\n\r\n    console.log(\"üîπ Total Participants :\", numParticipants);\r\n    console.log(\"üîπ Total Poules :\", numPools);\r\n    console.log(\"üîπ Nombre min de participants par poule :\", minPerPool);\r\n    console.log(\"üîπ Participants suppl√©mentaires √† r√©partir :\", extraParticipants);\r\n\r\n    let assignments = [];\r\n    let index = 0;\r\n    let poolDistribution = {};\r\n\r\n    for (let i = 0; i < numPools; i++) {\r\n      const numToAssign = minPerPool + (i < extraParticipants ? 1 : 0);\r\n      poolDistribution[pools[i].id_poule] = numToAssign;\r\n\r\n      for (let j = 0; j < numToAssign; j++) {\r\n        assignments.push({\r\n          id_poule: pools[i].id_poule,\r\n          id_participant: shuffledParticipants[index].id_participant\r\n        });\r\n        index++;\r\n      }\r\n    }\r\n\r\n    console.log(\"üìå R√©partition des participants par poule :\", poolDistribution);\r\n\r\n    // Ins√©rer les assignations dans la table `poule_participants`\r\n    await db('poule_participants').insert(assignments);\r\n\r\n    res.status(201).json({ message: \"Participants r√©partis avec succ√®s.\", assignments });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de l'affectation des participants :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de l'affectation des participants.\" });\r\n  }\r\n};\r\n\r\n\r\n\r\nexports.getPoolsWithParticipants = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  if (!eventId) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les poules de cet √©v√©nement\r\n    const pools = await db('poules')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_poule', 'nom_poule');\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // R√©cup√©rer les participants avec leur √©quipe pour chaque poule\r\n    const participants = await db('poule_participants')\r\n      .join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant')\r\n      .join('equipes', 'participants.id_participant', '=', 'equipes.id_participant') // Jointure avec la table √©quipes\r\n      .whereIn('poule_participants.id_poule', pools.map(p => p.id_poule))\r\n      .select(\r\n        'poule_participants.id_poule',\r\n        'participants.id_participant',\r\n        'equipes.nom_equipe' // On r√©cup√®re le nom de l'√©quipe\r\n      );\r\n\r\n    // Organiser les participants par poule\r\n    const poolsWithParticipants = pools.map(pool => ({\r\n      id_poule: pool.id_poule,\r\n      nom_poule: pool.nom_poule,\r\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\r\n    }));\r\n\r\n    res.status(200).json({ pools: poolsWithParticipants });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des poules.\" });\r\n  }\r\n};\r\n\r\nexports.getEventsWithPools = async (req, res) => {\r\n  try {\r\n    // R√©cup√©rer l'ID de l'organisateur depuis `verifyToken`\r\n    const organizerId = req.user?.id; // Correction ici\r\n\r\n    if (!organizerId) {\r\n      return res.status(401).json({ message: \"Organisateur non authentifi√©.\" });\r\n    }\r\n\r\n    // V√©rification des logs pour s'assurer que l'ID est bien r√©cup√©r√©\r\n    console.log(\"üîç ID de l'organisateur r√©cup√©r√© :\", organizerId);\r\n\r\n    const eventsWithPools = await db('poules')\r\n      .join('evenement', 'poules.id_evenement', '=', 'evenement.id_evenement')\r\n      .where('evenement.id_organisateur', organizerId) // Correction ici\r\n      .distinct('evenement.id_evenement', 'evenement.nom_event')\r\n      .select();\r\n\r\n    if (eventsWithPools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement avec des poules trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    res.status(200).json(eventsWithPools);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements avec poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\" });\r\n  }\r\n};\r\n\r\nexports.addParticipantManual = async (req, res) => {\r\n  try {\r\n    const { id_evenement, nom_poule, id_participant } = req.body;\r\n\r\n    // 0) V√©rifier que l'id_participant est fourni\r\n    if (!id_participant) {\r\n      return res.status(400).json({\r\n        message: \"L'id du participant est requis.\"\r\n      });\r\n    }\r\n\r\n    // 1) V√©rifier si le participant est d√©j√† inscrit dans une poule pour cet √©v√©nement\r\n    const alreadyAssigned = await db('poule_participants')\r\n      .join('poules', 'poule_participants.id_poule', '=', 'poules.id_poule')\r\n      .where('poules.id_evenement', id_evenement)\r\n      .andWhere('poule_participants.id_participant', id_participant)\r\n      .first();\r\n\r\n    if (alreadyAssigned) {\r\n      return res.status(400).json({\r\n        message: 'Ce participant est d√©j√† inscrit dans une poule pour cet √©v√©nement.'\r\n      });\r\n    }\r\n\r\n    // 2) V√©rifier si la poule existe d√©j√† pour cet √©v√©nement et ce nom\r\n    let existingPoule = await db('poules')\r\n      .where({ id_evenement, nom_poule })\r\n      .first();\r\n\r\n    // 3) Si la poule n'existe pas, la cr√©er\r\n    if (!existingPoule) {\r\n      const [newPouleId] = await db('poules').insert({\r\n        id_evenement,\r\n        nom_poule,\r\n        created_at: new Date()\r\n      });\r\n      existingPoule = { id_poule: newPouleId };\r\n      console.log('Poule cr√©√©e avec ID:', newPouleId);\r\n    } else {\r\n      console.log('Poule existante trouv√©e:', existingPoule);\r\n    }\r\n\r\n    // 4) Ins√©rer dans la table poule_participants\r\n    await db('poule_participants').insert({\r\n      id_poule: existingPoule.id_poule,\r\n      id_participant\r\n    });\r\n\r\n    return res.status(200).json({ message: 'Participant ajout√© avec succ√®s !' });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'ajout manuel :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// Supprime les poules et leurs participants pour un √©v√©nement donn√©\r\nexports.deletePoolsForEvent = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  if (!eventId) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les id des poules de cet √©v√©nement\r\n    const pools = await db('poules').where({ id_evenement: eventId }).select('id_poule');\r\n\r\n    if (pools.length > 0) {\r\n      const poolIds = pools.map(p => p.id_poule);\r\n      // Supprimer d'abord les participants li√©s aux poules\r\n      await db('poule_participants').whereIn('id_poule', poolIds).del();\r\n      // Supprimer ensuite les poules\r\n      await db('poules').where({ id_evenement: eventId }).del();\r\n    }\r\n\r\n    return res.status(200).json({ message: \"Les poules et leurs participants ont √©t√© supprim√©s avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression des poules :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur lors de la suppression des poules.\" });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer les √©v√©nements avec des poules pour un organisateur\r\nexports.getEventsByOrganizerMatch = async (req, res) => {\r\n  try {\r\n    const organizerId = req.user?.id; // L'ID de l'organisateur est r√©cup√©r√© via le token\r\n\r\n    if (!organizerId) {\r\n      return res.status(401).json({ message: \"Organisateur non authentifi√©.\" });\r\n    }\r\n\r\n    const events = await db('evenement')\r\n      .where('id_organisateur', organizerId)\r\n      .select('id_evenement', 'nom_event');\r\n\r\n    if (events.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\" });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer les poules et leurs participants pour un √©v√©nement s√©lectionn√©\r\nexports.getPoolsWithParticipantsMatch = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  if (!eventId) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    const pools = await db('poules')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_poule', 'nom_poule');\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    const participants = await db('poule_participants')\r\n      .join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant')\r\n      .whereIn('poule_participants.id_poule', pools.map(p => p.id_poule))\r\n      .select('poule_participants.id_poule', 'participants.id_participant', 'participants.nom_part');\r\n\r\n    const poolsWithParticipants = pools.map(pool => ({\r\n      id_poule: pool.id_poule,\r\n      nom_poule: pool.nom_poule,\r\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\r\n    }));\r\n\r\n    res.status(200).json(poolsWithParticipants);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des poules.\" });\r\n  }\r\n};\r\n\r\nexports.createMatch = async (req, res) => {\r\n  try {\r\n    const {\r\n      phase,\r\n      participant_a,\r\n      participant_b,\r\n      lieu_rencontre,\r\n      date_rencontre,\r\n      heure_rencontre,\r\n      id_evenement,\r\n      journee,\r\n      tour_final\r\n    } = req.body;\r\n\r\n    // V√©rification des champs essentiels\r\n    if (!phase || !participant_a || !participant_b || !lieu_rencontre || !date_rencontre || !heure_rencontre || !id_evenement) {\r\n      return res.status(400).json({ message: \"Tous les champs essentiels sont requis.\" });\r\n    }\r\n\r\n    if (![\"Barrage\", \"√âliminatoire\", \"Finale\"].includes(phase) && !journee) {\r\n      return res.status(400).json({ message: \"Le champ 'journee' est requis.\" });\r\n    }\r\n\r\n    if (![\"Groupe\", \"Qualification\", \"Classement\", \"Barrage\"].includes(phase) && !tour_final) {\r\n      return res.status(400).json({ message: \"Le champ 'tour_final' est requis.\" });\r\n    }\r\n\r\n    // üîç R√©cup√©rer l'ID des √©quipes\r\n    const equipeA = await db(\"equipes\").where({ nom_equipe: participant_a }).first();\r\n    const equipeB = await db(\"equipes\").where({ nom_equipe: participant_b }).first();\r\n\r\n    if (!equipeA || !equipeB) {\r\n      return res.status(400).json({ message: \"Les √©quipes s√©lectionn√©es n'existent pas.\" });\r\n    }\r\n\r\n    // üîç R√©cup√©rer les poules des √©quipes A et B\r\n    const poulesA = await db(\"poule_participants\")\r\n      .where({ id_participant: equipeA.id_participant })\r\n      .pluck(\"id_poule\");\r\n\r\n    const poulesB = await db(\"poule_participants\")\r\n      .where({ id_participant: equipeB.id_participant })\r\n      .pluck(\"id_poule\");\r\n\r\n    if (!poulesA.length || !poulesB.length) {\r\n      return res.status(400).json({ message: \"Impossible de trouver la poule des participants.\" });\r\n    }\r\n\r\n    // üîç V√©rifier si une poule est commune aux deux participants\r\n    const pouleCommune = poulesA.find(poule => poulesB.includes(poule));\r\n\r\n    if (!pouleCommune) {\r\n      return res.status(400).json({ message: \"Les participants ne sont pas dans la m√™me poule.\" });\r\n    }\r\n\r\n    // üîç V√©rifier que cette poule appartient bien √† l'√©v√©nement donn√©\r\n    const pouleInfo = await db(\"poules\")\r\n      .where({ id_poule: pouleCommune, id_evenement })\r\n      .first();\r\n\r\n    if (!pouleInfo) {\r\n      return res.status(400).json({ message: \"La poule des participants doit √™tre li√©e √† l'√©v√©nement.\" });\r\n    }\r\n\r\n    // üîπ Ins√©rer la rencontre\r\n    const matchData = {\r\n      phase,\r\n      participant_a: equipeA.nom_equipe,\r\n      participant_b: equipeB.nom_equipe,\r\n      lieu_rencontre,\r\n      date_rencontre,\r\n      heure_rencontre,\r\n      id_evenement,\r\n      journee: journee || null,\r\n      tour_final: tour_final || null,\r\n      id_poule: pouleCommune\r\n    };\r\n\r\n    // Ins√©rer la rencontre\r\n    const [newMatchId] = await db(\"rencontre\").insert(matchData);\r\n    console.log(`‚úÖ Match ins√©r√© avec succ√®s (ID: ${newMatchId})`);\r\n\r\n    // üîπ R√©cup√©rer la rencontre nouvellement cr√©√©e\r\n    const newMatch = await db(\"rencontre\").where({ id_rencontre: newMatchId }).first();\r\n\r\n    res.status(201).json({ message: \"Rencontre cr√©√©e avec succ√®s.\", match: newMatch });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la cr√©ation de la rencontre :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la cr√©ation de la rencontre.\" });\r\n  }\r\n};\r\n\r\n\r\nexports.getMatchesByEvent = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    const matches = await db(\"rencontre\")\r\n      .select(\r\n        \"id_rencontre\",\r\n        \"participant_a\",\r\n        \"participant_b\",\r\n        \"date_rencontre\",\r\n        \"heure_rencontre\",\r\n        \"lieu_rencontre\",\r\n        \"phase\",\r\n        \"journee\",\r\n        \"tour_final\"\r\n      )\r\n      .where(\"id_evenement\", eventId);\r\n\r\n    // Groupement des matchs par phase/journ√©e/tour final\r\n    const groupedMatches = matches.reduce((acc, match) => {\r\n      const key = `${match.phase}_${match.journee || \"0\"}_${match.tour_final || \"0\"}`;\r\n\r\n      if (!acc[key]) {\r\n        acc[key] = {\r\n          phase: match.phase,\r\n          journee: match.journee,\r\n          tour_final: match.tour_final,\r\n          matches: [],\r\n        };\r\n      }\r\n\r\n      acc[key].matches.push({\r\n        id_rencontre: match.id_rencontre,\r\n        participant_a: match.participant_a, // D√©j√† stock√© sous forme de nom\r\n        participant_b: match.participant_b, // D√©j√† stock√© sous forme de nom\r\n        date_rencontre: match.date_rencontre,\r\n        heure_rencontre: match.heure_rencontre,\r\n        lieu_rencontre: match.lieu_rencontre,\r\n      });\r\n\r\n      return acc;\r\n    }, {});\r\n\r\n    res.status(200).json(Object.values(groupedMatches));\r\n\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\" });\r\n  }\r\n};\r\n\r\n\r\n// R√©cup√©rer les infos du participant avec son √©quipe\r\nexports.getParticipantById = async (req, res) => {\r\n  const { participantId } = req.params;\r\n\r\n  if (!participantId) {\r\n    return res.status(400).json({ message: \"ID du participant requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les infos du participant avec son √©quipe\r\n    const participant = await db('participants as p')\r\n      .leftJoin('equipes as e', 'p.id_participant', 'e.id_participant')\r\n      .where({ 'p.id_participant': participantId })\r\n      .select(\r\n        'p.*',\r\n        'e.nom_equipe',\r\n        'e.categorie_equipe'\r\n      )\r\n      .first();\r\n\r\n    if (!participant) {\r\n      return res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n    }\r\n\r\n    res.status(200).json(participant);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration du participant:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration du participant.\" });\r\n  }\r\n};\r\n\r\n// Suppression d'une rencontre par ID\r\nexports.deleteMatch = async (req, res) => {\r\n  const { matchId } = req.params;\r\n\r\n  try {\r\n    const deletedRows = await db('rencontre').where('id_rencontre', matchId).del();\r\n\r\n    if (deletedRows === 0) {\r\n      return res.status(404).json({ message: \"Rencontre non trouv√©e.\" });\r\n    }\r\n\r\n    res.status(200).json({ message: \"Rencontre supprim√©e avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression de la rencontre :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la suppression de la rencontre.\" });\r\n  }\r\n};\r\n\r\n\r\n// Fonction pour r√©cup√©rer toutes les rencontres de tous les √©v√©nements d'un organisateur\r\nexports.getAllCalendarMatches = async (req, res) => {\r\n  try {\r\n    // R√©cup√©rer tous les √©v√©nements de l'organisateur\r\n    const events = await db('evenement')\r\n      .where('id_organisateur', req.user.id)  // On suppose que l'organisateur est dans req.user.id\r\n      .select('id_evenement');  // On ne s√©lectionne que les ID des √©v√©nements\r\n\r\n    if (events.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    // R√©cup√©rer toutes les rencontres de tous les √©v√©nements\r\n    const allMatches = [];\r\n\r\n    for (const event of events) {\r\n      const matches = await db('rencontre')\r\n        .where({ id_evenement: event.id_evenement })\r\n        .select('*')\r\n        .orderBy('date_rencontre', 'asc')\r\n        .orderBy('heure_rencontre', 'asc');\r\n      allMatches.push(...matches);\r\n    }\r\n\r\n    // V√©rifier si la phase \"Aller-Retour\" est bien pr√©sente dans les r√©sultats\r\n    console.log(matches);  // V√©rifiez dans la console si la phase est correcte\r\n\r\n    if (allMatches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e.\" });\r\n    }\r\n\r\n    res.status(200).json(allMatches);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration du calendrier des rencontres :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\" });\r\n  }\r\n};\r\n\r\nexports.getCalendarMatchesByEvent = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    const matches = await db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_rencontre', 'date_rencontre', 'heure_rencontre',\r\n        'participant_a', 'participant_b', 'lieu_rencontre',\r\n        'phase', 'journee', 'tour_final');\r\n\r\n    console.log(\"Donn√©es envoy√©es par l'API :\", matches); // üîç V√©rification des donn√©es avant envoi\r\n\r\n    res.status(200).json(matches);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration du calendrier des rencontres.\" });\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n// recuperation de toute participant \r\nexports.getAllParticipantsByOrganizer = async (req, res) => {\r\n  const organizerId = req.user?.id; // R√©cup√©rer l'ID de l'organisateur authentifi√©\r\n\r\n  if (!organizerId) {\r\n    return res.status(403).json({ message: \"L'ID de l'organisateur est introuvable.\" });\r\n  }\r\n\r\n  try {\r\n    // Jointure entre `evenements`, `participer` et `participants`\r\n    const participants = await db('participer')\r\n      .join('participants', 'participer.id_participant', '=', 'participants.id_participant')\r\n      .join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement') // Correction ici\r\n      .select(\r\n        'participants.id_participant',\r\n        'participants.nom_part',\r\n        'evenement.nom_event',\r\n        'participer.id_evenement'\r\n      )\r\n      .where('evenement.id_organisateur', organizerId); // Filtrer par organisateur\r\n\r\n    if (!participants || participants.length === 0) {\r\n      return res.status(404).json({ message: 'Aucun participant trouv√© pour vos √©v√©nements.' });\r\n    }\r\n\r\n    res.status(200).json(participants);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// **************************Resultats*****************************\r\n// pour r√©cup√©rer les informations d'un √©v√©nement s√©lectionn√©\r\n\r\nexports.getEventResultats = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n    console.log(\"üîç eventId re√ßu :\", eventId);\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    // üîπ R√©cup√©ration du nom de l'√©v√©nement\r\n    const event = await db('evenement')\r\n      .where({ id_evenement: eventId })\r\n      .select('nom_event')\r\n      .first();\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: \"√âv√©nement non trouv√©.\" });\r\n    }\r\n\r\n    // üîπ R√©cup√©ration des diff√©rentes phases, journ√©es et tours finaux associ√©s √† l'√©v√©nement\r\n    const matchInfo = await db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('phase', 'journee', 'tour_final')\r\n      .groupBy('phase', 'journee', 'tour_final')  // üî• On r√©cup√®re toutes les valeurs uniques\r\n\r\n    console.log(\"‚úÖ Donn√©es matchInfo :\", matchInfo);\r\n\r\n    if (matchInfo.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    res.status(200).json({\r\n      nom_event: event.nom_event,\r\n      details: matchInfo // üî• On envoie un tableau contenant toutes les phases, journ√©es et tours finaux\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\", error: error.message });\r\n  }\r\n};\r\n\r\n// pour r√©cup√©rer les rencontres filtr√©es :\r\nexports.getFilteredMatchesByEvent = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n    const { phase, journee, tour_final } = req.query;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    let query = db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_rencontre', 'participant_a', 'participant_b', 'phase', 'journee', 'tour_final');\r\n\r\n    // Filtrage dynamique en fonction des param√®tres re√ßus\r\n    if (phase) {\r\n      query = query.where({ phase });\r\n    }\r\n    if (journee) {\r\n      query = query.where({ journee });\r\n    }\r\n    if (tour_final) {\r\n      query = query.where({ tour_final });\r\n    }\r\n\r\n    const matches = await query;\r\n\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e pour ces crit√®res.\" });\r\n    }\r\n\r\n    res.status(200).json(matches);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des rencontres filtr√©es.\" });\r\n  }\r\n};\r\n// pour enregistrer les r√©sultats des rencontres\r\nexports.saveMatchResults = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n    let { results, point_victoire, point_defaite, point_matchnul } = req.body;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"L'ID de l'√©v√©nement est requis.\" });\r\n    }\r\n\r\n    if (!results || results.length === 0) {\r\n      return res.status(400).json({ message: \"Aucun r√©sultat fourni.\" });\r\n    }\r\n\r\n    // Date actuelle pour l'enregistrement\r\n    const date_resultat = new Date();\r\n    const insertedResults = [];\r\n    const ignoredResults = [];\r\n\r\n    for (const match of results) {\r\n      const { id_rencontre, score_A, score_B, phase } = match;\r\n\r\n      // üîπ V√©rification des phases qui ne doivent pas avoir de points\r\n      if ([\"Finale\", \"Barrage\", \"Aller Retour\"].includes(phase)) {\r\n        point_victoire = null;\r\n        point_defaite = null;\r\n        point_matchnul = null;\r\n      }\r\n\r\n      // V√©rifier si un r√©sultat existe d√©j√† pour ce match et cet √©v√©nement\r\n      const existingResult = await db('resultat')\r\n        .where({ id_rencontre, id_evenement: eventId })\r\n        .first();\r\n\r\n      if (existingResult) {\r\n        // üîπ Ne pas ins√©rer et ajouter √† la liste des ignor√©s\r\n        ignoredResults.push({ id_rencontre, message: \"R√©sultat d√©j√† existant\" });\r\n      } else {\r\n        // üîπ Ins√©rer un nouveau r√©sultat\r\n        const [id_resultat] = await db('resultat').insert({\r\n          id_rencontre,\r\n          id_evenement: eventId,\r\n          score_A,\r\n          score_B,\r\n          point_victoire,\r\n          point_defaite,\r\n          point_matchnul,\r\n          date_resultat\r\n        });\r\n\r\n        insertedResults.push({ id_resultat, id_rencontre, score_A, score_B, status: \"Ins√©r√©\" });\r\n      }\r\n    }\r\n\r\n    res.status(201).json({\r\n      message: \"R√©sultats trait√©s\",\r\n      inserted: insertedResults,\r\n      ignored: ignoredResults\r\n    });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur lors de l'enregistrement des r√©sultats :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de l'enregistrement des r√©sultats.\" });\r\n  }\r\n};\r\n\r\n// ************************** Liste Resultats*****************************\r\n// R√©cup√©rer les d√©tails d'un √©v√©nement et ses phases\r\nexports.getEventResultatList = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    // V√©rifier si l'√©v√©nement existe\r\n    const event = await db('evenement')\r\n      .where({ id_evenement: eventId })\r\n      .select('nom_event')\r\n      .first();\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: \"√âv√©nement non trouv√©.\" });\r\n    }\r\n\r\n    // R√©cup√©rer les informations de rencontre li√©es √† cet √©v√©nement\r\n    const matchInfo = await db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('phase', 'journee', 'tour_final')\r\n      .first(); // On r√©cup√®re un seul enregistrement\r\n\r\n    res.status(200).json({\r\n      nom_event: event.nom_event,\r\n      phase: matchInfo?.phase || 'N/A',\r\n      journee: matchInfo?.journee || 'N/A',\r\n      tour_final: matchInfo?.tour_final || 'N/A'\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\", error: error.message });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer les r√©sultats des matchs avec jointure\r\nexports.getFilteredMatchesResultatList = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    let matches = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement')\r\n      .select(\r\n        'evenement.nom_event',\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.tour_final',\r\n        'rencontre.date_rencontre',\r\n        'rencontre.heure_rencontre',\r\n        'rencontre.participant_a',\r\n        'rencontre.participant_b',\r\n        'resultat.score_A',\r\n        'resultat.score_B',\r\n        'rencontre.lieu_rencontre'\r\n      )\r\n      .where('resultat.id_evenement', eventId)\r\n      .orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\r\n\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun r√©sultat trouv√© pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\r\n    let groupedResults = {};\r\n    matches.forEach(match => {\r\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\r\n\r\n      if (!groupedResults[groupKey]) {\r\n        groupedResults[groupKey] = [];\r\n      }\r\n      groupedResults[groupKey].push(match);\r\n    });\r\n\r\n    res.status(200).json(groupedResults);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\", error: error.message });\r\n  }\r\n};\r\n\r\n\r\n\r\n// ‚úÖ R√©cup√©rer les √©v√©nements SANS authentification\r\nexports.getPublicEvents = async (req, res) => {\r\n  try {\r\n    const events = await db('evenement').select('*'); // R√©cup√©rer tous les √©v√©nements\r\n    console.log(\"√âv√©nements r√©cup√©r√©s :\", events);\r\n    res.json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// ********************************* Tous les r√©sultats des matchs *********************************\r\n// R√©cup√©rer les r√©sultats de tous les √©v√©nements\r\nexports.getAllMatchesResultatList = async (req, res) => {\r\n  try {\r\n    let matches = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement')\r\n      .select(\r\n        'evenement.nom_event',\r\n        'rencontre.id_rencontre',\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.tour_final',\r\n        'rencontre.date_rencontre',\r\n        'rencontre.heure_rencontre',\r\n        'rencontre.participant_a',\r\n        'rencontre.participant_b',\r\n        'resultat.id_resultat', // ‚úÖ Ajout de `id_resultat`\r\n        'resultat.score_A',\r\n        'resultat.score_B',\r\n        'rencontre.lieu_rencontre'\r\n      )\r\n      .orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\r\n\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun r√©sultat trouv√©.\" });\r\n    }\r\n\r\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\r\n    let groupedResults = {};\r\n    matches.forEach(match => {\r\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\r\n\r\n      if (!groupedResults[groupKey]) {\r\n        groupedResults[groupKey] = [];\r\n      }\r\n      groupedResults[groupKey].push(match);\r\n    });\r\n\r\n    res.status(200).json(groupedResults);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\", error: error.message });\r\n  }\r\n};\r\n\r\n// Contr√¥leur pour la mise √† jour du score\r\nexports.updateMatchScore = async (req, res) => {\r\n  try {\r\n    const { matchId } = req.params;\r\n    const { score_A, score_B } = req.body;\r\n\r\n    // V√©rification des valeurs\r\n    if (score_A === undefined || score_B === undefined) {\r\n      return res.status(400).json({ message: \"Les scores sont requis.\" });\r\n    }\r\n\r\n    // Mise √† jour du score dans la base de donn√©es\r\n    const updated = await db('resultat')\r\n      .where({ id_rencontre: matchId })\r\n      .update({ score_A, score_B });\r\n\r\n    if (updated) {\r\n      res.status(200).json({ message: \"Score mis √† jour avec succ√®s !\" });\r\n    } else {\r\n      res.status(404).json({ message: \"Match non trouv√©.\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la mise √† jour du score :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la mise √† jour du score.\" });\r\n  }\r\n};\r\n\r\n// Contr√¥leur pour supprimer un r√©sultat de match via `id_resultat`\r\nexports.deleteMatchResult = async (req, res) => {\r\n  try {\r\n    const { resultId } = req.params; // On r√©cup√®re `id_resultat` et non `id_rencontre`\r\n\r\n    // V√©rifier si le r√©sultat existe\r\n    const resultExists = await db('resultat').where({ id_resultat: resultId }).first();\r\n\r\n    if (!resultExists) {\r\n      return res.status(404).json({ message: \"Le r√©sultat du match n'existe pas.\" });\r\n    }\r\n\r\n    // Suppression du r√©sultat\r\n    await db('resultat').where({ id_resultat: resultId }).del();\r\n\r\n    res.status(200).json({ message: \"R√©sultat supprim√© avec succ√®s !\" });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la suppression du r√©sultat :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la suppression du r√©sultat.\" });\r\n  }\r\n};\r\n// ********************************* Classement *********************************\r\n\r\nexports.getClassement = async (req, res) => {\r\n  try {\r\n    const phasesAExclure = [\"Barrage\", \"√âliminatoire\", \"Aller Retour\", \"Finale\"];\r\n\r\n    let query = db(\"resultat\")\r\n      .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\r\n      .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n      .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\r\n      .select(\r\n        \"evenement.nom_event\",\r\n        \"evenement.nom_sport\",\r\n        \"rencontre.id_evenement\",\r\n        \"rencontre.phase\",\r\n        \"rencontre.journee\",\r\n        \"rencontre.id_poule\",\r\n        \"poules.nom_poule\",\r\n        \"rencontre.participant_a\",\r\n        \"rencontre.participant_b\",\r\n        \"resultat.score_A\",\r\n        \"resultat.score_B\",\r\n        \"resultat.point_victoire\",\r\n        \"resultat.point_matchnul\",\r\n        \"resultat.point_defaite\"\r\n      )\r\n      .whereNotIn(\"rencontre.phase\", phasesAExclure);\r\n\r\n    const resultats = await query;\r\n\r\n    if (!resultats.length) {\r\n      return res.status(200).json({ classement: {} });\r\n    }\r\n\r\n    let classementParEvenement = {};\r\n\r\n    resultats.forEach((match) => {\r\n      const eventKey = match.nom_event;\r\n      const phaseKey = `Phase: ${match.phase}`;\r\n      const journeeKey = `Journ√©e ${match.journee}`;\r\n      const pouleKey = `Poule ${match.nom_poule}`;\r\n      const sport = match.nom_sport.toLowerCase();\r\n\r\n      if (!classementParEvenement[eventKey]) {\r\n        classementParEvenement[eventKey] = {};\r\n      }\r\n\r\n      if (!classementParEvenement[eventKey][phaseKey]) {\r\n        classementParEvenement[eventKey][phaseKey] = {};\r\n      }\r\n\r\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey]) {\r\n        classementParEvenement[eventKey][phaseKey][journeeKey] = {};\r\n      }\r\n\r\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey]) {\r\n        classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey] = [];\r\n      }\r\n\r\n      [match.participant_a, match.participant_b].forEach((equipe, i) => {\r\n        const score = i === 0 ? match.score_A : match.score_B;\r\n        const adversaireScore = i === 0 ? match.score_B : match.score_A;\r\n        const victoire = score > adversaireScore ? 1 : 0;\r\n        const defaite = score < adversaireScore ? 1 : 0;\r\n        const matchJoue = 1;\r\n\r\n        let points = 0;\r\n        if (score > adversaireScore) {\r\n          points = match.point_victoire;\r\n        } else if (score === adversaireScore) {\r\n          points = match.point_matchnul;\r\n        } else {\r\n          points = match.point_defaite;\r\n        }\r\n\r\n        const team = classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].find(\r\n          (equipeData) => equipeData.nom_equipe === equipe\r\n        );\r\n\r\n        if (team) {\r\n          if (sport === \"basketball\") {\r\n            team.mj += matchJoue;\r\n            team.v += victoire;\r\n            team.d += defaite;\r\n            team.points_marques += score;\r\n            team.points_concedes += adversaireScore;\r\n            team.difference_points += score - adversaireScore;\r\n          } else if (sport === \"p√©tanque\") {\r\n            team.points += points;\r\n            team.points_marques += score;\r\n            team.points_concedes += adversaireScore;\r\n            team.difference_points += score - adversaireScore;\r\n          } else {\r\n            team.points += points;\r\n            team.buts_marques += score;\r\n            team.buts_encaisses += adversaireScore;\r\n            team.difference_buts += score - adversaireScore;\r\n          }\r\n        } else {\r\n          classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].push({\r\n            nom_equipe: equipe,\r\n            points: points,\r\n            buts_marques: sport !== \"basketball\" ? score : undefined,\r\n            buts_encaisses: sport !== \"basketball\" ? adversaireScore : undefined,\r\n            difference_buts: sport !== \"basketball\" ? score - adversaireScore : undefined,\r\n            points_marques: sport === \"basketball\" || sport === \"p√©tanque\" ? score : undefined,\r\n            points_concedes: sport === \"basketball\" || sport === \"p√©tanque\" ? adversaireScore : undefined,\r\n            difference_points: sport === \"basketball\" || sport === \"p√©tanque\" ? score - adversaireScore : undefined,\r\n            mj: sport === \"basketball\" ? matchJoue : undefined,\r\n            v: sport === \"basketball\" ? victoire : undefined,\r\n            d: sport === \"basketball\" ? defaite : undefined\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    // Ajout du Classement G√©n√©ral\r\n    Object.keys(classementParEvenement).forEach(eventKey => {\r\n      let classementGeneral = {};\r\n\r\n      Object.keys(classementParEvenement[eventKey]).forEach(phaseKey => {\r\n        Object.keys(classementParEvenement[eventKey][phaseKey]).forEach(journeeKey => {\r\n          Object.keys(classementParEvenement[eventKey][phaseKey][journeeKey]).forEach(pouleKey => {\r\n            classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].forEach(team => {\r\n              const equipeKey = team.nom_equipe;\r\n              if (!classementGeneral[equipeKey]) {\r\n                classementGeneral[equipeKey] = { ...team };\r\n              } else {\r\n                Object.keys(team).forEach(stat => {\r\n                  if (typeof team[stat] === \"number\") {\r\n                    classementGeneral[equipeKey][stat] += team[stat];\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      classementParEvenement[eventKey][\"Classement G√©n√©ral\"] = {\r\n        \"Classement G√©n√©ral\": Object.values(classementGeneral).sort((a, b) => b.points - a.points)\r\n      };\r\n    });\r\n\r\n    res.status(200).json({ classement: classementParEvenement });\r\n  } catch (error) {\r\n    console.error(\"Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur\", error });\r\n  }\r\n};\r\n\r\n//==================== gestion ticket par l'organisateur =====================\r\n\r\n// üìå R√©cup√©rer les ventes de billets de l‚Äôorganisateur\r\nexports.getOrganizerTickets = async (req, res) => {\r\n  const { organizerId } = req.params;\r\n  try {\r\n      const sales = await db(\"achatbillets\")\r\n          .join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\")\r\n          .where(\"evenement.id_organisateur\", organizerId)\r\n          .select(\r\n              \"achatbillets.nom_evenement\",\r\n              \"achatbillets.type_ticket\",\r\n              \"achatbillets.quantite as quantite\",\r\n              \"achatbillets.total_billets_vendus\",\r\n              \"achatbillets.montant_collecte\",\r\n              \"achatbillets.prix_unitaire\",\r\n              db.raw(\"achatbillets.quantite - achatbillets.total_billets_vendus AS quantite_restante\")\r\n          );\r\n\r\n      res.json(sales);\r\n  } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de la r√©cup√©ration des billets :\", error);\r\n      res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n// üì• Exporter les ventes de billets en CSV\r\nexports.exportOrganizerTickets = async (req, res) => {\r\n  const { organizerId } = req.params;\r\n  try {\r\n      const sales = await db(\"achatbillets\")\r\n          .join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\")\r\n          .where(\"evenement.id_organisateur\", organizerId)\r\n          .select(\r\n              \"achatbillets.nom_evenement\",\r\n              \"achatbillets.type_ticket\",\r\n              \"achatbillets.quantite\",\r\n              \"achatbillets.total_billets_vendus\",\r\n              \"achatbillets.montant_collecte\",\r\n              \"achatbillets.prix_unitaire\"\r\n          );\r\n\r\n      const fields = [\"nom_evenement\", \"type_ticket\", \"quantite\", \"total_billets_vendus\", \"montant_collecte\", \"prix_unitaire\"];\r\n      const json2csvParser = new Parser({ fields });\r\n      const csv = json2csvParser.parse(sales);\r\n\r\n      res.header(\"Content-Type\", \"text/csv\");\r\n      res.attachment(\"ventes_billets.csv\");\r\n      res.send(csv);\r\n  } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de l'exportation CSV :\", error);\r\n      res.status(500).json({ message: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n\r\n// R√©cup√©rer les √©v√©nements cr√©√©s par un organisateur\r\nexports.getEventsByOrganizer = async (req, res) => {\r\n  const organizerId = req.user.id; // R√©cup√©rer l'ID de l'organisateur connect√©\r\n\r\n  try {\r\n    const events = await db('evenement').where({ id_organisateur: organizerId });\r\n\r\n    if (!events.length) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\nexports.getParticipantsAndCountByEvent = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  try {\r\n    // 1) R√©cup√©rer les participants avec le nom de leur √©quipe\r\n    const participants = await db('participants')\r\n      .join('participer', 'participants.id_participant', 'participer.id_participant')\r\n      .join('equipes', 'participants.id_participant', 'equipes.id_participant') // Jointure avec la table des √©quipes\r\n      .where('participer.id_evenement', eventId)\r\n      .select(\r\n        'participants.id_participant',\r\n        'equipes.nom_equipe' // On s√©lectionne le nom de l'√©quipe au lieu du nom du participant\r\n      );\r\n\r\n    // 2) Compter les participants\r\n    const nbrParticipant = participants.length;\r\n\r\n    res.status(200).json({\r\n      nbr_participant: nbrParticipant,\r\n      participants // Retourne la liste des participants avec leur √©quipe\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des participants :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n\r\n// Fonction pour cr√©er les poules d'un √©v√©nement (une seule fois par √©v√©nement)\r\nexports.createPools = async (req, res) => {\r\n  const { id_evenement, pools } = req.body;\r\n\r\n  if (!id_evenement || !pools || pools.length === 0) {\r\n    return res.status(400).json({ message: \"Donn√©es invalides. Assurez-vous de s√©lectionner un √©v√©nement et d'ajouter des poules.\" });\r\n  }\r\n\r\n  try {\r\n    // V√©rifier si des poules existent d√©j√† pour cet √©v√©nement\r\n    const existingPools = await db('poules')\r\n      .where({ id_evenement })\r\n      .select('id_poule');\r\n\r\n    console.log(`Poules existantes pour l'√©v√©nement ${id_evenement} :`, existingPools);\r\n\r\n    if (existingPools.length > 0) {\r\n      console.warn(\"Tentative de cr√©ation de poules alors qu'elles existent d√©j√† !\");\r\n      return res.status(409).json({ message: \"Des poules existent d√©j√† pour cet √©v√©nement. Impossible d'en cr√©er de nouvelles.\" });\r\n    }\r\n\r\n    // Ins√©rer les poules dans la table `poules`\r\n    const insertedPools = await db('poules').insert(\r\n      pools.map(nom_poule => ({\r\n        id_evenement,\r\n        nom_poule,\r\n        created_at: new Date()\r\n      }))\r\n    ).returning('*'); // Retourne les nouvelles poules ins√©r√©es\r\n\r\n    res.status(201).json({ message: \"Poules cr√©√©es avec succ√®s.\", pools: insertedPools });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la cr√©ation des poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la cr√©ation des poules.\", error: error.message });\r\n  }\r\n};\r\n\r\n// Fonction pour attribuer les participants aux poules √©quitablement\r\nexports.assignParticipantsToPools = async (req, res) => {\r\n  const { id_evenement } = req.body;\r\n\r\n  if (!id_evenement) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les poules associ√©es √† cet √©v√©nement\r\n    const pools = await db('poules').where({ id_evenement }).select('id_poule');\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // R√©cup√©rer les participants inscrits √† cet √©v√©nement\r\n    const participants = await db('participer')\r\n      .where({ id_evenement })\r\n      .select('id_participant');\r\n\r\n    if (participants.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun participant trouv√© pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // M√©langer les participants\r\n    function shuffleArray(array) {\r\n      for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]]; // √âchange des √©l√©ments\r\n      }\r\n      return array;\r\n    }\r\n\r\n    const shuffledParticipants = shuffleArray([...participants]);\r\n\r\n    // Calculer la r√©partition √©quitable\r\n    const numPools = pools.length;\r\n    const numParticipants = participants.length;\r\n    const minPerPool = Math.floor(numParticipants / numPools);\r\n    const extraParticipants = numParticipants % numPools;\r\n\r\n    console.log(\"üîπ Total Participants :\", numParticipants);\r\n    console.log(\"üîπ Total Poules :\", numPools);\r\n    console.log(\"üîπ Nombre min de participants par poule :\", minPerPool);\r\n    console.log(\"üîπ Participants suppl√©mentaires √† r√©partir :\", extraParticipants);\r\n\r\n    let assignments = [];\r\n    let index = 0;\r\n    let poolDistribution = {};\r\n\r\n    for (let i = 0; i < numPools; i++) {\r\n      const numToAssign = minPerPool + (i < extraParticipants ? 1 : 0);\r\n      poolDistribution[pools[i].id_poule] = numToAssign;\r\n\r\n      for (let j = 0; j < numToAssign; j++) {\r\n        assignments.push({\r\n          id_poule: pools[i].id_poule,\r\n          id_participant: shuffledParticipants[index].id_participant\r\n        });\r\n        index++;\r\n      }\r\n    }\r\n\r\n    console.log(\"üìå R√©partition des participants par poule :\", poolDistribution);\r\n\r\n    // Ins√©rer les assignations dans la table `poule_participants`\r\n    await db('poule_participants').insert(assignments);\r\n\r\n    res.status(201).json({ message: \"Participants r√©partis avec succ√®s.\", assignments });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de l'affectation des participants :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de l'affectation des participants.\" });\r\n  }\r\n};\r\n\r\n\r\n\r\nexports.getPoolsWithParticipants = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  if (!eventId) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les poules de cet √©v√©nement\r\n    const pools = await db('poules')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_poule', 'nom_poule');\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // R√©cup√©rer les participants avec leur √©quipe pour chaque poule\r\n    const participants = await db('poule_participants')\r\n      .join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant')\r\n      .join('equipes', 'participants.id_participant', '=', 'equipes.id_participant') // Jointure avec la table √©quipes\r\n      .whereIn('poule_participants.id_poule', pools.map(p => p.id_poule))\r\n      .select(\r\n        'poule_participants.id_poule',\r\n        'participants.id_participant',\r\n        'equipes.nom_equipe' // On r√©cup√®re le nom de l'√©quipe\r\n      );\r\n\r\n    // Organiser les participants par poule\r\n    const poolsWithParticipants = pools.map(pool => ({\r\n      id_poule: pool.id_poule,\r\n      nom_poule: pool.nom_poule,\r\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\r\n    }));\r\n\r\n    res.status(200).json({ pools: poolsWithParticipants });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des poules.\" });\r\n  }\r\n};\r\n\r\nexports.getEventsWithPools = async (req, res) => {\r\n  try {\r\n    // R√©cup√©rer l'ID de l'organisateur depuis `verifyToken`\r\n    const organizerId = req.user?.id; // Correction ici\r\n\r\n    if (!organizerId) {\r\n      return res.status(401).json({ message: \"Organisateur non authentifi√©.\" });\r\n    }\r\n\r\n    // V√©rification des logs pour s'assurer que l'ID est bien r√©cup√©r√©\r\n    console.log(\"üîç ID de l'organisateur r√©cup√©r√© :\", organizerId);\r\n\r\n    const eventsWithPools = await db('poules')\r\n      .join('evenement', 'poules.id_evenement', '=', 'evenement.id_evenement')\r\n      .where('evenement.id_organisateur', organizerId) // Correction ici\r\n      .distinct('evenement.id_evenement', 'evenement.nom_event')\r\n      .select();\r\n\r\n    if (eventsWithPools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement avec des poules trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    res.status(200).json(eventsWithPools);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements avec poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\" });\r\n  }\r\n};\r\n\r\nexports.addParticipantManual = async (req, res) => {\r\n  try {\r\n    const { id_evenement, nom_poule, id_participant } = req.body;\r\n\r\n    // 0) V√©rifier que l'id_participant est fourni\r\n    if (!id_participant) {\r\n      return res.status(400).json({\r\n        message: \"L'id du participant est requis.\"\r\n      });\r\n    }\r\n\r\n    // 1) V√©rifier si le participant est d√©j√† inscrit dans une poule pour cet √©v√©nement\r\n    const alreadyAssigned = await db('poule_participants')\r\n      .join('poules', 'poule_participants.id_poule', '=', 'poules.id_poule')\r\n      .where('poules.id_evenement', id_evenement)\r\n      .andWhere('poule_participants.id_participant', id_participant)\r\n      .first();\r\n\r\n    if (alreadyAssigned) {\r\n      return res.status(400).json({\r\n        message: 'Ce participant est d√©j√† inscrit dans une poule pour cet √©v√©nement.'\r\n      });\r\n    }\r\n\r\n    // 2) V√©rifier si la poule existe d√©j√† pour cet √©v√©nement et ce nom\r\n    let existingPoule = await db('poules')\r\n      .where({ id_evenement, nom_poule })\r\n      .first();\r\n\r\n    // 3) Si la poule n'existe pas, la cr√©er\r\n    if (!existingPoule) {\r\n      const [newPouleId] = await db('poules').insert({\r\n        id_evenement,\r\n        nom_poule,\r\n        created_at: new Date()\r\n      });\r\n      existingPoule = { id_poule: newPouleId };\r\n      console.log('Poule cr√©√©e avec ID:', newPouleId);\r\n    } else {\r\n      console.log('Poule existante trouv√©e:', existingPoule);\r\n    }\r\n\r\n    // 4) Ins√©rer dans la table poule_participants\r\n    await db('poule_participants').insert({\r\n      id_poule: existingPoule.id_poule,\r\n      id_participant\r\n    });\r\n\r\n    return res.status(200).json({ message: 'Participant ajout√© avec succ√®s !' });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'ajout manuel :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n\r\n// Supprime les poules et leurs participants pour un √©v√©nement donn√©\r\nexports.deletePoolsForEvent = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  if (!eventId) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les id des poules de cet √©v√©nement\r\n    const pools = await db('poules').where({ id_evenement: eventId }).select('id_poule');\r\n\r\n    if (pools.length > 0) {\r\n      const poolIds = pools.map(p => p.id_poule);\r\n      // Supprimer d'abord les participants li√©s aux poules\r\n      await db('poule_participants').whereIn('id_poule', poolIds).del();\r\n      // Supprimer ensuite les poules\r\n      await db('poules').where({ id_evenement: eventId }).del();\r\n    }\r\n\r\n    return res.status(200).json({ message: \"Les poules et leurs participants ont √©t√© supprim√©s avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression des poules :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur lors de la suppression des poules.\" });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer les √©v√©nements avec des poules pour un organisateur\r\nexports.getEventsByOrganizerMatch = async (req, res) => {\r\n  try {\r\n    const organizerId = req.user?.id; // L'ID de l'organisateur est r√©cup√©r√© via le token\r\n\r\n    if (!organizerId) {\r\n      return res.status(401).json({ message: \"Organisateur non authentifi√©.\" });\r\n    }\r\n\r\n    const events = await db('evenement')\r\n      .where('id_organisateur', organizerId)\r\n      .select('id_evenement', 'nom_event');\r\n\r\n    if (events.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des √©v√©nements.\" });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer les poules et leurs participants pour un √©v√©nement s√©lectionn√©\r\nexports.getPoolsWithParticipantsMatch = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  if (!eventId) {\r\n    return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n  }\r\n\r\n  try {\r\n    const pools = await db('poules')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_poule', 'nom_poule');\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    const participants = await db('poule_participants')\r\n      .join('participants', 'poule_participants.id_participant', '=', 'participants.id_participant')\r\n      .whereIn('poule_participants.id_poule', pools.map(p => p.id_poule))\r\n      .select('poule_participants.id_poule', 'participants.id_participant', 'participants.nom_part');\r\n\r\n    const poolsWithParticipants = pools.map(pool => ({\r\n      id_poule: pool.id_poule,\r\n      nom_poule: pool.nom_poule,\r\n      participants: participants.filter(p => p.id_poule === pool.id_poule)\r\n    }));\r\n\r\n    res.status(200).json(poolsWithParticipants);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des poules.\" });\r\n  }\r\n};\r\n\r\n// exports.createMatch = async (req, res) => {\r\n//   try {\r\n//     const {\r\n//       phase,\r\n//       participant_a,\r\n//       participant_b,\r\n//       lieu_rencontre,\r\n//       id_resultat,\r\n//       date_rencontre,\r\n//       heure_rencontre,\r\n//       id_evenement,\r\n//       journee,\r\n//       tour_final\r\n//     } = req.body;\r\n\r\n//     // V√©rification des champs essentiels\r\n//     if (!phase || !participant_a || !participant_b || !lieu_rencontre || !id_resultat || !date_rencontre || !heure_rencontre || !id_evenement) {\r\n//       return res.status(400).json({ message: \"Tous les champs essentiels sont requis.\" });\r\n//     }\r\n\r\n//     if (![\"Barrage\", \"√âliminatoire\", \"Finale\"].includes(phase) && !journee) {\r\n//       return res.status(400).json({ message: \"Le champ 'journee' est requis.\" });\r\n//     }\r\n\r\n//     if (![\"Groupe\", \"Qualification\", \"Classement\", \"Barrage\"].includes(phase) && !tour_final) {\r\n//       return res.status(400).json({ message: \"Le champ 'tour_final' est requis.\" });\r\n//     }\r\n\r\n//     // üîç R√©cup√©rer l'ID des √©quipes\r\n//     const equipeA = await db(\"equipes\").where({ nom_equipe: participant_a }).first();\r\n//     const equipeB = await db(\"equipes\").where({ nom_equipe: participant_b }).first();\r\n\r\n//     if (!equipeA || !equipeB) {\r\n//       return res.status(400).json({ message: \"Les √©quipes s√©lectionn√©es n'existent pas.\" });\r\n//     }\r\n\r\n//     // üîç R√©cup√©rer les poules des √©quipes A et B\r\n//     const poulesA = await db(\"poule_participants\")\r\n//       .where({ id_participant: equipeA.id_participant })\r\n//       .pluck(\"id_poule\");\r\n\r\n//     const poulesB = await db(\"poule_participants\")\r\n//       .where({ id_participant: equipeB.id_participant })\r\n//       .pluck(\"id_poule\");\r\n\r\n//     if (!poulesA.length || !poulesB.length) {\r\n//       return res.status(400).json({ message: \"Impossible de trouver la poule des participants.\" });\r\n//     }\r\n\r\n//     // üîç V√©rifier si une poule est commune aux deux participants\r\n//     const pouleCommune = poulesA.find(poule => poulesB.includes(poule));\r\n\r\n//     if (!pouleCommune) {\r\n//       return res.status(400).json({ message: \"Les participants ne sont pas dans la m√™me poule.\" });\r\n//     }\r\n\r\n//     // üîç V√©rifier que cette poule appartient bien √† l'√©v√©nement donn√©\r\n//     const pouleInfo = await db(\"poules\")\r\n//       .where({ id_poule: pouleCommune, id_evenement })\r\n//       .first();\r\n\r\n//     if (!pouleInfo) {\r\n//       return res.status(400).json({ message: \"La poule des participants doit √™tre li√©e √† l'√©v√©nement.\" });\r\n//     }\r\n\r\n//     // üîπ Ins√©rer la rencontre\r\n//     const matchData = {\r\n//       phase,\r\n//       participant_a: equipeA.nom_equipe,\r\n//       participant_b: equipeB.nom_equipe,\r\n//       lieu_rencontre,\r\n//       id_resultat,\r\n//       date_rencontre,\r\n//       heure_rencontre,\r\n//       id_evenement,\r\n//       journee: journee || null,\r\n//       tour_final: tour_final || null,\r\n//       id_poule: pouleCommune\r\n//     };\r\n\r\n//     // Ins√©rer la rencontre\r\n//     const [newMatchId] = await db(\"rencontre\").insert(matchData);\r\n//     console.log(`‚úÖ Match ins√©r√© avec succ√®s (ID: ${newMatchId})`);\r\n\r\n//     // üîπ R√©cup√©rer la rencontre nouvellement cr√©√©e\r\n//     const newMatch = await db(\"rencontre\").where({ id_rencontre: newMatchId }).first();\r\n\r\n//     res.status(201).json({ message: \"Rencontre cr√©√©e avec succ√®s.\", match: newMatch });\r\n\r\n//   } catch (error) {\r\n//     console.error(\"‚ùå Erreur lors de la cr√©ation de la rencontre :\", error);\r\n//     res.status(500).json({ message: \"Erreur serveur lors de la cr√©ation de la rencontre.\" });\r\n//   }\r\n// };\r\n\r\nexports.createMatch = async (req, res) => {\r\n  try {\r\n    const {\r\n      phase,\r\n      participant_a,\r\n      participant_b,\r\n      lieu_rencontre,\r\n      date_rencontre,\r\n      heure_rencontre,\r\n      id_evenement,\r\n      journee,\r\n      tour_final\r\n    } = req.body;\r\n\r\n    // V√©rification des champs essentiels\r\n    if (!phase || !participant_a || !participant_b || !lieu_rencontre || !date_rencontre || !heure_rencontre || !id_evenement) {\r\n      return res.status(400).json({ message: \"Tous les champs essentiels sont requis.\" });\r\n    }\r\n\r\n    if (![\"Barrage\", \"√âliminatoire\", \"Finale\"].includes(phase) && !journee) {\r\n      return res.status(400).json({ message: \"Le champ 'journee' est requis.\" });\r\n    }\r\n\r\n    if (![\"Groupe\", \"Qualification\", \"Classement\", \"Barrage\"].includes(phase) && !tour_final) {\r\n      return res.status(400).json({ message: \"Le champ 'tour_final' est requis.\" });\r\n    }\r\n\r\n    // üîç R√©cup√©rer les √©quipes\r\n    const equipeA = await db(\"equipes\").where({ nom_equipe: participant_a }).first();\r\n    const equipeB = await db(\"equipes\").where({ nom_equipe: participant_b }).first();\r\n\r\n    if (!equipeA || !equipeB) {\r\n      return res.status(400).json({ message: \"Les √©quipes s√©lectionn√©es n'existent pas.\" });\r\n    }\r\n\r\n    // üîç V√©rifier les poules\r\n    const poulesA = await db(\"poule_participants\").where({ id_participant: equipeA.id_participant }).pluck(\"id_poule\");\r\n    const poulesB = await db(\"poule_participants\").where({ id_participant: equipeB.id_participant }).pluck(\"id_poule\");\r\n\r\n    const pouleCommune = poulesA.find(p => poulesB.includes(p));\r\n    if (!pouleCommune) {\r\n      return res.status(400).json({ message: \"Les participants ne sont pas dans la m√™me poule.\" });\r\n    }\r\n\r\n    const pouleInfo = await db(\"poules\").where({ id_poule: pouleCommune, id_evenement }).first();\r\n    if (!pouleInfo) {\r\n      return res.status(400).json({ message: \"La poule n'est pas li√©e √† cet √©v√©nement.\" });\r\n    }\r\n\r\n    // ‚úÖ √âTAPE 1 : Cr√©er un r√©sultat vide\r\n    const [idResultat] = await db(\"resultat\").insert({\r\n      score_A: 0,\r\n      score_B: 0,\r\n      point_victoire: null,\r\n      point_matchnul: null,\r\n      point_defaite: null,\r\n      classement_general: 0,\r\n      date_resultat: new Date(), \r\n      id_evenement: id_evenement,\r\n      id_calendrier: 0,\r\n      id_rencontre: 0 // temporairement null\r\n    });\r\n\r\n    // ‚úÖ √âTAPE 2 : Cr√©er la rencontre avec ce id_resultat\r\n    const [newMatchId] = await db(\"rencontre\").insert({\r\n      phase,\r\n      participant_a: equipeA.nom_equipe,\r\n      participant_b: equipeB.nom_equipe,\r\n      lieu_rencontre,\r\n      id_resultat: idResultat,\r\n      date_rencontre,\r\n      heure_rencontre,\r\n      id_evenement,\r\n      journee: journee || null,\r\n      tour_final: tour_final || null,\r\n      id_poule: pouleCommune\r\n    });\r\n\r\n    // ‚úÖ √âTAPE 3 : Mettre √† jour le r√©sultat avec l'ID de la rencontre\r\n    await db(\"resultat\").where({ id_resultat: idResultat }).update({\r\n      id_rencontre: newMatchId\r\n    });\r\n\r\n    const newMatch = await db(\"rencontre\").where({ id_rencontre: newMatchId }).first();\r\n    res.status(201).json({ message: \"Rencontre cr√©√©e avec succ√®s.\", match: newMatch });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la cr√©ation de la rencontre :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la cr√©ation de la rencontre.\" });\r\n  }\r\n};\r\n\r\n\r\nexports.getMatchesByEvent = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    const matches = await db(\"rencontre\")\r\n      .select(\r\n        \"id_rencontre\",\r\n        \"participant_a\",\r\n        \"participant_b\",\r\n        \"date_rencontre\",\r\n        \"heure_rencontre\",\r\n        \"lieu_rencontre\",\r\n        \"phase\",\r\n        \"journee\",\r\n        \"tour_final\"\r\n      )\r\n      .where(\"id_evenement\", eventId);\r\n\r\n    // Groupement des matchs par phase/journ√©e/tour final\r\n    const groupedMatches = matches.reduce((acc, match) => {\r\n      const key = `${match.phase}_${match.journee || \"0\"}_${match.tour_final || \"0\"}`;\r\n\r\n      if (!acc[key]) {\r\n        acc[key] = {\r\n          phase: match.phase,\r\n          journee: match.journee,\r\n          tour_final: match.tour_final,\r\n          matches: [],\r\n        };\r\n      }\r\n\r\n      acc[key].matches.push({\r\n        id_rencontre: match.id_rencontre,\r\n        participant_a: match.participant_a, // D√©j√† stock√© sous forme de nom\r\n        participant_b: match.participant_b, // D√©j√† stock√© sous forme de nom\r\n        date_rencontre: match.date_rencontre,\r\n        heure_rencontre: match.heure_rencontre,\r\n        lieu_rencontre: match.lieu_rencontre,\r\n      });\r\n\r\n      return acc;\r\n    }, {});\r\n\r\n    res.status(200).json(Object.values(groupedMatches));\r\n\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\" });\r\n  }\r\n};\r\n\r\n\r\n// R√©cup√©rer les infos du participant avec son √©quipe\r\nexports.getParticipantById = async (req, res) => {\r\n  const { participantId } = req.params;\r\n\r\n  if (!participantId) {\r\n    return res.status(400).json({ message: \"ID du participant requis.\" });\r\n  }\r\n\r\n  try {\r\n    // R√©cup√©rer les infos du participant avec son √©quipe\r\n    const participant = await db('participants as p')\r\n      .leftJoin('equipes as e', 'p.id_participant', 'e.id_participant')\r\n      .where({ 'p.id_participant': participantId })\r\n      .select(\r\n        'p.*',\r\n        'e.nom_equipe',\r\n        'e.categorie_equipe'\r\n      )\r\n      .first();\r\n\r\n    if (!participant) {\r\n      return res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n    }\r\n\r\n    res.status(200).json(participant);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration du participant:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration du participant.\" });\r\n  }\r\n};\r\n\r\n\r\n// Suppression d'une rencontre par ID\r\nexports.deleteMatch = async (req, res) => {\r\n  const { matchId } = req.params;\r\n\r\n  try {\r\n    const deletedRows = await db('rencontre').where('id_rencontre', matchId).del();\r\n\r\n    if (deletedRows === 0) {\r\n      return res.status(404).json({ message: \"Rencontre non trouv√©e.\" });\r\n    }\r\n\r\n    res.status(200).json({ message: \"Rencontre supprim√©e avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression de la rencontre :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la suppression de la rencontre.\" });\r\n  }\r\n};\r\n\r\n\r\n// Fonction pour r√©cup√©rer toutes les rencontres de tous les √©v√©nements d'un organisateur\r\nexports.getAllCalendarMatches = async (req, res) => {\r\n  try {\r\n    // R√©cup√©rer tous les √©v√©nements de l'organisateur\r\n    const events = await db('evenement')\r\n      .where('id_organisateur', req.user.id)  // On suppose que l'organisateur est dans req.user.id\r\n      .select('id_evenement');  // On ne s√©lectionne que les ID des √©v√©nements\r\n\r\n    if (events.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun √©v√©nement trouv√© pour cet organisateur.\" });\r\n    }\r\n\r\n    // R√©cup√©rer toutes les rencontres de tous les √©v√©nements\r\n    const allMatches = [];\r\n\r\n    for (const event of events) {\r\n      const matches = await db('rencontre')\r\n        .where({ id_evenement: event.id_evenement })\r\n        .select('*')\r\n        .orderBy('date_rencontre', 'asc')\r\n        .orderBy('heure_rencontre', 'asc');\r\n      allMatches.push(...matches);\r\n    }\r\n\r\n    // V√©rifier si la phase \"Aller-Retour\" est bien pr√©sente dans les r√©sultats\r\n    console.log(matches);  // V√©rifiez dans la console si la phase est correcte\r\n\r\n    if (allMatches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e.\" });\r\n    }\r\n\r\n    res.status(200).json(allMatches);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration du calendrier des rencontres :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des rencontres.\" });\r\n  }\r\n};\r\n\r\nexports.getCalendarMatchesByEvent = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    const matches = await db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_rencontre', 'date_rencontre', 'heure_rencontre',\r\n        'participant_a', 'participant_b', 'lieu_rencontre',\r\n        'phase', 'journee', 'tour_final');\r\n\r\n    console.log(\"Donn√©es envoy√©es par l'API :\", matches); // üîç V√©rification des donn√©es avant envoi\r\n\r\n    res.status(200).json(matches);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration du calendrier des rencontres.\" });\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n// recuperation de toute participant \r\nexports.getAllParticipantsByOrganizer = async (req, res) => {\r\n  const organizerId = req.user?.id; // R√©cup√©rer l'ID de l'organisateur authentifi√©\r\n\r\n  if (!organizerId) {\r\n    return res.status(403).json({ message: \"L'ID de l'organisateur est introuvable.\" });\r\n  }\r\n\r\n  try {\r\n    // Jointure entre `evenements`, `participer` et `participants`\r\n    const participants = await db('participer')\r\n      .join('participants', 'participer.id_participant', '=', 'participants.id_participant')\r\n      .join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement') // Correction ici\r\n      .select(\r\n        'participants.id_participant',\r\n        'participants.nom_part',\r\n        'evenement.nom_event',\r\n        'participer.id_evenement'\r\n      )\r\n      .where('evenement.id_organisateur', organizerId); // Filtrer par organisateur\r\n\r\n    if (!participants || participants.length === 0) {\r\n      return res.status(404).json({ message: 'Aucun participant trouv√© pour vos √©v√©nements.' });\r\n    }\r\n\r\n    res.status(200).json(participants);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des participants :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// Envoi d'email depuis un organisateur vers un participant\r\nexports.sendEmailToParticipant = async (req, res) => {\r\n  const { id } = req.params; // ID du participant\r\n  const { subject, content } = req.body; // Sujet et contenu du mail\r\n  const organizerId = req.user.id; // R√©cup√©ration de l'ID de l'organisateur depuis le token\r\n\r\n  try {\r\n    // V√©rifier si le participant existe\r\n    const participant = await getParticipantByIdQuery(id);\r\n    if (!participant) {\r\n      return res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n    }\r\n\r\n    // V√©rifier si l'organisateur existe\r\n    const organizer = await getOrganizerByIdQuery(organizerId);\r\n    if (!organizer) {\r\n      return res.status(404).json({ message: \"Organisateur non trouv√©.\" });\r\n    }\r\n\r\n    // Configuration du service d'email (Nodemailer)\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: process.env.EMAIL_USER, // Adresse email utilis√©e pour envoyer les emails\r\n        pass: process.env.EMAIL_PASS, // Mot de passe ou cl√© d'application\r\n      },\r\n    });\r\n\r\n    // D√©finition de l'email √† envoyer\r\n    const mailOptions = {\r\n      from: organizer.email_organisateur, // L'email de l'organisateur en tant qu'exp√©diteur\r\n      to: participant.email_part, // Destinataire : le participant\r\n      subject: subject + \" (Message de votre organisateur)\",\r\n      text: `Bonjour ${participant.nom_part},\\n\\n${content}\\n\\nCordialement,\\n${organizer.nom_organisateur}`,\r\n    };\r\n\r\n    // Envoi de l'email\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    res.status(200).json({\r\n      message: `Email envoy√© avec succ√®s √† ${participant.email_part} depuis ${organizer.email_organisateur}.`,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'envoi de l'email :\", error);\r\n    res.status(500).json({ message: \"Erreur lors de l'envoi de l'email.\" });\r\n  }\r\n};\r\n\r\n// **************************Resultats*****************************\r\n// pour r√©cup√©rer les informations d'un √©v√©nement s√©lectionn√©\r\n\r\nexports.getEventResultats = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n    console.log(\"üîç eventId re√ßu :\", eventId);\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    // üîπ R√©cup√©ration du nom de l'√©v√©nement\r\n    const event = await db('evenement')\r\n      .where({ id_evenement: eventId })\r\n      .select('nom_event')\r\n      .first();\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: \"√âv√©nement non trouv√©.\" });\r\n    }\r\n\r\n    // üîπ R√©cup√©ration des diff√©rentes phases, journ√©es et tours finaux associ√©s √† l'√©v√©nement\r\n    const matchInfo = await db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('phase', 'journee', 'tour_final')\r\n      .groupBy('phase', 'journee', 'tour_final')  // üî• On r√©cup√®re toutes les valeurs uniques\r\n\r\n    console.log(\"‚úÖ Donn√©es matchInfo :\", matchInfo);\r\n\r\n    if (matchInfo.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    res.status(200).json({\r\n      nom_event: event.nom_event,\r\n      details: matchInfo // üî• On envoie un tableau contenant toutes les phases, journ√©es et tours finaux\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\", error: error.message });\r\n  }\r\n};\r\n\r\n// pour r√©cup√©rer les rencontres filtr√©es :\r\nexports.getFilteredMatchesByEvent = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n    const { phase, journee, tour_final } = req.query;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"ID de l'√©v√©nement requis.\" });\r\n    }\r\n\r\n    let query = db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('id_rencontre', 'participant_a', 'participant_b', 'phase', 'journee', 'tour_final');\r\n\r\n    // Filtrage dynamique en fonction des param√®tres re√ßus\r\n    if (phase) {\r\n      query = query.where({ phase });\r\n    }\r\n    if (journee) {\r\n      query = query.where({ journee });\r\n    }\r\n    if (tour_final) {\r\n      query = query.where({ tour_final });\r\n    }\r\n\r\n    const matches = await query;\r\n\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e pour ces crit√®res.\" });\r\n    }\r\n\r\n    res.status(200).json(matches);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des rencontres filtr√©es.\" });\r\n  }\r\n};\r\n// pour enregistrer les r√©sultats des rencontres\r\nexports.saveMatchResults = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n    let { results, point_victoire, point_defaite, point_matchnul } = req.body;\r\n\r\n    if (!eventId) {\r\n      return res.status(400).json({ message: \"L'ID de l'√©v√©nement est requis.\" });\r\n    }\r\n\r\n    if (!results || results.length === 0) {\r\n      return res.status(400).json({ message: \"Aucun r√©sultat fourni.\" });\r\n    }\r\n\r\n    // Date actuelle pour l'enregistrement\r\n    const date_resultat = new Date();\r\n    const insertedResults = [];\r\n    const ignoredResults = [];\r\n\r\n    for (const match of results) {\r\n      const { id_rencontre, score_A, score_B, phase } = match;\r\n\r\n      // üîπ V√©rification des phases qui ne doivent pas avoir de points\r\n      if ([\"Finale\", \"Barrage\", \"Aller Retour\"].includes(phase)) {\r\n        point_victoire = null;\r\n        point_defaite = null;\r\n        point_matchnul = null;\r\n      }\r\n\r\n      // V√©rifier si un r√©sultat existe d√©j√† pour ce match et cet √©v√©nement\r\n      const existingResult = await db('resultat')\r\n        .where({ id_rencontre, id_evenement: eventId })\r\n        .first();\r\n\r\n      if (existingResult) {\r\n        // üîπ Ne pas ins√©rer et ajouter √† la liste des ignor√©s\r\n        ignoredResults.push({ id_rencontre, message: \"R√©sultat d√©j√† existant\" });\r\n      } else {\r\n        // üîπ Ins√©rer un nouveau r√©sultat\r\n        const [id_resultat] = await db('resultat').insert({\r\n          id_rencontre,\r\n          id_evenement: eventId,\r\n          score_A,\r\n          score_B,\r\n          point_victoire,\r\n          point_defaite,\r\n          point_matchnul,\r\n          date_resultat\r\n        });\r\n\r\n        insertedResults.push({ id_resultat, id_rencontre, score_A, score_B, status: \"Ins√©r√©\" });\r\n      }\r\n    }\r\n\r\n    res.status(201).json({\r\n      message: \"R√©sultats trait√©s\",\r\n      inserted: insertedResults,\r\n      ignored: ignoredResults\r\n    });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur lors de l'enregistrement des r√©sultats :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de l'enregistrement des r√©sultats.\" });\r\n  }\r\n};\r\n\r\n// ************************** Liste Resultats*****************************\r\n// R√©cup√©rer les d√©tails d'un √©v√©nement et ses phases\r\nexports.getEventResultatList = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    // V√©rifier si l'√©v√©nement existe\r\n    const event = await db('evenement')\r\n      .where({ id_evenement: eventId })\r\n      .select('nom_event')\r\n      .first();\r\n\r\n    if (!event) {\r\n      return res.status(404).json({ message: \"√âv√©nement non trouv√©.\" });\r\n    }\r\n\r\n    // R√©cup√©rer les informations de rencontre li√©es √† cet √©v√©nement\r\n    const matchInfo = await db('rencontre')\r\n      .where({ id_evenement: eventId })\r\n      .select('phase', 'journee', 'tour_final')\r\n      .first(); // On r√©cup√®re un seul enregistrement\r\n\r\n    res.status(200).json({\r\n      nom_event: event.nom_event,\r\n      phase: matchInfo?.phase || 'N/A',\r\n      journee: matchInfo?.journee || 'N/A',\r\n      tour_final: matchInfo?.tour_final || 'N/A'\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des d√©tails de l'√©v√©nement.\", error: error.message });\r\n  }\r\n};\r\n\r\n// R√©cup√©rer les r√©sultats des matchs avec jointure\r\nexports.getFilteredMatchesResultatList = async (req, res) => {\r\n  try {\r\n    const { eventId } = req.params;\r\n\r\n    let matches = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement')\r\n      .select(\r\n        'evenement.nom_event',\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.tour_final',\r\n        'rencontre.date_rencontre',\r\n        'rencontre.heure_rencontre',\r\n        'rencontre.participant_a',\r\n        'rencontre.participant_b',\r\n        'resultat.score_A',\r\n        'resultat.score_B',\r\n        'rencontre.lieu_rencontre'\r\n      )\r\n      .where('resultat.id_evenement', eventId)\r\n      .orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\r\n\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun r√©sultat trouv√© pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\r\n    let groupedResults = {};\r\n    matches.forEach(match => {\r\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\r\n\r\n      if (!groupedResults[groupKey]) {\r\n        groupedResults[groupKey] = [];\r\n      }\r\n      groupedResults[groupKey].push(match);\r\n    });\r\n\r\n    res.status(200).json(groupedResults);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\", error: error.message });\r\n  }\r\n};\r\n\r\n\r\n\r\n// ‚úÖ R√©cup√©rer les √©v√©nements SANS authentification\r\nexports.getPublicEvents = async (req, res) => {\r\n  try {\r\n    const events = await db('evenement').select('*'); // R√©cup√©rer tous les √©v√©nements\r\n    console.log(\"√âv√©nements r√©cup√©r√©s :\", events);\r\n    res.json(events);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des √©v√©nements :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// ********************************* Tous les r√©sultats des matchs *********************************\r\n// R√©cup√©rer les r√©sultats de tous les √©v√©nements\r\nexports.getAllMatchesResultatList = async (req, res) => {\r\n  try {\r\n    let matches = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement')\r\n      .select(\r\n        'evenement.nom_event',\r\n        'rencontre.id_rencontre',\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.tour_final',\r\n        'rencontre.date_rencontre',\r\n        'rencontre.heure_rencontre',\r\n        'rencontre.participant_a',\r\n        'rencontre.participant_b',\r\n        'resultat.id_resultat', // ‚úÖ Ajout de `id_resultat`\r\n        'resultat.score_A',\r\n        'resultat.score_B',\r\n        'rencontre.lieu_rencontre'\r\n      )\r\n      .orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.tour_final', 'rencontre.date_rencontre']);\r\n\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun r√©sultat trouv√©.\" });\r\n    }\r\n\r\n    // Regrouper les r√©sultats par √©v√©nement, phase, journ√©e et tour\r\n    let groupedResults = {};\r\n    matches.forEach(match => {\r\n      const groupKey = `${match.nom_event} | ${match.phase} | Journ√©e: ${match.journee !== 'N/A' ? match.journee : 'Non d√©fini'} ${match.tour_final !== 'N/A' ? `Tour Final: ${match.tour_final}` : ''}`;\r\n\r\n      if (!groupedResults[groupKey]) {\r\n        groupedResults[groupKey] = [];\r\n      }\r\n      groupedResults[groupKey].push(match);\r\n    });\r\n\r\n    res.status(200).json(groupedResults);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la r√©cup√©ration des r√©sultats.\", error: error.message });\r\n  }\r\n};\r\n\r\n// Contr√¥leur pour la mise √† jour du score\r\nexports.updateMatchScore = async (req, res) => {\r\n  try {\r\n    const { matchId } = req.params;\r\n    const { score_A, score_B } = req.body;\r\n\r\n    // V√©rification des valeurs\r\n    if (score_A === undefined || score_B === undefined) {\r\n      return res.status(400).json({ message: \"Les scores sont requis.\" });\r\n    }\r\n\r\n    // Mise √† jour du score dans la base de donn√©es\r\n    const updated = await db('resultat')\r\n      .where({ id_rencontre: matchId })\r\n      .update({ score_A, score_B });\r\n\r\n    if (updated) {\r\n      res.status(200).json({ message: \"Score mis √† jour avec succ√®s !\" });\r\n    } else {\r\n      res.status(404).json({ message: \"Match non trouv√©.\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la mise √† jour du score :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la mise √† jour du score.\" });\r\n  }\r\n};\r\n\r\n// Contr√¥leur pour supprimer un r√©sultat de match via `id_resultat`\r\nexports.deleteMatchResult = async (req, res) => {\r\n  try {\r\n    const { resultId } = req.params; // On r√©cup√®re `id_resultat` et non `id_rencontre`\r\n\r\n    // V√©rifier si le r√©sultat existe\r\n    const resultExists = await db('resultat').where({ id_resultat: resultId }).first();\r\n\r\n    if (!resultExists) {\r\n      return res.status(404).json({ message: \"Le r√©sultat du match n'existe pas.\" });\r\n    }\r\n\r\n    // Suppression du r√©sultat\r\n    await db('resultat').where({ id_resultat: resultId }).del();\r\n\r\n    res.status(200).json({ message: \"R√©sultat supprim√© avec succ√®s !\" });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la suppression du r√©sultat :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur lors de la suppression du r√©sultat.\" });\r\n  }\r\n};\r\n// ********************************* Classement *********************************\r\n\r\nexports.getClassement = async (req, res) => {\r\n  try {\r\n    const phasesAExclure = [\"Barrage\", \"√âliminatoire\", \"Aller Retour\", \"Finale\"];\r\n\r\n    let query = db(\"resultat\")\r\n      .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\r\n      .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n      .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\r\n      .select(\r\n        \"evenement.nom_event\",\r\n        \"evenement.nom_sport\",\r\n        \"rencontre.id_evenement\",\r\n        \"rencontre.phase\",\r\n        \"rencontre.journee\",\r\n        \"rencontre.id_poule\",\r\n        \"poules.nom_poule\",\r\n        \"rencontre.participant_a\",\r\n        \"rencontre.participant_b\",\r\n        \"resultat.score_A\",\r\n        \"resultat.score_B\",\r\n        \"resultat.point_victoire\",\r\n        \"resultat.point_matchnul\",\r\n        \"resultat.point_defaite\"\r\n      )\r\n      .whereNotIn(\"rencontre.phase\", phasesAExclure);\r\n\r\n    const resultats = await query;\r\n\r\n    if (!resultats.length) {\r\n      return res.status(200).json({ classement: {} });\r\n    }\r\n\r\n    let classementParEvenement = {};\r\n\r\n    resultats.forEach((match) => {\r\n      const eventKey = match.nom_event;\r\n      const phaseKey = `Phase: ${match.phase}`;\r\n      const journeeKey = `Journ√©e ${match.journee}`;\r\n      const pouleKey = `Poule ${match.nom_poule}`;\r\n      const sport = match.nom_sport.toLowerCase();\r\n\r\n      if (!classementParEvenement[eventKey]) {\r\n        classementParEvenement[eventKey] = {};\r\n      }\r\n\r\n      if (!classementParEvenement[eventKey][phaseKey]) {\r\n        classementParEvenement[eventKey][phaseKey] = {};\r\n      }\r\n\r\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey]) {\r\n        classementParEvenement[eventKey][phaseKey][journeeKey] = {};\r\n      }\r\n\r\n      if (!classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey]) {\r\n        classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey] = [];\r\n      }\r\n\r\n      [match.participant_a, match.participant_b].forEach((equipe, i) => {\r\n        const score = i === 0 ? match.score_A : match.score_B;\r\n        const adversaireScore = i === 0 ? match.score_B : match.score_A;\r\n        const victoire = score > adversaireScore ? 1 : 0;\r\n        const defaite = score < adversaireScore ? 1 : 0;\r\n        const matchJoue = 1;\r\n\r\n        let points = 0;\r\n        if (score > adversaireScore) {\r\n          points = match.point_victoire;\r\n        } else if (score === adversaireScore) {\r\n          points = match.point_matchnul;\r\n        } else {\r\n          points = match.point_defaite;\r\n        }\r\n\r\n        const team = classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].find(\r\n          (equipeData) => equipeData.nom_equipe === equipe\r\n        );\r\n\r\n        if (team) {\r\n          if (sport === \"basketball\") {\r\n            team.mj += matchJoue;\r\n            team.v += victoire;\r\n            team.d += defaite;\r\n            team.points_marques += score;\r\n            team.points_concedes += adversaireScore;\r\n            team.difference_points += score - adversaireScore;\r\n          } else if (sport === \"p√©tanque\") {\r\n            team.points += points;\r\n            team.points_marques += score;\r\n            team.points_concedes += adversaireScore;\r\n            team.difference_points += score - adversaireScore;\r\n          } else {\r\n            team.points += points;\r\n            team.buts_marques += score;\r\n            team.buts_encaisses += adversaireScore;\r\n            team.difference_buts += score - adversaireScore;\r\n          }\r\n        } else {\r\n          classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].push({\r\n            nom_equipe: equipe,\r\n            points: points,\r\n            buts_marques: sport !== \"basketball\" ? score : undefined,\r\n            buts_encaisses: sport !== \"basketball\" ? adversaireScore : undefined,\r\n            difference_buts: sport !== \"basketball\" ? score - adversaireScore : undefined,\r\n            points_marques: sport === \"basketball\" || sport === \"p√©tanque\" ? score : undefined,\r\n            points_concedes: sport === \"basketball\" || sport === \"p√©tanque\" ? adversaireScore : undefined,\r\n            difference_points: sport === \"basketball\" || sport === \"p√©tanque\" ? score - adversaireScore : undefined,\r\n            mj: sport === \"basketball\" ? matchJoue : undefined,\r\n            v: sport === \"basketball\" ? victoire : undefined,\r\n            d: sport === \"basketball\" ? defaite : undefined\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    // Ajout du Classement G√©n√©ral\r\n    Object.keys(classementParEvenement).forEach(eventKey => {\r\n      let classementGeneral = {};\r\n\r\n      Object.keys(classementParEvenement[eventKey]).forEach(phaseKey => {\r\n        Object.keys(classementParEvenement[eventKey][phaseKey]).forEach(journeeKey => {\r\n          Object.keys(classementParEvenement[eventKey][phaseKey][journeeKey]).forEach(pouleKey => {\r\n            classementParEvenement[eventKey][phaseKey][journeeKey][pouleKey].forEach(team => {\r\n              const equipeKey = team.nom_equipe;\r\n              if (!classementGeneral[equipeKey]) {\r\n                classementGeneral[equipeKey] = { ...team };\r\n              } else {\r\n                Object.keys(team).forEach(stat => {\r\n                  if (typeof team[stat] === \"number\") {\r\n                    classementGeneral[equipeKey][stat] += team[stat];\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      classementParEvenement[eventKey][\"Classement G√©n√©ral\"] = {\r\n        \"Classement G√©n√©ral\": Object.values(classementGeneral).sort((a, b) => b.points - a.points)\r\n      };\r\n    });\r\n\r\n    res.status(200).json({ classement: classementParEvenement });\r\n  } catch (error) {\r\n    console.error(\"Erreur serveur :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur\", error });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742853822132},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\OrganizerEmailService.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\n// // emailService.js\n// const sgMail = require('@sendgrid/mail');\n// const crypto = require('crypto');\n\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que la cl√© API est d√©finie dans vos variables d'environnement\n\n// const sendActivationEmail = async (email, userId) => {\n//   try {\n//     const token = crypto.randomBytes(20).toString('hex'); // G√©n√®re un jeton unique\n//     const activationLink = `http://localhost:3000/activate/${userId}/${token}`;\n\n//     const message = {\n//       to: email,\n//       from: 'rak.tahina02@gmail.com', // Remplacez par votre email v√©rifi√© sur SendGrid\n//       subject: 'Confirmez votre adresse email',\n//       text: `Veuillez cliquer sur le lien suivant pour activer votre compte : ${activationLink}`,\n//       html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`,\n//     };\n\n//     await sgMail.send(message);\n//     console.log('Email d\\'activation envoy√© avec succ√®s');\n//     return token; // Retourne le jeton pour l'enregistrer dans la base de donn√©es\n//   } catch (error) {\n//     console.error('Erreur lors de l\\'envoi de l\\'email d\\'activation:', error);\n//     throw error;\n//   }\n// };\n\n// module.exports = { sendActivationEmail };\n// emailService.js\n// const sgMail = require('@sendgrid/mail');\n// const crypto = require('crypto');\n\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que votre cl√© API est d√©finie dans .env\n\n// // Fonction pour envoyer l'email d'activation avec un jeton unique\n// const sendActivationEmail = async (email, userId) => {\n//   try {\n//     const token = crypto.randomBytes(20).toString('hex'); // G√©n√®re un jeton unique\n//     const activationLink = `http://localhost:3001/api/organizer/activate/${userId}/${token}`;\n\n//     const message = {\n//       to: email,\n//       from: 'rak.tahina02@gmail.com', // Remplacez par votre adresse email v√©rifi√©e sur SendGrid\n//       subject: 'Confirmez votre adresse email',\n//       html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`,\n//     };\n\n//     await sgMail.send(message);\n//     return token; // Retourne le jeton pour enregistrement dans la base de donn√©es\n//   } catch (error) {\n//     console.error(\"Erreur lors de l'envoi de l'email d'activation :\", error);\n//     throw error;\n//   }\n// };\n\n// module.exports = { sendActivationEmail };\nconst sgMail = require('@sendgrid/mail');\nconst crypto = require('crypto');\nsgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que votre cl√© API est d√©finie dans .env\n\n// Fonction pour envoyer l'email d'activation avec un jeton unique\nconst sendActivationEmail = async (email, token) => {\n  console.log(\"Email destinataire :\", email); // pour v√©rifier l'email\n  try {\n    const activationLink = `http://localhost:3001/api/organizer/activate/${token}`;\n    const message = {\n      to: email,\n      from: 'rak.tahina02@gmail.com',\n      // Remplacez par votre adresse email v√©rifi√©e sur SendGrid\n      subject: 'Confirmez votre adresse email',\n      html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`\n    };\n    await sgMail.send(message);\n  } catch (error) {\n    console.error(\"Erreur lors de l'envoi de l'email d'activation :\", error);\n    throw error;\n  }\n};\nmodule.exports = {\n  sendActivationEmail\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZ01haWwiLCJyZXF1aXJlIiwiY3J5cHRvIiwic2V0QXBpS2V5IiwicHJvY2VzcyIsImVudiIsIlNFTkRHUklEX0FQSV9LRVkiLCJzZW5kQWN0aXZhdGlvbkVtYWlsIiwiZW1haWwiLCJ0b2tlbiIsImNvbnNvbGUiLCJsb2ciLCJhY3RpdmF0aW9uTGluayIsIm1lc3NhZ2UiLCJ0byIsImZyb20iLCJzdWJqZWN0IiwiaHRtbCIsInNlbmQiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJPcmdhbml6ZXJFbWFpbFNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gLy8gZW1haWxTZXJ2aWNlLmpzXHJcbi8vIGNvbnN0IHNnTWFpbCA9IHJlcXVpcmUoJ0BzZW5kZ3JpZC9tYWlsJyk7XHJcbi8vIGNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xyXG5cclxuLy8gc2dNYWlsLnNldEFwaUtleShwcm9jZXNzLmVudi5TRU5ER1JJRF9BUElfS0VZKTsgLy8gQXNzdXJlei12b3VzIHF1ZSBsYSBjbMOpIEFQSSBlc3QgZMOpZmluaWUgZGFucyB2b3MgdmFyaWFibGVzIGQnZW52aXJvbm5lbWVudFxyXG5cclxuLy8gY29uc3Qgc2VuZEFjdGl2YXRpb25FbWFpbCA9IGFzeW5jIChlbWFpbCwgdXNlcklkKSA9PiB7XHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHRva2VuID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDIwKS50b1N0cmluZygnaGV4Jyk7IC8vIEfDqW7DqHJlIHVuIGpldG9uIHVuaXF1ZVxyXG4vLyAgICAgY29uc3QgYWN0aXZhdGlvbkxpbmsgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FjdGl2YXRlLyR7dXNlcklkfS8ke3Rva2VufWA7XHJcblxyXG4vLyAgICAgY29uc3QgbWVzc2FnZSA9IHtcclxuLy8gICAgICAgdG86IGVtYWlsLFxyXG4vLyAgICAgICBmcm9tOiAncmFrLnRhaGluYTAyQGdtYWlsLmNvbScsIC8vIFJlbXBsYWNleiBwYXIgdm90cmUgZW1haWwgdsOpcmlmacOpIHN1ciBTZW5kR3JpZFxyXG4vLyAgICAgICBzdWJqZWN0OiAnQ29uZmlybWV6IHZvdHJlIGFkcmVzc2UgZW1haWwnLFxyXG4vLyAgICAgICB0ZXh0OiBgVmV1aWxsZXogY2xpcXVlciBzdXIgbGUgbGllbiBzdWl2YW50IHBvdXIgYWN0aXZlciB2b3RyZSBjb21wdGUgOiAke2FjdGl2YXRpb25MaW5rfWAsXHJcbi8vICAgICAgIGh0bWw6IGA8cD5WZXVpbGxleiBjbGlxdWVyIHN1ciBsZSBsaWVuIHN1aXZhbnQgcG91ciBhY3RpdmVyIHZvdHJlIGNvbXB0ZSA6PC9wPjxhIGhyZWY9XCIke2FjdGl2YXRpb25MaW5rfVwiPiR7YWN0aXZhdGlvbkxpbmt9PC9hPmAsXHJcbi8vICAgICB9O1xyXG5cclxuLy8gICAgIGF3YWl0IHNnTWFpbC5zZW5kKG1lc3NhZ2UpO1xyXG4vLyAgICAgY29uc29sZS5sb2coJ0VtYWlsIGRcXCdhY3RpdmF0aW9uIGVudm95w6kgYXZlYyBzdWNjw6hzJyk7XHJcbi8vICAgICByZXR1cm4gdG9rZW47IC8vIFJldG91cm5lIGxlIGpldG9uIHBvdXIgbCdlbnJlZ2lzdHJlciBkYW5zIGxhIGJhc2UgZGUgZG9ubsOpZXNcclxuLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbFxcJ2Vudm9pIGRlIGxcXCdlbWFpbCBkXFwnYWN0aXZhdGlvbjonLCBlcnJvcik7XHJcbi8vICAgICB0aHJvdyBlcnJvcjtcclxuLy8gICB9XHJcbi8vIH07XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IHsgc2VuZEFjdGl2YXRpb25FbWFpbCB9O1xyXG4vLyBlbWFpbFNlcnZpY2UuanNcclxuLy8gY29uc3Qgc2dNYWlsID0gcmVxdWlyZSgnQHNlbmRncmlkL21haWwnKTtcclxuLy8gY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XHJcblxyXG4vLyBzZ01haWwuc2V0QXBpS2V5KHByb2Nlc3MuZW52LlNFTkRHUklEX0FQSV9LRVkpOyAvLyBBc3N1cmV6LXZvdXMgcXVlIHZvdHJlIGNsw6kgQVBJIGVzdCBkw6lmaW5pZSBkYW5zIC5lbnZcclxuXHJcbi8vIC8vIEZvbmN0aW9uIHBvdXIgZW52b3llciBsJ2VtYWlsIGQnYWN0aXZhdGlvbiBhdmVjIHVuIGpldG9uIHVuaXF1ZVxyXG4vLyBjb25zdCBzZW5kQWN0aXZhdGlvbkVtYWlsID0gYXN5bmMgKGVtYWlsLCB1c2VySWQpID0+IHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgdG9rZW4gPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMjApLnRvU3RyaW5nKCdoZXgnKTsgLy8gR8OpbsOocmUgdW4gamV0b24gdW5pcXVlXHJcbi8vICAgICBjb25zdCBhY3RpdmF0aW9uTGluayA9IGBodHRwOi8vbG9jYWxob3N0OjMwMDEvYXBpL29yZ2FuaXplci9hY3RpdmF0ZS8ke3VzZXJJZH0vJHt0b2tlbn1gO1xyXG5cclxuLy8gICAgIGNvbnN0IG1lc3NhZ2UgPSB7XHJcbi8vICAgICAgIHRvOiBlbWFpbCxcclxuLy8gICAgICAgZnJvbTogJ3Jhay50YWhpbmEwMkBnbWFpbC5jb20nLCAvLyBSZW1wbGFjZXogcGFyIHZvdHJlIGFkcmVzc2UgZW1haWwgdsOpcmlmacOpZSBzdXIgU2VuZEdyaWRcclxuLy8gICAgICAgc3ViamVjdDogJ0NvbmZpcm1leiB2b3RyZSBhZHJlc3NlIGVtYWlsJyxcclxuLy8gICAgICAgaHRtbDogYDxwPlZldWlsbGV6IGNsaXF1ZXIgc3VyIGxlIGxpZW4gc3VpdmFudCBwb3VyIGFjdGl2ZXIgdm90cmUgY29tcHRlIDo8L3A+PGEgaHJlZj1cIiR7YWN0aXZhdGlvbkxpbmt9XCI+JHthY3RpdmF0aW9uTGlua308L2E+YCxcclxuLy8gICAgIH07XHJcblxyXG4vLyAgICAgYXdhaXQgc2dNYWlsLnNlbmQobWVzc2FnZSk7XHJcbi8vICAgICByZXR1cm4gdG9rZW47IC8vIFJldG91cm5lIGxlIGpldG9uIHBvdXIgZW5yZWdpc3RyZW1lbnQgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGRlIGwnZW1haWwgZCdhY3RpdmF0aW9uIDpcIiwgZXJyb3IpO1xyXG4vLyAgICAgdGhyb3cgZXJyb3I7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5cclxuLy8gbW9kdWxlLmV4cG9ydHMgPSB7IHNlbmRBY3RpdmF0aW9uRW1haWwgfTtcclxuY29uc3Qgc2dNYWlsID0gcmVxdWlyZSgnQHNlbmRncmlkL21haWwnKTtcclxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XHJcblxyXG5zZ01haWwuc2V0QXBpS2V5KHByb2Nlc3MuZW52LlNFTkRHUklEX0FQSV9LRVkpOyAvLyBBc3N1cmV6LXZvdXMgcXVlIHZvdHJlIGNsw6kgQVBJIGVzdCBkw6lmaW5pZSBkYW5zIC5lbnZcclxuXHJcbi8vIEZvbmN0aW9uIHBvdXIgZW52b3llciBsJ2VtYWlsIGQnYWN0aXZhdGlvbiBhdmVjIHVuIGpldG9uIHVuaXF1ZVxyXG5jb25zdCBzZW5kQWN0aXZhdGlvbkVtYWlsID0gYXN5bmMgKGVtYWlsLCB0b2tlbikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiRW1haWwgZGVzdGluYXRhaXJlIDpcIiwgZW1haWwpOyAvLyBwb3VyIHbDqXJpZmllciBsJ2VtYWlsXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFjdGl2YXRpb25MaW5rID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9hcGkvb3JnYW5pemVyL2FjdGl2YXRlLyR7dG9rZW59YDtcclxuXHJcbiAgICBjb25zdCBtZXNzYWdlID0ge1xyXG4gICAgICB0bzogZW1haWwsXHJcbiAgICAgIGZyb206ICdyYWsudGFoaW5hMDJAZ21haWwuY29tJywgLy8gUmVtcGxhY2V6IHBhciB2b3RyZSBhZHJlc3NlIGVtYWlsIHbDqXJpZmnDqWUgc3VyIFNlbmRHcmlkXHJcbiAgICAgIHN1YmplY3Q6ICdDb25maXJtZXogdm90cmUgYWRyZXNzZSBlbWFpbCcsXHJcbiAgICAgIGh0bWw6IGA8cD5WZXVpbGxleiBjbGlxdWVyIHN1ciBsZSBsaWVuIHN1aXZhbnQgcG91ciBhY3RpdmVyIHZvdHJlIGNvbXB0ZSA6PC9wPjxhIGhyZWY9XCIke2FjdGl2YXRpb25MaW5rfVwiPiR7YWN0aXZhdGlvbkxpbmt9PC9hPmAsXHJcbiAgICB9O1xyXG5cclxuICAgIGF3YWl0IHNnTWFpbC5zZW5kKG1lc3NhZ2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbCdlbnZvaSBkZSBsJ2VtYWlsIGQnYWN0aXZhdGlvbiA6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgc2VuZEFjdGl2YXRpb25FbWFpbCB9O1xyXG5cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3hDLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQ0QsTUFBTSxDQUFDRyxTQUFTLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRWhEO0FBQ0EsTUFBTUMsbUJBQW1CLEdBQUcsTUFBQUEsQ0FBT0MsS0FBSyxFQUFFQyxLQUFLLEtBQUs7RUFDbERDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixFQUFFSCxLQUFLLENBQUMsQ0FBQyxDQUFDO0VBQzVDLElBQUk7SUFDRixNQUFNSSxjQUFjLEdBQUcsZ0RBQWdESCxLQUFLLEVBQUU7SUFFOUUsTUFBTUksT0FBTyxHQUFHO01BQ2RDLEVBQUUsRUFBRU4sS0FBSztNQUNUTyxJQUFJLEVBQUUsd0JBQXdCO01BQUU7TUFDaENDLE9BQU8sRUFBRSwrQkFBK0I7TUFDeENDLElBQUksRUFBRSxtRkFBbUZMLGNBQWMsS0FBS0EsY0FBYztJQUM1SCxDQUFDO0lBRUQsTUFBTVosTUFBTSxDQUFDa0IsSUFBSSxDQUFDTCxPQUFPLENBQUM7RUFDNUIsQ0FBQyxDQUFDLE9BQU9NLEtBQUssRUFBRTtJQUNkVCxPQUFPLENBQUNTLEtBQUssQ0FBQyxrREFBa0QsRUFBRUEsS0FBSyxDQUFDO0lBQ3hFLE1BQU1BLEtBQUs7RUFDYjtBQUNGLENBQUM7QUFHREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRWQ7QUFBb0IsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["sgMail","require","crypto","setApiKey","process","env","SENDGRID_API_KEY","sendActivationEmail","email","token","console","log","activationLink","message","to","from","subject","html","send","error","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["OrganizerEmailService.js"],"sourcesContent":["// // emailService.js\r\n// const sgMail = require('@sendgrid/mail');\r\n// const crypto = require('crypto');\r\n\r\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que la cl√© API est d√©finie dans vos variables d'environnement\r\n\r\n// const sendActivationEmail = async (email, userId) => {\r\n//   try {\r\n//     const token = crypto.randomBytes(20).toString('hex'); // G√©n√®re un jeton unique\r\n//     const activationLink = `http://localhost:3000/activate/${userId}/${token}`;\r\n\r\n//     const message = {\r\n//       to: email,\r\n//       from: 'rak.tahina02@gmail.com', // Remplacez par votre email v√©rifi√© sur SendGrid\r\n//       subject: 'Confirmez votre adresse email',\r\n//       text: `Veuillez cliquer sur le lien suivant pour activer votre compte : ${activationLink}`,\r\n//       html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`,\r\n//     };\r\n\r\n//     await sgMail.send(message);\r\n//     console.log('Email d\\'activation envoy√© avec succ√®s');\r\n//     return token; // Retourne le jeton pour l'enregistrer dans la base de donn√©es\r\n//   } catch (error) {\r\n//     console.error('Erreur lors de l\\'envoi de l\\'email d\\'activation:', error);\r\n//     throw error;\r\n//   }\r\n// };\r\n\r\n// module.exports = { sendActivationEmail };\r\n// emailService.js\r\n// const sgMail = require('@sendgrid/mail');\r\n// const crypto = require('crypto');\r\n\r\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que votre cl√© API est d√©finie dans .env\r\n\r\n// // Fonction pour envoyer l'email d'activation avec un jeton unique\r\n// const sendActivationEmail = async (email, userId) => {\r\n//   try {\r\n//     const token = crypto.randomBytes(20).toString('hex'); // G√©n√®re un jeton unique\r\n//     const activationLink = `http://localhost:3001/api/organizer/activate/${userId}/${token}`;\r\n\r\n//     const message = {\r\n//       to: email,\r\n//       from: 'rak.tahina02@gmail.com', // Remplacez par votre adresse email v√©rifi√©e sur SendGrid\r\n//       subject: 'Confirmez votre adresse email',\r\n//       html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`,\r\n//     };\r\n\r\n//     await sgMail.send(message);\r\n//     return token; // Retourne le jeton pour enregistrement dans la base de donn√©es\r\n//   } catch (error) {\r\n//     console.error(\"Erreur lors de l'envoi de l'email d'activation :\", error);\r\n//     throw error;\r\n//   }\r\n// };\r\n\r\n// module.exports = { sendActivationEmail };\r\nconst sgMail = require('@sendgrid/mail');\r\nconst crypto = require('crypto');\r\n\r\nsgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que votre cl√© API est d√©finie dans .env\r\n\r\n// Fonction pour envoyer l'email d'activation avec un jeton unique\r\nconst sendActivationEmail = async (email, token) => {\r\n  console.log(\"Email destinataire :\", email); // pour v√©rifier l'email\r\n  try {\r\n    const activationLink = `http://localhost:3001/api/organizer/activate/${token}`;\r\n\r\n    const message = {\r\n      to: email,\r\n      from: 'rak.tahina02@gmail.com', // Remplacez par votre adresse email v√©rifi√©e sur SendGrid\r\n      subject: 'Confirmez votre adresse email',\r\n      html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`,\r\n    };\r\n\r\n    await sgMail.send(message);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'envoi de l'email d'activation :\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n\r\nmodule.exports = { sendActivationEmail };\r\n\r\n\r\n"],"mappings":";;AAAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AACxC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAEhCD,MAAM,CAACG,SAAS,CAACC,OAAO,CAACC,GAAG,CAACC,gBAAgB,CAAC,CAAC,CAAC;;AAEhD;AACA,MAAMC,mBAAmB,GAAG,MAAAA,CAAOC,KAAK,EAAEC,KAAK,KAAK;EAClDC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEH,KAAK,CAAC,CAAC,CAAC;EAC5C,IAAI;IACF,MAAMI,cAAc,GAAG,gDAAgDH,KAAK,EAAE;IAE9E,MAAMI,OAAO,GAAG;MACdC,EAAE,EAAEN,KAAK;MACTO,IAAI,EAAE,wBAAwB;MAAE;MAChCC,OAAO,EAAE,+BAA+B;MACxCC,IAAI,EAAE,mFAAmFL,cAAc,KAAKA,cAAc;IAC5H,CAAC;IAED,MAAMZ,MAAM,CAACkB,IAAI,CAACL,OAAO,CAAC;EAC5B,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdT,OAAO,CAACS,KAAK,CAAC,kDAAkD,EAAEA,KAAK,CAAC;IACxE,MAAMA,KAAK;EACb;AACF,CAAC;AAGDC,MAAM,CAACC,OAAO,GAAG;EAAEd;AAAoB,CAAC","ignoreList":[]}},"mtime":1731601349232},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\organizerRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst verifyToken = require('../middleware/jwtMiddleware');\nconst OrganizerControler = require('../controlers/OrganizerControler');\nconst multer = require('multer');\nconst path = require('path');\nconst upload = require(path.resolve(__dirname, '../middleware/multerConfig'));\nconst router = express.Router();\n\n//*********************Organisateur**************************\n\n// Route pour cr√©er un nouvel organisateur (sans restriction de r√¥le)\nrouter.post('/create', OrganizerControler.createOrganizer);\n\n// Route pour r√©cup√©rer les informations d'un organisateur par ID (publique, sans token)\nrouter.get('/profile/:id', OrganizerControler.getOrganizerById);\n\n// Route pour la connexion de l'organisateur (pas de token requis pour la connexion)\nrouter.post('/login/organizer', OrganizerControler.login);\n\n// Route pour acc√©der au profil d'un organisateur (n√©cessite un token)\nrouter.get('/profile', verifyToken, OrganizerControler.getProfilOrganizer);\n\n// Nouvelle route pour mettre √† jour le profil de l'organisateur\nrouter.put('/profile', verifyToken, OrganizerControler.updateProfilOrganizer);\nrouter.get('/activate/:token', OrganizerControler.activateAccount); // Route pour activer le compte\n\n// Route pour v√©rifier si un email est d√©j√† utilis√©\nrouter.post('/check-email', OrganizerControler.checkEmail);\n\n// Nouvelles routes pour v√©rifier le pr√©nom et le nom\nrouter.post('/check-last-name', OrganizerControler.checkLastName);\nrouter.post('/check-first-name', OrganizerControler.checkFirstName);\n\n// Route 1 : Envoyer le code de r√©initialisation\nrouter.post('/send-reset-code', OrganizerControler.sendResetCode);\n\n// Route 2 : Valider le code\nrouter.post('/verify-reset-code', OrganizerControler.verifyResetCode);\n\n// Route 3 : R√©initialiser le mot de passe\nrouter.post('/reset-password', OrganizerControler.resetPassword);\n\n//*********************Evenement**************************\n\n// Route pour cr√©er un nouvel √©v√©nement\n// router.post('/create-event', verifyToken, OrganizerControler.createEvent);\n\n// routes pour afficher un evenement\nrouter.get('/events', verifyToken, OrganizerControler.getAllEvents);\nrouter.get('/allevents', OrganizerControler.getEventAll);\nrouter.post('/create-event', verifyToken, upload.fields([{\n  name: 'logo_event',\n  maxCount: 1\n}, {\n  name: 'images_accueil',\n  maxCount: 1\n}, {\n  name: 'images_contenu',\n  maxCount: 1\n}]), OrganizerControler.createEvent);\n\n//routes pour modifier un evenement\nrouter.get('/events/:id', verifyToken, OrganizerControler.getEventById);\n\n// Route pour mettre √† jour un √©v√©nement\nrouter.put('/events/:id', verifyToken, upload.fields([{\n  name: 'logo_event',\n  maxCount: 1\n}, {\n  name: 'images_accueil',\n  maxCount: 1\n}, {\n  name: 'images_contenu',\n  maxCount: 1\n}]), OrganizerControler.updateEvent);\n\n// Route pour supprimer un √©v√©nement\nrouter.delete('/events/:id', verifyToken, OrganizerControler.deleteEvent);\n\n// Nouvelle route publique pour afficher tous les √©v√©nements\nrouter.get('/public-events', OrganizerControler.getAllPublicEvents);\nrouter.get('/event/:id', OrganizerControler.getEventWithOrganizer);\n\n// Route publique pour r√©cup√©rer detail d'un √©v√©nement sp√©cifique par son ID\nrouter.get('/event/:id', OrganizerControler.getEventDetailById);\n\n//Route pour r√©cup√©rer les participants d'un √©v√©nement\nrouter.get('/participants/all', verifyToken, OrganizerControler.getAllParticipantsByOrganizer);\n// Route pour l'achat de tickets\nrouter.post(\"/acheter-ticket\", OrganizerControler.acheterTicket);\n\n//Route pour la gestion de tickets par l'organisateur\nrouter.get(\"/tickets/:organizerId\", OrganizerControler.getOrganizerTickets);\nrouter.get(\"/export-tickets/:organizerId\", OrganizerControler.exportOrganizerTickets);\n\n//*********************Participant**************************\n// Route pour supprimer un participant par son ID dans le TB orgnisateur\nrouter.delete('/participants/:participantId', verifyToken, OrganizerControler.deleteParticipant);\n\n// route pour r√©cup√©rer un participant sp√©cifique\nrouter.get('/participant/:participantId', verifyToken, OrganizerControler.getParticipantById);\n\n//*********************generation poules**************************\n\n// R√©cup√©rer les √©v√©nements de l'organisateur\nrouter.get('/events', verifyToken, OrganizerControler.getEventsByOrganizer);\n\n// R√©cup√©rer le nombre de participants pour un √©v√©nement depuis \"participer\"\nrouter.get('/event/:eventId/participants', verifyToken, OrganizerControler.getParticipantsAndCountByEvent);\n\n// Route pour cr√©er des poules pour un √©v√©nement donn√©\nrouter.post('/create-pools', verifyToken, OrganizerControler.createPools);\n\n// Route pour r√©partir les participants dans les poules de mani√®re al√©atoire\nrouter.post('/assign-participants', verifyToken, OrganizerControler.assignParticipantsToPools);\n\n// Route pour r√©cup√©rer les poules et leurs participants pour un √©v√©nement donn√©\nrouter.get('/event/:eventId/pools', verifyToken, OrganizerControler.getPoolsWithParticipants);\n\n// R√©cup√©rer les √©v√©nements qui ont des poules\nrouter.get('/events-with-pools', verifyToken, OrganizerControler.getEventsWithPools);\n\n// ************* NOUVELLE ROUTE : ajout manuel d'un participant dans une poule *************\nrouter.post('/manual-add-participant', verifyToken, OrganizerControler.addParticipantManual);\n\n// Route pour supprimer les poules et leurs participants pour un √©v√©nement donn√©\nrouter.delete('/event/:eventId/pools', verifyToken, OrganizerControler.deletePoolsForEvent);\n\n// ************* pour le rencontre *************\nrouter.get('/organizer-events', verifyToken, OrganizerControler.getEventsByOrganizerMatch);\nrouter.get('/eventmatch/:eventId/pools', verifyToken, OrganizerControler.getPoolsWithParticipantsMatch);\n\n// Stocker une nouvelle rencontre\nrouter.post('/creatematch', verifyToken, OrganizerControler.createMatch);\n\n// R√©cup√©rer les rencontres d'un √©v√©nement donn√©\nrouter.get('/event/:eventId/matches', verifyToken, OrganizerControler.getMatchesByEvent);\n\n// Route pour supprimer une rencontre\nrouter.delete('/match/:matchId', verifyToken, OrganizerControler.deleteMatch);\n\n// // pour r√©cup√©rer le calendrier des rencontres\n// router.get('/eventcalendrier/:eventId/matches', verifyToken, OrganizerControler.getCalendarMatchesByEvent);\n\n// Route pour r√©cup√©rer toutes les rencontres de tous les √©v√©nements d'un organisateur\nrouter.get('/eventcalendrier/matches', verifyToken, OrganizerControler.getAllCalendarMatches);\n\n// Route pour r√©cup√©rer les rencontres d'un √©v√©nement sp√©cifique\nrouter.get('/eventcalendrier/:eventId/matches', verifyToken, OrganizerControler.getCalendarMatchesByEvent);\n\n// //envoye email au participant \nrouter.post('/participants/:id/send-email',\n// Route pour envoyer un email depuis un organisateur\nverifyToken,\n// V√©rifie que l'organisateur est authentifi√©\n// V√©rifie que l'utilisateur a le r√¥le \"organizer\"\nOrganizerControler.sendEmailToParticipant // M√©thode du contr√¥leur\n);\n\n//*********************resultats**************************\n// Route pour r√©cup√©rer les informations d'un √©v√©nement s√©lectionn√©\nrouter.get('/event/:eventId/detailsresultats', verifyToken, OrganizerControler.getEventResultats);\n\n// R√©cup√©rer les rencontres filtr√©es par phase, journ√©e ou tour final\nrouter.get('/event/:eventId/filtered-matches', verifyToken, OrganizerControler.getFilteredMatchesByEvent);\n\n// Route pour enregistrer les r√©sultats des rencontres\nrouter.post('/event/:eventId/save-results', verifyToken, OrganizerControler.saveMatchResults);\n\n// ‚úÖ Route publique pour r√©cup√©rer les √©v√©nements\nrouter.get('/public/events', OrganizerControler.getPublicEvents);\n\n//********************* Liste resultats**************************\n// R√©cup√©rer les r√©sultats d'un √©v√©nement\n\nrouter.get('/event/:eventId/resultats', OrganizerControler.getEventResultatList);\n\n//pour filtrer les resultats\n\nrouter.get('/event/:eventId/resultats/filtered', OrganizerControler.getFilteredMatchesResultatList);\n\n// Route pour r√©cup√©rer tous les r√©sultats des matchs de tous les √©v√©nements\nrouter.get('/all-resultats', verifyToken, OrganizerControler.getAllMatchesResultatList);\n\n// Route pour modifier un r√©sultat de match\nrouter.put('/match/:matchId/update-score', verifyToken, OrganizerControler.updateMatchScore);\n\n// Route pour supprimer un r√©sultat de match via `id_resultat`\nrouter.delete('/match/resultat/:resultId/delete', verifyToken, OrganizerControler.deleteMatchResult);\n\n//********************* Classement**************************\n// // Route pour r√©cup√®re les r√©sultats des matchs et calcule le classement.\nrouter.get('/classement', verifyToken, OrganizerControler.getClassement);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInZlcmlmeVRva2VuIiwiT3JnYW5pemVyQ29udHJvbGVyIiwibXVsdGVyIiwicGF0aCIsInVwbG9hZCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiY3JlYXRlT3JnYW5pemVyIiwiZ2V0IiwiZ2V0T3JnYW5pemVyQnlJZCIsImxvZ2luIiwiZ2V0UHJvZmlsT3JnYW5pemVyIiwicHV0IiwidXBkYXRlUHJvZmlsT3JnYW5pemVyIiwiYWN0aXZhdGVBY2NvdW50IiwiY2hlY2tFbWFpbCIsImNoZWNrTGFzdE5hbWUiLCJjaGVja0ZpcnN0TmFtZSIsInNlbmRSZXNldENvZGUiLCJ2ZXJpZnlSZXNldENvZGUiLCJyZXNldFBhc3N3b3JkIiwiZ2V0QWxsRXZlbnRzIiwiZ2V0RXZlbnRBbGwiLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJjcmVhdGVFdmVudCIsImdldEV2ZW50QnlJZCIsInVwZGF0ZUV2ZW50IiwiZGVsZXRlIiwiZGVsZXRlRXZlbnQiLCJnZXRBbGxQdWJsaWNFdmVudHMiLCJnZXRFdmVudFdpdGhPcmdhbml6ZXIiLCJnZXRFdmVudERldGFpbEJ5SWQiLCJnZXRBbGxQYXJ0aWNpcGFudHNCeU9yZ2FuaXplciIsImFjaGV0ZXJUaWNrZXQiLCJnZXRPcmdhbml6ZXJUaWNrZXRzIiwiZXhwb3J0T3JnYW5pemVyVGlja2V0cyIsImRlbGV0ZVBhcnRpY2lwYW50IiwiZ2V0UGFydGljaXBhbnRCeUlkIiwiZ2V0RXZlbnRzQnlPcmdhbml6ZXIiLCJnZXRQYXJ0aWNpcGFudHNBbmRDb3VudEJ5RXZlbnQiLCJjcmVhdGVQb29scyIsImFzc2lnblBhcnRpY2lwYW50c1RvUG9vbHMiLCJnZXRQb29sc1dpdGhQYXJ0aWNpcGFudHMiLCJnZXRFdmVudHNXaXRoUG9vbHMiLCJhZGRQYXJ0aWNpcGFudE1hbnVhbCIsImRlbGV0ZVBvb2xzRm9yRXZlbnQiLCJnZXRFdmVudHNCeU9yZ2FuaXplck1hdGNoIiwiZ2V0UG9vbHNXaXRoUGFydGljaXBhbnRzTWF0Y2giLCJjcmVhdGVNYXRjaCIsImdldE1hdGNoZXNCeUV2ZW50IiwiZGVsZXRlTWF0Y2giLCJnZXRBbGxDYWxlbmRhck1hdGNoZXMiLCJnZXRDYWxlbmRhck1hdGNoZXNCeUV2ZW50Iiwic2VuZEVtYWlsVG9QYXJ0aWNpcGFudCIsImdldEV2ZW50UmVzdWx0YXRzIiwiZ2V0RmlsdGVyZWRNYXRjaGVzQnlFdmVudCIsInNhdmVNYXRjaFJlc3VsdHMiLCJnZXRQdWJsaWNFdmVudHMiLCJnZXRFdmVudFJlc3VsdGF0TGlzdCIsImdldEZpbHRlcmVkTWF0Y2hlc1Jlc3VsdGF0TGlzdCIsImdldEFsbE1hdGNoZXNSZXN1bHRhdExpc3QiLCJ1cGRhdGVNYXRjaFNjb3JlIiwiZGVsZXRlTWF0Y2hSZXN1bHQiLCJnZXRDbGFzc2VtZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsib3JnYW5pemVyUm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHZlcmlmeVRva2VuID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9qd3RNaWRkbGV3YXJlJyk7XHJcbmNvbnN0IE9yZ2FuaXplckNvbnRyb2xlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xlcnMvT3JnYW5pemVyQ29udHJvbGVyJyk7XHJcbmNvbnN0IG11bHRlciA9IHJlcXVpcmUoJ211bHRlcicpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCB1cGxvYWQgPSByZXF1aXJlKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9taWRkbGV3YXJlL211bHRlckNvbmZpZycpKTtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG4vLyoqKioqKioqKioqKioqKioqKioqKk9yZ2FuaXNhdGV1cioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5cclxuLy8gUm91dGUgcG91ciBjcsOpZXIgdW4gbm91dmVsIG9yZ2FuaXNhdGV1ciAoc2FucyByZXN0cmljdGlvbiBkZSByw7RsZSlcclxucm91dGVyLnBvc3QoJy9jcmVhdGUnLCBPcmdhbml6ZXJDb250cm9sZXIuY3JlYXRlT3JnYW5pemVyKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgbGVzIGluZm9ybWF0aW9ucyBkJ3VuIG9yZ2FuaXNhdGV1ciBwYXIgSUQgKHB1YmxpcXVlLCBzYW5zIHRva2VuKVxyXG5yb3V0ZXIuZ2V0KCcvcHJvZmlsZS86aWQnLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0T3JnYW5pemVyQnlJZCk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIGxhIGNvbm5leGlvbiBkZSBsJ29yZ2FuaXNhdGV1ciAocGFzIGRlIHRva2VuIHJlcXVpcyBwb3VyIGxhIGNvbm5leGlvbilcclxucm91dGVyLnBvc3QoJy9sb2dpbi9vcmdhbml6ZXInLCBPcmdhbml6ZXJDb250cm9sZXIubG9naW4pO1xyXG5cclxuLy8gUm91dGUgcG91ciBhY2PDqWRlciBhdSBwcm9maWwgZCd1biBvcmdhbmlzYXRldXIgKG7DqWNlc3NpdGUgdW4gdG9rZW4pXHJcbnJvdXRlci5nZXQoJy9wcm9maWxlJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRQcm9maWxPcmdhbml6ZXIpO1xyXG5cclxuLy8gTm91dmVsbGUgcm91dGUgcG91ciBtZXR0cmUgw6Agam91ciBsZSBwcm9maWwgZGUgbCdvcmdhbmlzYXRldXJcclxucm91dGVyLnB1dCgnL3Byb2ZpbGUnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLnVwZGF0ZVByb2ZpbE9yZ2FuaXplcik7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvYWN0aXZhdGUvOnRva2VuJywgT3JnYW5pemVyQ29udHJvbGVyLmFjdGl2YXRlQWNjb3VudCk7IC8vIFJvdXRlIHBvdXIgYWN0aXZlciBsZSBjb21wdGVcclxuXHJcbi8vIFJvdXRlIHBvdXIgdsOpcmlmaWVyIHNpIHVuIGVtYWlsIGVzdCBkw6lqw6AgdXRpbGlzw6lcclxucm91dGVyLnBvc3QoJy9jaGVjay1lbWFpbCcsIE9yZ2FuaXplckNvbnRyb2xlci5jaGVja0VtYWlsKTtcclxuXHJcbi8vIE5vdXZlbGxlcyByb3V0ZXMgcG91ciB2w6lyaWZpZXIgbGUgcHLDqW5vbSBldCBsZSBub21cclxucm91dGVyLnBvc3QoJy9jaGVjay1sYXN0LW5hbWUnLCBPcmdhbml6ZXJDb250cm9sZXIuY2hlY2tMYXN0TmFtZSk7XHJcbnJvdXRlci5wb3N0KCcvY2hlY2stZmlyc3QtbmFtZScsIE9yZ2FuaXplckNvbnRyb2xlci5jaGVja0ZpcnN0TmFtZSk7XHJcblxyXG4vLyBSb3V0ZSAxIDogRW52b3llciBsZSBjb2RlIGRlIHLDqWluaXRpYWxpc2F0aW9uXHJcbnJvdXRlci5wb3N0KCcvc2VuZC1yZXNldC1jb2RlJywgT3JnYW5pemVyQ29udHJvbGVyLnNlbmRSZXNldENvZGUpO1xyXG5cclxuLy8gUm91dGUgMiA6IFZhbGlkZXIgbGUgY29kZVxyXG5yb3V0ZXIucG9zdCgnL3ZlcmlmeS1yZXNldC1jb2RlJywgT3JnYW5pemVyQ29udHJvbGVyLnZlcmlmeVJlc2V0Q29kZSk7XHJcblxyXG4vLyBSb3V0ZSAzIDogUsOpaW5pdGlhbGlzZXIgbGUgbW90IGRlIHBhc3NlXHJcbnJvdXRlci5wb3N0KCcvcmVzZXQtcGFzc3dvcmQnLCBPcmdhbml6ZXJDb250cm9sZXIucmVzZXRQYXNzd29yZCk7XHJcblxyXG4vLyoqKioqKioqKioqKioqKioqKioqKkV2ZW5lbWVudCoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG4vLyBSb3V0ZSBwb3VyIGNyw6llciB1biBub3V2ZWwgw6l2w6luZW1lbnRcclxuLy8gcm91dGVyLnBvc3QoJy9jcmVhdGUtZXZlbnQnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmNyZWF0ZUV2ZW50KTtcclxuXHJcbi8vIHJvdXRlcyBwb3VyIGFmZmljaGVyIHVuIGV2ZW5lbWVudFxyXG5yb3V0ZXIuZ2V0KCcvZXZlbnRzJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRBbGxFdmVudHMpO1xyXG5yb3V0ZXIuZ2V0KCcvYWxsZXZlbnRzJywgT3JnYW5pemVyQ29udHJvbGVyLmdldEV2ZW50QWxsKTtcclxuXHJcbnJvdXRlci5wb3N0KFxyXG4gICcvY3JlYXRlLWV2ZW50JyxcclxuICB2ZXJpZnlUb2tlbixcclxuICB1cGxvYWQuZmllbGRzKFtcclxuICAgIHsgbmFtZTogJ2xvZ29fZXZlbnQnLCBtYXhDb3VudDogMSB9LFxyXG4gICAgeyBuYW1lOiAnaW1hZ2VzX2FjY3VlaWwnLCBtYXhDb3VudDogMSB9LFxyXG4gICAgeyBuYW1lOiAnaW1hZ2VzX2NvbnRlbnUnLCBtYXhDb3VudDogMSB9LFxyXG4gIF0pLFxyXG4gIE9yZ2FuaXplckNvbnRyb2xlci5jcmVhdGVFdmVudFxyXG4pO1xyXG5cclxuLy9yb3V0ZXMgcG91ciBtb2RpZmllciB1biBldmVuZW1lbnRcclxucm91dGVyLmdldCgnL2V2ZW50cy86aWQnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmdldEV2ZW50QnlJZCk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIG1ldHRyZSDDoCBqb3VyIHVuIMOpdsOpbmVtZW50XHJcbnJvdXRlci5wdXQoJy9ldmVudHMvOmlkJywgdmVyaWZ5VG9rZW4sIHVwbG9hZC5maWVsZHMoW1xyXG4gIHsgbmFtZTogJ2xvZ29fZXZlbnQnLCBtYXhDb3VudDogMSB9LFxyXG4gIHsgbmFtZTogJ2ltYWdlc19hY2N1ZWlsJywgbWF4Q291bnQ6IDEgfSxcclxuICB7IG5hbWU6ICdpbWFnZXNfY29udGVudScsIG1heENvdW50OiAxIH0sXHJcbl0pLCBPcmdhbml6ZXJDb250cm9sZXIudXBkYXRlRXZlbnQpO1xyXG5cclxuLy8gUm91dGUgcG91ciBzdXBwcmltZXIgdW4gw6l2w6luZW1lbnRcclxucm91dGVyLmRlbGV0ZSgnL2V2ZW50cy86aWQnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmRlbGV0ZUV2ZW50KTtcclxuXHJcbi8vIE5vdXZlbGxlIHJvdXRlIHB1YmxpcXVlIHBvdXIgYWZmaWNoZXIgdG91cyBsZXMgw6l2w6luZW1lbnRzXHJcbnJvdXRlci5nZXQoJy9wdWJsaWMtZXZlbnRzJywgT3JnYW5pemVyQ29udHJvbGVyLmdldEFsbFB1YmxpY0V2ZW50cyk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvZXZlbnQvOmlkJywgT3JnYW5pemVyQ29udHJvbGVyLmdldEV2ZW50V2l0aE9yZ2FuaXplcik7XHJcblxyXG4vLyBSb3V0ZSBwdWJsaXF1ZSBwb3VyIHLDqWN1cMOpcmVyIGRldGFpbCBkJ3VuIMOpdsOpbmVtZW50IHNww6ljaWZpcXVlIHBhciBzb24gSURcclxucm91dGVyLmdldCgnL2V2ZW50LzppZCcsIE9yZ2FuaXplckNvbnRyb2xlci5nZXRFdmVudERldGFpbEJ5SWQpO1xyXG5cclxuLy9Sb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIGxlcyBwYXJ0aWNpcGFudHMgZCd1biDDqXbDqW5lbWVudFxyXG5yb3V0ZXIuZ2V0KCcvcGFydGljaXBhbnRzL2FsbCcsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0QWxsUGFydGljaXBhbnRzQnlPcmdhbml6ZXIpO1xyXG4vLyBSb3V0ZSBwb3VyIGwnYWNoYXQgZGUgdGlja2V0c1xyXG5yb3V0ZXIucG9zdChcIi9hY2hldGVyLXRpY2tldFwiLCBPcmdhbml6ZXJDb250cm9sZXIuYWNoZXRlclRpY2tldCk7XHJcblxyXG4vL1JvdXRlIHBvdXIgbGEgZ2VzdGlvbiBkZSB0aWNrZXRzIHBhciBsJ29yZ2FuaXNhdGV1clxyXG5yb3V0ZXIuZ2V0KFwiL3RpY2tldHMvOm9yZ2FuaXplcklkXCIsIE9yZ2FuaXplckNvbnRyb2xlci5nZXRPcmdhbml6ZXJUaWNrZXRzKTtcclxucm91dGVyLmdldChcIi9leHBvcnQtdGlja2V0cy86b3JnYW5pemVySWRcIiwgT3JnYW5pemVyQ29udHJvbGVyLmV4cG9ydE9yZ2FuaXplclRpY2tldHMpO1xyXG5cclxuXHJcblxyXG4vLyoqKioqKioqKioqKioqKioqKioqKlBhcnRpY2lwYW50KioqKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8gUm91dGUgcG91ciBzdXBwcmltZXIgdW4gcGFydGljaXBhbnQgcGFyIHNvbiBJRCBkYW5zIGxlIFRCIG9yZ25pc2F0ZXVyXHJcbnJvdXRlci5kZWxldGUoJy9wYXJ0aWNpcGFudHMvOnBhcnRpY2lwYW50SWQnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmRlbGV0ZVBhcnRpY2lwYW50KTtcclxuXHJcbi8vIHJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgdW4gcGFydGljaXBhbnQgc3DDqWNpZmlxdWVcclxucm91dGVyLmdldCgnL3BhcnRpY2lwYW50LzpwYXJ0aWNpcGFudElkJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRQYXJ0aWNpcGFudEJ5SWQpO1xyXG5cclxuLy8qKioqKioqKioqKioqKioqKioqKipnZW5lcmF0aW9uIHBvdWxlcyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG4vLyBSw6ljdXDDqXJlciBsZXMgw6l2w6luZW1lbnRzIGRlIGwnb3JnYW5pc2F0ZXVyXHJcbnJvdXRlci5nZXQoJy9ldmVudHMnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmdldEV2ZW50c0J5T3JnYW5pemVyKTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlIG5vbWJyZSBkZSBwYXJ0aWNpcGFudHMgcG91ciB1biDDqXbDqW5lbWVudCBkZXB1aXMgXCJwYXJ0aWNpcGVyXCJcclxucm91dGVyLmdldCgnL2V2ZW50LzpldmVudElkL3BhcnRpY2lwYW50cycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0UGFydGljaXBhbnRzQW5kQ291bnRCeUV2ZW50KTtcclxuXHJcblxyXG4vLyBSb3V0ZSBwb3VyIGNyw6llciBkZXMgcG91bGVzIHBvdXIgdW4gw6l2w6luZW1lbnQgZG9ubsOpXHJcbnJvdXRlci5wb3N0KCcvY3JlYXRlLXBvb2xzJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5jcmVhdGVQb29scyk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqXBhcnRpciBsZXMgcGFydGljaXBhbnRzIGRhbnMgbGVzIHBvdWxlcyBkZSBtYW5pw6hyZSBhbMOpYXRvaXJlXHJcbnJvdXRlci5wb3N0KCcvYXNzaWduLXBhcnRpY2lwYW50cycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuYXNzaWduUGFydGljaXBhbnRzVG9Qb29scyk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIGxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIHBvdXIgdW4gw6l2w6luZW1lbnQgZG9ubsOpXHJcbnJvdXRlci5nZXQoJy9ldmVudC86ZXZlbnRJZC9wb29scycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0UG9vbHNXaXRoUGFydGljaXBhbnRzKTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyDDqXbDqW5lbWVudHMgcXVpIG9udCBkZXMgcG91bGVzXHJcbnJvdXRlci5nZXQoJy9ldmVudHMtd2l0aC1wb29scycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0RXZlbnRzV2l0aFBvb2xzKTtcclxuXHJcblxyXG4vLyAqKioqKioqKioqKioqIE5PVVZFTExFIFJPVVRFIDogYWpvdXQgbWFudWVsIGQndW4gcGFydGljaXBhbnQgZGFucyB1bmUgcG91bGUgKioqKioqKioqKioqKlxyXG5yb3V0ZXIucG9zdCgnL21hbnVhbC1hZGQtcGFydGljaXBhbnQnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmFkZFBhcnRpY2lwYW50TWFudWFsKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgc3VwcHJpbWVyIGxlcyBwb3VsZXMgZXQgbGV1cnMgcGFydGljaXBhbnRzIHBvdXIgdW4gw6l2w6luZW1lbnQgZG9ubsOpXHJcbnJvdXRlci5kZWxldGUoJy9ldmVudC86ZXZlbnRJZC9wb29scycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZGVsZXRlUG9vbHNGb3JFdmVudCk7XHJcblxyXG4vLyAqKioqKioqKioqKioqIHBvdXIgbGUgcmVuY29udHJlICoqKioqKioqKioqKipcclxucm91dGVyLmdldCgnL29yZ2FuaXplci1ldmVudHMnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmdldEV2ZW50c0J5T3JnYW5pemVyTWF0Y2gpO1xyXG5yb3V0ZXIuZ2V0KCcvZXZlbnRtYXRjaC86ZXZlbnRJZC9wb29scycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0UG9vbHNXaXRoUGFydGljaXBhbnRzTWF0Y2gpO1xyXG5cclxuLy8gU3RvY2tlciB1bmUgbm91dmVsbGUgcmVuY29udHJlXHJcbnJvdXRlci5wb3N0KCcvY3JlYXRlbWF0Y2gnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmNyZWF0ZU1hdGNoKTtcclxuXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyByZW5jb250cmVzIGQndW4gw6l2w6luZW1lbnQgZG9ubsOpXHJcbnJvdXRlci5nZXQoJy9ldmVudC86ZXZlbnRJZC9tYXRjaGVzJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRNYXRjaGVzQnlFdmVudCk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHN1cHByaW1lciB1bmUgcmVuY29udHJlXHJcbnJvdXRlci5kZWxldGUoJy9tYXRjaC86bWF0Y2hJZCcsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZGVsZXRlTWF0Y2gpO1xyXG5cclxuLy8gLy8gcG91ciByw6ljdXDDqXJlciBsZSBjYWxlbmRyaWVyIGRlcyByZW5jb250cmVzXHJcbi8vIHJvdXRlci5nZXQoJy9ldmVudGNhbGVuZHJpZXIvOmV2ZW50SWQvbWF0Y2hlcycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0Q2FsZW5kYXJNYXRjaGVzQnlFdmVudCk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIHRvdXRlcyBsZXMgcmVuY29udHJlcyBkZSB0b3VzIGxlcyDDqXbDqW5lbWVudHMgZCd1biBvcmdhbmlzYXRldXJcclxucm91dGVyLmdldCgnL2V2ZW50Y2FsZW5kcmllci9tYXRjaGVzJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRBbGxDYWxlbmRhck1hdGNoZXMpO1xyXG5cclxuLy8gUm91dGUgcG91ciByw6ljdXDDqXJlciBsZXMgcmVuY29udHJlcyBkJ3VuIMOpdsOpbmVtZW50IHNww6ljaWZpcXVlXHJcbnJvdXRlci5nZXQoJy9ldmVudGNhbGVuZHJpZXIvOmV2ZW50SWQvbWF0Y2hlcycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0Q2FsZW5kYXJNYXRjaGVzQnlFdmVudCk7XHJcblxyXG4vLyAvL2Vudm95ZSBlbWFpbCBhdSBwYXJ0aWNpcGFudCBcclxucm91dGVyLnBvc3QoXHJcbiAgJy9wYXJ0aWNpcGFudHMvOmlkL3NlbmQtZW1haWwnLCAvLyBSb3V0ZSBwb3VyIGVudm95ZXIgdW4gZW1haWwgZGVwdWlzIHVuIG9yZ2FuaXNhdGV1clxyXG4gIHZlcmlmeVRva2VuLCAvLyBWw6lyaWZpZSBxdWUgbCdvcmdhbmlzYXRldXIgZXN0IGF1dGhlbnRpZmnDqVxyXG4gICAvLyBWw6lyaWZpZSBxdWUgbCd1dGlsaXNhdGV1ciBhIGxlIHLDtGxlIFwib3JnYW5pemVyXCJcclxuICBPcmdhbml6ZXJDb250cm9sZXIuc2VuZEVtYWlsVG9QYXJ0aWNpcGFudCAvLyBNw6l0aG9kZSBkdSBjb250csO0bGV1clxyXG4pO1xyXG5cclxuLy8qKioqKioqKioqKioqKioqKioqKipyZXN1bHRhdHMqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIGxlcyBpbmZvcm1hdGlvbnMgZCd1biDDqXbDqW5lbWVudCBzw6lsZWN0aW9ubsOpXHJcbnJvdXRlci5nZXQoJy9ldmVudC86ZXZlbnRJZC9kZXRhaWxzcmVzdWx0YXRzJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRFdmVudFJlc3VsdGF0cyk7XHJcblxyXG4vLyBSw6ljdXDDqXJlciBsZXMgcmVuY29udHJlcyBmaWx0csOpZXMgcGFyIHBoYXNlLCBqb3VybsOpZSBvdSB0b3VyIGZpbmFsXHJcbnJvdXRlci5nZXQoJy9ldmVudC86ZXZlbnRJZC9maWx0ZXJlZC1tYXRjaGVzJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci5nZXRGaWx0ZXJlZE1hdGNoZXNCeUV2ZW50KTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgZW5yZWdpc3RyZXIgbGVzIHLDqXN1bHRhdHMgZGVzIHJlbmNvbnRyZXNcclxucm91dGVyLnBvc3QoJy9ldmVudC86ZXZlbnRJZC9zYXZlLXJlc3VsdHMnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLnNhdmVNYXRjaFJlc3VsdHMpO1xyXG5cclxuLy8g4pyFIFJvdXRlIHB1YmxpcXVlIHBvdXIgcsOpY3Vww6lyZXIgbGVzIMOpdsOpbmVtZW50c1xyXG5yb3V0ZXIuZ2V0KCcvcHVibGljL2V2ZW50cycsIE9yZ2FuaXplckNvbnRyb2xlci5nZXRQdWJsaWNFdmVudHMpO1xyXG5cclxuXHJcbi8vKioqKioqKioqKioqKioqKioqKioqIExpc3RlIHJlc3VsdGF0cyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vIFLDqWN1cMOpcmVyIGxlcyByw6lzdWx0YXRzIGQndW4gw6l2w6luZW1lbnRcclxuXHJcbnJvdXRlci5nZXQoJy9ldmVudC86ZXZlbnRJZC9yZXN1bHRhdHMnLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0RXZlbnRSZXN1bHRhdExpc3QpO1xyXG5cclxuXHJcbi8vcG91ciBmaWx0cmVyIGxlcyByZXN1bHRhdHNcclxuXHJcbnJvdXRlci5nZXQoJy9ldmVudC86ZXZlbnRJZC9yZXN1bHRhdHMvZmlsdGVyZWQnLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0RmlsdGVyZWRNYXRjaGVzUmVzdWx0YXRMaXN0KTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgdG91cyBsZXMgcsOpc3VsdGF0cyBkZXMgbWF0Y2hzIGRlIHRvdXMgbGVzIMOpdsOpbmVtZW50c1xyXG5yb3V0ZXIuZ2V0KCcvYWxsLXJlc3VsdGF0cycsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZ2V0QWxsTWF0Y2hlc1Jlc3VsdGF0TGlzdCk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIG1vZGlmaWVyIHVuIHLDqXN1bHRhdCBkZSBtYXRjaFxyXG5yb3V0ZXIucHV0KCcvbWF0Y2gvOm1hdGNoSWQvdXBkYXRlLXNjb3JlJywgdmVyaWZ5VG9rZW4sIE9yZ2FuaXplckNvbnRyb2xlci51cGRhdGVNYXRjaFNjb3JlKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgc3VwcHJpbWVyIHVuIHLDqXN1bHRhdCBkZSBtYXRjaCB2aWEgYGlkX3Jlc3VsdGF0YFxyXG5yb3V0ZXIuZGVsZXRlKCcvbWF0Y2gvcmVzdWx0YXQvOnJlc3VsdElkL2RlbGV0ZScsIHZlcmlmeVRva2VuLCBPcmdhbml6ZXJDb250cm9sZXIuZGVsZXRlTWF0Y2hSZXN1bHQpO1xyXG5cclxuLy8qKioqKioqKioqKioqKioqKioqKiogQ2xhc3NlbWVudCoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vIC8vIFJvdXRlIHBvdXIgcsOpY3Vww6hyZSBsZXMgcsOpc3VsdGF0cyBkZXMgbWF0Y2hzIGV0IGNhbGN1bGUgbGUgY2xhc3NlbWVudC5cclxucm91dGVyLmdldCgnL2NsYXNzZW1lbnQnLCB2ZXJpZnlUb2tlbiwgT3JnYW5pemVyQ29udHJvbGVyLmdldENsYXNzZW1lbnQpO1xyXG5cclxuXHJcblxyXG5t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","map":{"version":3,"names":["express","require","verifyToken","OrganizerControler","multer","path","upload","resolve","__dirname","router","Router","post","createOrganizer","get","getOrganizerById","login","getProfilOrganizer","put","updateProfilOrganizer","activateAccount","checkEmail","checkLastName","checkFirstName","sendResetCode","verifyResetCode","resetPassword","getAllEvents","getEventAll","fields","name","maxCount","createEvent","getEventById","updateEvent","delete","deleteEvent","getAllPublicEvents","getEventWithOrganizer","getEventDetailById","getAllParticipantsByOrganizer","acheterTicket","getOrganizerTickets","exportOrganizerTickets","deleteParticipant","getParticipantById","getEventsByOrganizer","getParticipantsAndCountByEvent","createPools","assignParticipantsToPools","getPoolsWithParticipants","getEventsWithPools","addParticipantManual","deletePoolsForEvent","getEventsByOrganizerMatch","getPoolsWithParticipantsMatch","createMatch","getMatchesByEvent","deleteMatch","getAllCalendarMatches","getCalendarMatchesByEvent","sendEmailToParticipant","getEventResultats","getFilteredMatchesByEvent","saveMatchResults","getPublicEvents","getEventResultatList","getFilteredMatchesResultatList","getAllMatchesResultatList","updateMatchScore","deleteMatchResult","getClassement","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["organizerRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst verifyToken = require('../middleware/jwtMiddleware');\r\nconst OrganizerControler = require('../controlers/OrganizerControler');\r\nconst multer = require('multer');\r\nconst path = require('path');\r\nconst upload = require(path.resolve(__dirname, '../middleware/multerConfig'));\r\n\r\nconst router = express.Router();\r\n\r\n//*********************Organisateur**************************\r\n\r\n\r\n// Route pour cr√©er un nouvel organisateur (sans restriction de r√¥le)\r\nrouter.post('/create', OrganizerControler.createOrganizer);\r\n\r\n// Route pour r√©cup√©rer les informations d'un organisateur par ID (publique, sans token)\r\nrouter.get('/profile/:id', OrganizerControler.getOrganizerById);\r\n\r\n// Route pour la connexion de l'organisateur (pas de token requis pour la connexion)\r\nrouter.post('/login/organizer', OrganizerControler.login);\r\n\r\n// Route pour acc√©der au profil d'un organisateur (n√©cessite un token)\r\nrouter.get('/profile', verifyToken, OrganizerControler.getProfilOrganizer);\r\n\r\n// Nouvelle route pour mettre √† jour le profil de l'organisateur\r\nrouter.put('/profile', verifyToken, OrganizerControler.updateProfilOrganizer);\r\n\r\nrouter.get('/activate/:token', OrganizerControler.activateAccount); // Route pour activer le compte\r\n\r\n// Route pour v√©rifier si un email est d√©j√† utilis√©\r\nrouter.post('/check-email', OrganizerControler.checkEmail);\r\n\r\n// Nouvelles routes pour v√©rifier le pr√©nom et le nom\r\nrouter.post('/check-last-name', OrganizerControler.checkLastName);\r\nrouter.post('/check-first-name', OrganizerControler.checkFirstName);\r\n\r\n// Route 1 : Envoyer le code de r√©initialisation\r\nrouter.post('/send-reset-code', OrganizerControler.sendResetCode);\r\n\r\n// Route 2 : Valider le code\r\nrouter.post('/verify-reset-code', OrganizerControler.verifyResetCode);\r\n\r\n// Route 3 : R√©initialiser le mot de passe\r\nrouter.post('/reset-password', OrganizerControler.resetPassword);\r\n\r\n//*********************Evenement**************************\r\n\r\n// Route pour cr√©er un nouvel √©v√©nement\r\n// router.post('/create-event', verifyToken, OrganizerControler.createEvent);\r\n\r\n// routes pour afficher un evenement\r\nrouter.get('/events', verifyToken, OrganizerControler.getAllEvents);\r\nrouter.get('/allevents', OrganizerControler.getEventAll);\r\n\r\nrouter.post(\r\n  '/create-event',\r\n  verifyToken,\r\n  upload.fields([\r\n    { name: 'logo_event', maxCount: 1 },\r\n    { name: 'images_accueil', maxCount: 1 },\r\n    { name: 'images_contenu', maxCount: 1 },\r\n  ]),\r\n  OrganizerControler.createEvent\r\n);\r\n\r\n//routes pour modifier un evenement\r\nrouter.get('/events/:id', verifyToken, OrganizerControler.getEventById);\r\n\r\n// Route pour mettre √† jour un √©v√©nement\r\nrouter.put('/events/:id', verifyToken, upload.fields([\r\n  { name: 'logo_event', maxCount: 1 },\r\n  { name: 'images_accueil', maxCount: 1 },\r\n  { name: 'images_contenu', maxCount: 1 },\r\n]), OrganizerControler.updateEvent);\r\n\r\n// Route pour supprimer un √©v√©nement\r\nrouter.delete('/events/:id', verifyToken, OrganizerControler.deleteEvent);\r\n\r\n// Nouvelle route publique pour afficher tous les √©v√©nements\r\nrouter.get('/public-events', OrganizerControler.getAllPublicEvents);\r\n\r\nrouter.get('/event/:id', OrganizerControler.getEventWithOrganizer);\r\n\r\n// Route publique pour r√©cup√©rer detail d'un √©v√©nement sp√©cifique par son ID\r\nrouter.get('/event/:id', OrganizerControler.getEventDetailById);\r\n\r\n//Route pour r√©cup√©rer les participants d'un √©v√©nement\r\nrouter.get('/participants/all', verifyToken, OrganizerControler.getAllParticipantsByOrganizer);\r\n// Route pour l'achat de tickets\r\nrouter.post(\"/acheter-ticket\", OrganizerControler.acheterTicket);\r\n\r\n//Route pour la gestion de tickets par l'organisateur\r\nrouter.get(\"/tickets/:organizerId\", OrganizerControler.getOrganizerTickets);\r\nrouter.get(\"/export-tickets/:organizerId\", OrganizerControler.exportOrganizerTickets);\r\n\r\n\r\n\r\n//*********************Participant**************************\r\n// Route pour supprimer un participant par son ID dans le TB orgnisateur\r\nrouter.delete('/participants/:participantId', verifyToken, OrganizerControler.deleteParticipant);\r\n\r\n// route pour r√©cup√©rer un participant sp√©cifique\r\nrouter.get('/participant/:participantId', verifyToken, OrganizerControler.getParticipantById);\r\n\r\n//*********************generation poules**************************\r\n\r\n// R√©cup√©rer les √©v√©nements de l'organisateur\r\nrouter.get('/events', verifyToken, OrganizerControler.getEventsByOrganizer);\r\n\r\n// R√©cup√©rer le nombre de participants pour un √©v√©nement depuis \"participer\"\r\nrouter.get('/event/:eventId/participants', verifyToken, OrganizerControler.getParticipantsAndCountByEvent);\r\n\r\n\r\n// Route pour cr√©er des poules pour un √©v√©nement donn√©\r\nrouter.post('/create-pools', verifyToken, OrganizerControler.createPools);\r\n\r\n// Route pour r√©partir les participants dans les poules de mani√®re al√©atoire\r\nrouter.post('/assign-participants', verifyToken, OrganizerControler.assignParticipantsToPools);\r\n\r\n// Route pour r√©cup√©rer les poules et leurs participants pour un √©v√©nement donn√©\r\nrouter.get('/event/:eventId/pools', verifyToken, OrganizerControler.getPoolsWithParticipants);\r\n\r\n// R√©cup√©rer les √©v√©nements qui ont des poules\r\nrouter.get('/events-with-pools', verifyToken, OrganizerControler.getEventsWithPools);\r\n\r\n\r\n// ************* NOUVELLE ROUTE : ajout manuel d'un participant dans une poule *************\r\nrouter.post('/manual-add-participant', verifyToken, OrganizerControler.addParticipantManual);\r\n\r\n// Route pour supprimer les poules et leurs participants pour un √©v√©nement donn√©\r\nrouter.delete('/event/:eventId/pools', verifyToken, OrganizerControler.deletePoolsForEvent);\r\n\r\n// ************* pour le rencontre *************\r\nrouter.get('/organizer-events', verifyToken, OrganizerControler.getEventsByOrganizerMatch);\r\nrouter.get('/eventmatch/:eventId/pools', verifyToken, OrganizerControler.getPoolsWithParticipantsMatch);\r\n\r\n// Stocker une nouvelle rencontre\r\nrouter.post('/creatematch', verifyToken, OrganizerControler.createMatch);\r\n\r\n// R√©cup√©rer les rencontres d'un √©v√©nement donn√©\r\nrouter.get('/event/:eventId/matches', verifyToken, OrganizerControler.getMatchesByEvent);\r\n\r\n// Route pour supprimer une rencontre\r\nrouter.delete('/match/:matchId', verifyToken, OrganizerControler.deleteMatch);\r\n\r\n// // pour r√©cup√©rer le calendrier des rencontres\r\n// router.get('/eventcalendrier/:eventId/matches', verifyToken, OrganizerControler.getCalendarMatchesByEvent);\r\n\r\n// Route pour r√©cup√©rer toutes les rencontres de tous les √©v√©nements d'un organisateur\r\nrouter.get('/eventcalendrier/matches', verifyToken, OrganizerControler.getAllCalendarMatches);\r\n\r\n// Route pour r√©cup√©rer les rencontres d'un √©v√©nement sp√©cifique\r\nrouter.get('/eventcalendrier/:eventId/matches', verifyToken, OrganizerControler.getCalendarMatchesByEvent);\r\n\r\n// //envoye email au participant \r\nrouter.post(\r\n  '/participants/:id/send-email', // Route pour envoyer un email depuis un organisateur\r\n  verifyToken, // V√©rifie que l'organisateur est authentifi√©\r\n   // V√©rifie que l'utilisateur a le r√¥le \"organizer\"\r\n  OrganizerControler.sendEmailToParticipant // M√©thode du contr√¥leur\r\n);\r\n\r\n//*********************resultats**************************\r\n// Route pour r√©cup√©rer les informations d'un √©v√©nement s√©lectionn√©\r\nrouter.get('/event/:eventId/detailsresultats', verifyToken, OrganizerControler.getEventResultats);\r\n\r\n// R√©cup√©rer les rencontres filtr√©es par phase, journ√©e ou tour final\r\nrouter.get('/event/:eventId/filtered-matches', verifyToken, OrganizerControler.getFilteredMatchesByEvent);\r\n\r\n// Route pour enregistrer les r√©sultats des rencontres\r\nrouter.post('/event/:eventId/save-results', verifyToken, OrganizerControler.saveMatchResults);\r\n\r\n// ‚úÖ Route publique pour r√©cup√©rer les √©v√©nements\r\nrouter.get('/public/events', OrganizerControler.getPublicEvents);\r\n\r\n\r\n//********************* Liste resultats**************************\r\n// R√©cup√©rer les r√©sultats d'un √©v√©nement\r\n\r\nrouter.get('/event/:eventId/resultats', OrganizerControler.getEventResultatList);\r\n\r\n\r\n//pour filtrer les resultats\r\n\r\nrouter.get('/event/:eventId/resultats/filtered', OrganizerControler.getFilteredMatchesResultatList);\r\n\r\n// Route pour r√©cup√©rer tous les r√©sultats des matchs de tous les √©v√©nements\r\nrouter.get('/all-resultats', verifyToken, OrganizerControler.getAllMatchesResultatList);\r\n\r\n// Route pour modifier un r√©sultat de match\r\nrouter.put('/match/:matchId/update-score', verifyToken, OrganizerControler.updateMatchScore);\r\n\r\n// Route pour supprimer un r√©sultat de match via `id_resultat`\r\nrouter.delete('/match/resultat/:resultId/delete', verifyToken, OrganizerControler.deleteMatchResult);\r\n\r\n//********************* Classement**************************\r\n// // Route pour r√©cup√®re les r√©sultats des matchs et calcule le classement.\r\nrouter.get('/classement', verifyToken, OrganizerControler.getClassement);\r\n\r\n\r\n\r\nmodule.exports = router;"],"mappings":"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","ignoreList":[]}},"mtime":1742838898130},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\middleware\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\middleware\\\\multerConfig.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst multer = require('multer');\nconst path = require('path');\n\n// Configuration pour le stockage des fichiers\nconst storage = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, 'uploads/'); // Dossier o√π les fichiers seront stock√©s\n  },\n  filename: (req, file, cb) => {\n    cb(null, `${Date.now()}_${file.originalname}`); // Nom unique pour √©viter les conflits\n  }\n});\nconst upload = multer({\n  storage\n});\nmodule.exports = upload;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXIiLCJyZXF1aXJlIiwicGF0aCIsInN0b3JhZ2UiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZmlsZW5hbWUiLCJEYXRlIiwibm93Iiwib3JpZ2luYWxuYW1lIiwidXBsb2FkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxtaWRkbGV3YXJlXFwiLCJzb3VyY2VzIjpbIm11bHRlckNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtdWx0ZXIgPSByZXF1aXJlKCdtdWx0ZXInKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuXHJcbi8vIENvbmZpZ3VyYXRpb24gcG91ciBsZSBzdG9ja2FnZSBkZXMgZmljaGllcnNcclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCAndXBsb2Fkcy8nKTsgLy8gRG9zc2llciBvw7kgbGVzIGZpY2hpZXJzIHNlcm9udCBzdG9ja8Opc1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBgJHtEYXRlLm5vdygpfV8ke2ZpbGUub3JpZ2luYWxuYW1lfWApOyAvLyBOb20gdW5pcXVlIHBvdXIgw6l2aXRlciBsZXMgY29uZmxpdHNcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7IHN0b3JhZ2UgfSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHVwbG9hZDtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7O0FBRTVCO0FBQ0EsTUFBTUUsT0FBTyxHQUFHSCxNQUFNLENBQUNJLFdBQVcsQ0FBQztFQUNqQ0MsV0FBVyxFQUFFQSxDQUFDQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxLQUFLO0lBQzlCQSxFQUFFLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7RUFDeEIsQ0FBQztFQUNEQyxRQUFRLEVBQUVBLENBQUNILEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEtBQUs7SUFDM0JBLEVBQUUsQ0FBQyxJQUFJLEVBQUUsR0FBR0UsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxJQUFJSixJQUFJLENBQUNLLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztFQUNsRDtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU1DLE1BQU0sR0FBR2IsTUFBTSxDQUFDO0VBQUVHO0FBQVEsQ0FBQyxDQUFDO0FBRWxDVyxNQUFNLENBQUNDLE9BQU8sR0FBR0YsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["multer","require","path","storage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","upload","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\middleware\\","sources":["multerConfig.js"],"sourcesContent":["const multer = require('multer');\r\nconst path = require('path');\r\n\r\n// Configuration pour le stockage des fichiers\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, 'uploads/'); // Dossier o√π les fichiers seront stock√©s\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, `${Date.now()}_${file.originalname}`); // Nom unique pour √©viter les conflits\r\n  },\r\n});\r\n\r\nconst upload = multer({ storage });\r\n\r\nmodule.exports = upload;\r\n"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;;AAE5B;AACA,MAAME,OAAO,GAAGH,MAAM,CAACI,WAAW,CAAC;EACjCC,WAAW,EAAEA,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAK;IAC9BA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;EACxB,CAAC;EACDC,QAAQ,EAAEA,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,KAAK;IAC3BA,EAAE,CAAC,IAAI,EAAE,GAAGE,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIJ,IAAI,CAACK,YAAY,EAAE,CAAC,CAAC,CAAC;EAClD;AACF,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAGb,MAAM,CAAC;EAAEG;AAAQ,CAAC,CAAC;AAElCW,MAAM,CAACC,OAAO,GAAGF,MAAM","ignoreList":[]}},"mtime":1731952029316},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\participantRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst ParticipantControler = require('../controlers/participantControler'); // Assurez-vous d'avoir ce contr√¥leur\nconst nodemailer = require('nodemailer'); // Importez Nodemailer pour l'envoi des emails\nconst router = express.Router();\nconst verifyToken = require('../middleware/jwtMiddleware');\nconst {\n  getAllParticipantsforCertificat\n} = require('../queries');\nlet userVerificationCodes = {}; // Stocke temporairement les codes de validation pour chaque utilisateur\n\n//*********************Participant**************************\n\n// Route pour r√©cup√©rer tous les participants\nrouter.get('/all', ParticipantControler.getAllParticipants);\n\n//Route pour supprimer un participant\nrouter.delete('/participants/:id', ParticipantControler.deleteParticipant);\n\n// Route pour r√©cup√©rer le nombre total de participants\nrouter.get('/count', ParticipantControler.getParticipantCount);\n\n// Route pour cr√©er un nouveau participant (sans restriction de r√¥le)\n//router.post('/create', ParticipantControler.createParticipant);\n\n// Route pour g√©rer l'inscription ou la connexion d'un participant\nrouter.post('/registerOrLogin', ParticipantControler.registerOrLoginParticipant);\n\n// Route pour envoyer le code de validation\nrouter.post('/sendVerificationCode', async (req, res) => {\n  const {\n    email\n  } = req.body;\n  if (!email) {\n    return res.status(400).json({\n      message: 'Email est requis'\n    });\n  }\n\n  // G√©n√©rer un code de validation\n  const verificationCode = Math.floor(100000 + Math.random() * 900000); // Code √† 6 chiffres\n  userVerificationCodes[email] = verificationCode; // Associer le code √† l'email\n\n  // Configurer Nodemailer\n  const transporter = nodemailer.createTransport({\n    service: 'gmail',\n    // ou un autre service (ex : 'hotmail')\n    auth: {\n      user: 'rak.tahina02@gmail.com',\n      // Remplacez par votre email\n      pass: 'wikybpaufizeykql' // Remplacez par votre mot de passe ou token\n    }\n  });\n  const mailOptions = {\n    from: 'rak.tahina02@gmail.com',\n    to: email,\n    subject: 'Code de validation pour votre inscription',\n    text: `Votre code de validation est : ${verificationCode}`\n  };\n  try {\n    await transporter.sendMail(mailOptions);\n    res.status(200).json({\n      message: 'Code de validation envoy√© avec succ√®s'\n    });\n  } catch (error) {\n    console.error('Erreur lors de l\\'envoi de l\\'email:', error);\n    res.status(500).json({\n      message: 'Erreur lors de l\\'envoi de l\\'email'\n    });\n  }\n});\n\n// Route pour valider le code de validation\nrouter.post('/verifyCode', (req, res) => {\n  const {\n    email,\n    code\n  } = req.body;\n  // Log les donn√©es re√ßues\n  console.log('Donn√©es re√ßues:', {\n    email,\n    code\n  });\n  if (userVerificationCodes[email] && userVerificationCodes[email] === parseInt(code, 10)) {\n    delete userVerificationCodes[email]; // Supprimer le code apr√®s validation\n    return res.status(200).json({\n      message: 'Code v√©rifi√© avec succ√®s'\n    });\n  }\n  res.status(400).json({\n    message: 'Code invalide ou expir√©'\n  });\n});\n\n//Route pour le tableau de bord de participant\n// router.get('/dashboard/:participantId', ParticipantControler.getDashboardData);\n\n//Routes pour affich√© le profil\nrouter.get('/profile/:participantId', verifyToken, ParticipantControler.getParticipantProfile);\n\n// Route pour la connexion du participant\nrouter.post('/login/participant', ParticipantControler.loginParticipant);\n\n// Route pour mettre √† jour le profil du participant\nrouter.put('/profile/:participantId', verifyToken, ParticipantControler.updateParticipantProfile);\n\n// Route pour r√©cup√©rer les √©v√©nements auxquels le participant est inscrit\nrouter.get('/events', verifyToken, ParticipantControler.getInscribedEvents);\n\n// Route pour annuler une inscription\nrouter.delete('/unsubscribe/:eventId', verifyToken, ParticipantControler.unsubscribeFromEvent);\n\n// Route pour r√©cup√©rer uniquement les √©v√©nements auxquels le participant est inscrit\nrouter.get('/evenements/inscrits', verifyToken, ParticipantControler.getParticipantEvents);\n\n// Route pour cr√©er une √©quipe (li√© √† un participant)\nrouter.post('/equipe/create', verifyToken, ParticipantControler.createEquipe);\n\n// Route pour r√©cup√©rer les √©quipes du participant\nrouter.get('/equipe/my-teams', verifyToken, ParticipantControler.getMyTeams);\n\n// Route pour supprimer une √©quipe\nrouter.delete('/equipe/delete/:id', verifyToken, ParticipantControler.deleteEquipe);\n\n// Route pour modifier une √©quipe\nrouter.put('/equipe/update/:id', verifyToken, ParticipantControler.updateEquipe);\n\n// Route pour ajouter un joueur √† une √©quipe\nrouter.post('/equipe/:idEquipe/joueurs', verifyToken, ParticipantControler.addJoueur);\n\n// Route pour r√©cup√©rer les joueurs d'une √©quipe sp√©cifique\nrouter.get('/equipe/:idEquipe/joueurs', verifyToken, ParticipantControler.getJoueursByEquipe);\n\n// Route pour modifier un joueur\nrouter.put('/joueur/update/:id', verifyToken, ParticipantControler.updateJoueur);\n\n// Route pour supprimer un joueur\nrouter.delete('/joueur/delete/:id', verifyToken, ParticipantControler.deleteJoueur);\nrouter.get(\"/allparticipants\", async (req, res) => {\n  try {\n    const participants = await getAllParticipantsforCertificat();\n    res.json(participants);\n  } catch (error) {\n    console.error(\"Erreur r√©cup√©ration participants :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de la r√©cup√©ration des participants\"\n    });\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIlBhcnRpY2lwYW50Q29udHJvbGVyIiwibm9kZW1haWxlciIsInJvdXRlciIsIlJvdXRlciIsInZlcmlmeVRva2VuIiwiZ2V0QWxsUGFydGljaXBhbnRzZm9yQ2VydGlmaWNhdCIsInVzZXJWZXJpZmljYXRpb25Db2RlcyIsImdldCIsImdldEFsbFBhcnRpY2lwYW50cyIsImRlbGV0ZSIsImRlbGV0ZVBhcnRpY2lwYW50IiwiZ2V0UGFydGljaXBhbnRDb3VudCIsInBvc3QiLCJyZWdpc3Rlck9yTG9naW5QYXJ0aWNpcGFudCIsInJlcSIsInJlcyIsImVtYWlsIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidmVyaWZpY2F0aW9uQ29kZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic2VydmljZSIsImF1dGgiLCJ1c2VyIiwicGFzcyIsIm1haWxPcHRpb25zIiwiZnJvbSIsInRvIiwic3ViamVjdCIsInRleHQiLCJzZW5kTWFpbCIsImVycm9yIiwiY29uc29sZSIsImNvZGUiLCJsb2ciLCJwYXJzZUludCIsImdldFBhcnRpY2lwYW50UHJvZmlsZSIsImxvZ2luUGFydGljaXBhbnQiLCJwdXQiLCJ1cGRhdGVQYXJ0aWNpcGFudFByb2ZpbGUiLCJnZXRJbnNjcmliZWRFdmVudHMiLCJ1bnN1YnNjcmliZUZyb21FdmVudCIsImdldFBhcnRpY2lwYW50RXZlbnRzIiwiY3JlYXRlRXF1aXBlIiwiZ2V0TXlUZWFtcyIsImRlbGV0ZUVxdWlwZSIsInVwZGF0ZUVxdWlwZSIsImFkZEpvdWV1ciIsImdldEpvdWV1cnNCeUVxdWlwZSIsInVwZGF0ZUpvdWV1ciIsImRlbGV0ZUpvdWV1ciIsInBhcnRpY2lwYW50cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxccm91dGVzXFwiLCJzb3VyY2VzIjpbInBhcnRpY2lwYW50Um91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IFBhcnRpY2lwYW50Q29udHJvbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGVycy9wYXJ0aWNpcGFudENvbnRyb2xlcicpOyAvLyBBc3N1cmV6LXZvdXMgZCdhdm9pciBjZSBjb250csO0bGV1clxyXG5jb25zdCBub2RlbWFpbGVyID0gcmVxdWlyZSgnbm9kZW1haWxlcicpOyAvLyBJbXBvcnRleiBOb2RlbWFpbGVyIHBvdXIgbCdlbnZvaSBkZXMgZW1haWxzXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IHZlcmlmeVRva2VuID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9qd3RNaWRkbGV3YXJlJyk7XHJcbmNvbnN0IHsgZ2V0QWxsUGFydGljaXBhbnRzZm9yQ2VydGlmaWNhdCB9ID0gcmVxdWlyZSgnLi4vcXVlcmllcycpO1xyXG5cclxuXHJcbmxldCB1c2VyVmVyaWZpY2F0aW9uQ29kZXMgPSB7fTsgLy8gU3RvY2tlIHRlbXBvcmFpcmVtZW50IGxlcyBjb2RlcyBkZSB2YWxpZGF0aW9uIHBvdXIgY2hhcXVlIHV0aWxpc2F0ZXVyXHJcblxyXG4vLyoqKioqKioqKioqKioqKioqKioqKlBhcnRpY2lwYW50KioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbi8vIFJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgdG91cyBsZXMgcGFydGljaXBhbnRzXHJcbnJvdXRlci5nZXQoJy9hbGwnLCBQYXJ0aWNpcGFudENvbnRyb2xlci5nZXRBbGxQYXJ0aWNpcGFudHMpO1xyXG5cclxuLy9Sb3V0ZSBwb3VyIHN1cHByaW1lciB1biBwYXJ0aWNpcGFudFxyXG5yb3V0ZXIuZGVsZXRlKCcvcGFydGljaXBhbnRzLzppZCcsIFBhcnRpY2lwYW50Q29udHJvbGVyLmRlbGV0ZVBhcnRpY2lwYW50KTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgbGUgbm9tYnJlIHRvdGFsIGRlIHBhcnRpY2lwYW50c1xyXG5yb3V0ZXIuZ2V0KCcvY291bnQnLCBQYXJ0aWNpcGFudENvbnRyb2xlci5nZXRQYXJ0aWNpcGFudENvdW50KTtcclxuXHJcblxyXG4vLyBSb3V0ZSBwb3VyIGNyw6llciB1biBub3V2ZWF1IHBhcnRpY2lwYW50IChzYW5zIHJlc3RyaWN0aW9uIGRlIHLDtGxlKVxyXG4vL3JvdXRlci5wb3N0KCcvY3JlYXRlJywgUGFydGljaXBhbnRDb250cm9sZXIuY3JlYXRlUGFydGljaXBhbnQpO1xyXG5cclxuLy8gUm91dGUgcG91ciBnw6lyZXIgbCdpbnNjcmlwdGlvbiBvdSBsYSBjb25uZXhpb24gZCd1biBwYXJ0aWNpcGFudFxyXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyT3JMb2dpbicsIFBhcnRpY2lwYW50Q29udHJvbGVyLnJlZ2lzdGVyT3JMb2dpblBhcnRpY2lwYW50KTtcclxuXHJcblxyXG4vLyBSb3V0ZSBwb3VyIGVudm95ZXIgbGUgY29kZSBkZSB2YWxpZGF0aW9uXHJcbnJvdXRlci5wb3N0KCcvc2VuZFZlcmlmaWNhdGlvbkNvZGUnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnRW1haWwgZXN0IHJlcXVpcycgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR8OpbsOpcmVyIHVuIGNvZGUgZGUgdmFsaWRhdGlvblxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQ29kZSA9IE1hdGguZmxvb3IoMTAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMCk7IC8vIENvZGUgw6AgNiBjaGlmZnJlc1xyXG4gICAgdXNlclZlcmlmaWNhdGlvbkNvZGVzW2VtYWlsXSA9IHZlcmlmaWNhdGlvbkNvZGU7IC8vIEFzc29jaWVyIGxlIGNvZGUgw6AgbCdlbWFpbFxyXG5cclxuICAgIC8vIENvbmZpZ3VyZXIgTm9kZW1haWxlclxyXG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XHJcbiAgICAgICAgc2VydmljZTogJ2dtYWlsJywgLy8gb3UgdW4gYXV0cmUgc2VydmljZSAoZXggOiAnaG90bWFpbCcpXHJcbiAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgICB1c2VyOiAncmFrLnRhaGluYTAyQGdtYWlsLmNvbScsIC8vIFJlbXBsYWNleiBwYXIgdm90cmUgZW1haWxcclxuICAgICAgICAgICAgcGFzczogJ3dpa3licGF1Zml6ZXlrcWwnLCAvLyBSZW1wbGFjZXogcGFyIHZvdHJlIG1vdCBkZSBwYXNzZSBvdSB0b2tlblxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcclxuICAgICAgICBmcm9tOiAncmFrLnRhaGluYTAyQGdtYWlsLmNvbScsXHJcbiAgICAgICAgdG86IGVtYWlsLFxyXG4gICAgICAgIHN1YmplY3Q6ICdDb2RlIGRlIHZhbGlkYXRpb24gcG91ciB2b3RyZSBpbnNjcmlwdGlvbicsXHJcbiAgICAgICAgdGV4dDogYFZvdHJlIGNvZGUgZGUgdmFsaWRhdGlvbiBlc3QgOiAke3ZlcmlmaWNhdGlvbkNvZGV9YCxcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQ29kZSBkZSB2YWxpZGF0aW9uIGVudm95w6kgYXZlYyBzdWNjw6hzJyB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbFxcJ2Vudm9pIGRlIGxcXCdlbWFpbDonLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbFxcJ2Vudm9pIGRlIGxcXCdlbWFpbCcgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gUm91dGUgcG91ciB2YWxpZGVyIGxlIGNvZGUgZGUgdmFsaWRhdGlvblxyXG5yb3V0ZXIucG9zdCgnL3ZlcmlmeUNvZGUnLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZW1haWwsIGNvZGUgfSA9IHJlcS5ib2R5O1xyXG4vLyBMb2cgbGVzIGRvbm7DqWVzIHJlw6d1ZXNcclxuY29uc29sZS5sb2coJ0Rvbm7DqWVzIHJlw6d1ZXM6JywgeyBlbWFpbCwgY29kZSB9KTtcclxuXHJcbiAgICBpZiAodXNlclZlcmlmaWNhdGlvbkNvZGVzW2VtYWlsXSAmJiB1c2VyVmVyaWZpY2F0aW9uQ29kZXNbZW1haWxdID09PSBwYXJzZUludChjb2RlLCAxMCkpIHtcclxuICAgICAgICBkZWxldGUgdXNlclZlcmlmaWNhdGlvbkNvZGVzW2VtYWlsXTsgLy8gU3VwcHJpbWVyIGxlIGNvZGUgYXByw6hzIHZhbGlkYXRpb25cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnQ29kZSB2w6lyaWZpw6kgYXZlYyBzdWNjw6hzJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdDb2RlIGludmFsaWRlIG91IGV4cGlyw6knIH0pO1xyXG59KTtcclxuXHJcbi8vUm91dGUgcG91ciBsZSB0YWJsZWF1IGRlIGJvcmQgZGUgcGFydGljaXBhbnRcclxuLy8gcm91dGVyLmdldCgnL2Rhc2hib2FyZC86cGFydGljaXBhbnRJZCcsIFBhcnRpY2lwYW50Q29udHJvbGVyLmdldERhc2hib2FyZERhdGEpO1xyXG5cclxuLy9Sb3V0ZXMgcG91ciBhZmZpY2jDqSBsZSBwcm9maWxcclxucm91dGVyLmdldCgnL3Byb2ZpbGUvOnBhcnRpY2lwYW50SWQnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIuZ2V0UGFydGljaXBhbnRQcm9maWxlKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgbGEgY29ubmV4aW9uIGR1IHBhcnRpY2lwYW50XHJcbnJvdXRlci5wb3N0KCcvbG9naW4vcGFydGljaXBhbnQnLCBQYXJ0aWNpcGFudENvbnRyb2xlci5sb2dpblBhcnRpY2lwYW50KTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgbWV0dHJlIMOgIGpvdXIgbGUgcHJvZmlsIGR1IHBhcnRpY2lwYW50XHJcbnJvdXRlci5wdXQoJy9wcm9maWxlLzpwYXJ0aWNpcGFudElkJywgdmVyaWZ5VG9rZW4sIFBhcnRpY2lwYW50Q29udHJvbGVyLnVwZGF0ZVBhcnRpY2lwYW50UHJvZmlsZSk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIGxlcyDDqXbDqW5lbWVudHMgYXV4cXVlbHMgbGUgcGFydGljaXBhbnQgZXN0IGluc2NyaXRcclxucm91dGVyLmdldCgnL2V2ZW50cycsIHZlcmlmeVRva2VuLCBQYXJ0aWNpcGFudENvbnRyb2xlci5nZXRJbnNjcmliZWRFdmVudHMpO1xyXG5cclxuLy8gUm91dGUgcG91ciBhbm51bGVyIHVuZSBpbnNjcmlwdGlvblxyXG5yb3V0ZXIuZGVsZXRlKCcvdW5zdWJzY3JpYmUvOmV2ZW50SWQnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIudW5zdWJzY3JpYmVGcm9tRXZlbnQpO1xyXG5cclxuLy8gUm91dGUgcG91ciByw6ljdXDDqXJlciB1bmlxdWVtZW50IGxlcyDDqXbDqW5lbWVudHMgYXV4cXVlbHMgbGUgcGFydGljaXBhbnQgZXN0IGluc2NyaXRcclxucm91dGVyLmdldCgnL2V2ZW5lbWVudHMvaW5zY3JpdHMnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIuZ2V0UGFydGljaXBhbnRFdmVudHMpO1xyXG5cclxuLy8gUm91dGUgcG91ciBjcsOpZXIgdW5lIMOpcXVpcGUgKGxpw6kgw6AgdW4gcGFydGljaXBhbnQpXHJcbnJvdXRlci5wb3N0KCcvZXF1aXBlL2NyZWF0ZScsIHZlcmlmeVRva2VuLCBQYXJ0aWNpcGFudENvbnRyb2xlci5jcmVhdGVFcXVpcGUpO1xyXG5cclxuLy8gUm91dGUgcG91ciByw6ljdXDDqXJlciBsZXMgw6lxdWlwZXMgZHUgcGFydGljaXBhbnRcclxucm91dGVyLmdldCgnL2VxdWlwZS9teS10ZWFtcycsIHZlcmlmeVRva2VuLCBQYXJ0aWNpcGFudENvbnRyb2xlci5nZXRNeVRlYW1zKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgc3VwcHJpbWVyIHVuZSDDqXF1aXBlXHJcbnJvdXRlci5kZWxldGUoJy9lcXVpcGUvZGVsZXRlLzppZCcsIHZlcmlmeVRva2VuLCBQYXJ0aWNpcGFudENvbnRyb2xlci5kZWxldGVFcXVpcGUpO1xyXG5cclxuLy8gUm91dGUgcG91ciBtb2RpZmllciB1bmUgw6lxdWlwZVxyXG5yb3V0ZXIucHV0KCcvZXF1aXBlL3VwZGF0ZS86aWQnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIudXBkYXRlRXF1aXBlKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgYWpvdXRlciB1biBqb3VldXIgw6AgdW5lIMOpcXVpcGVcclxucm91dGVyLnBvc3QoJy9lcXVpcGUvOmlkRXF1aXBlL2pvdWV1cnMnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIuYWRkSm91ZXVyKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgbGVzIGpvdWV1cnMgZCd1bmUgw6lxdWlwZSBzcMOpY2lmaXF1ZVxyXG5yb3V0ZXIuZ2V0KCcvZXF1aXBlLzppZEVxdWlwZS9qb3VldXJzJywgdmVyaWZ5VG9rZW4sIFBhcnRpY2lwYW50Q29udHJvbGVyLmdldEpvdWV1cnNCeUVxdWlwZSk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIG1vZGlmaWVyIHVuIGpvdWV1clxyXG5yb3V0ZXIucHV0KCcvam91ZXVyL3VwZGF0ZS86aWQnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIudXBkYXRlSm91ZXVyKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgc3VwcHJpbWVyIHVuIGpvdWV1clxyXG5yb3V0ZXIuZGVsZXRlKCcvam91ZXVyL2RlbGV0ZS86aWQnLCB2ZXJpZnlUb2tlbiwgUGFydGljaXBhbnRDb250cm9sZXIuZGVsZXRlSm91ZXVyKTtcclxuXHJcbnJvdXRlci5nZXQoXCIvYWxscGFydGljaXBhbnRzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgZ2V0QWxsUGFydGljaXBhbnRzZm9yQ2VydGlmaWNhdCgpO1xyXG4gICAgICByZXMuanNvbihwYXJ0aWNpcGFudHMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycmV1ciByw6ljdXDDqXJhdGlvbiBwYXJ0aWNpcGFudHMgOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcGFydGljaXBhbnRzXCIgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLG9CQUFvQixHQUFHRCxPQUFPLENBQUMsb0NBQW9DLENBQUMsQ0FBQyxDQUFDO0FBQzVFLE1BQU1FLFVBQVUsR0FBR0YsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDMUMsTUFBTUcsTUFBTSxHQUFHSixPQUFPLENBQUNLLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLFdBQVcsR0FBR0wsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBQzFELE1BQU07RUFBRU07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","map":{"version":3,"names":["express","require","ParticipantControler","nodemailer","router","Router","verifyToken","getAllParticipantsforCertificat","userVerificationCodes","get","getAllParticipants","delete","deleteParticipant","getParticipantCount","post","registerOrLoginParticipant","req","res","email","body","status","json","message","verificationCode","Math","floor","random","transporter","createTransport","service","auth","user","pass","mailOptions","from","to","subject","text","sendMail","error","console","code","log","parseInt","getParticipantProfile","loginParticipant","put","updateParticipantProfile","getInscribedEvents","unsubscribeFromEvent","getParticipantEvents","createEquipe","getMyTeams","deleteEquipe","updateEquipe","addJoueur","getJoueursByEquipe","updateJoueur","deleteJoueur","participants","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["participantRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst ParticipantControler = require('../controlers/participantControler'); // Assurez-vous d'avoir ce contr√¥leur\r\nconst nodemailer = require('nodemailer'); // Importez Nodemailer pour l'envoi des emails\r\nconst router = express.Router();\r\nconst verifyToken = require('../middleware/jwtMiddleware');\r\nconst { getAllParticipantsforCertificat } = require('../queries');\r\n\r\n\r\nlet userVerificationCodes = {}; // Stocke temporairement les codes de validation pour chaque utilisateur\r\n\r\n//*********************Participant**************************\r\n\r\n// Route pour r√©cup√©rer tous les participants\r\nrouter.get('/all', ParticipantControler.getAllParticipants);\r\n\r\n//Route pour supprimer un participant\r\nrouter.delete('/participants/:id', ParticipantControler.deleteParticipant);\r\n\r\n// Route pour r√©cup√©rer le nombre total de participants\r\nrouter.get('/count', ParticipantControler.getParticipantCount);\r\n\r\n\r\n// Route pour cr√©er un nouveau participant (sans restriction de r√¥le)\r\n//router.post('/create', ParticipantControler.createParticipant);\r\n\r\n// Route pour g√©rer l'inscription ou la connexion d'un participant\r\nrouter.post('/registerOrLogin', ParticipantControler.registerOrLoginParticipant);\r\n\r\n\r\n// Route pour envoyer le code de validation\r\nrouter.post('/sendVerificationCode', async (req, res) => {\r\n    const { email } = req.body;\r\n\r\n    if (!email) {\r\n        return res.status(400).json({ message: 'Email est requis' });\r\n    }\r\n\r\n    // G√©n√©rer un code de validation\r\n    const verificationCode = Math.floor(100000 + Math.random() * 900000); // Code √† 6 chiffres\r\n    userVerificationCodes[email] = verificationCode; // Associer le code √† l'email\r\n\r\n    // Configurer Nodemailer\r\n    const transporter = nodemailer.createTransport({\r\n        service: 'gmail', // ou un autre service (ex : 'hotmail')\r\n        auth: {\r\n            user: 'rak.tahina02@gmail.com', // Remplacez par votre email\r\n            pass: 'wikybpaufizeykql', // Remplacez par votre mot de passe ou token\r\n        },\r\n    });\r\n\r\n    const mailOptions = {\r\n        from: 'rak.tahina02@gmail.com',\r\n        to: email,\r\n        subject: 'Code de validation pour votre inscription',\r\n        text: `Votre code de validation est : ${verificationCode}`,\r\n    };\r\n\r\n    try {\r\n        await transporter.sendMail(mailOptions);\r\n        res.status(200).json({ message: 'Code de validation envoy√© avec succ√®s' });\r\n    } catch (error) {\r\n        console.error('Erreur lors de l\\'envoi de l\\'email:', error);\r\n        res.status(500).json({ message: 'Erreur lors de l\\'envoi de l\\'email' });\r\n    }\r\n});\r\n\r\n// Route pour valider le code de validation\r\nrouter.post('/verifyCode', (req, res) => {\r\n    const { email, code } = req.body;\r\n// Log les donn√©es re√ßues\r\nconsole.log('Donn√©es re√ßues:', { email, code });\r\n\r\n    if (userVerificationCodes[email] && userVerificationCodes[email] === parseInt(code, 10)) {\r\n        delete userVerificationCodes[email]; // Supprimer le code apr√®s validation\r\n        return res.status(200).json({ message: 'Code v√©rifi√© avec succ√®s' });\r\n    }\r\n\r\n    res.status(400).json({ message: 'Code invalide ou expir√©' });\r\n});\r\n\r\n//Route pour le tableau de bord de participant\r\n// router.get('/dashboard/:participantId', ParticipantControler.getDashboardData);\r\n\r\n//Routes pour affich√© le profil\r\nrouter.get('/profile/:participantId', verifyToken, ParticipantControler.getParticipantProfile);\r\n\r\n// Route pour la connexion du participant\r\nrouter.post('/login/participant', ParticipantControler.loginParticipant);\r\n\r\n// Route pour mettre √† jour le profil du participant\r\nrouter.put('/profile/:participantId', verifyToken, ParticipantControler.updateParticipantProfile);\r\n\r\n// Route pour r√©cup√©rer les √©v√©nements auxquels le participant est inscrit\r\nrouter.get('/events', verifyToken, ParticipantControler.getInscribedEvents);\r\n\r\n// Route pour annuler une inscription\r\nrouter.delete('/unsubscribe/:eventId', verifyToken, ParticipantControler.unsubscribeFromEvent);\r\n\r\n// Route pour r√©cup√©rer uniquement les √©v√©nements auxquels le participant est inscrit\r\nrouter.get('/evenements/inscrits', verifyToken, ParticipantControler.getParticipantEvents);\r\n\r\n// Route pour cr√©er une √©quipe (li√© √† un participant)\r\nrouter.post('/equipe/create', verifyToken, ParticipantControler.createEquipe);\r\n\r\n// Route pour r√©cup√©rer les √©quipes du participant\r\nrouter.get('/equipe/my-teams', verifyToken, ParticipantControler.getMyTeams);\r\n\r\n// Route pour supprimer une √©quipe\r\nrouter.delete('/equipe/delete/:id', verifyToken, ParticipantControler.deleteEquipe);\r\n\r\n// Route pour modifier une √©quipe\r\nrouter.put('/equipe/update/:id', verifyToken, ParticipantControler.updateEquipe);\r\n\r\n// Route pour ajouter un joueur √† une √©quipe\r\nrouter.post('/equipe/:idEquipe/joueurs', verifyToken, ParticipantControler.addJoueur);\r\n\r\n// Route pour r√©cup√©rer les joueurs d'une √©quipe sp√©cifique\r\nrouter.get('/equipe/:idEquipe/joueurs', verifyToken, ParticipantControler.getJoueursByEquipe);\r\n\r\n// Route pour modifier un joueur\r\nrouter.put('/joueur/update/:id', verifyToken, ParticipantControler.updateJoueur);\r\n\r\n// Route pour supprimer un joueur\r\nrouter.delete('/joueur/delete/:id', verifyToken, ParticipantControler.deleteJoueur);\r\n\r\nrouter.get(\"/allparticipants\", async (req, res) => {\r\n    try {\r\n      const participants = await getAllParticipantsforCertificat();\r\n      res.json(participants);\r\n    } catch (error) {\r\n      console.error(\"Erreur r√©cup√©ration participants :\", error);\r\n      res.status(500).json({ message: \"Erreur lors de la r√©cup√©ration des participants\" });\r\n    }\r\n});\r\n\r\n\r\n\r\nmodule.exports = router;"],"mappings":"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","ignoreList":[]}},"mtime":1742840767319},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\participantControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst bcrypt = require('bcrypt');\nconst crypto = require('crypto');\nconst db = require('../db');\nconst jwt = require('jsonwebtoken');\nconst Token = require('../middleware/jwtMiddleware'); // Mod√®le pour la table Token\nconst {\n  createParticipantQuery,\n  getParticipantByEmailQuery,\n  getEventByIdQuery,\n  getParticipantByIdQuery,\n  updateParticipantQuery\n} = require('../queries');\nconst {\n  sendActivationEmail\n} = require('./ParticipantEmailService');\n\n// R√©cup√©rer tous les participants\nexports.getAllParticipants = async (req, res) => {\n  try {\n    const participants = await db('participants').select('*');\n    res.status(200).json(participants);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des participants :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// Supprimer un participant\nexports.deleteParticipant = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const deletedRows = await db('participants').where({\n      id_participant: id\n    }).del();\n    if (deletedRows) {\n      res.status(200).json({\n        message: \"Participant supprim√© avec succ√®s.\"\n      });\n    } else {\n      res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression du participant :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n// R√©cup√©rer le nombre total de participants\nexports.getParticipantCount = async (req, res) => {\n  try {\n    const count = await db('participants').count('id_participant as total').first();\n    res.status(200).json({\n      total: count.total\n    });\n  } catch (error) {\n    console.error(\"Erreur lors du comptage des participants :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n//controler pour afficher les donne de participant dans son tableau de bord\n\nexports.registerOrLoginParticipant = async (req, res) => {\n  const {\n    nom_part,\n    email_part,\n    mdp_part,\n    genre_part,\n    telephone_part,\n    ville_part,\n    codepostal_part,\n    id_evenement\n  } = req.body;\n  try {\n    console.log(\"üîç Donn√©es re√ßues :\", req.body);\n\n    // V√©rifier si l'√©v√©nement existe\n    const event = await db('evenement').where({\n      id_evenement\n    }).first();\n    if (!event) {\n      console.error(\"‚ùå √âv√©nement non trouv√© pour l'ID :\", id_evenement);\n      return res.status(400).json({\n        message: \"√âv√©nement non trouv√©.\"\n      });\n    }\n    const id_organisateur = event.id_organisateur;\n\n    // V√©rifier si le participant existe d√©j√†\n    let participant = await db('participants').where({\n      email_part\n    }).first();\n    if (!participant) {\n      // üîπ **Cr√©er un nouveau participant**\n      console.log(\"üÜï Cr√©ation d'un nouveau participant...\");\n\n      // Validation des champs obligatoires\n      if (!nom_part || !email_part || !mdp_part || !telephone_part || !ville_part || !codepostal_part) {\n        console.error(\"‚ùå Un champ obligatoire est manquant.\");\n        return res.status(400).json({\n          message: \"Tous les champs obligatoires doivent √™tre remplis.\"\n        });\n      }\n\n      // Validation du num√©ro de t√©l√©phone\n      const phoneRegex = /^\\+\\d{1,3}\\d{8,12}$/;\n      if (!phoneRegex.test(telephone_part)) {\n        console.error(\"‚ùå Num√©ro de t√©l√©phone invalide :\", telephone_part);\n        return res.status(400).json({\n          message: \"Num√©ro de t√©l√©phone invalide.\"\n        });\n      }\n\n      // Hashage du mot de passe\n      console.log(\"üîë Hashage du mot de passe...\");\n      const salt = await bcrypt.genSalt(10);\n      const hashedPassword = await bcrypt.hash(mdp_part, salt);\n\n      // Ins√©rer le participant dans la base de donn√©es\n      const [participantId] = await db('participants').insert({\n        nom_part,\n        email_part,\n        mdp_part: hashedPassword,\n        genre_part,\n        telephone_part,\n        ville_part,\n        codepostal_part,\n        id_organisateur,\n        statut_part: \"En attente\",\n        date_inscription: new Date().toISOString().split(\"T\")[0]\n      });\n      console.log(\"‚úÖ Nouveau participant cr√©√© avec ID :\", participantId);\n      participant = {\n        id_participant: participantId\n      };\n    } else {\n      // üîπ **Le participant existe d√©j√† ‚Üí V√©rifier son mot de passe**\n      console.log(\"üîÑ Connexion d'un participant existant...\");\n      const isPasswordValid = await bcrypt.compare(mdp_part, participant.mdp_part);\n      if (!isPasswordValid) {\n        console.error(\"‚ùå Mot de passe incorrect pour :\", email_part);\n        return res.status(401).json({\n          message: \"Mot de passe incorrect.\"\n        });\n      }\n    }\n\n    // üîπ V√©rifier si le participant est d√©j√† inscrit √† cet √©v√©nement\n    const existingParticipation = await db('participer').where({\n      id_participant: participant.id_participant,\n      id_evenement\n    }).first();\n    if (existingParticipation) {\n      console.warn(`‚ö†Ô∏è Le participant avec l'email ${email_part} est d√©j√† inscrit √† cet √©v√©nement.`);\n      return res.status(400).json({\n        message: \"Vous √™tes d√©j√† inscrit √† cet √©v√©nement.\"\n      });\n    }\n\n    // üîπ Inscrire le participant √† l'√©v√©nement\n    await db('participer').insert({\n      id_participant: participant.id_participant,\n      id_evenement\n    });\n    console.log(\"‚úÖ Inscription √† l'√©v√©nement r√©ussie.\");\n\n    // üîπ G√©n√©ration du token JWT\n    const token = jwt.sign({\n      id_participant: participant.id_participant,\n      email: participant.email_part\n    }, process.env.JWT_SECRET, {\n      expiresIn: \"24h\"\n    });\n    return res.status(201).json({\n      message: \"Inscription r√©ussie.\",\n      participantId: participant.id_participant,\n      token\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur serveur :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\nexports.getParticipantProfile = async (req, res) => {\n  const {\n    participantId\n  } = req.params;\n  try {\n    const participant = await getParticipantByIdQuery(participantId);\n    console.log(await getParticipantByIdQuery(participantId)); // Ajoutez ceci dans votre contr√¥leur pour d√©boguer\n\n    if (!participant) {\n      return res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n    res.status(200).json(participant);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des donn√©es du participant :', error);\n    res.status(500).json({\n      message: 'Erreur serveur.'\n    });\n  }\n};\n\n// Contr√¥leur de connexion pour le participant\nexports.loginParticipant = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  try {\n    // V√©rifiez les champs envoy√©s depuis le frontend\n    console.log(\"Email re√ßu depuis le frontend :\", email);\n    console.log(\"Mot de passe re√ßu depuis le frontend :\", password);\n\n    // Validation des champs d'entr√©e\n    if (!email || !password) {\n      return res.status(400).json({\n        message: 'Email et mot de passe sont obligatoires.'\n      });\n    }\n\n    // R√©cup√©rer le participant par email\n    const participant = await getParticipantByEmailQuery(email);\n    console.log(\"Participant r√©cup√©r√© depuis la base de donn√©es :\", participant);\n    if (!participant) {\n      return res.status(404).json({\n        message: 'Participant non trouv√©.'\n      });\n    }\n\n    // V√©rifiez si le mot de passe hash√© est pr√©sent dans la base de donn√©es\n    console.log(\"Mot de passe hash√© dans la base de donn√©es :\", participant.mdp_participant);\n\n    // V√©rifiez si le mot de passe hash√© est pr√©sent dans la base de donn√©es\n    if (!participant.mdp_participant) {\n      console.error('Mot de passe introuvable pour cet utilisateur:', participant);\n      return res.status(400).json({\n        message: 'Mot de passe introuvable pour cet utilisateur.'\n      });\n    }\n\n    // Comparer le mot de passe fourni avec le hash dans la base de donn√©es\n    const validPassword = await bcrypt.compare(password, participant.mdp_participant);\n    console.log(\"R√©sultat de la comparaison des mots de passe :\", validPassword);\n    if (!validPassword) {\n      return res.status(400).json({\n        message: 'Mot de passe incorrect.'\n      });\n    }\n\n    //Cr√©er un token JWT\n    const token = jwt.sign({\n      id: participant.id_participant,\n      role: 'participant'\n    }, process.env.JWT_SECRET, {\n      expiresIn: '1h'\n    });\n    console.log('Connexion r√©ussie pour le participant:', participant.email_part);\n    return res.status(200).json({\n      message: 'Connexion r√©ussie (participant)',\n      token\n    });\n  } catch (error) {\n    console.error('Erreur serveur :', error);\n    return res.status(500).json({\n      message: 'Erreur serveur.',\n      error\n    });\n  }\n};\n\n// Mettre √† jour le profil du participant\nexports.updateParticipantProfile = async (req, res) => {\n  const {\n    participantId\n  } = req.params;\n  const {\n    nom_part,\n    prenom_part,\n    email_part,\n    telephone_part,\n    genre_part,\n    ville_part,\n    codepostal_part,\n    oldPassword,\n    newPassword,\n    confirmPassword\n  } = req.body;\n  try {\n    const participant = await getParticipantByIdQuery(participantId);\n    if (!participant) {\n      return res.status(404).json({\n        message: \"Participant non trouv√©.\"\n      });\n    }\n\n    // V√©rifier si l'email est d√©j√† utilis√© par un autre utilisateur\n    const existingEmail = await db('participants').where({\n      email_part\n    }).whereNot({\n      id_participant: participantId\n    }).first();\n    if (existingEmail) {\n      return res.status(400).json({\n        message: \"Cet email est d√©j√† utilis√©.\"\n      });\n    }\n    let updatedFields = {\n      nom_part,\n      prenom_part,\n      email_part,\n      telephone_part,\n      genre_part,\n      ville_part,\n      codepostal_part\n    };\n\n    // Si l'utilisateur veut changer son mot de passe\n    if (oldPassword && newPassword && confirmPassword) {\n      const validPassword = await bcrypt.compare(oldPassword, participant.mdp_part);\n      if (!validPassword) {\n        return res.status(400).json({\n          message: \"Ancien mot de passe incorrect.\"\n        });\n      }\n      if (newPassword !== confirmPassword) {\n        return res.status(400).json({\n          message: \"Les nouveaux mots de passe ne correspondent pas.\"\n        });\n      }\n      const salt = await bcrypt.genSalt(10);\n      updatedFields.mdp_part = await bcrypt.hash(newPassword, salt);\n    }\n\n    // Mise √† jour des informations dans la base de donn√©es\n    await updateParticipantQuery(participantId, updatedFields);\n    return res.status(200).json({\n      message: \"Profil mis √† jour avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la mise √† jour du profil :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// R√©cup√©rer les √©v√©nements auxquels un participant est inscrit\nexports.getInscribedEvents = async (req, res) => {\n  try {\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\n    let participantId = req.userId || req.id_participant;\n    if (!participantId && req.headers.authorization) {\n      try {\n        const token = req.headers.authorization.split(\" \")[1];\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\n        console.log(\"üìå Token d√©cod√© directement dans le contr√¥leur:\", decoded);\n        participantId = decoded.id_participant || decoded.id;\n      } catch (error) {\n        console.error(\"‚ùå Erreur lors de la v√©rification du token dans le contr√¥leur:\", error.message);\n      }\n    }\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\n    if (!participantId) {\n      console.error(\"‚ùå ID du participant introuvable.\");\n      return res.status(400).json({\n        message: \"ID du participant manquant.\"\n      });\n    }\n    console.log(\"üîç R√©cup√©ration des √©v√©nements pour le participant ID:\", participantId);\n    const events = await db('participer').join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement').where('participer.id_participant', participantId).select('evenement.id_evenement', 'evenement.nom_event', 'evenement.date_debut', 'evenement.date_fin', 'evenement.lieu_event', 'evenement.logo_event', 'evenement.type_event', 'evenement.nbr_participant', 'evenement.genre_participant', 'evenement.categorie_participant', 'evenement.frais_inscription', 'evenement.statut_event', 'evenement.description_accueil', 'evenement.description_detail');\n    console.log(\"‚úÖ √âv√©nements trouv√©s:\", events);\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements inscrits :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// Contr√¥leur pour annuler une inscription\nexports.unsubscribeFromEvent = async (req, res) => {\n  try {\n    const participantId = req.userId || req.id_participant;\n    const {\n      eventId\n    } = req.params;\n    if (!participantId || !eventId) {\n      return res.status(400).json({\n        message: \"ID du participant ou de l'√©v√©nement manquant.\"\n      });\n    }\n    console.log(\"üîç Suppression de l'inscription de l'√©v√©nement :\", eventId, \"par le participant :\", participantId);\n\n    // V√©rifier si l'inscription existe\n    const participation = await db('participer').where({\n      id_participant: participantId,\n      id_evenement: eventId\n    }).first();\n    if (!participation) {\n      return res.status(404).json({\n        message: \"Vous n'√™tes pas inscrit √† cet √©v√©nement.\"\n      });\n    }\n\n    // Supprimer l'inscription\n    await db('participer').where({\n      id_participant: participantId,\n      id_evenement: eventId\n    }).del();\n    console.log(\"‚úÖ Inscription annul√©e avec succ√®s !\");\n    return res.status(200).json({\n      message: \"Votre inscription a √©t√© annul√©e avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'annulation de l'inscription :\", error);\n    return res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n// pour Affichage des √©v√©nements\nexports.getAllEvents = async (req, res) => {\n  try {\n    const events = await db('evenement').select('id_evenement', 'nom_event');\n    console.log(\"‚úÖ √âv√©nements trouv√©s:\", events);\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// üîπ R√©cup√©rer les √©v√©nements auxquels le participant est inscrit\nexports.getParticipantEvents = async (req, res) => {\n  try {\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\n    let participantId = req.userId || req.id_participant;\n\n    // V√©rification du token si `participantId` n'est pas d√©fini\n    if (!participantId && req.headers.authorization) {\n      try {\n        const token = req.headers.authorization.split(\" \")[1];\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\n        console.log(\"üìå Token d√©cod√© dans `getParticipantEvents`:\", decoded);\n        participantId = decoded.id_participant || decoded.id;\n      } catch (error) {\n        console.error(\"‚ùå Erreur lors de la v√©rification du token:\", error.message);\n      }\n    }\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\n    if (!participantId) {\n      return res.status(400).json({\n        message: \"ID du participant manquant.\"\n      });\n    }\n    console.log(\"üîç R√©cup√©ration des √©v√©nements auxquels le participant ID:\", participantId, \"est inscrit.\");\n\n    // R√©cup√©rer les √©v√©nements du participant depuis la table `participer`\n    const events = await db('participer').join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement').where('participer.id_participant', participantId).select('evenement.id_evenement', 'evenement.nom_event');\n    console.log(\"‚úÖ √âv√©nements trouv√©s:\", events);\n    res.status(200).json(events);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements inscrits:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// üîπ **Cr√©er une √©quipe (stock√©e avec le participant)**\nexports.createEquipe = async (req, res) => {\n  try {\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\n    let participantId = req.userId || req.id_participant;\n    if (!participantId && req.headers.authorization) {\n      try {\n        const token = req.headers.authorization.split(\" \")[1];\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\n        console.log(\"üìå Token d√©cod√© dans `createEquipe`:\", decoded);\n        participantId = decoded.id_participant || decoded.id;\n      } catch (error) {\n        console.error(\"‚ùå Erreur lors de la v√©rification du token:\", error.message);\n      }\n    }\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\n    if (!participantId) {\n      return res.status(400).json({\n        message: \"ID du participant manquant.\"\n      });\n    }\n    const {\n      nom_equipe,\n      categorie_equipe,\n      id_evenement\n    } = req.body;\n    if (!nom_equipe || !categorie_equipe || !id_evenement) {\n      return res.status(400).json({\n        message: \"Tous les champs sont obligatoires.\"\n      });\n    }\n    console.log(`üîç Cr√©ation d'une √©quipe: ${nom_equipe} | Cat√©gorie: ${categorie_equipe} | √âv√©nement ID: ${id_evenement} | Participant ID: ${participantId}`);\n    const [equipeId] = await db('equipes').insert({\n      nom_equipe,\n      categorie_equipe,\n      id_participant: participantId,\n      id_evenement\n    });\n    console.log(\"‚úÖ √âquipe cr√©√©e avec ID:\", equipeId);\n    res.status(201).json({\n      message: \"√âquipe cr√©√©e avec succ√®s.\",\n      id_equipe: equipeId\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la cr√©ation de l'√©quipe:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// üîπ Afficher les √©quipes du participant\n// üîπ Afficher les √©quipes du participant avec le nom de l'√©v√©nement\nexports.getMyTeams = async (req, res) => {\n  try {\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\n    let participantId = req.userId || req.id_participant;\n    if (!participantId && req.headers.authorization) {\n      try {\n        const token = req.headers.authorization.split(\" \")[1];\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\n        console.log(\"üìå Token d√©cod√© dans `getMyTeams`:\", decoded);\n        participantId = decoded.id_participant || decoded.id;\n      } catch (error) {\n        console.error(\"‚ùå Erreur lors de la v√©rification du token:\", error.message);\n      }\n    }\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\n    if (!participantId) {\n      return res.status(400).json({\n        message: \"ID du participant manquant.\"\n      });\n    }\n\n    // üîç R√©cup√©ration des √©quipes du participant avec le nom de l'√©v√©nement\n    const equipes = await db('equipes').join('evenement', 'equipes.id_evenement', '=', 'evenement.id_evenement') // Ajout de la jointure\n    .where({\n      'equipes.id_participant': participantId\n    }).select('equipes.id_equipe', 'equipes.nom_equipe', 'equipes.categorie_equipe', 'equipes.id_evenement', 'evenement.nom_event');\n    console.log(\"‚úÖ √âquipes r√©cup√©r√©es:\", equipes);\n    res.status(200).json(equipes);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©quipes:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n// controler pour supprimer une √©quipe\nexports.deleteEquipe = async (req, res) => {\n  try {\n    const {\n      id\n    } = req.params;\n    await db('equipes').where({\n      id_equipe: id\n    }).del();\n    res.status(200).json({\n      message: \"√âquipe supprim√©e avec succ√®s.\"\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: \"Erreur lors de la suppression.\"\n    });\n  }\n};\n\n// Controler pour modifier une √©quipe\nexports.updateEquipe = async (req, res) => {\n  try {\n    const {\n      id\n    } = req.params;\n    const {\n      nom_equipe,\n      categorie_equipe\n    } = req.body;\n    await db('equipes').where({\n      id_equipe: id\n    }).update({\n      nom_equipe,\n      categorie_equipe\n    });\n    res.status(200).json({\n      message: \"√âquipe mise √† jour avec succ√®s.\"\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: \"Erreur lors de la mise √† jour.\"\n    });\n  }\n};\n\n// ‚úÖ Ajouter un joueur √† une √©quipe\nexports.addJoueur = async (req, res) => {\n  try {\n    console.log(\"üìå Requ√™te re√ßue pour ajouter un joueur:\", req.body);\n    const {\n      nom_joueur,\n      prenom_joueur,\n      date_naissance,\n      sexe_joueur,\n      email_joueur,\n      tel_joueur,\n      poste_joueur\n    } = req.body;\n    const {\n      idEquipe\n    } = req.params; // R√©cup√©rer l'ID de l'√©quipe depuis l'URL\n\n    if (!nom_joueur || !prenom_joueur || !date_naissance || !sexe_joueur || !email_joueur || !tel_joueur || !poste_joueur) {\n      return res.status(400).json({\n        message: \"Tous les champs sont obligatoires.\"\n      });\n    }\n    console.log(`üîç Ajout du joueur: ${nom_joueur} ${prenom_joueur}, Poste: ${poste_joueur}, √âquipe ID: ${idEquipe}`);\n    const [joueurId] = await db('joueurs').insert({\n      nom_joueur,\n      prenom_joueur,\n      date_naissance,\n      sexe_joueur,\n      email_joueur,\n      tel_joueur,\n      poste_joueur,\n      id_equipe: idEquipe\n    });\n    console.log(\"‚úÖ Joueur ajout√© avec ID:\", joueurId);\n    res.status(201).json({\n      message: \"Joueur ajout√© avec succ√®s.\",\n      id_joueur: joueurId\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'ajout du joueur:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// ‚úÖ R√©cup√©rer les joueurs d'une √©quipe\nexports.getJoueursByEquipe = async (req, res) => {\n  try {\n    const {\n      idEquipe\n    } = req.params; // R√©cup√©rer l'ID de l'√©quipe depuis l'URL\n\n    console.log(`üìå R√©cup√©ration des joueurs pour l'√©quipe ID: ${idEquipe}`);\n\n    // V√©rification si l'√©quipe existe\n    const equipe = await db('equipes').where({\n      id_equipe: idEquipe\n    }).first();\n    if (!equipe) {\n      return res.status(404).json({\n        message: \"√âquipe non trouv√©e.\"\n      });\n    }\n\n    // R√©cup√©ration des joueurs de cette √©quipe\n    const joueurs = await db('joueurs').where({\n      id_equipe: idEquipe\n    }).select('*');\n    console.log(\"‚úÖ Joueurs r√©cup√©r√©s:\", joueurs);\n    res.status(200).json(joueurs);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des joueurs:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// üîπ Modifier un joueur\nexports.updateJoueur = async (req, res) => {\n  try {\n    const {\n      id\n    } = req.params;\n    const {\n      nom_joueur,\n      prenom_joueur,\n      date_naissance,\n      sexe_joueur,\n      email_joueur,\n      tel_joueur,\n      poste_joueur\n    } = req.body;\n\n    // V√©rifier si le joueur existe\n    const joueur = await db('joueurs').where({\n      id_joueur: id\n    }).first();\n    if (!joueur) {\n      return res.status(404).json({\n        message: \"Joueur non trouv√©.\"\n      });\n    }\n\n    // Mise √† jour du joueur\n    await db('joueurs').where({\n      id_joueur: id\n    }).update({\n      nom_joueur,\n      prenom_joueur,\n      date_naissance,\n      sexe_joueur,\n      email_joueur,\n      tel_joueur,\n      poste_joueur\n    });\n    res.status(200).json({\n      message: \"Joueur mis √† jour avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la mise √† jour du joueur:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n\n// üîπ Supprimer un joueur\nexports.deleteJoueur = async (req, res) => {\n  try {\n    const {\n      id\n    } = req.params;\n\n    // V√©rifier si le joueur existe\n    const joueur = await db('joueurs').where({\n      id_joueur: id\n    }).first();\n    if (!joueur) {\n      return res.status(404).json({\n        message: \"Joueur non trouv√©.\"\n      });\n    }\n\n    // Supprimer le joueur\n    await db('joueurs').where({\n      id_joueur: id\n    }).del();\n    res.status(200).json({\n      message: \"Joueur supprim√© avec succ√®s.\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la suppression du joueur:\", error);\n    res.status(500).json({\n      message: \"Erreur serveur.\"\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHQiLCJyZXF1aXJlIiwiY3J5cHRvIiwiZGIiLCJqd3QiLCJUb2tlbiIsImNyZWF0ZVBhcnRpY2lwYW50UXVlcnkiLCJnZXRQYXJ0aWNpcGFudEJ5RW1haWxRdWVyeSIsImdldEV2ZW50QnlJZFF1ZXJ5IiwiZ2V0UGFydGljaXBhbnRCeUlkUXVlcnkiLCJ1cGRhdGVQYXJ0aWNpcGFudFF1ZXJ5Iiwic2VuZEFjdGl2YXRpb25FbWFpbCIsImV4cG9ydHMiLCJnZXRBbGxQYXJ0aWNpcGFudHMiLCJyZXEiLCJyZXMiLCJwYXJ0aWNpcGFudHMiLCJzZWxlY3QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImRlbGV0ZVBhcnRpY2lwYW50IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVkUm93cyIsIndoZXJlIiwiaWRfcGFydGljaXBhbnQiLCJkZWwiLCJnZXRQYXJ0aWNpcGFudENvdW50IiwiY291bnQiLCJmaXJzdCIsInRvdGFsIiwicmVnaXN0ZXJPckxvZ2luUGFydGljaXBhbnQiLCJub21fcGFydCIsImVtYWlsX3BhcnQiLCJtZHBfcGFydCIsImdlbnJlX3BhcnQiLCJ0ZWxlcGhvbmVfcGFydCIsInZpbGxlX3BhcnQiLCJjb2RlcG9zdGFsX3BhcnQiLCJpZF9ldmVuZW1lbnQiLCJib2R5IiwibG9nIiwiZXZlbnQiLCJpZF9vcmdhbmlzYXRldXIiLCJwYXJ0aWNpcGFudCIsInBob25lUmVnZXgiLCJ0ZXN0Iiwic2FsdCIsImdlblNhbHQiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJwYXJ0aWNpcGFudElkIiwiaW5zZXJ0Iiwic3RhdHV0X3BhcnQiLCJkYXRlX2luc2NyaXB0aW9uIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlIiwiZXhpc3RpbmdQYXJ0aWNpcGF0aW9uIiwid2FybiIsInRva2VuIiwic2lnbiIsImVtYWlsIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJnZXRQYXJ0aWNpcGFudFByb2ZpbGUiLCJsb2dpblBhcnRpY2lwYW50IiwicGFzc3dvcmQiLCJtZHBfcGFydGljaXBhbnQiLCJ2YWxpZFBhc3N3b3JkIiwicm9sZSIsInVwZGF0ZVBhcnRpY2lwYW50UHJvZmlsZSIsInByZW5vbV9wYXJ0Iiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImV4aXN0aW5nRW1haWwiLCJ3aGVyZU5vdCIsInVwZGF0ZWRGaWVsZHMiLCJnZXRJbnNjcmliZWRFdmVudHMiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJZCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJldmVudHMiLCJqb2luIiwidW5zdWJzY3JpYmVGcm9tRXZlbnQiLCJldmVudElkIiwicGFydGljaXBhdGlvbiIsImdldEFsbEV2ZW50cyIsImdldFBhcnRpY2lwYW50RXZlbnRzIiwiY3JlYXRlRXF1aXBlIiwibm9tX2VxdWlwZSIsImNhdGVnb3JpZV9lcXVpcGUiLCJlcXVpcGVJZCIsImlkX2VxdWlwZSIsImdldE15VGVhbXMiLCJlcXVpcGVzIiwiZGVsZXRlRXF1aXBlIiwidXBkYXRlRXF1aXBlIiwidXBkYXRlIiwiYWRkSm91ZXVyIiwibm9tX2pvdWV1ciIsInByZW5vbV9qb3VldXIiLCJkYXRlX25haXNzYW5jZSIsInNleGVfam91ZXVyIiwiZW1haWxfam91ZXVyIiwidGVsX2pvdWV1ciIsInBvc3RlX2pvdWV1ciIsImlkRXF1aXBlIiwiam91ZXVySWQiLCJpZF9qb3VldXIiLCJnZXRKb3VldXJzQnlFcXVpcGUiLCJlcXVpcGUiLCJqb3VldXJzIiwidXBkYXRlSm91ZXVyIiwiam91ZXVyIiwiZGVsZXRlSm91ZXVyIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXGNvbnRyb2xlcnNcXCIsInNvdXJjZXMiOlsicGFydGljaXBhbnRDb250cm9sZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XHJcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoJy4uL2RiJyk7XHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5jb25zdCBUb2tlbiA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvand0TWlkZGxld2FyZScpOyAvLyBNb2TDqGxlIHBvdXIgbGEgdGFibGUgVG9rZW5cclxuY29uc3Qge1xyXG4gIGNyZWF0ZVBhcnRpY2lwYW50UXVlcnksXHJcbiAgZ2V0UGFydGljaXBhbnRCeUVtYWlsUXVlcnksXHJcbiAgZ2V0RXZlbnRCeUlkUXVlcnksXHJcbiAgZ2V0UGFydGljaXBhbnRCeUlkUXVlcnksXHJcbiAgdXBkYXRlUGFydGljaXBhbnRRdWVyeVxyXG59ID0gcmVxdWlyZSgnLi4vcXVlcmllcycpO1xyXG5jb25zdCB7IHNlbmRBY3RpdmF0aW9uRW1haWwgfSA9IHJlcXVpcmUoJy4vUGFydGljaXBhbnRFbWFpbFNlcnZpY2UnKTtcclxuXHJcblxyXG4vLyBSw6ljdXDDqXJlciB0b3VzIGxlcyBwYXJ0aWNpcGFudHNcclxuZXhwb3J0cy5nZXRBbGxQYXJ0aWNpcGFudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBhd2FpdCBkYigncGFydGljaXBhbnRzJykuc2VsZWN0KCcqJyk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBhcnRpY2lwYW50cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBwYXJ0aWNpcGFudHMgOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBTdXBwcmltZXIgdW4gcGFydGljaXBhbnRcclxuZXhwb3J0cy5kZWxldGVQYXJ0aWNpcGFudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgICAgY29uc3QgZGVsZXRlZFJvd3MgPSBhd2FpdCBkYigncGFydGljaXBhbnRzJykud2hlcmUoeyBpZF9wYXJ0aWNpcGFudDogaWQgfSkuZGVsKCk7XHJcbiAgICAgIGlmIChkZWxldGVkUm93cykge1xyXG4gICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIlBhcnRpY2lwYW50IHN1cHByaW3DqSBhdmVjIHN1Y2PDqHMuXCIgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUGFydGljaXBhbnQgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZHUgcGFydGljaXBhbnQgOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcbi8vIFLDqWN1cMOpcmVyIGxlIG5vbWJyZSB0b3RhbCBkZSBwYXJ0aWNpcGFudHNcclxuZXhwb3J0cy5nZXRQYXJ0aWNpcGFudENvdW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgZGIoJ3BhcnRpY2lwYW50cycpLmNvdW50KCdpZF9wYXJ0aWNpcGFudCBhcyB0b3RhbCcpLmZpcnN0KCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRvdGFsOiBjb3VudC50b3RhbCB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGR1IGNvbXB0YWdlIGRlcyBwYXJ0aWNpcGFudHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG4vL2NvbnRyb2xlciBwb3VyIGFmZmljaGVyIGxlcyBkb25uZSBkZSBwYXJ0aWNpcGFudCBkYW5zIHNvbiB0YWJsZWF1IGRlIGJvcmRcclxuXHJcbmV4cG9ydHMucmVnaXN0ZXJPckxvZ2luUGFydGljaXBhbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IG5vbV9wYXJ0LCBlbWFpbF9wYXJ0LCBtZHBfcGFydCwgZ2VucmVfcGFydCwgdGVsZXBob25lX3BhcnQsIHZpbGxlX3BhcnQsIGNvZGVwb3N0YWxfcGFydCwgaWRfZXZlbmVtZW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBEb25uw6llcyByZcOndWVzIDpcIiwgcmVxLmJvZHkpO1xyXG5cclxuICAgIC8vIFbDqXJpZmllciBzaSBsJ8OpdsOpbmVtZW50IGV4aXN0ZVxyXG4gICAgY29uc3QgZXZlbnQgPSBhd2FpdCBkYignZXZlbmVtZW50Jykud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSkuZmlyc3QoKTtcclxuICAgIGlmICghZXZlbnQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCDDiXbDqW5lbWVudCBub24gdHJvdXbDqSBwb3VyIGwnSUQgOlwiLCBpZF9ldmVuZW1lbnQpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIsOJdsOpbmVtZW50IG5vbiB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaWRfb3JnYW5pc2F0ZXVyID0gZXZlbnQuaWRfb3JnYW5pc2F0ZXVyO1xyXG5cclxuICAgIC8vIFbDqXJpZmllciBzaSBsZSBwYXJ0aWNpcGFudCBleGlzdGUgZMOpasOgXHJcbiAgICBsZXQgcGFydGljaXBhbnQgPSBhd2FpdCBkYigncGFydGljaXBhbnRzJykud2hlcmUoeyBlbWFpbF9wYXJ0IH0pLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xyXG4gICAgICAvLyDwn5S5ICoqQ3LDqWVyIHVuIG5vdXZlYXUgcGFydGljaXBhbnQqKlxyXG4gICAgICBjb25zb2xlLmxvZyhcIvCfhpUgQ3LDqWF0aW9uIGQndW4gbm91dmVhdSBwYXJ0aWNpcGFudC4uLlwiKTtcclxuXHJcbiAgICAgIC8vIFZhbGlkYXRpb24gZGVzIGNoYW1wcyBvYmxpZ2F0b2lyZXNcclxuICAgICAgaWYgKCFub21fcGFydCB8fCAhZW1haWxfcGFydCB8fCAhbWRwX3BhcnQgfHwgIXRlbGVwaG9uZV9wYXJ0IHx8ICF2aWxsZV9wYXJ0IHx8ICFjb2RlcG9zdGFsX3BhcnQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIFVuIGNoYW1wIG9ibGlnYXRvaXJlIGVzdCBtYW5xdWFudC5cIik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJUb3VzIGxlcyBjaGFtcHMgb2JsaWdhdG9pcmVzIGRvaXZlbnQgw6p0cmUgcmVtcGxpcy5cIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmFsaWRhdGlvbiBkdSBudW3DqXJvIGRlIHTDqWzDqXBob25lXHJcbiAgICAgIGNvbnN0IHBob25lUmVnZXggPSAvXlxcK1xcZHsxLDN9XFxkezgsMTJ9JC87XHJcbiAgICAgIGlmICghcGhvbmVSZWdleC50ZXN0KHRlbGVwaG9uZV9wYXJ0KSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTnVtw6lybyBkZSB0w6lsw6lwaG9uZSBpbnZhbGlkZSA6XCIsIHRlbGVwaG9uZV9wYXJ0KTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIk51bcOpcm8gZGUgdMOpbMOpcGhvbmUgaW52YWxpZGUuXCIgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhhc2hhZ2UgZHUgbW90IGRlIHBhc3NlXHJcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+UkSBIYXNoYWdlIGR1IG1vdCBkZSBwYXNzZS4uLlwiKTtcclxuICAgICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcclxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChtZHBfcGFydCwgc2FsdCk7XHJcblxyXG4gICAgICAvLyBJbnPDqXJlciBsZSBwYXJ0aWNpcGFudCBkYW5zIGxhIGJhc2UgZGUgZG9ubsOpZXNcclxuICAgICAgY29uc3QgW3BhcnRpY2lwYW50SWRdID0gYXdhaXQgZGIoJ3BhcnRpY2lwYW50cycpLmluc2VydCh7XHJcbiAgICAgICAgbm9tX3BhcnQsXHJcbiAgICAgICAgZW1haWxfcGFydCxcclxuICAgICAgICBtZHBfcGFydDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgZ2VucmVfcGFydCxcclxuICAgICAgICB0ZWxlcGhvbmVfcGFydCxcclxuICAgICAgICB2aWxsZV9wYXJ0LFxyXG4gICAgICAgIGNvZGVwb3N0YWxfcGFydCxcclxuICAgICAgICBpZF9vcmdhbmlzYXRldXIsXHJcbiAgICAgICAgc3RhdHV0X3BhcnQ6IFwiRW4gYXR0ZW50ZVwiLFxyXG4gICAgICAgIGRhdGVfaW5zY3JpcHRpb246IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCLinIUgTm91dmVhdSBwYXJ0aWNpcGFudCBjcsOpw6kgYXZlYyBJRCA6XCIsIHBhcnRpY2lwYW50SWQpO1xyXG4gICAgICBwYXJ0aWNpcGFudCA9IHsgaWRfcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50SWQgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIPCflLkgKipMZSBwYXJ0aWNpcGFudCBleGlzdGUgZMOpasOgIOKGkiBWw6lyaWZpZXIgc29uIG1vdCBkZSBwYXNzZSoqXHJcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+UhCBDb25uZXhpb24gZCd1biBwYXJ0aWNpcGFudCBleGlzdGFudC4uLlwiKTtcclxuICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUobWRwX3BhcnQsIHBhcnRpY2lwYW50Lm1kcF9wYXJ0KTtcclxuICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIE1vdCBkZSBwYXNzZSBpbmNvcnJlY3QgcG91ciA6XCIsIGVtYWlsX3BhcnQpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6IFwiTW90IGRlIHBhc3NlIGluY29ycmVjdC5cIiB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIPCflLkgVsOpcmlmaWVyIHNpIGxlIHBhcnRpY2lwYW50IGVzdCBkw6lqw6AgaW5zY3JpdCDDoCBjZXQgw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IGV4aXN0aW5nUGFydGljaXBhdGlvbiA9IGF3YWl0IGRiKCdwYXJ0aWNpcGVyJylcclxuICAgICAgLndoZXJlKHsgaWRfcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50LmlkX3BhcnRpY2lwYW50LCBpZF9ldmVuZW1lbnQgfSlcclxuICAgICAgLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nUGFydGljaXBhdGlvbikge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBMZSBwYXJ0aWNpcGFudCBhdmVjIGwnZW1haWwgJHtlbWFpbF9wYXJ0fSBlc3QgZMOpasOgIGluc2NyaXQgw6AgY2V0IMOpdsOpbmVtZW50LmApO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlZvdXMgw6p0ZXMgZMOpasOgIGluc2NyaXQgw6AgY2V0IMOpdsOpbmVtZW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIPCflLkgSW5zY3JpcmUgbGUgcGFydGljaXBhbnQgw6AgbCfDqXbDqW5lbWVudFxyXG4gICAgYXdhaXQgZGIoJ3BhcnRpY2lwZXInKS5pbnNlcnQoe1xyXG4gICAgICBpZF9wYXJ0aWNpcGFudDogcGFydGljaXBhbnQuaWRfcGFydGljaXBhbnQsXHJcbiAgICAgIGlkX2V2ZW5lbWVudCxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIEluc2NyaXB0aW9uIMOgIGwnw6l2w6luZW1lbnQgcsOpdXNzaWUuXCIpO1xyXG5cclxuICAgIC8vIPCflLkgR8OpbsOpcmF0aW9uIGR1IHRva2VuIEpXVFxyXG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgeyBpZF9wYXJ0aWNpcGFudDogcGFydGljaXBhbnQuaWRfcGFydGljaXBhbnQsIGVtYWlsOiBwYXJ0aWNpcGFudC5lbWFpbF9wYXJ0IH0sXHJcbiAgICAgIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsXHJcbiAgICAgIHsgZXhwaXJlc0luOiBcIjI0aFwiIH1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogXCJJbnNjcmlwdGlvbiByw6l1c3NpZS5cIixcclxuICAgICAgcGFydGljaXBhbnRJZDogcGFydGljaXBhbnQuaWRfcGFydGljaXBhbnQsXHJcbiAgICAgIHRva2VuLFxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBzZXJ2ZXVyIDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFBhcnRpY2lwYW50UHJvZmlsZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgcGFydGljaXBhbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gYXdhaXQgZ2V0UGFydGljaXBhbnRCeUlkUXVlcnkocGFydGljaXBhbnRJZCk7XHJcbiAgICBjb25zb2xlLmxvZyhhd2FpdCBnZXRQYXJ0aWNpcGFudEJ5SWRRdWVyeShwYXJ0aWNpcGFudElkKSk7IC8vIEFqb3V0ZXogY2VjaSBkYW5zIHZvdHJlIGNvbnRyw7RsZXVyIHBvdXIgZMOpYm9ndWVyXHJcblxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIlBhcnRpY2lwYW50IG5vbiB0cm91dsOpLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBhcnRpY2lwYW50KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGRvbm7DqWVzIGR1IHBhcnRpY2lwYW50IDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIENvbnRyw7RsZXVyIGRlIGNvbm5leGlvbiBwb3VyIGxlIHBhcnRpY2lwYW50XHJcbmV4cG9ydHMubG9naW5QYXJ0aWNpcGFudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuXHJcbiAgICAvLyBWw6lyaWZpZXogbGVzIGNoYW1wcyBlbnZvecOpcyBkZXB1aXMgbGUgZnJvbnRlbmRcclxuICAgIGNvbnNvbGUubG9nKFwiRW1haWwgcmXDp3UgZGVwdWlzIGxlIGZyb250ZW5kIDpcIiwgZW1haWwpO1xyXG4gICAgY29uc29sZS5sb2coXCJNb3QgZGUgcGFzc2UgcmXDp3UgZGVwdWlzIGxlIGZyb250ZW5kIDpcIiwgcGFzc3dvcmQpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRpb24gZGVzIGNoYW1wcyBkJ2VudHLDqWVcclxuICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFbWFpbCBldCBtb3QgZGUgcGFzc2Ugc29udCBvYmxpZ2F0b2lyZXMuJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZSBwYXJ0aWNpcGFudCBwYXIgZW1haWxcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gYXdhaXQgZ2V0UGFydGljaXBhbnRCeUVtYWlsUXVlcnkoZW1haWwpO1xyXG4gICAgY29uc29sZS5sb2coXCJQYXJ0aWNpcGFudCByw6ljdXDDqXLDqSBkZXB1aXMgbGEgYmFzZSBkZSBkb25uw6llcyA6XCIsIHBhcnRpY2lwYW50KTtcclxuICAgIGlmICghcGFydGljaXBhbnQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1BhcnRpY2lwYW50IG5vbiB0cm91dsOpLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVsOpcmlmaWV6IHNpIGxlIG1vdCBkZSBwYXNzZSBoYXNow6kgZXN0IHByw6lzZW50IGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgY29uc29sZS5sb2coXCJNb3QgZGUgcGFzc2UgaGFzaMOpIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llcyA6XCIsIHBhcnRpY2lwYW50Lm1kcF9wYXJ0aWNpcGFudCk7XHJcblxyXG4gICAgLy8gVsOpcmlmaWV6IHNpIGxlIG1vdCBkZSBwYXNzZSBoYXNow6kgZXN0IHByw6lzZW50IGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5tZHBfcGFydGljaXBhbnQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTW90IGRlIHBhc3NlIGludHJvdXZhYmxlIHBvdXIgY2V0IHV0aWxpc2F0ZXVyOicsIHBhcnRpY2lwYW50KTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ01vdCBkZSBwYXNzZSBpbnRyb3V2YWJsZSBwb3VyIGNldCB1dGlsaXNhdGV1ci4nIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBDb21wYXJlciBsZSBtb3QgZGUgcGFzc2UgZm91cm5pIGF2ZWMgbGUgaGFzaCBkYW5zIGxhIGJhc2UgZGUgZG9ubsOpZXNcclxuICAgIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgcGFydGljaXBhbnQubWRwX3BhcnRpY2lwYW50KTtcclxuICAgIGNvbnNvbGUubG9nKFwiUsOpc3VsdGF0IGRlIGxhIGNvbXBhcmFpc29uIGRlcyBtb3RzIGRlIHBhc3NlIDpcIiwgdmFsaWRQYXNzd29yZCk7XHJcblxyXG4gICAgaWYgKCF2YWxpZFBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdNb3QgZGUgcGFzc2UgaW5jb3JyZWN0LicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9DcsOpZXIgdW4gdG9rZW4gSldUXHJcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICB7IGlkOiBwYXJ0aWNpcGFudC5pZF9wYXJ0aWNpcGFudCwgcm9sZTogJ3BhcnRpY2lwYW50JyB9LFxyXG4gICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxyXG4gICAgICB7IGV4cGlyZXNJbjogJzFoJyB9XHJcbiAgICApO1xyXG5cclxuXHJcblxyXG4gICAgY29uc29sZS5sb2coJ0Nvbm5leGlvbiByw6l1c3NpZSBwb3VyIGxlIHBhcnRpY2lwYW50OicsIHBhcnRpY2lwYW50LmVtYWlsX3BhcnQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ0Nvbm5leGlvbiByw6l1c3NpZSAocGFydGljaXBhbnQpJyxcclxuICAgICAgdG9rZW4sXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIHNlcnZldXIgOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgc2VydmV1ci4nLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBNZXR0cmUgw6Agam91ciBsZSBwcm9maWwgZHUgcGFydGljaXBhbnRcclxuZXhwb3J0cy51cGRhdGVQYXJ0aWNpcGFudFByb2ZpbGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHBhcnRpY2lwYW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgY29uc3QgeyBub21fcGFydCwgcHJlbm9tX3BhcnQsIGVtYWlsX3BhcnQsIHRlbGVwaG9uZV9wYXJ0LCBnZW5yZV9wYXJ0LCB2aWxsZV9wYXJ0LCBjb2RlcG9zdGFsX3BhcnQsIG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gYXdhaXQgZ2V0UGFydGljaXBhbnRCeUlkUXVlcnkocGFydGljaXBhbnRJZCk7XHJcbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUGFydGljaXBhbnQgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVsOpcmlmaWVyIHNpIGwnZW1haWwgZXN0IGTDqWrDoCB1dGlsaXPDqSBwYXIgdW4gYXV0cmUgdXRpbGlzYXRldXJcclxuICAgIGNvbnN0IGV4aXN0aW5nRW1haWwgPSBhd2FpdCBkYigncGFydGljaXBhbnRzJykud2hlcmUoeyBlbWFpbF9wYXJ0IH0pLndoZXJlTm90KHsgaWRfcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50SWQgfSkuZmlyc3QoKTtcclxuICAgIGlmIChleGlzdGluZ0VtYWlsKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiQ2V0IGVtYWlsIGVzdCBkw6lqw6AgdXRpbGlzw6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHVwZGF0ZWRGaWVsZHMgPSB7XHJcbiAgICAgIG5vbV9wYXJ0LFxyXG4gICAgICBwcmVub21fcGFydCxcclxuICAgICAgZW1haWxfcGFydCxcclxuICAgICAgdGVsZXBob25lX3BhcnQsXHJcbiAgICAgIGdlbnJlX3BhcnQsXHJcbiAgICAgIHZpbGxlX3BhcnQsXHJcbiAgICAgIGNvZGVwb3N0YWxfcGFydFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTaSBsJ3V0aWxpc2F0ZXVyIHZldXQgY2hhbmdlciBzb24gbW90IGRlIHBhc3NlXHJcbiAgICBpZiAob2xkUGFzc3dvcmQgJiYgbmV3UGFzc3dvcmQgJiYgY29uZmlybVBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShvbGRQYXNzd29yZCwgcGFydGljaXBhbnQubWRwX3BhcnQpO1xyXG4gICAgICBpZiAoIXZhbGlkUGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkFuY2llbiBtb3QgZGUgcGFzc2UgaW5jb3JyZWN0LlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobmV3UGFzc3dvcmQgIT09IGNvbmZpcm1QYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTGVzIG5vdXZlYXV4IG1vdHMgZGUgcGFzc2UgbmUgY29ycmVzcG9uZGVudCBwYXMuXCIgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XHJcbiAgICAgIHVwZGF0ZWRGaWVsZHMubWRwX3BhcnQgPSBhd2FpdCBiY3J5cHQuaGFzaChuZXdQYXNzd29yZCwgc2FsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlzZSDDoCBqb3VyIGRlcyBpbmZvcm1hdGlvbnMgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbiAgICBhd2FpdCB1cGRhdGVQYXJ0aWNpcGFudFF1ZXJ5KHBhcnRpY2lwYW50SWQsIHVwZGF0ZWRGaWVsZHMpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiUHJvZmlsIG1pcyDDoCBqb3VyIGF2ZWMgc3VjY8Oocy5cIiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkdSBwcm9maWwgOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vLyBSw6ljdXDDqXJlciBsZXMgw6l2w6luZW1lbnRzIGF1eHF1ZWxzIHVuIHBhcnRpY2lwYW50IGVzdCBpbnNjcml0XHJcbmV4cG9ydHMuZ2V0SW5zY3JpYmVkRXZlbnRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+TjCBUb2tlbiBicnV0IHJlw6d1IGRhbnMgbCdlbi10w6p0ZTpcIiwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbik7XHJcblxyXG4gICAgbGV0IHBhcnRpY2lwYW50SWQgPSByZXEudXNlcklkIHx8IHJlcS5pZF9wYXJ0aWNpcGFudDtcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50SWQgJiYgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIilbMV07XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIvCfk4wgVG9rZW4gZMOpY29kw6kgZGlyZWN0ZW1lbnQgZGFucyBsZSBjb250csO0bGV1cjpcIiwgZGVjb2RlZCk7XHJcblxyXG4gICAgICAgIHBhcnRpY2lwYW50SWQgPSBkZWNvZGVkLmlkX3BhcnRpY2lwYW50IHx8IGRlY29kZWQuaWQ7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsYSB2w6lyaWZpY2F0aW9uIGR1IHRva2VuIGRhbnMgbGUgY29udHLDtGxldXI6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLwn5OMIElEIGR1IHBhcnRpY2lwYW50IGV4dHJhaXQgZHUgdG9rZW46XCIsIHBhcnRpY2lwYW50SWQpO1xyXG5cclxuICAgIGlmICghcGFydGljaXBhbnRJZCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIElEIGR1IHBhcnRpY2lwYW50IGludHJvdXZhYmxlLlwiKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJRCBkdSBwYXJ0aWNpcGFudCBtYW5xdWFudC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gUsOpY3Vww6lyYXRpb24gZGVzIMOpdsOpbmVtZW50cyBwb3VyIGxlIHBhcnRpY2lwYW50IElEOlwiLCBwYXJ0aWNpcGFudElkKTtcclxuXHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYigncGFydGljaXBlcicpXHJcbiAgICAgIC5qb2luKCdldmVuZW1lbnQnLCAncGFydGljaXBlci5pZF9ldmVuZW1lbnQnLCAnPScsICdldmVuZW1lbnQuaWRfZXZlbmVtZW50JylcclxuICAgICAgLndoZXJlKCdwYXJ0aWNpcGVyLmlkX3BhcnRpY2lwYW50JywgcGFydGljaXBhbnRJZClcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAnZXZlbmVtZW50LmlkX2V2ZW5lbWVudCcsXHJcbiAgICAgICAgJ2V2ZW5lbWVudC5ub21fZXZlbnQnLFxyXG4gICAgICAgICdldmVuZW1lbnQuZGF0ZV9kZWJ1dCcsXHJcbiAgICAgICAgJ2V2ZW5lbWVudC5kYXRlX2ZpbicsXHJcbiAgICAgICAgJ2V2ZW5lbWVudC5saWV1X2V2ZW50JyxcclxuICAgICAgICAnZXZlbmVtZW50LmxvZ29fZXZlbnQnLFxyXG4gICAgICAgICdldmVuZW1lbnQudHlwZV9ldmVudCcsXHJcbiAgICAgICAgJ2V2ZW5lbWVudC5uYnJfcGFydGljaXBhbnQnLFxyXG4gICAgICAgICdldmVuZW1lbnQuZ2VucmVfcGFydGljaXBhbnQnLFxyXG4gICAgICAgICdldmVuZW1lbnQuY2F0ZWdvcmllX3BhcnRpY2lwYW50JyxcclxuICAgICAgICAnZXZlbmVtZW50LmZyYWlzX2luc2NyaXB0aW9uJyxcclxuICAgICAgICAnZXZlbmVtZW50LnN0YXR1dF9ldmVudCcsXHJcbiAgICAgICAgJ2V2ZW5lbWVudC5kZXNjcmlwdGlvbl9hY2N1ZWlsJyxcclxuICAgICAgICAnZXZlbmVtZW50LmRlc2NyaXB0aW9uX2RldGFpbCdcclxuICAgICAgKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSDDiXbDqW5lbWVudHMgdHJvdXbDqXM6XCIsIGV2ZW50cyk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihldmVudHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgaW5zY3JpdHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vIENvbnRyw7RsZXVyIHBvdXIgYW5udWxlciB1bmUgaW5zY3JpcHRpb25cclxuZXhwb3J0cy51bnN1YnNjcmliZUZyb21FdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXJ0aWNpcGFudElkID0gcmVxLnVzZXJJZCB8fCByZXEuaWRfcGFydGljaXBhbnQ7XHJcbiAgICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudElkIHx8ICFldmVudElkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZHUgcGFydGljaXBhbnQgb3UgZGUgbCfDqXbDqW5lbWVudCBtYW5xdWFudC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gU3VwcHJlc3Npb24gZGUgbCdpbnNjcmlwdGlvbiBkZSBsJ8OpdsOpbmVtZW50IDpcIiwgZXZlbnRJZCwgXCJwYXIgbGUgcGFydGljaXBhbnQgOlwiLCBwYXJ0aWNpcGFudElkKTtcclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgc2kgbCdpbnNjcmlwdGlvbiBleGlzdGVcclxuICAgIGNvbnN0IHBhcnRpY2lwYXRpb24gPSBhd2FpdCBkYigncGFydGljaXBlcicpXHJcbiAgICAgIC53aGVyZSh7IGlkX3BhcnRpY2lwYW50OiBwYXJ0aWNpcGFudElkLCBpZF9ldmVuZW1lbnQ6IGV2ZW50SWQgfSlcclxuICAgICAgLmZpcnN0KCk7XHJcblxyXG4gICAgaWYgKCFwYXJ0aWNpcGF0aW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiVm91cyBuJ8OqdGVzIHBhcyBpbnNjcml0IMOgIGNldCDDqXbDqW5lbWVudC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdXBwcmltZXIgbCdpbnNjcmlwdGlvblxyXG4gICAgYXdhaXQgZGIoJ3BhcnRpY2lwZXInKVxyXG4gICAgICAud2hlcmUoeyBpZF9wYXJ0aWNpcGFudDogcGFydGljaXBhbnRJZCwgaWRfZXZlbmVtZW50OiBldmVudElkIH0pXHJcbiAgICAgIC5kZWwoKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSBJbnNjcmlwdGlvbiBhbm51bMOpZSBhdmVjIHN1Y2PDqHMgIVwiKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiVm90cmUgaW5zY3JpcHRpb24gYSDDqXTDqSBhbm51bMOpZSBhdmVjIHN1Y2PDqHMuXCIgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGwnYW5udWxhdGlvbiBkZSBsJ2luc2NyaXB0aW9uIDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcbi8vIHBvdXIgQWZmaWNoYWdlIGRlcyDDqXbDqW5lbWVudHNcclxuZXhwb3J0cy5nZXRBbGxFdmVudHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXZlbnRzID0gYXdhaXQgZGIoJ2V2ZW5lbWVudCcpXHJcbiAgICAgIC5zZWxlY3QoJ2lkX2V2ZW5lbWVudCcsICdub21fZXZlbnQnKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSDDiXbDqW5lbWVudHMgdHJvdXbDqXM6XCIsIGV2ZW50cyk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihldmVudHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHM6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyDwn5S5IFLDqWN1cMOpcmVyIGxlcyDDqXbDqW5lbWVudHMgYXV4cXVlbHMgbGUgcGFydGljaXBhbnQgZXN0IGluc2NyaXRcclxuZXhwb3J0cy5nZXRQYXJ0aWNpcGFudEV2ZW50cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCfk4wgVG9rZW4gYnJ1dCByZcOndSBkYW5zIGwnZW4tdMOqdGU6XCIsIHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pO1xyXG5cclxuICAgIGxldCBwYXJ0aWNpcGFudElkID0gcmVxLnVzZXJJZCB8fCByZXEuaWRfcGFydGljaXBhbnQ7XHJcblxyXG4gICAgLy8gVsOpcmlmaWNhdGlvbiBkdSB0b2tlbiBzaSBgcGFydGljaXBhbnRJZGAgbidlc3QgcGFzIGTDqWZpbmlcclxuICAgIGlmICghcGFydGljaXBhbnRJZCAmJiByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KFwiIFwiKVsxXTtcclxuICAgICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCLwn5OMIFRva2VuIGTDqWNvZMOpIGRhbnMgYGdldFBhcnRpY2lwYW50RXZlbnRzYDpcIiwgZGVjb2RlZCk7XHJcbiAgICAgICAgcGFydGljaXBhbnRJZCA9IGRlY29kZWQuaWRfcGFydGljaXBhbnQgfHwgZGVjb2RlZC5pZDtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHbDqXJpZmljYXRpb24gZHUgdG9rZW46XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLwn5OMIElEIGR1IHBhcnRpY2lwYW50IGV4dHJhaXQgZHUgdG9rZW46XCIsIHBhcnRpY2lwYW50SWQpO1xyXG5cclxuICAgIGlmICghcGFydGljaXBhbnRJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGR1IHBhcnRpY2lwYW50IG1hbnF1YW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBSw6ljdXDDqXJhdGlvbiBkZXMgw6l2w6luZW1lbnRzIGF1eHF1ZWxzIGxlIHBhcnRpY2lwYW50IElEOlwiLCBwYXJ0aWNpcGFudElkLCBcImVzdCBpbnNjcml0LlwiKTtcclxuXHJcbiAgICAvLyBSw6ljdXDDqXJlciBsZXMgw6l2w6luZW1lbnRzIGR1IHBhcnRpY2lwYW50IGRlcHVpcyBsYSB0YWJsZSBgcGFydGljaXBlcmBcclxuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGRiKCdwYXJ0aWNpcGVyJylcclxuICAgICAgLmpvaW4oJ2V2ZW5lbWVudCcsICdwYXJ0aWNpcGVyLmlkX2V2ZW5lbWVudCcsICc9JywgJ2V2ZW5lbWVudC5pZF9ldmVuZW1lbnQnKVxyXG4gICAgICAud2hlcmUoJ3BhcnRpY2lwZXIuaWRfcGFydGljaXBhbnQnLCBwYXJ0aWNpcGFudElkKVxyXG4gICAgICAuc2VsZWN0KCdldmVuZW1lbnQuaWRfZXZlbmVtZW50JywgJ2V2ZW5lbWVudC5ub21fZXZlbnQnKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSDDiXbDqW5lbWVudHMgdHJvdXbDqXM6XCIsIGV2ZW50cyk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihldmVudHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXbDqW5lbWVudHMgaW5zY3JpdHM6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1ci5cIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyDwn5S5ICoqQ3LDqWVyIHVuZSDDqXF1aXBlIChzdG9ja8OpZSBhdmVjIGxlIHBhcnRpY2lwYW50KSoqXHJcbmV4cG9ydHMuY3JlYXRlRXF1aXBlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+TjCBUb2tlbiBicnV0IHJlw6d1IGRhbnMgbCdlbi10w6p0ZTpcIiwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbik7XHJcblxyXG4gICAgbGV0IHBhcnRpY2lwYW50SWQgPSByZXEudXNlcklkIHx8IHJlcS5pZF9wYXJ0aWNpcGFudDtcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50SWQgJiYgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIilbMV07XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TjCBUb2tlbiBkw6ljb2TDqSBkYW5zIGBjcmVhdGVFcXVpcGVgOlwiLCBkZWNvZGVkKTtcclxuICAgICAgICBwYXJ0aWNpcGFudElkID0gZGVjb2RlZC5pZF9wYXJ0aWNpcGFudCB8fCBkZWNvZGVkLmlkO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgdsOpcmlmaWNhdGlvbiBkdSB0b2tlbjpcIiwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIvCfk4wgSUQgZHUgcGFydGljaXBhbnQgZXh0cmFpdCBkdSB0b2tlbjpcIiwgcGFydGljaXBhbnRJZCk7XHJcblxyXG4gICAgaWYgKCFwYXJ0aWNpcGFudElkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSUQgZHUgcGFydGljaXBhbnQgbWFucXVhbnQuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBub21fZXF1aXBlLCBjYXRlZ29yaWVfZXF1aXBlLCBpZF9ldmVuZW1lbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghbm9tX2VxdWlwZSB8fCAhY2F0ZWdvcmllX2VxdWlwZSB8fCAhaWRfZXZlbmVtZW50KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiVG91cyBsZXMgY2hhbXBzIHNvbnQgb2JsaWdhdG9pcmVzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5SNIENyw6lhdGlvbiBkJ3VuZSDDqXF1aXBlOiAke25vbV9lcXVpcGV9IHwgQ2F0w6lnb3JpZTogJHtjYXRlZ29yaWVfZXF1aXBlfSB8IMOJdsOpbmVtZW50IElEOiAke2lkX2V2ZW5lbWVudH0gfCBQYXJ0aWNpcGFudCBJRDogJHtwYXJ0aWNpcGFudElkfWApO1xyXG5cclxuICAgIGNvbnN0IFtlcXVpcGVJZF0gPSBhd2FpdCBkYignZXF1aXBlcycpLmluc2VydCh7XHJcbiAgICAgIG5vbV9lcXVpcGUsXHJcbiAgICAgIGNhdGVnb3JpZV9lcXVpcGUsXHJcbiAgICAgIGlkX3BhcnRpY2lwYW50OiBwYXJ0aWNpcGFudElkLFxyXG4gICAgICBpZF9ldmVuZW1lbnRcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIMOJcXVpcGUgY3LDqcOpZSBhdmVjIElEOlwiLCBlcXVpcGVJZCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiw4lxdWlwZSBjcsOpw6llIGF2ZWMgc3VjY8Oocy5cIiwgaWRfZXF1aXBlOiBlcXVpcGVJZCB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGwnw6lxdWlwZTpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIPCflLkgQWZmaWNoZXIgbGVzIMOpcXVpcGVzIGR1IHBhcnRpY2lwYW50XHJcbi8vIPCflLkgQWZmaWNoZXIgbGVzIMOpcXVpcGVzIGR1IHBhcnRpY2lwYW50IGF2ZWMgbGUgbm9tIGRlIGwnw6l2w6luZW1lbnRcclxuZXhwb3J0cy5nZXRNeVRlYW1zID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+TjCBUb2tlbiBicnV0IHJlw6d1IGRhbnMgbCdlbi10w6p0ZTpcIiwgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbik7XHJcblxyXG4gICAgbGV0IHBhcnRpY2lwYW50SWQgPSByZXEudXNlcklkIHx8IHJlcS5pZF9wYXJ0aWNpcGFudDtcclxuXHJcbiAgICBpZiAoIXBhcnRpY2lwYW50SWQgJiYgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIilbMV07XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TjCBUb2tlbiBkw6ljb2TDqSBkYW5zIGBnZXRNeVRlYW1zYDpcIiwgZGVjb2RlZCk7XHJcbiAgICAgICAgcGFydGljaXBhbnRJZCA9IGRlY29kZWQuaWRfcGFydGljaXBhbnQgfHwgZGVjb2RlZC5pZDtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHbDqXJpZmljYXRpb24gZHUgdG9rZW46XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLwn5OMIElEIGR1IHBhcnRpY2lwYW50IGV4dHJhaXQgZHUgdG9rZW46XCIsIHBhcnRpY2lwYW50SWQpO1xyXG5cclxuICAgIGlmICghcGFydGljaXBhbnRJZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIklEIGR1IHBhcnRpY2lwYW50IG1hbnF1YW50LlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIPCflI0gUsOpY3Vww6lyYXRpb24gZGVzIMOpcXVpcGVzIGR1IHBhcnRpY2lwYW50IGF2ZWMgbGUgbm9tIGRlIGwnw6l2w6luZW1lbnRcclxuICAgIGNvbnN0IGVxdWlwZXMgPSBhd2FpdCBkYignZXF1aXBlcycpXHJcbiAgICAgIC5qb2luKCdldmVuZW1lbnQnLCAnZXF1aXBlcy5pZF9ldmVuZW1lbnQnLCAnPScsICdldmVuZW1lbnQuaWRfZXZlbmVtZW50JykgLy8gQWpvdXQgZGUgbGEgam9pbnR1cmVcclxuICAgICAgLndoZXJlKHsgJ2VxdWlwZXMuaWRfcGFydGljaXBhbnQnOiBwYXJ0aWNpcGFudElkIH0pXHJcbiAgICAgIC5zZWxlY3QoJ2VxdWlwZXMuaWRfZXF1aXBlJywgJ2VxdWlwZXMubm9tX2VxdWlwZScsICdlcXVpcGVzLmNhdGVnb3JpZV9lcXVpcGUnLCAnZXF1aXBlcy5pZF9ldmVuZW1lbnQnLCAnZXZlbmVtZW50Lm5vbV9ldmVudCcpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIMOJcXVpcGVzIHLDqWN1cMOpcsOpZXM6XCIsIGVxdWlwZXMpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZXF1aXBlcyk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyDDqXF1aXBlczpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuLy8gY29udHJvbGVyIHBvdXIgc3VwcHJpbWVyIHVuZSDDqXF1aXBlXHJcbmV4cG9ydHMuZGVsZXRlRXF1aXBlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBhd2FpdCBkYignZXF1aXBlcycpLndoZXJlKHsgaWRfZXF1aXBlOiBpZCB9KS5kZWwoKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCLDiXF1aXBlIHN1cHByaW3DqWUgYXZlYyBzdWNjw6hzLlwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24uXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ29udHJvbGVyIHBvdXIgbW9kaWZpZXIgdW5lIMOpcXVpcGVcclxuZXhwb3J0cy51cGRhdGVFcXVpcGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuICAgIGNvbnN0IHsgbm9tX2VxdWlwZSwgY2F0ZWdvcmllX2VxdWlwZSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgYXdhaXQgZGIoJ2VxdWlwZXMnKS53aGVyZSh7IGlkX2VxdWlwZTogaWQgfSkudXBkYXRlKHsgbm9tX2VxdWlwZSwgY2F0ZWdvcmllX2VxdWlwZSB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiw4lxdWlwZSBtaXNlIMOgIGpvdXIgYXZlYyBzdWNjw6hzLlwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIOKchSBBam91dGVyIHVuIGpvdWV1ciDDoCB1bmUgw6lxdWlwZVxyXG5leHBvcnRzLmFkZEpvdWV1ciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+TjCBSZXF1w6p0ZSByZcOndWUgcG91ciBham91dGVyIHVuIGpvdWV1cjpcIiwgcmVxLmJvZHkpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBub21fam91ZXVyLCBwcmVub21fam91ZXVyLCBkYXRlX25haXNzYW5jZSwgc2V4ZV9qb3VldXIsIGVtYWlsX2pvdWV1ciwgdGVsX2pvdWV1ciwgcG9zdGVfam91ZXVyIH0gPSByZXEuYm9keTtcclxuICAgICAgY29uc3QgeyBpZEVxdWlwZSB9ID0gcmVxLnBhcmFtczsgLy8gUsOpY3Vww6lyZXIgbCdJRCBkZSBsJ8OpcXVpcGUgZGVwdWlzIGwnVVJMXHJcblxyXG4gICAgICBpZiAoIW5vbV9qb3VldXIgfHwgIXByZW5vbV9qb3VldXIgfHwgIWRhdGVfbmFpc3NhbmNlIHx8ICFzZXhlX2pvdWV1ciB8fCAhZW1haWxfam91ZXVyIHx8ICF0ZWxfam91ZXVyIHx8ICFwb3N0ZV9qb3VldXIpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiVG91cyBsZXMgY2hhbXBzIHNvbnQgb2JsaWdhdG9pcmVzLlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBBam91dCBkdSBqb3VldXI6ICR7bm9tX2pvdWV1cn0gJHtwcmVub21fam91ZXVyfSwgUG9zdGU6ICR7cG9zdGVfam91ZXVyfSwgw4lxdWlwZSBJRDogJHtpZEVxdWlwZX1gKTtcclxuXHJcbiAgICAgIGNvbnN0IFtqb3VldXJJZF0gPSBhd2FpdCBkYignam91ZXVycycpLmluc2VydCh7XHJcbiAgICAgICAgICBub21fam91ZXVyLFxyXG4gICAgICAgICAgcHJlbm9tX2pvdWV1cixcclxuICAgICAgICAgIGRhdGVfbmFpc3NhbmNlLFxyXG4gICAgICAgICAgc2V4ZV9qb3VldXIsXHJcbiAgICAgICAgICBlbWFpbF9qb3VldXIsXHJcbiAgICAgICAgICB0ZWxfam91ZXVyLFxyXG4gICAgICAgICAgcG9zdGVfam91ZXVyLFxyXG4gICAgICAgICAgaWRfZXF1aXBlOiBpZEVxdWlwZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEpvdWV1ciBham91dMOpIGF2ZWMgSUQ6XCIsIGpvdWV1cklkKTtcclxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiBcIkpvdWV1ciBham91dMOpIGF2ZWMgc3VjY8Oocy5cIiwgaWRfam91ZXVyOiBqb3VldXJJZCB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkZSBsJ2Fqb3V0IGR1IGpvdWV1cjpcIiwgZXJyb3IpO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXIuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g4pyFIFLDqWN1cMOpcmVyIGxlcyBqb3VldXJzIGQndW5lIMOpcXVpcGVcclxuZXhwb3J0cy5nZXRKb3VldXJzQnlFcXVpcGUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgICBjb25zdCB7IGlkRXF1aXBlIH0gPSByZXEucGFyYW1zOyAvLyBSw6ljdXDDqXJlciBsJ0lEIGRlIGwnw6lxdWlwZSBkZXB1aXMgbCdVUkxcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OMIFLDqWN1cMOpcmF0aW9uIGRlcyBqb3VldXJzIHBvdXIgbCfDqXF1aXBlIElEOiAke2lkRXF1aXBlfWApO1xyXG5cclxuICAgICAgLy8gVsOpcmlmaWNhdGlvbiBzaSBsJ8OpcXVpcGUgZXhpc3RlXHJcbiAgICAgIGNvbnN0IGVxdWlwZSA9IGF3YWl0IGRiKCdlcXVpcGVzJykud2hlcmUoeyBpZF9lcXVpcGU6IGlkRXF1aXBlIH0pLmZpcnN0KCk7XHJcbiAgICAgIGlmICghZXF1aXBlKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIsOJcXVpcGUgbm9uIHRyb3V2w6llLlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBSw6ljdXDDqXJhdGlvbiBkZXMgam91ZXVycyBkZSBjZXR0ZSDDqXF1aXBlXHJcbiAgICAgIGNvbnN0IGpvdWV1cnMgPSBhd2FpdCBkYignam91ZXVycycpLndoZXJlKHsgaWRfZXF1aXBlOiBpZEVxdWlwZSB9KS5zZWxlY3QoJyonKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEpvdWV1cnMgcsOpY3Vww6lyw6lzOlwiLCBqb3VldXJzKTtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oam91ZXVycyk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGpvdWV1cnM6XCIsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIPCflLkgTW9kaWZpZXIgdW4gam91ZXVyXHJcbmV4cG9ydHMudXBkYXRlSm91ZXVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgICBjb25zdCB7IG5vbV9qb3VldXIsIHByZW5vbV9qb3VldXIsIGRhdGVfbmFpc3NhbmNlLCBzZXhlX2pvdWV1ciwgZW1haWxfam91ZXVyLCB0ZWxfam91ZXVyLCBwb3N0ZV9qb3VldXIgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIFbDqXJpZmllciBzaSBsZSBqb3VldXIgZXhpc3RlXHJcbiAgICBjb25zdCBqb3VldXIgPSBhd2FpdCBkYignam91ZXVycycpLndoZXJlKHsgaWRfam91ZXVyOiBpZCB9KS5maXJzdCgpO1xyXG4gICAgaWYgKCFqb3VldXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJKb3VldXIgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWlzZSDDoCBqb3VyIGR1IGpvdWV1clxyXG4gICAgYXdhaXQgZGIoJ2pvdWV1cnMnKS53aGVyZSh7IGlkX2pvdWV1cjogaWQgfSkudXBkYXRlKHtcclxuICAgICAgbm9tX2pvdWV1ciwgcHJlbm9tX2pvdWV1ciwgZGF0ZV9uYWlzc2FuY2UsIHNleGVfam91ZXVyLCBlbWFpbF9qb3VldXIsIHRlbF9qb3VldXIsIHBvc3RlX2pvdWV1clxyXG4gICAgfSk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkpvdWV1ciBtaXMgw6Agam91ciBhdmVjIHN1Y2PDqHMuXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgbWlzZSDDoCBqb3VyIGR1IGpvdWV1cjpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyLlwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIPCflLkgU3VwcHJpbWVyIHVuIGpvdWV1clxyXG5leHBvcnRzLmRlbGV0ZUpvdWV1ciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIC8vIFbDqXJpZmllciBzaSBsZSBqb3VldXIgZXhpc3RlXHJcbiAgICBjb25zdCBqb3VldXIgPSBhd2FpdCBkYignam91ZXVycycpLndoZXJlKHsgaWRfam91ZXVyOiBpZCB9KS5maXJzdCgpO1xyXG4gICAgaWYgKCFqb3VldXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJKb3VldXIgbm9uIHRyb3V2w6kuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3VwcHJpbWVyIGxlIGpvdWV1clxyXG4gICAgYXdhaXQgZGIoJ2pvdWV1cnMnKS53aGVyZSh7IGlkX2pvdWV1cjogaWQgfSkuZGVsKCk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkpvdWV1ciBzdXBwcmltw6kgYXZlYyBzdWNjw6hzLlwiIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGR1IGpvdWV1cjpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVy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QUFFQyxXQUFXO01BQUVDLFlBQVk7TUFBRUMsVUFBVTtNQUFFQztJQUNwRixDQUFDLENBQUM7SUFFRnJHLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUcsT0FBTyxFQUFFO0lBQWlDLENBQUMsQ0FBQztFQUNyRSxDQUFDLENBQUMsT0FBT0YsS0FBSyxFQUFFO0lBQ2RDLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLDRDQUE0QyxFQUFFQSxLQUFLLENBQUM7SUFDbEVMLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUcsT0FBTyxFQUFFO0lBQWtCLENBQUMsQ0FBQztFQUN0RDtBQUNGLENBQUM7O0FBRUQ7QUFDQVYsT0FBTyxDQUFDaUgsWUFBWSxHQUFHLE9BQU8vRyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN6QyxJQUFJO0lBQ0YsTUFBTTtNQUFFUztJQUFHLENBQUMsR0FBR1YsR0FBRyxDQUFDVyxNQUFNOztJQUV6QjtJQUNBLE1BQU1tRyxNQUFNLEdBQUcsTUFBTXpILEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQ3dCLEtBQUssQ0FBQztNQUFFNEYsU0FBUyxFQUFFL0Y7SUFBRyxDQUFDLENBQUMsQ0FBQ1EsS0FBSyxDQUFDLENBQUM7SUFDbkUsSUFBSSxDQUFDNEYsTUFBTSxFQUFFO01BQ1gsT0FBTzdHLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUcsT0FBTyxFQUFFO01BQXFCLENBQUMsQ0FBQztJQUNoRTs7SUFFQTtJQUNBLE1BQU1uQixFQUFFLENBQUMsU0FBUyxDQUFDLENBQUN3QixLQUFLLENBQUM7TUFBRTRGLFNBQVMsRUFBRS9GO0lBQUcsQ0FBQyxDQUFDLENBQUNLLEdBQUcsQ0FBQyxDQUFDO0lBRWxEZCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVHLE9BQU8sRUFBRTtJQUErQixDQUFDLENBQUM7RUFDbkUsQ0FBQyxDQUFDLE9BQU9GLEtBQUssRUFBRTtJQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyw0Q0FBNEMsRUFBRUEsS0FBSyxDQUFDO0lBQ2xFTCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVHLE9BQU8sRUFBRTtJQUFrQixDQUFDLENBQUM7RUFDdEQ7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["bcrypt","require","crypto","db","jwt","Token","createParticipantQuery","getParticipantByEmailQuery","getEventByIdQuery","getParticipantByIdQuery","updateParticipantQuery","sendActivationEmail","exports","getAllParticipants","req","res","participants","select","status","json","error","console","message","deleteParticipant","id","params","deletedRows","where","id_participant","del","getParticipantCount","count","first","total","registerOrLoginParticipant","nom_part","email_part","mdp_part","genre_part","telephone_part","ville_part","codepostal_part","id_evenement","body","log","event","id_organisateur","participant","phoneRegex","test","salt","genSalt","hashedPassword","hash","participantId","insert","statut_part","date_inscription","Date","toISOString","split","isPasswordValid","compare","existingParticipation","warn","token","sign","email","process","env","JWT_SECRET","expiresIn","getParticipantProfile","loginParticipant","password","mdp_participant","validPassword","role","updateParticipantProfile","prenom_part","oldPassword","newPassword","confirmPassword","existingEmail","whereNot","updatedFields","getInscribedEvents","headers","authorization","userId","decoded","verify","events","join","unsubscribeFromEvent","eventId","participation","getAllEvents","getParticipantEvents","createEquipe","nom_equipe","categorie_equipe","equipeId","id_equipe","getMyTeams","equipes","deleteEquipe","updateEquipe","update","addJoueur","nom_joueur","prenom_joueur","date_naissance","sexe_joueur","email_joueur","tel_joueur","poste_joueur","idEquipe","joueurId","id_joueur","getJoueursByEquipe","equipe","joueurs","updateJoueur","joueur","deleteJoueur"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["participantControler.js"],"sourcesContent":["const bcrypt = require('bcrypt');\r\nconst crypto = require('crypto');\r\nconst db = require('../db');\r\nconst jwt = require('jsonwebtoken');\r\nconst Token = require('../middleware/jwtMiddleware'); // Mod√®le pour la table Token\r\nconst {\r\n  createParticipantQuery,\r\n  getParticipantByEmailQuery,\r\n  getEventByIdQuery,\r\n  getParticipantByIdQuery,\r\n  updateParticipantQuery\r\n} = require('../queries');\r\nconst { sendActivationEmail } = require('./ParticipantEmailService');\r\n\r\n\r\n// R√©cup√©rer tous les participants\r\nexports.getAllParticipants = async (req, res) => {\r\n  try {\r\n      const participants = await db('participants').select('*');\r\n      res.status(200).json(participants);\r\n  } catch (error) {\r\n      console.error(\"Erreur lors de la r√©cup√©ration des participants :\", error);\r\n      res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// Supprimer un participant\r\nexports.deleteParticipant = async (req, res) => {\r\n  const { id } = req.params;\r\n  try {\r\n      const deletedRows = await db('participants').where({ id_participant: id }).del();\r\n      if (deletedRows) {\r\n          res.status(200).json({ message: \"Participant supprim√© avec succ√®s.\" });\r\n      } else {\r\n          res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n      }\r\n  } catch (error) {\r\n      console.error(\"Erreur lors de la suppression du participant :\", error);\r\n      res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n// R√©cup√©rer le nombre total de participants\r\nexports.getParticipantCount = async (req, res) => {\r\n  try {\r\n    const count = await db('participants').count('id_participant as total').first();\r\n    res.status(200).json({ total: count.total });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors du comptage des participants :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n//controler pour afficher les donne de participant dans son tableau de bord\r\n\r\nexports.registerOrLoginParticipant = async (req, res) => {\r\n  const { nom_part, email_part, mdp_part, genre_part, telephone_part, ville_part, codepostal_part, id_evenement } = req.body;\r\n\r\n  try {\r\n    console.log(\"üîç Donn√©es re√ßues :\", req.body);\r\n\r\n    // V√©rifier si l'√©v√©nement existe\r\n    const event = await db('evenement').where({ id_evenement }).first();\r\n    if (!event) {\r\n      console.error(\"‚ùå √âv√©nement non trouv√© pour l'ID :\", id_evenement);\r\n      return res.status(400).json({ message: \"√âv√©nement non trouv√©.\" });\r\n    }\r\n    const id_organisateur = event.id_organisateur;\r\n\r\n    // V√©rifier si le participant existe d√©j√†\r\n    let participant = await db('participants').where({ email_part }).first();\r\n\r\n    if (!participant) {\r\n      // üîπ **Cr√©er un nouveau participant**\r\n      console.log(\"üÜï Cr√©ation d'un nouveau participant...\");\r\n\r\n      // Validation des champs obligatoires\r\n      if (!nom_part || !email_part || !mdp_part || !telephone_part || !ville_part || !codepostal_part) {\r\n        console.error(\"‚ùå Un champ obligatoire est manquant.\");\r\n        return res.status(400).json({ message: \"Tous les champs obligatoires doivent √™tre remplis.\" });\r\n      }\r\n\r\n      // Validation du num√©ro de t√©l√©phone\r\n      const phoneRegex = /^\\+\\d{1,3}\\d{8,12}$/;\r\n      if (!phoneRegex.test(telephone_part)) {\r\n        console.error(\"‚ùå Num√©ro de t√©l√©phone invalide :\", telephone_part);\r\n        return res.status(400).json({ message: \"Num√©ro de t√©l√©phone invalide.\" });\r\n      }\r\n\r\n      // Hashage du mot de passe\r\n      console.log(\"üîë Hashage du mot de passe...\");\r\n      const salt = await bcrypt.genSalt(10);\r\n      const hashedPassword = await bcrypt.hash(mdp_part, salt);\r\n\r\n      // Ins√©rer le participant dans la base de donn√©es\r\n      const [participantId] = await db('participants').insert({\r\n        nom_part,\r\n        email_part,\r\n        mdp_part: hashedPassword,\r\n        genre_part,\r\n        telephone_part,\r\n        ville_part,\r\n        codepostal_part,\r\n        id_organisateur,\r\n        statut_part: \"En attente\",\r\n        date_inscription: new Date().toISOString().split(\"T\")[0],\r\n      });\r\n\r\n      console.log(\"‚úÖ Nouveau participant cr√©√© avec ID :\", participantId);\r\n      participant = { id_participant: participantId };\r\n    } else {\r\n      // üîπ **Le participant existe d√©j√† ‚Üí V√©rifier son mot de passe**\r\n      console.log(\"üîÑ Connexion d'un participant existant...\");\r\n      const isPasswordValid = await bcrypt.compare(mdp_part, participant.mdp_part);\r\n      if (!isPasswordValid) {\r\n        console.error(\"‚ùå Mot de passe incorrect pour :\", email_part);\r\n        return res.status(401).json({ message: \"Mot de passe incorrect.\" });\r\n      }\r\n    }\r\n\r\n    // üîπ V√©rifier si le participant est d√©j√† inscrit √† cet √©v√©nement\r\n    const existingParticipation = await db('participer')\r\n      .where({ id_participant: participant.id_participant, id_evenement })\r\n      .first();\r\n\r\n    if (existingParticipation) {\r\n      console.warn(`‚ö†Ô∏è Le participant avec l'email ${email_part} est d√©j√† inscrit √† cet √©v√©nement.`);\r\n      return res.status(400).json({ message: \"Vous √™tes d√©j√† inscrit √† cet √©v√©nement.\" });\r\n    }\r\n\r\n    // üîπ Inscrire le participant √† l'√©v√©nement\r\n    await db('participer').insert({\r\n      id_participant: participant.id_participant,\r\n      id_evenement,\r\n    });\r\n\r\n    console.log(\"‚úÖ Inscription √† l'√©v√©nement r√©ussie.\");\r\n\r\n    // üîπ G√©n√©ration du token JWT\r\n    const token = jwt.sign(\r\n      { id_participant: participant.id_participant, email: participant.email_part },\r\n      process.env.JWT_SECRET,\r\n      { expiresIn: \"24h\" }\r\n    );\r\n\r\n    return res.status(201).json({\r\n      message: \"Inscription r√©ussie.\",\r\n      participantId: participant.id_participant,\r\n      token,\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur serveur :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\nexports.getParticipantProfile = async (req, res) => {\r\n  const { participantId } = req.params;\r\n\r\n  try {\r\n    const participant = await getParticipantByIdQuery(participantId);\r\n    console.log(await getParticipantByIdQuery(participantId)); // Ajoutez ceci dans votre contr√¥leur pour d√©boguer\r\n\r\n    if (!participant) {\r\n      return res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n    }\r\n\r\n    res.status(200).json(participant);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la r√©cup√©ration des donn√©es du participant :', error);\r\n    res.status(500).json({ message: 'Erreur serveur.' });\r\n  }\r\n};\r\n\r\n// Contr√¥leur de connexion pour le participant\r\nexports.loginParticipant = async (req, res) => {\r\n  const { email, password } = req.body;\r\n\r\n  try {\r\n\r\n    // V√©rifiez les champs envoy√©s depuis le frontend\r\n    console.log(\"Email re√ßu depuis le frontend :\", email);\r\n    console.log(\"Mot de passe re√ßu depuis le frontend :\", password);\r\n\r\n    // Validation des champs d'entr√©e\r\n    if (!email || !password) {\r\n      return res.status(400).json({ message: 'Email et mot de passe sont obligatoires.' });\r\n    }\r\n\r\n    // R√©cup√©rer le participant par email\r\n    const participant = await getParticipantByEmailQuery(email);\r\n    console.log(\"Participant r√©cup√©r√© depuis la base de donn√©es :\", participant);\r\n    if (!participant) {\r\n      return res.status(404).json({ message: 'Participant non trouv√©.' });\r\n    }\r\n\r\n    // V√©rifiez si le mot de passe hash√© est pr√©sent dans la base de donn√©es\r\n    console.log(\"Mot de passe hash√© dans la base de donn√©es :\", participant.mdp_participant);\r\n\r\n    // V√©rifiez si le mot de passe hash√© est pr√©sent dans la base de donn√©es\r\n    if (!participant.mdp_participant) {\r\n      console.error('Mot de passe introuvable pour cet utilisateur:', participant);\r\n      return res.status(400).json({ message: 'Mot de passe introuvable pour cet utilisateur.' });\r\n\r\n    }\r\n\r\n    // Comparer le mot de passe fourni avec le hash dans la base de donn√©es\r\n    const validPassword = await bcrypt.compare(password, participant.mdp_participant);\r\n    console.log(\"R√©sultat de la comparaison des mots de passe :\", validPassword);\r\n\r\n    if (!validPassword) {\r\n      return res.status(400).json({ message: 'Mot de passe incorrect.' });\r\n    }\r\n\r\n    //Cr√©er un token JWT\r\n    const token = jwt.sign(\r\n      { id: participant.id_participant, role: 'participant' },\r\n      process.env.JWT_SECRET,\r\n      { expiresIn: '1h' }\r\n    );\r\n\r\n\r\n\r\n    console.log('Connexion r√©ussie pour le participant:', participant.email_part);\r\n    return res.status(200).json({\r\n      message: 'Connexion r√©ussie (participant)',\r\n      token,\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur serveur :', error);\r\n    return res.status(500).json({ message: 'Erreur serveur.', error });\r\n  }\r\n};\r\n\r\n// Mettre √† jour le profil du participant\r\nexports.updateParticipantProfile = async (req, res) => {\r\n  const { participantId } = req.params;\r\n  const { nom_part, prenom_part, email_part, telephone_part, genre_part, ville_part, codepostal_part, oldPassword, newPassword, confirmPassword } = req.body;\r\n\r\n  try {\r\n    const participant = await getParticipantByIdQuery(participantId);\r\n    if (!participant) {\r\n      return res.status(404).json({ message: \"Participant non trouv√©.\" });\r\n    }\r\n\r\n    // V√©rifier si l'email est d√©j√† utilis√© par un autre utilisateur\r\n    const existingEmail = await db('participants').where({ email_part }).whereNot({ id_participant: participantId }).first();\r\n    if (existingEmail) {\r\n      return res.status(400).json({ message: \"Cet email est d√©j√† utilis√©.\" });\r\n    }\r\n\r\n    let updatedFields = {\r\n      nom_part,\r\n      prenom_part,\r\n      email_part,\r\n      telephone_part,\r\n      genre_part,\r\n      ville_part,\r\n      codepostal_part\r\n    };\r\n\r\n    // Si l'utilisateur veut changer son mot de passe\r\n    if (oldPassword && newPassword && confirmPassword) {\r\n      const validPassword = await bcrypt.compare(oldPassword, participant.mdp_part);\r\n      if (!validPassword) {\r\n        return res.status(400).json({ message: \"Ancien mot de passe incorrect.\" });\r\n      }\r\n\r\n      if (newPassword !== confirmPassword) {\r\n        return res.status(400).json({ message: \"Les nouveaux mots de passe ne correspondent pas.\" });\r\n      }\r\n\r\n      const salt = await bcrypt.genSalt(10);\r\n      updatedFields.mdp_part = await bcrypt.hash(newPassword, salt);\r\n    }\r\n\r\n    // Mise √† jour des informations dans la base de donn√©es\r\n    await updateParticipantQuery(participantId, updatedFields);\r\n\r\n    return res.status(200).json({ message: \"Profil mis √† jour avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la mise √† jour du profil :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n\r\n// R√©cup√©rer les √©v√©nements auxquels un participant est inscrit\r\nexports.getInscribedEvents = async (req, res) => {\r\n  try {\r\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\r\n\r\n    let participantId = req.userId || req.id_participant;\r\n\r\n    if (!participantId && req.headers.authorization) {\r\n      try {\r\n        const token = req.headers.authorization.split(\" \")[1];\r\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n\r\n        console.log(\"üìå Token d√©cod√© directement dans le contr√¥leur:\", decoded);\r\n\r\n        participantId = decoded.id_participant || decoded.id;\r\n      } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la v√©rification du token dans le contr√¥leur:\", error.message);\r\n      }\r\n    }\r\n\r\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\r\n\r\n    if (!participantId) {\r\n      console.error(\"‚ùå ID du participant introuvable.\");\r\n      return res.status(400).json({ message: \"ID du participant manquant.\" });\r\n    }\r\n\r\n    console.log(\"üîç R√©cup√©ration des √©v√©nements pour le participant ID:\", participantId);\r\n\r\n    const events = await db('participer')\r\n      .join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement')\r\n      .where('participer.id_participant', participantId)\r\n      .select(\r\n        'evenement.id_evenement',\r\n        'evenement.nom_event',\r\n        'evenement.date_debut',\r\n        'evenement.date_fin',\r\n        'evenement.lieu_event',\r\n        'evenement.logo_event',\r\n        'evenement.type_event',\r\n        'evenement.nbr_participant',\r\n        'evenement.genre_participant',\r\n        'evenement.categorie_participant',\r\n        'evenement.frais_inscription',\r\n        'evenement.statut_event',\r\n        'evenement.description_accueil',\r\n        'evenement.description_detail'\r\n      );\r\n\r\n    console.log(\"‚úÖ √âv√©nements trouv√©s:\", events);\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements inscrits :\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n\r\n// Contr√¥leur pour annuler une inscription\r\nexports.unsubscribeFromEvent = async (req, res) => {\r\n  try {\r\n    const participantId = req.userId || req.id_participant;\r\n    const { eventId } = req.params;\r\n\r\n    if (!participantId || !eventId) {\r\n      return res.status(400).json({ message: \"ID du participant ou de l'√©v√©nement manquant.\" });\r\n    }\r\n\r\n    console.log(\"üîç Suppression de l'inscription de l'√©v√©nement :\", eventId, \"par le participant :\", participantId);\r\n\r\n    // V√©rifier si l'inscription existe\r\n    const participation = await db('participer')\r\n      .where({ id_participant: participantId, id_evenement: eventId })\r\n      .first();\r\n\r\n    if (!participation) {\r\n      return res.status(404).json({ message: \"Vous n'√™tes pas inscrit √† cet √©v√©nement.\" });\r\n    }\r\n\r\n    // Supprimer l'inscription\r\n    await db('participer')\r\n      .where({ id_participant: participantId, id_evenement: eventId })\r\n      .del();\r\n\r\n    console.log(\"‚úÖ Inscription annul√©e avec succ√®s !\");\r\n    return res.status(200).json({ message: \"Votre inscription a √©t√© annul√©e avec succ√®s.\" });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de l'annulation de l'inscription :\", error);\r\n    return res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n// pour Affichage des √©v√©nements\r\nexports.getAllEvents = async (req, res) => {\r\n  try {\r\n    const events = await db('evenement')\r\n      .select('id_evenement', 'nom_event');\r\n\r\n    console.log(\"‚úÖ √âv√©nements trouv√©s:\", events);\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// üîπ R√©cup√©rer les √©v√©nements auxquels le participant est inscrit\r\nexports.getParticipantEvents = async (req, res) => {\r\n  try {\r\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\r\n\r\n    let participantId = req.userId || req.id_participant;\r\n\r\n    // V√©rification du token si `participantId` n'est pas d√©fini\r\n    if (!participantId && req.headers.authorization) {\r\n      try {\r\n        const token = req.headers.authorization.split(\" \")[1];\r\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n        console.log(\"üìå Token d√©cod√© dans `getParticipantEvents`:\", decoded);\r\n        participantId = decoded.id_participant || decoded.id;\r\n      } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la v√©rification du token:\", error.message);\r\n      }\r\n    }\r\n\r\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\r\n\r\n    if (!participantId) {\r\n      return res.status(400).json({ message: \"ID du participant manquant.\" });\r\n    }\r\n\r\n    console.log(\"üîç R√©cup√©ration des √©v√©nements auxquels le participant ID:\", participantId, \"est inscrit.\");\r\n\r\n    // R√©cup√©rer les √©v√©nements du participant depuis la table `participer`\r\n    const events = await db('participer')\r\n      .join('evenement', 'participer.id_evenement', '=', 'evenement.id_evenement')\r\n      .where('participer.id_participant', participantId)\r\n      .select('evenement.id_evenement', 'evenement.nom_event');\r\n\r\n    console.log(\"‚úÖ √âv√©nements trouv√©s:\", events);\r\n    res.status(200).json(events);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©v√©nements inscrits:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// üîπ **Cr√©er une √©quipe (stock√©e avec le participant)**\r\nexports.createEquipe = async (req, res) => {\r\n  try {\r\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\r\n\r\n    let participantId = req.userId || req.id_participant;\r\n\r\n    if (!participantId && req.headers.authorization) {\r\n      try {\r\n        const token = req.headers.authorization.split(\" \")[1];\r\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n        console.log(\"üìå Token d√©cod√© dans `createEquipe`:\", decoded);\r\n        participantId = decoded.id_participant || decoded.id;\r\n      } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la v√©rification du token:\", error.message);\r\n      }\r\n    }\r\n\r\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\r\n\r\n    if (!participantId) {\r\n      return res.status(400).json({ message: \"ID du participant manquant.\" });\r\n    }\r\n\r\n    const { nom_equipe, categorie_equipe, id_evenement } = req.body;\r\n\r\n    if (!nom_equipe || !categorie_equipe || !id_evenement) {\r\n      return res.status(400).json({ message: \"Tous les champs sont obligatoires.\" });\r\n    }\r\n\r\n    console.log(`üîç Cr√©ation d'une √©quipe: ${nom_equipe} | Cat√©gorie: ${categorie_equipe} | √âv√©nement ID: ${id_evenement} | Participant ID: ${participantId}`);\r\n\r\n    const [equipeId] = await db('equipes').insert({\r\n      nom_equipe,\r\n      categorie_equipe,\r\n      id_participant: participantId,\r\n      id_evenement\r\n    });\r\n\r\n    console.log(\"‚úÖ √âquipe cr√©√©e avec ID:\", equipeId);\r\n    res.status(201).json({ message: \"√âquipe cr√©√©e avec succ√®s.\", id_equipe: equipeId });\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la cr√©ation de l'√©quipe:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// üîπ Afficher les √©quipes du participant\r\n// üîπ Afficher les √©quipes du participant avec le nom de l'√©v√©nement\r\nexports.getMyTeams = async (req, res) => {\r\n  try {\r\n    console.log(\"üìå Token brut re√ßu dans l'en-t√™te:\", req.headers.authorization);\r\n\r\n    let participantId = req.userId || req.id_participant;\r\n\r\n    if (!participantId && req.headers.authorization) {\r\n      try {\r\n        const token = req.headers.authorization.split(\" \")[1];\r\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n        console.log(\"üìå Token d√©cod√© dans `getMyTeams`:\", decoded);\r\n        participantId = decoded.id_participant || decoded.id;\r\n      } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la v√©rification du token:\", error.message);\r\n      }\r\n    }\r\n\r\n    console.log(\"üìå ID du participant extrait du token:\", participantId);\r\n\r\n    if (!participantId) {\r\n      return res.status(400).json({ message: \"ID du participant manquant.\" });\r\n    }\r\n\r\n    // üîç R√©cup√©ration des √©quipes du participant avec le nom de l'√©v√©nement\r\n    const equipes = await db('equipes')\r\n      .join('evenement', 'equipes.id_evenement', '=', 'evenement.id_evenement') // Ajout de la jointure\r\n      .where({ 'equipes.id_participant': participantId })\r\n      .select('equipes.id_equipe', 'equipes.nom_equipe', 'equipes.categorie_equipe', 'equipes.id_evenement', 'evenement.nom_event');\r\n\r\n    console.log(\"‚úÖ √âquipes r√©cup√©r√©es:\", equipes);\r\n    res.status(200).json(equipes);\r\n\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des √©quipes:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n// controler pour supprimer une √©quipe\r\nexports.deleteEquipe = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    await db('equipes').where({ id_equipe: id }).del();\r\n    res.status(200).json({ message: \"√âquipe supprim√©e avec succ√®s.\" });\r\n  } catch (error) {\r\n    res.status(500).json({ message: \"Erreur lors de la suppression.\" });\r\n  }\r\n};\r\n\r\n// Controler pour modifier une √©quipe\r\nexports.updateEquipe = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const { nom_equipe, categorie_equipe } = req.body;\r\n\r\n    await db('equipes').where({ id_equipe: id }).update({ nom_equipe, categorie_equipe });\r\n\r\n    res.status(200).json({ message: \"√âquipe mise √† jour avec succ√®s.\" });\r\n  } catch (error) {\r\n    res.status(500).json({ message: \"Erreur lors de la mise √† jour.\" });\r\n  }\r\n};\r\n\r\n// ‚úÖ Ajouter un joueur √† une √©quipe\r\nexports.addJoueur = async (req, res) => {\r\n  try {\r\n      console.log(\"üìå Requ√™te re√ßue pour ajouter un joueur:\", req.body);\r\n      \r\n      const { nom_joueur, prenom_joueur, date_naissance, sexe_joueur, email_joueur, tel_joueur, poste_joueur } = req.body;\r\n      const { idEquipe } = req.params; // R√©cup√©rer l'ID de l'√©quipe depuis l'URL\r\n\r\n      if (!nom_joueur || !prenom_joueur || !date_naissance || !sexe_joueur || !email_joueur || !tel_joueur || !poste_joueur) {\r\n          return res.status(400).json({ message: \"Tous les champs sont obligatoires.\" });\r\n      }\r\n\r\n      console.log(`üîç Ajout du joueur: ${nom_joueur} ${prenom_joueur}, Poste: ${poste_joueur}, √âquipe ID: ${idEquipe}`);\r\n\r\n      const [joueurId] = await db('joueurs').insert({\r\n          nom_joueur,\r\n          prenom_joueur,\r\n          date_naissance,\r\n          sexe_joueur,\r\n          email_joueur,\r\n          tel_joueur,\r\n          poste_joueur,\r\n          id_equipe: idEquipe\r\n      });\r\n\r\n      console.log(\"‚úÖ Joueur ajout√© avec ID:\", joueurId);\r\n      res.status(201).json({ message: \"Joueur ajout√© avec succ√®s.\", id_joueur: joueurId });\r\n\r\n  } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de l'ajout du joueur:\", error);\r\n      res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// ‚úÖ R√©cup√©rer les joueurs d'une √©quipe\r\nexports.getJoueursByEquipe = async (req, res) => {\r\n  try {\r\n      const { idEquipe } = req.params; // R√©cup√©rer l'ID de l'√©quipe depuis l'URL\r\n\r\n      console.log(`üìå R√©cup√©ration des joueurs pour l'√©quipe ID: ${idEquipe}`);\r\n\r\n      // V√©rification si l'√©quipe existe\r\n      const equipe = await db('equipes').where({ id_equipe: idEquipe }).first();\r\n      if (!equipe) {\r\n          return res.status(404).json({ message: \"√âquipe non trouv√©e.\" });\r\n      }\r\n\r\n      // R√©cup√©ration des joueurs de cette √©quipe\r\n      const joueurs = await db('joueurs').where({ id_equipe: idEquipe }).select('*');\r\n\r\n      console.log(\"‚úÖ Joueurs r√©cup√©r√©s:\", joueurs);\r\n      res.status(200).json(joueurs);\r\n\r\n  } catch (error) {\r\n      console.error(\"‚ùå Erreur lors de la r√©cup√©ration des joueurs:\", error);\r\n      res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// üîπ Modifier un joueur\r\nexports.updateJoueur = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const { nom_joueur, prenom_joueur, date_naissance, sexe_joueur, email_joueur, tel_joueur, poste_joueur } = req.body;\r\n\r\n    // V√©rifier si le joueur existe\r\n    const joueur = await db('joueurs').where({ id_joueur: id }).first();\r\n    if (!joueur) {\r\n      return res.status(404).json({ message: \"Joueur non trouv√©.\" });\r\n    }\r\n\r\n    // Mise √† jour du joueur\r\n    await db('joueurs').where({ id_joueur: id }).update({\r\n      nom_joueur, prenom_joueur, date_naissance, sexe_joueur, email_joueur, tel_joueur, poste_joueur\r\n    });\r\n\r\n    res.status(200).json({ message: \"Joueur mis √† jour avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la mise √† jour du joueur:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n// üîπ Supprimer un joueur\r\nexports.deleteJoueur = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n\r\n    // V√©rifier si le joueur existe\r\n    const joueur = await db('joueurs').where({ id_joueur: id }).first();\r\n    if (!joueur) {\r\n      return res.status(404).json({ message: \"Joueur non trouv√©.\" });\r\n    }\r\n\r\n    // Supprimer le joueur\r\n    await db('joueurs').where({ id_joueur: id }).del();\r\n\r\n    res.status(200).json({ message: \"Joueur supprim√© avec succ√®s.\" });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la suppression du joueur:\", error);\r\n    res.status(500).json({ message: \"Erreur serveur.\" });\r\n  }\r\n};\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742488235245},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\ParticipantEmailService.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst sgMail = require('@sendgrid/mail');\nconst crypto = require('crypto');\nsgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que votre cl√© API est d√©finie dans .env\n\n// Fonction pour envoyer l'email d'activation avec un jeton unique\nconst sendActivationEmail = async (email, token) => {\n  console.log(\"Email destinataire :\", email); // pour v√©rifier l'email\n  try {\n    const activationLink = `http://localhost:3001/api/organizer/activate/${token}`;\n    const message = {\n      to: email,\n      from: 'rak.tahina02@gmail.com',\n      // Remplacez par votre adresse email v√©rifi√©e sur SendGrid\n      subject: 'Confirmez votre adresse email',\n      html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`\n    };\n    await sgMail.send(message);\n  } catch (error) {\n    console.error(\"Erreur lors de l'envoi de l'email d'activation :\", error);\n    throw error;\n  }\n};\nmodule.exports = {\n  sendActivationEmail\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZ01haWwiLCJyZXF1aXJlIiwiY3J5cHRvIiwic2V0QXBpS2V5IiwicHJvY2VzcyIsImVudiIsIlNFTkRHUklEX0FQSV9LRVkiLCJzZW5kQWN0aXZhdGlvbkVtYWlsIiwiZW1haWwiLCJ0b2tlbiIsImNvbnNvbGUiLCJsb2ciLCJhY3RpdmF0aW9uTGluayIsIm1lc3NhZ2UiLCJ0byIsImZyb20iLCJzdWJqZWN0IiwiaHRtbCIsInNlbmQiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJQYXJ0aWNpcGFudEVtYWlsU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZ01haWwgPSByZXF1aXJlKCdAc2VuZGdyaWQvbWFpbCcpO1xyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuXHJcbnNnTWFpbC5zZXRBcGlLZXkocHJvY2Vzcy5lbnYuU0VOREdSSURfQVBJX0tFWSk7IC8vIEFzc3VyZXotdm91cyBxdWUgdm90cmUgY2zDqSBBUEkgZXN0IGTDqWZpbmllIGRhbnMgLmVudlxyXG5cclxuLy8gRm9uY3Rpb24gcG91ciBlbnZveWVyIGwnZW1haWwgZCdhY3RpdmF0aW9uIGF2ZWMgdW4gamV0b24gdW5pcXVlXHJcbmNvbnN0IHNlbmRBY3RpdmF0aW9uRW1haWwgPSBhc3luYyAoZW1haWwsIHRva2VuKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJFbWFpbCBkZXN0aW5hdGFpcmUgOlwiLCBlbWFpbCk7IC8vIHBvdXIgdsOpcmlmaWVyIGwnZW1haWxcclxuICB0cnkge1xyXG4gICAgY29uc3QgYWN0aXZhdGlvbkxpbmsgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAxL2FwaS9vcmdhbml6ZXIvYWN0aXZhdGUvJHt0b2tlbn1gO1xyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XHJcbiAgICAgIHRvOiBlbWFpbCxcclxuICAgICAgZnJvbTogJ3Jhay50YWhpbmEwMkBnbWFpbC5jb20nLCAvLyBSZW1wbGFjZXogcGFyIHZvdHJlIGFkcmVzc2UgZW1haWwgdsOpcmlmacOpZSBzdXIgU2VuZEdyaWRcclxuICAgICAgc3ViamVjdDogJ0NvbmZpcm1leiB2b3RyZSBhZHJlc3NlIGVtYWlsJyxcclxuICAgICAgaHRtbDogYDxwPlZldWlsbGV6IGNsaXF1ZXIgc3VyIGxlIGxpZW4gc3VpdmFudCBwb3VyIGFjdGl2ZXIgdm90cmUgY29tcHRlIDo8L3A+PGEgaHJlZj1cIiR7YWN0aXZhdGlvbkxpbmt9XCI+JHthY3RpdmF0aW9uTGlua308L2E+YCxcclxuICAgIH07XHJcblxyXG4gICAgYXdhaXQgc2dNYWlsLnNlbmQobWVzc2FnZSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGRlIGwnZW1haWwgZCdhY3RpdmF0aW9uIDpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0geyBzZW5kQWN0aXZhdGlvbkVtYWlsIH07Il0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3hDLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVoQ0QsTUFBTSxDQUFDRyxTQUFTLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7O0FBRWhEO0FBQ0EsTUFBTUMsbUJBQW1CLEdBQUcsTUFBQUEsQ0FBT0MsS0FBSyxFQUFFQyxLQUFLLEtBQUs7RUFDbERDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixFQUFFSCxLQUFLLENBQUMsQ0FBQyxDQUFDO0VBQzVDLElBQUk7SUFDRixNQUFNSSxjQUFjLEdBQUcsZ0RBQWdESCxLQUFLLEVBQUU7SUFFOUUsTUFBTUksT0FBTyxHQUFHO01BQ2RDLEVBQUUsRUFBRU4sS0FBSztNQUNUTyxJQUFJLEVBQUUsd0JBQXdCO01BQUU7TUFDaENDLE9BQU8sRUFBRSwrQkFBK0I7TUFDeENDLElBQUksRUFBRSxtRkFBbUZMLGNBQWMsS0FBS0EsY0FBYztJQUM1SCxDQUFDO0lBRUQsTUFBTVosTUFBTSxDQUFDa0IsSUFBSSxDQUFDTCxPQUFPLENBQUM7RUFDNUIsQ0FBQyxDQUFDLE9BQU9NLEtBQUssRUFBRTtJQUNkVCxPQUFPLENBQUNTLEtBQUssQ0FBQyxrREFBa0QsRUFBRUEsS0FBSyxDQUFDO0lBQ3hFLE1BQU1BLEtBQUs7RUFDYjtBQUNGLENBQUM7QUFHREMsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRWQ7QUFBb0IsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["sgMail","require","crypto","setApiKey","process","env","SENDGRID_API_KEY","sendActivationEmail","email","token","console","log","activationLink","message","to","from","subject","html","send","error","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["ParticipantEmailService.js"],"sourcesContent":["const sgMail = require('@sendgrid/mail');\r\nconst crypto = require('crypto');\r\n\r\nsgMail.setApiKey(process.env.SENDGRID_API_KEY); // Assurez-vous que votre cl√© API est d√©finie dans .env\r\n\r\n// Fonction pour envoyer l'email d'activation avec un jeton unique\r\nconst sendActivationEmail = async (email, token) => {\r\n  console.log(\"Email destinataire :\", email); // pour v√©rifier l'email\r\n  try {\r\n    const activationLink = `http://localhost:3001/api/organizer/activate/${token}`;\r\n\r\n    const message = {\r\n      to: email,\r\n      from: 'rak.tahina02@gmail.com', // Remplacez par votre adresse email v√©rifi√©e sur SendGrid\r\n      subject: 'Confirmez votre adresse email',\r\n      html: `<p>Veuillez cliquer sur le lien suivant pour activer votre compte :</p><a href=\"${activationLink}\">${activationLink}</a>`,\r\n    };\r\n\r\n    await sgMail.send(message);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'envoi de l'email d'activation :\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n\r\nmodule.exports = { sendActivationEmail };"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AACxC,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAEhCD,MAAM,CAACG,SAAS,CAACC,OAAO,CAACC,GAAG,CAACC,gBAAgB,CAAC,CAAC,CAAC;;AAEhD;AACA,MAAMC,mBAAmB,GAAG,MAAAA,CAAOC,KAAK,EAAEC,KAAK,KAAK;EAClDC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEH,KAAK,CAAC,CAAC,CAAC;EAC5C,IAAI;IACF,MAAMI,cAAc,GAAG,gDAAgDH,KAAK,EAAE;IAE9E,MAAMI,OAAO,GAAG;MACdC,EAAE,EAAEN,KAAK;MACTO,IAAI,EAAE,wBAAwB;MAAE;MAChCC,OAAO,EAAE,+BAA+B;MACxCC,IAAI,EAAE,mFAAmFL,cAAc,KAAKA,cAAc;IAC5H,CAAC;IAED,MAAMZ,MAAM,CAACkB,IAAI,CAACL,OAAO,CAAC;EAC5B,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdT,OAAO,CAACS,KAAK,CAAC,kDAAkD,EAAEA,KAAK,CAAC;IACxE,MAAMA,KAAK;EACb;AACF,CAAC;AAGDC,MAAM,CAACC,OAAO,GAAG;EAAEd;AAAoB,CAAC","ignoreList":[]}},"mtime":1738141680000},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\faqRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst FaqControler = require('../controlers/FaqControler');\nconst verifyToken = require('../middleware/jwtMiddleware');\nconst verifyRoles = require('../middleware/roleMiddleware');\nconst router = express.Router();\n\n// Routes pour la FAQ\nrouter.post('/faq', verifyToken, verifyRoles(['admin']), FaqControler.createFaq);\nrouter.get('/faq', FaqControler.getAllFaqs);\nrouter.get('/faq/:id', FaqControler.getFaqById);\nrouter.put('/faq/:id', verifyToken, verifyRoles(['admin']), FaqControler.updateFaq);\nrouter.delete('/faq/:id', verifyToken, verifyRoles(['admin']), FaqControler.deleteFaq);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIkZhcUNvbnRyb2xlciIsInZlcmlmeVRva2VuIiwidmVyaWZ5Um9sZXMiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiY3JlYXRlRmFxIiwiZ2V0IiwiZ2V0QWxsRmFxcyIsImdldEZhcUJ5SWQiLCJwdXQiLCJ1cGRhdGVGYXEiLCJkZWxldGUiLCJkZWxldGVGYXEiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXHJvdXRlc1xcIiwic291cmNlcyI6WyJmYXFSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgRmFxQ29udHJvbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGVycy9GYXFDb250cm9sZXInKTtcclxuY29uc3QgdmVyaWZ5VG9rZW4gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2p3dE1pZGRsZXdhcmUnKTtcclxuY29uc3QgdmVyaWZ5Um9sZXMgPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL3JvbGVNaWRkbGV3YXJlJyk7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gUm91dGVzIHBvdXIgbGEgRkFRXHJcbnJvdXRlci5wb3N0KCcvZmFxJywgdmVyaWZ5VG9rZW4sIHZlcmlmeVJvbGVzKFsnYWRtaW4nXSksIEZhcUNvbnRyb2xlci5jcmVhdGVGYXEpO1xyXG5yb3V0ZXIuZ2V0KCcvZmFxJywgRmFxQ29udHJvbGVyLmdldEFsbEZhcXMpO1xyXG5yb3V0ZXIuZ2V0KCcvZmFxLzppZCcsIEZhcUNvbnRyb2xlci5nZXRGYXFCeUlkKTtcclxucm91dGVyLnB1dCgnL2ZhcS86aWQnLCB2ZXJpZnlUb2tlbiwgdmVyaWZ5Um9sZXMoWydhZG1pbiddKSwgRmFxQ29udHJvbGVyLnVwZGF0ZUZhcSk7XHJcbnJvdXRlci5kZWxldGUoJy9mYXEvOmlkJywgdmVyaWZ5VG9rZW4sIHZlcmlmeVJvbGVzKFsnYWRtaW4nXSksIEZhcUNvbnRyb2xlci5kZWxldGVGYXEpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsWUFBWSxHQUFHRCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFDMUQsTUFBTUUsV0FBVyxHQUFHRixPQUFPLENBQUMsNkJBQTZCLENBQUM7QUFDMUQsTUFBTUcsV0FBVyxHQUFHSCxPQUFPLENBQUMsOEJBQThCLENBQUM7QUFFM0QsTUFBTUksTUFBTSxHQUFHTCxPQUFPLENBQUNNLE1BQU0sQ0FBQyxDQUFDOztBQUUvQjtBQUNBRCxNQUFNLENBQUNFLElBQUksQ0FBQyxNQUFNLEVBQUVKLFdBQVcsRUFBRUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRUYsWUFBWSxDQUFDTSxTQUFTLENBQUM7QUFDaEZILE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLE1BQU0sRUFBRVAsWUFBWSxDQUFDUSxVQUFVLENBQUM7QUFDM0NMLE1BQU0sQ0FBQ0ksR0FBRyxDQUFDLFVBQVUsRUFBRVAsWUFBWSxDQUFDUyxVQUFVLENBQUM7QUFDL0NOLE1BQU0sQ0FBQ08sR0FBRyxDQUFDLFVBQVUsRUFBRVQsV0FBVyxFQUFFQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFRixZQUFZLENBQUNXLFNBQVMsQ0FBQztBQUNuRlIsTUFBTSxDQUFDUyxNQUFNLENBQUMsVUFBVSxFQUFFWCxXQUFXLEVBQUVDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVGLFlBQVksQ0FBQ2EsU0FBUyxDQUFDO0FBRXRGQyxNQUFNLENBQUNDLE9BQU8sR0FBR1osTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","FaqControler","verifyToken","verifyRoles","router","Router","post","createFaq","get","getAllFaqs","getFaqById","put","updateFaq","delete","deleteFaq","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["faqRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst FaqControler = require('../controlers/FaqControler');\r\nconst verifyToken = require('../middleware/jwtMiddleware');\r\nconst verifyRoles = require('../middleware/roleMiddleware');\r\n\r\nconst router = express.Router();\r\n\r\n// Routes pour la FAQ\r\nrouter.post('/faq', verifyToken, verifyRoles(['admin']), FaqControler.createFaq);\r\nrouter.get('/faq', FaqControler.getAllFaqs);\r\nrouter.get('/faq/:id', FaqControler.getFaqById);\r\nrouter.put('/faq/:id', verifyToken, verifyRoles(['admin']), FaqControler.updateFaq);\r\nrouter.delete('/faq/:id', verifyToken, verifyRoles(['admin']), FaqControler.deleteFaq);\r\n\r\nmodule.exports = router;\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,YAAY,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AAC1D,MAAME,WAAW,GAAGF,OAAO,CAAC,6BAA6B,CAAC;AAC1D,MAAMG,WAAW,GAAGH,OAAO,CAAC,8BAA8B,CAAC;AAE3D,MAAMI,MAAM,GAAGL,OAAO,CAACM,MAAM,CAAC,CAAC;;AAE/B;AACAD,MAAM,CAACE,IAAI,CAAC,MAAM,EAAEJ,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEF,YAAY,CAACM,SAAS,CAAC;AAChFH,MAAM,CAACI,GAAG,CAAC,MAAM,EAAEP,YAAY,CAACQ,UAAU,CAAC;AAC3CL,MAAM,CAACI,GAAG,CAAC,UAAU,EAAEP,YAAY,CAACS,UAAU,CAAC;AAC/CN,MAAM,CAACO,GAAG,CAAC,UAAU,EAAET,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEF,YAAY,CAACW,SAAS,CAAC;AACnFR,MAAM,CAACS,MAAM,CAAC,UAAU,EAAEX,WAAW,EAAEC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,EAAEF,YAAY,CAACa,SAAS,CAAC;AAEtFC,MAAM,CAACC,OAAO,GAAGZ,MAAM","ignoreList":[]}},"mtime":1733209034284},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\FaqControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst {\n  createFaqQuery,\n  getAllFaqsQuery,\n  getFaqByIdQuery,\n  updateFaqQuery,\n  deleteFaqQuery\n} = require('../queries');\nexports.createFaq = async (req, res) => {\n  const {\n    question,\n    answer\n  } = req.body;\n  try {\n    const faqData = await createFaqQuery({\n      question,\n      answer\n    }); // Ins√®re et retourne l‚ÄôID\n    res.status(201).json({\n      message: 'FAQ cr√©√©e avec succ√®s',\n      faq: faqData\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la cr√©ation de la FAQ',\n      error\n    });\n  }\n};\nexports.getAllFaqs = async (req, res) => {\n  try {\n    const faqs = await getAllFaqsQuery();\n    res.status(200).json(faqs);\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la r√©cup√©ration des FAQs',\n      error\n    });\n  }\n};\nexports.getFaqById = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const faq = await getFaqByIdQuery(id);\n    if (!faq) {\n      return res.status(404).json({\n        message: 'FAQ non trouv√©e'\n      });\n    }\n    res.status(200).json(faq);\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la r√©cup√©ration de la FAQ',\n      error\n    });\n  }\n};\nexports.updateFaq = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    question,\n    answer\n  } = req.body;\n  try {\n    await updateFaqQuery(id, {\n      question,\n      answer\n    });\n    res.status(200).json({\n      message: 'FAQ mise √† jour avec succ√®s'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la mise √† jour de la FAQ',\n      error\n    });\n  }\n};\nexports.deleteFaq = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    await deleteFaqQuery(id);\n    res.status(200).json({\n      message: 'FAQ supprim√©e avec succ√®s'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: 'Erreur lors de la suppression de la FAQ',\n      error\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVGYXFRdWVyeSIsImdldEFsbEZhcXNRdWVyeSIsImdldEZhcUJ5SWRRdWVyeSIsInVwZGF0ZUZhcVF1ZXJ5IiwiZGVsZXRlRmFxUXVlcnkiLCJyZXF1aXJlIiwiZXhwb3J0cyIsImNyZWF0ZUZhcSIsInJlcSIsInJlcyIsInF1ZXN0aW9uIiwiYW5zd2VyIiwiYm9keSIsImZhcURhdGEiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImZhcSIsImVycm9yIiwiZ2V0QWxsRmFxcyIsImZhcXMiLCJnZXRGYXFCeUlkIiwiaWQiLCJwYXJhbXMiLCJ1cGRhdGVGYXEiLCJkZWxldGVGYXEiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJGYXFDb250cm9sZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBjcmVhdGVGYXFRdWVyeSwgZ2V0QWxsRmFxc1F1ZXJ5LCBnZXRGYXFCeUlkUXVlcnksIHVwZGF0ZUZhcVF1ZXJ5LCBkZWxldGVGYXFRdWVyeSB9ID0gcmVxdWlyZSgnLi4vcXVlcmllcycpO1xyXG5cclxuZXhwb3J0cy5jcmVhdGVGYXEgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IHF1ZXN0aW9uLCBhbnN3ZXIgfSA9IHJlcS5ib2R5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZmFxRGF0YSA9IGF3YWl0IGNyZWF0ZUZhcVF1ZXJ5KHsgcXVlc3Rpb24sIGFuc3dlciB9KTsgLy8gSW5zw6hyZSBldCByZXRvdXJuZSBs4oCZSURcclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ0ZBUSBjcsOpw6llIGF2ZWMgc3VjY8OocycsIGZhcTogZmFxRGF0YSB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxhIEZBUScsIGVycm9yIH0pO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5leHBvcnRzLmdldEFsbEZhcXMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZmFxcyA9IGF3YWl0IGdldEFsbEZhcXNRdWVyeSgpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZmFxcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBGQVFzJywgZXJyb3IgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRGYXFCeUlkID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZhcSA9IGF3YWl0IGdldEZhcUJ5SWRRdWVyeShpZCk7XHJcbiAgICBpZiAoIWZhcSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnRkFRIG5vbiB0cm91dsOpZScgfSk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihmYXEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZSBsYSBGQVEnLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLnVwZGF0ZUZhcSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgY29uc3QgeyBxdWVzdGlvbiwgYW5zd2VyIH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHVwZGF0ZUZhcVF1ZXJ5KGlkLCB7IHF1ZXN0aW9uLCBhbnN3ZXIgfSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdGQVEgbWlzZSDDoCBqb3VyIGF2ZWMgc3VjY8OocycgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkZSBsYSBGQVEnLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmRlbGV0ZUZhcSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBkZWxldGVGYXFRdWVyeShpZCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdGQVEgc3VwcHJpbcOpZSBhdmVjIHN1Y2PDqHMnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJldXIgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbiBkZSBsYSBGQVEnLCBlcnJvciB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNO0VBQUVBLGNBQWM7RUFBRUMsZUFBZTtFQUFFQyxlQUFlO0VBQUVDLGNBQWM7RUFBRUM7QUFBZSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFFbEhDLE9BQU8sQ0FBQ0MsU0FBUyxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU07SUFBRUMsUUFBUTtJQUFFQztFQUFPLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxJQUFJO0VBRXJDLElBQUk7SUFDRixNQUFNQyxPQUFPLEdBQUcsTUFBTWIsY0FBYyxDQUFDO01BQUVVLFFBQVE7TUFBRUM7SUFBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lB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","map":{"version":3,"names":["createFaqQuery","getAllFaqsQuery","getFaqByIdQuery","updateFaqQuery","deleteFaqQuery","require","exports","createFaq","req","res","question","answer","body","faqData","status","json","message","faq","error","getAllFaqs","faqs","getFaqById","id","params","updateFaq","deleteFaq"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["FaqControler.js"],"sourcesContent":["const { createFaqQuery, getAllFaqsQuery, getFaqByIdQuery, updateFaqQuery, deleteFaqQuery } = require('../queries');\r\n\r\nexports.createFaq = async (req, res) => {\r\n  const { question, answer } = req.body;\r\n\r\n  try {\r\n    const faqData = await createFaqQuery({ question, answer }); // Ins√®re et retourne l‚ÄôID\r\n    res.status(201).json({ message: 'FAQ cr√©√©e avec succ√®s', faq: faqData });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la cr√©ation de la FAQ', error });\r\n  }\r\n};\r\n\r\n\r\nexports.getAllFaqs = async (req, res) => {\r\n  try {\r\n    const faqs = await getAllFaqsQuery();\r\n    res.status(200).json(faqs);\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la r√©cup√©ration des FAQs', error });\r\n  }\r\n};\r\n\r\nexports.getFaqById = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    const faq = await getFaqByIdQuery(id);\r\n    if (!faq) {\r\n      return res.status(404).json({ message: 'FAQ non trouv√©e' });\r\n    }\r\n    res.status(200).json(faq);\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la r√©cup√©ration de la FAQ', error });\r\n  }\r\n};\r\n\r\nexports.updateFaq = async (req, res) => {\r\n  const { id } = req.params;\r\n  const { question, answer } = req.body;\r\n\r\n  try {\r\n    await updateFaqQuery(id, { question, answer });\r\n    res.status(200).json({ message: 'FAQ mise √† jour avec succ√®s' });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la mise √† jour de la FAQ', error });\r\n  }\r\n};\r\n\r\nexports.deleteFaq = async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  try {\r\n    await deleteFaqQuery(id);\r\n    res.status(200).json({ message: 'FAQ supprim√©e avec succ√®s' });\r\n  } catch (error) {\r\n    res.status(500).json({ message: 'Erreur lors de la suppression de la FAQ', error });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742721650922},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\newsletterRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst router = express.Router();\nconst db = require('../db');\nrequire('dotenv').config(); // Charge les variables d'environnement depuis le fichier .env\nconst sgMail = require('@sendgrid/mail');\nsgMail.setApiKey(process.env.SENDGRID_API_KEY); // Cl√© API de SendGrid\n\nrouter.post('/subscribe', async (req, res) => {\n  const {\n    email\n  } = req.body;\n  if (!email) {\n    return res.status(400).json({\n      error: \"L'email est requis\"\n    });\n  }\n  try {\n    const existingSubscriber = await db('subscribers').where({\n      email\n    }).first();\n    if (existingSubscriber) {\n      return res.status(400).json({\n        error: \"Cet email est d√©j√† abonn√©\"\n      });\n    }\n    await db('subscribers').insert({\n      email\n    });\n    res.status(201).json({\n      message: \"Abonnement r√©ussi !\"\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n});\nrouter.post('/unsubscribe', async (req, res) => {\n  const {\n    email\n  } = req.body;\n  try {\n    const deleted = await db('subscribers').where({\n      email\n    }).del();\n    if (deleted) {\n      res.json({\n        message: \"D√©sinscription r√©ussie\"\n      });\n    } else {\n      res.status(400).json({\n        error: \"Email non trouv√©\"\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n});\nrouter.get('/list', async (req, res) => {\n  try {\n    const subscribers = await db('subscribers').select('*');\n    res.json(subscribers);\n  } catch (error) {\n    console.error(error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n});\n\n// Route pour envoyer une newsletter\nrouter.post('/send-newsletter', async (req, res) => {\n  const {\n    subject,\n    content\n  } = req.body;\n  if (!subject || !content) {\n    return res.status(400).json({\n      error: \"Le sujet et le contenu sont requis.\"\n    });\n  }\n  try {\n    // R√©cup√©rer la liste des abonn√©s depuis la base de donn√©es\n    const subscribers = await db('subscribers').select('email');\n    if (subscribers.length === 0) {\n      return res.status(400).json({\n        error: \"Aucun abonn√© disponible.\"\n      });\n    }\n    const recipients = subscribers.map(subscriber => subscriber.email);\n\n    // D√©finir les options de l'email\n    const msg = {\n      to: recipients,\n      from: process.env.EMAIL_USER,\n      // Utilisez votre email pour l'envoi\n      subject: subject,\n      text: content\n    };\n\n    // Envoi de l'email via SendGrid\n    await sgMail.sendMultiple(msg);\n    res.status(200).json({\n      message: 'Newsletter envoy√©e avec succ√®s.'\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(500).json({\n      error: \"Erreur lors de l'envoi de la newsletter.\"\n    });\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImRiIiwiY29uZmlnIiwic2dNYWlsIiwic2V0QXBpS2V5IiwicHJvY2VzcyIsImVudiIsIlNFTkRHUklEX0FQSV9LRVkiLCJwb3N0IiwicmVxIiwicmVzIiwiZW1haWwiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZXhpc3RpbmdTdWJzY3JpYmVyIiwid2hlcmUiLCJmaXJzdCIsImluc2VydCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiZGVsZXRlZCIsImRlbCIsImdldCIsInN1YnNjcmliZXJzIiwic2VsZWN0Iiwic3ViamVjdCIsImNvbnRlbnQiLCJsZW5ndGgiLCJyZWNpcGllbnRzIiwibWFwIiwic3Vic2NyaWJlciIsIm1zZyIsInRvIiwiZnJvbSIsIkVNQUlMX1VTRVIiLCJ0ZXh0Iiwic2VuZE11bHRpcGxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsibmV3c2xldHRlclJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoJy4uL2RiJyk7XHJcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpOyAgLy8gQ2hhcmdlIGxlcyB2YXJpYWJsZXMgZCdlbnZpcm9ubmVtZW50IGRlcHVpcyBsZSBmaWNoaWVyIC5lbnZcclxuY29uc3Qgc2dNYWlsID0gcmVxdWlyZSgnQHNlbmRncmlkL21haWwnKTtcclxuXHJcbnNnTWFpbC5zZXRBcGlLZXkocHJvY2Vzcy5lbnYuU0VOREdSSURfQVBJX0tFWSk7ICAvLyBDbMOpIEFQSSBkZSBTZW5kR3JpZFxyXG5cclxucm91dGVyLnBvc3QoJy9zdWJzY3JpYmUnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJMJ2VtYWlsIGVzdCByZXF1aXNcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3Vic2NyaWJlciA9IGF3YWl0IGRiKCdzdWJzY3JpYmVycycpLndoZXJlKHsgZW1haWwgfSkuZmlyc3QoKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdTdWJzY3JpYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkNldCBlbWFpbCBlc3QgZMOpasOgIGFib25uw6lcIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IGRiKCdzdWJzY3JpYmVycycpLmluc2VydCh7IGVtYWlsIH0pO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogXCJBYm9ubmVtZW50IHLDqXVzc2kgIVwiIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxucm91dGVyLnBvc3QoJy91bnN1YnNjcmliZScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkZWxldGVkID0gYXdhaXQgZGIoJ3N1YnNjcmliZXJzJykud2hlcmUoeyBlbWFpbCB9KS5kZWwoKTtcclxuICAgICAgICBpZiAoZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiRMOpc2luc2NyaXB0aW9uIHLDqXVzc2llXCIgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJFbWFpbCBub24gdHJvdXbDqVwiIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbnJvdXRlci5nZXQoJy9saXN0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gYXdhaXQgZGIoJ3N1YnNjcmliZXJzJykuc2VsZWN0KCcqJyk7XHJcbiAgICAgICAgcmVzLmpzb24oc3Vic2NyaWJlcnMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gUm91dGUgcG91ciBlbnZveWVyIHVuZSBuZXdzbGV0dGVyXHJcbnJvdXRlci5wb3N0KCcvc2VuZC1uZXdzbGV0dGVyJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHN1YmplY3QsIGNvbnRlbnQgfSA9IHJlcS5ib2R5O1xyXG4gICAgXHJcbiAgICBpZiAoIXN1YmplY3QgfHwgIWNvbnRlbnQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJMZSBzdWpldCBldCBsZSBjb250ZW51IHNvbnQgcmVxdWlzLlwiIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gUsOpY3Vww6lyZXIgbGEgbGlzdGUgZGVzIGFib25uw6lzIGRlcHVpcyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbiAgICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSBhd2FpdCBkYignc3Vic2NyaWJlcnMnKS5zZWxlY3QoJ2VtYWlsJyk7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQXVjdW4gYWJvbm7DqSBkaXNwb25pYmxlLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVjaXBpZW50cyA9IHN1YnNjcmliZXJzLm1hcChzdWJzY3JpYmVyID0+IHN1YnNjcmliZXIuZW1haWwpO1xyXG5cclxuICAgICAgICAvLyBEw6lmaW5pciBsZXMgb3B0aW9ucyBkZSBsJ2VtYWlsXHJcbiAgICAgICAgY29uc3QgbXNnID0ge1xyXG4gICAgICAgICAgICB0bzogcmVjaXBpZW50cyxcclxuICAgICAgICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiwgIC8vIFV0aWxpc2V6IHZvdHJlIGVtYWlsIHBvdXIgbCdlbnZvaVxyXG4gICAgICAgICAgICBzdWJqZWN0OiBzdWJqZWN0LFxyXG4gICAgICAgICAgICB0ZXh0OiBjb250ZW50LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEVudm9pIGRlIGwnZW1haWwgdmlhIFNlbmRHcmlkXHJcbiAgICAgICAgYXdhaXQgc2dNYWlsLnNlbmRNdWx0aXBsZShtc2cpO1xyXG5cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdOZXdzbGV0dGVyIGVudm95w6llIGF2ZWMgc3VjY8Oocy4nIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBsb3JzIGRlIGwnZW52b2kgZGUgbGEgbmV3c2xldHRlci5cIiB9KTtcclxuICAgIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFNLENBQUMsQ0FBQztBQUMvQixNQUFNQyxFQUFFLEdBQUdILE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDM0JBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFFO0FBQzdCLE1BQU1DLE1BQU0sR0FBR0wsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBRXhDSyxNQUFNLENBQUNDLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGdCQUFnQixDQUFDLENBQUMsQ0FBRTs7QUFFakRSLE1BQU0sQ0FBQ1MsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUMxQyxNQUFNO0lBQUVDO0VBQU0sQ0FBQyxHQUFHRixHQUFHLENBQUNHLElBQUk7RUFFMUIsSUFBSSxDQUFDRCxLQUFLLEVBQUU7SUFDUixPQUFPRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUFxQixDQUFDLENBQUM7RUFDaEU7RUFFQSxJQUFJO0lBQ0EsTUFBTUMsa0JBQWtCLEdBQUcsTUFBTWYsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDZ0IsS0FBSyxDQUFDO01BQUVOO0lBQU0sQ0FBQyxDQUFDLENBQUNPLEtBQUssQ0FBQyxDQUFDO0lBQzNFLElBQUlGLGtCQUFrQixFQUFFO01BQ3BCLE9BQU9OLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcs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","map":{"version":3,"names":["express","require","router","Router","db","config","sgMail","setApiKey","process","env","SENDGRID_API_KEY","post","req","res","email","body","status","json","error","existingSubscriber","where","first","insert","message","console","deleted","del","get","subscribers","select","subject","content","length","recipients","map","subscriber","msg","to","from","EMAIL_USER","text","sendMultiple","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["newsletterRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst db = require('../db');\r\nrequire('dotenv').config();  // Charge les variables d'environnement depuis le fichier .env\r\nconst sgMail = require('@sendgrid/mail');\r\n\r\nsgMail.setApiKey(process.env.SENDGRID_API_KEY);  // Cl√© API de SendGrid\r\n\r\nrouter.post('/subscribe', async (req, res) => {\r\n    const { email } = req.body;\r\n\r\n    if (!email) {\r\n        return res.status(400).json({ error: \"L'email est requis\" });\r\n    }\r\n\r\n    try {\r\n        const existingSubscriber = await db('subscribers').where({ email }).first();\r\n        if (existingSubscriber) {\r\n            return res.status(400).json({ error: \"Cet email est d√©j√† abonn√©\" });\r\n        }\r\n\r\n        await db('subscribers').insert({ email });\r\n        res.status(201).json({ message: \"Abonnement r√©ussi !\" });\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.status(500).json({ error: \"Erreur serveur\" });\r\n    }\r\n});\r\n\r\nrouter.post('/unsubscribe', async (req, res) => {\r\n    const { email } = req.body;\r\n\r\n    try {\r\n        const deleted = await db('subscribers').where({ email }).del();\r\n        if (deleted) {\r\n            res.json({ message: \"D√©sinscription r√©ussie\" });\r\n        } else {\r\n            res.status(400).json({ error: \"Email non trouv√©\" });\r\n        }\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.status(500).json({ error: \"Erreur serveur\" });\r\n    }\r\n});\r\n\r\nrouter.get('/list', async (req, res) => {\r\n    try {\r\n        const subscribers = await db('subscribers').select('*');\r\n        res.json(subscribers);\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.status(500).json({ error: \"Erreur serveur\" });\r\n    }\r\n});\r\n\r\n// Route pour envoyer une newsletter\r\nrouter.post('/send-newsletter', async (req, res) => {\r\n    const { subject, content } = req.body;\r\n    \r\n    if (!subject || !content) {\r\n        return res.status(400).json({ error: \"Le sujet et le contenu sont requis.\" });\r\n    }\r\n\r\n    try {\r\n        // R√©cup√©rer la liste des abonn√©s depuis la base de donn√©es\r\n        const subscribers = await db('subscribers').select('email'); \r\n        \r\n        if (subscribers.length === 0) {\r\n            return res.status(400).json({ error: \"Aucun abonn√© disponible.\" });\r\n        }\r\n\r\n        const recipients = subscribers.map(subscriber => subscriber.email);\r\n\r\n        // D√©finir les options de l'email\r\n        const msg = {\r\n            to: recipients,\r\n            from: process.env.EMAIL_USER,  // Utilisez votre email pour l'envoi\r\n            subject: subject,\r\n            text: content,\r\n        };\r\n\r\n        // Envoi de l'email via SendGrid\r\n        await sgMail.sendMultiple(msg);\r\n\r\n        res.status(200).json({ message: 'Newsletter envoy√©e avec succ√®s.' });\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.status(500).json({ error: \"Erreur lors de l'envoi de la newsletter.\" });\r\n    }\r\n});\r\n\r\nmodule.exports = router;"],"mappings":"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","ignoreList":[]}},"mtime":1742766098401},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\ticketSalesRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require(\"express\");\nconst router = express.Router();\nconst ticketSalesControler = require(\"./../controlers/TicketSalesControler\"); // ‚úÖ Assure-toi que ce chemin est correct\n\n// Endpoint pour acheter un billet\nrouter.post(\"/acheter\", ticketSalesControler.acheterTicket);\n// üìå V√©rifier si les fonctions existent\nif (!ticketSalesControler.getAllTicketSales) {\n  console.error(\"‚ùå ERREUR: getAllTicketSales n'est pas d√©fini dans ticketSalesController !\");\n}\nif (!ticketSalesControler.updateSaleStatus) {\n  console.error(\"‚ùå ERREUR: updateSaleStatus n'est pas d√©fini dans ticketSalesController !\");\n}\nif (!ticketSalesControler.deleteSale) {\n  console.error(\"‚ùå ERREUR: deleteSale n'est pas d√©fini dans ticketSalesController !\");\n}\n\n// üëá Route √† ajouter si elle n'est pas encore l√†\nrouter.post('/acheter', ticketSalesControler.acheterTicket);\nrouter.get(\"/ventes-billets\", ticketSalesControler.getAllTicketSales);\nrouter.put(\"/update-paiement/:id\", ticketSalesControler.updateSaleStatus);\nrouter.delete(\"/supprimer-vente/:id\", ticketSalesControler.deleteSale);\nrouter.put(\"/transfert-paiement/:id\", ticketSalesControler.updateTransferStatus);\nrouter.put(\"/annuler-paiement/:id\", ticketSalesControler.cancelPayment);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsInRpY2tldFNhbGVzQ29udHJvbGVyIiwicG9zdCIsImFjaGV0ZXJUaWNrZXQiLCJnZXRBbGxUaWNrZXRTYWxlcyIsImNvbnNvbGUiLCJlcnJvciIsInVwZGF0ZVNhbGVTdGF0dXMiLCJkZWxldGVTYWxlIiwiZ2V0IiwicHV0IiwiZGVsZXRlIiwidXBkYXRlVHJhbnNmZXJTdGF0dXMiLCJjYW5jZWxQYXltZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsidGlja2V0U2FsZXNSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCB0aWNrZXRTYWxlc0NvbnRyb2xlciA9IHJlcXVpcmUoXCIuLy4uL2NvbnRyb2xlcnMvVGlja2V0U2FsZXNDb250cm9sZXJcIik7IC8vIOKchSBBc3N1cmUtdG9pIHF1ZSBjZSBjaGVtaW4gZXN0IGNvcnJlY3RcclxuXHJcbi8vIEVuZHBvaW50IHBvdXIgYWNoZXRlciB1biBiaWxsZXRcclxucm91dGVyLnBvc3QoXCIvYWNoZXRlclwiLCB0aWNrZXRTYWxlc0NvbnRyb2xlci5hY2hldGVyVGlja2V0KTtcclxuLy8g8J+TjCBWw6lyaWZpZXIgc2kgbGVzIGZvbmN0aW9ucyBleGlzdGVudFxyXG5pZiAoIXRpY2tldFNhbGVzQ29udHJvbGVyLmdldEFsbFRpY2tldFNhbGVzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVSUkVVUjogZ2V0QWxsVGlja2V0U2FsZXMgbidlc3QgcGFzIGTDqWZpbmkgZGFucyB0aWNrZXRTYWxlc0NvbnRyb2xsZXIgIVwiKTtcclxufVxyXG5cclxuaWYgKCF0aWNrZXRTYWxlc0NvbnRyb2xlci51cGRhdGVTYWxlU3RhdHVzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVSUkVVUjogdXBkYXRlU2FsZVN0YXR1cyBuJ2VzdCBwYXMgZMOpZmluaSBkYW5zIHRpY2tldFNhbGVzQ29udHJvbGxlciAhXCIpO1xyXG59XHJcblxyXG5pZiAoIXRpY2tldFNhbGVzQ29udHJvbGVyLmRlbGV0ZVNhbGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRVJSRVVSOiBkZWxldGVTYWxlIG4nZXN0IHBhcyBkw6lmaW5pIGRhbnMgdGlja2V0U2FsZXNDb250cm9sbGVyICFcIik7XHJcbn1cclxuXHJcbi8vIPCfkYcgUm91dGUgw6AgYWpvdXRlciBzaSBlbGxlIG4nZXN0IHBhcyBlbmNvcmUgbMOgXHJcbnJvdXRlci5wb3N0KCcvYWNoZXRlcicsIHRpY2tldFNhbGVzQ29udHJvbGVyLmFjaGV0ZXJUaWNrZXQpO1xyXG5yb3V0ZXIuZ2V0KFwiL3ZlbnRlcy1iaWxsZXRzXCIsIHRpY2tldFNhbGVzQ29udHJvbGVyLmdldEFsbFRpY2tldFNhbGVzKTtcclxucm91dGVyLnB1dChcIi91cGRhdGUtcGFpZW1lbnQvOmlkXCIsIHRpY2tldFNhbGVzQ29udHJvbGVyLnVwZGF0ZVNhbGVTdGF0dXMpO1xyXG5yb3V0ZXIuZGVsZXRlKFwiL3N1cHByaW1lci12ZW50ZS86aWRcIiwgdGlja2V0U2FsZXNDb250cm9sZXIuZGVsZXRlU2FsZSk7XHJcbnJvdXRlci5wdXQoXCIvdHJhbnNmZXJ0LXBhaWVtZW50LzppZFwiLCB0aWNrZXRTYWxlc0NvbnRyb2xlci51cGRhdGVUcmFuc2ZlclN0YXR1cyk7XHJcbnJvdXRlci5wdXQoXCIvYW5udWxlci1wYWllbWVudC86aWRcIiwgdGlja2V0U2FsZXNDb250cm9sZXIuY2FuY2VsUGF5bWVudCk7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLG9CQUFvQixHQUFHSCxPQUFPLENBQUMsc0NBQXNDLENBQUMsQ0FBQyxDQUFDOztBQUU5RTtBQUNBQyxNQUFNLENBQUNHLElBQUksQ0FBQyxVQUFVLEVBQUVELG9CQUFvQixDQUFDRSxhQUFhLENBQUM7QUFDM0Q7QUFDQSxJQUFJLENBQUNGLG9CQUFvQixDQUFDRyxpQkFBaUIsRUFBRTtFQUN6Q0MsT0FBTyxDQUFDQyxLQUFLLENBQUMsMkVBQTJFLENBQUM7QUFDOUY7QUFFQSxJQUFJLENBQUNMLG9CQUFvQixDQUFDTSxnQkFBZ0IsRUFBRTtFQUN4Q0YsT0FBTyxDQUFDQyxLQUFLLENBQUMsMEVBQTBFLENBQUM7QUFDN0Y7QUFFQSxJQUFJLENBQUNMLG9CQUFvQixDQUFDTyxVQUFVLEVBQUU7RUFDbENILE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLG9FQUFvRSxDQUFDO0FBQ3ZGOztBQUVBO0FBQ0FQLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFVBQVUsRUFBRUQsb0JBQW9CLENBQUNFLGFBQWEsQ0FBQztBQUMzREosTUFBTSxDQUFDVSxHQUFHLENBQUMsaUJBQWlCLEVBQUVSLG9CQUFvQixDQUFDRyxpQkFBaUIsQ0FBQztBQUNyRUwsTUFBTSxDQUFDVyxHQUFHLENBQUMsc0JBQXNCLEVBQUVULG9CQUFvQixDQUFDTSxnQkFBZ0IsQ0FBQztBQUN6RVIsTUFBTSxDQUFDWSxNQUFNLENBQUMsc0JBQXNCLEVBQUVWLG9CQUFvQixDQUFDTyxVQUFVLENBQUM7QUFDdEVULE1BQU0sQ0FBQ1csR0FBRyxDQUFDLHlCQUF5QixFQUFFVCxvQkFBb0IsQ0FBQ1csb0JBQW9CLENBQUM7QUFDaEZiLE1BQU0sQ0FBQ1csR0FBRyxDQUFDLHVCQUF1QixFQUFFVCxvQkFBb0IsQ0FBQ1ksYUFBYSxDQUFDO0FBR3ZFQyxNQUFNLENBQUNDLE9BQU8sR0FBR2hCLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","router","Router","ticketSalesControler","post","acheterTicket","getAllTicketSales","console","error","updateSaleStatus","deleteSale","get","put","delete","updateTransferStatus","cancelPayment","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["ticketSalesRoutes.js"],"sourcesContent":["const express = require(\"express\");\r\nconst router = express.Router();\r\nconst ticketSalesControler = require(\"./../controlers/TicketSalesControler\"); // ‚úÖ Assure-toi que ce chemin est correct\r\n\r\n// Endpoint pour acheter un billet\r\nrouter.post(\"/acheter\", ticketSalesControler.acheterTicket);\r\n// üìå V√©rifier si les fonctions existent\r\nif (!ticketSalesControler.getAllTicketSales) {\r\n    console.error(\"‚ùå ERREUR: getAllTicketSales n'est pas d√©fini dans ticketSalesController !\");\r\n}\r\n\r\nif (!ticketSalesControler.updateSaleStatus) {\r\n    console.error(\"‚ùå ERREUR: updateSaleStatus n'est pas d√©fini dans ticketSalesController !\");\r\n}\r\n\r\nif (!ticketSalesControler.deleteSale) {\r\n    console.error(\"‚ùå ERREUR: deleteSale n'est pas d√©fini dans ticketSalesController !\");\r\n}\r\n\r\n// üëá Route √† ajouter si elle n'est pas encore l√†\r\nrouter.post('/acheter', ticketSalesControler.acheterTicket);\r\nrouter.get(\"/ventes-billets\", ticketSalesControler.getAllTicketSales);\r\nrouter.put(\"/update-paiement/:id\", ticketSalesControler.updateSaleStatus);\r\nrouter.delete(\"/supprimer-vente/:id\", ticketSalesControler.deleteSale);\r\nrouter.put(\"/transfert-paiement/:id\", ticketSalesControler.updateTransferStatus);\r\nrouter.put(\"/annuler-paiement/:id\", ticketSalesControler.cancelPayment);\r\n\r\n\r\nmodule.exports = router;\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,oBAAoB,GAAGH,OAAO,CAAC,sCAAsC,CAAC,CAAC,CAAC;;AAE9E;AACAC,MAAM,CAACG,IAAI,CAAC,UAAU,EAAED,oBAAoB,CAACE,aAAa,CAAC;AAC3D;AACA,IAAI,CAACF,oBAAoB,CAACG,iBAAiB,EAAE;EACzCC,OAAO,CAACC,KAAK,CAAC,2EAA2E,CAAC;AAC9F;AAEA,IAAI,CAACL,oBAAoB,CAACM,gBAAgB,EAAE;EACxCF,OAAO,CAACC,KAAK,CAAC,0EAA0E,CAAC;AAC7F;AAEA,IAAI,CAACL,oBAAoB,CAACO,UAAU,EAAE;EAClCH,OAAO,CAACC,KAAK,CAAC,oEAAoE,CAAC;AACvF;;AAEA;AACAP,MAAM,CAACG,IAAI,CAAC,UAAU,EAAED,oBAAoB,CAACE,aAAa,CAAC;AAC3DJ,MAAM,CAACU,GAAG,CAAC,iBAAiB,EAAER,oBAAoB,CAACG,iBAAiB,CAAC;AACrEL,MAAM,CAACW,GAAG,CAAC,sBAAsB,EAAET,oBAAoB,CAACM,gBAAgB,CAAC;AACzER,MAAM,CAACY,MAAM,CAAC,sBAAsB,EAAEV,oBAAoB,CAACO,UAAU,CAAC;AACtET,MAAM,CAACW,GAAG,CAAC,yBAAyB,EAAET,oBAAoB,CAACW,oBAAoB,CAAC;AAChFb,MAAM,CAACW,GAAG,CAAC,uBAAuB,EAAET,oBAAoB,CAACY,aAAa,CAAC;AAGvEC,MAAM,CAACC,OAAO,GAAGhB,MAAM","ignoreList":[]}},"mtime":1742759677248},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\TicketSalesControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst db = require('./../db');\nconst {\n  getTicketSales,\n  updatePaymentStatus,\n  deleteTicketSale\n} = require(\"../queries\"); // V√©rifie bien le chemin\nconst axios = require('axios');\nconst acheterTicket = async (req, res) => {\n  const {\n    id_evenement,\n    type_ticket,\n    quantity,\n    acheteur\n  } = req.body;\n  console.log(\"üõí Donn√©es re√ßues pour l'achat :\", req.body);\n  try {\n    // V√©rifier si l'√©v√©nement existe\n    const event = await db(\"evenement\").join(\"organisateur\", \"evenement.id_organisateur\", \"=\", \"organisateur.id_organisateur\").where(\"evenement.id_evenement\", id_evenement).select(\"evenement.*\", \"organisateur.nom_organisateur\").first();\n    if (!event) {\n      return res.status(404).json({\n        message: \"√âv√©nement introuvable\"\n      });\n    }\n    let tickets = JSON.parse(event.types_tickets);\n    let ticketUpdated = false;\n    let prixUnitaire = 0;\n    tickets = tickets.map(ticket => {\n      if ((ticket.type_ticket || ticket.type) === type_ticket) {\n        // üìå **Correction : Initialiser `nbr_ticket_disponible` √† `quantite` si null**\n        if (ticket.nbr_ticket_disponible === null || ticket.nbr_ticket_disponible === undefined) {\n          ticket.nbr_ticket_disponible = ticket.quantite;\n        }\n\n        // üìå **V√©rification du stock disponible**\n        if (ticket.nbr_ticket_disponible < quantity) {\n          return res.status(400).json({\n            message: \"Stock insuffisant\"\n          });\n        }\n\n        // Mise √† jour du prix et du stock apr√®s achat\n        prixUnitaire = parseInt(ticket.prix_ticket || ticket.prix, 10);\n        ticket.nbr_ticket_disponible -= quantity;\n        ticketUpdated = true;\n      }\n      return ticket;\n    });\n    if (!ticketUpdated) {\n      return res.status(400).json({\n        message: \"Type de billet non trouv√© ou stock insuffisant\"\n      });\n    }\n\n    // üìå **Mettre √† jour la base de donn√©es avec les nouvelles valeurs**\n    await db(\"evenement\").where({\n      id_evenement\n    }).update({\n      types_tickets: JSON.stringify(tickets)\n    });\n\n    // V√©rifier si l'organisateur est bien d√©fini\n    if (!event.nom_organisateur) {\n      return res.status(500).json({\n        message: \"Erreur : Nom de l'organisateur introuvable pour cet √©v√©nement.\"\n      });\n    }\n\n    // üìå **Calcul des montants**\n    const montantTotal = prixUnitaire * quantity;\n    const montantATransferer = montantTotal * 0.95; // Retrait de 5% pour la plateforme\n\n    // üìå **Enregistrer l'achat dans la table `achatbillets`**\n    const [idAchat] = await db(\"achatbillets\").insert({\n      nom_organisateur: event.nom_organisateur,\n      nom_evenement: event.nom_event,\n      type_ticket,\n      quantite: quantity,\n      prix_unitaire: prixUnitaire,\n      total_billets_vendus: quantity,\n      montant_collecte: montantTotal,\n      montant_a_transferer: montantATransferer,\n      acheteur: acheteur,\n      status_paiement: \"en_attente\",\n      date_achat: db.fn.now()\n    });\n    return res.json({\n      message: \"Achat r√©ussi\",\n      id_achat: idAchat,\n      tickets\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'achat :\", error);\n    return res.status(500).json({\n      message: \"Erreur interne du serveur\"\n    });\n  }\n};\nconst getAllTicketSales = async (req, res) => {\n  try {\n    const ventes = await db(\"achatbillets\").join(\"organisateur\", \"achatbillets.nom_organisateur\", \"=\", \"organisateur.nom_organisateur\").join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\").select(\"achatbillets.id\",\n    // ‚úÖ Correction ici\n    \"organisateur.nom_organisateur\", \"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", db.raw(\"SUM(achatbillets.total_billets_vendus) as total_billets_vendus\"), \"achatbillets.prix_unitaire\", db.raw(\"SUM(achatbillets.montant_collecte) as montant_collecte\"), db.raw(\"SUM(achatbillets.montant_a_transferer) as montant_a_transferer\"), \"achatbillets.acheteur\", \"achatbillets.status_paiement\", \"achatbillets.date_achat\", \"evenement.types_tickets\").groupBy(\"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", \"achatbillets.id\"); // ‚úÖ Correction ici aussi\n\n    console.log(\"‚úÖ Donn√©es des ventes envoy√©es :\", ventes);\n\n    // üîπ Extraction de la quantit√© totale de billets et calcul de la quantit√© restante\n    const ventesAvecQuantite = ventes.map(vente => {\n      const typesTickets = JSON.parse(vente.types_tickets || \"[]\");\n      const billetAssocie = typesTickets.find(ticket => ticket.type === vente.type_ticket);\n      console.log(\"‚úÖ Donn√©es des ventes envoy√©es :\", ventes);\n      return {\n        ...vente,\n        quantite: billetAssocie ? billetAssocie.quantite : 0,\n        // üîπ Quantit√© initiale\n        quantite_restante: billetAssocie ? billetAssocie.quantite - vente.total_billets_vendus : 0 // üîπ Calculer les billets restants\n      };\n    });\n    res.json(ventesAvecQuantite);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des ventes :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\n\n// **************fonctionnel io revy ambony io *******************\n\nconst updateTransferStatus = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    // Mettre √† jour le statut de transfert √† \"pay√©\"\n    await db(\"achatbillets\").where({\n      id\n    }).update({\n      status_paiement: \"pay√©\"\n    });\n    res.json({\n      message: \"Paiement transf√©r√© √† l'organisateur avec succ√®s !\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors du transfert du paiement :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\nconst cancelPayment = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    // Mettre √† jour le statut de paiement √† \"annul√©\"\n    await db(\"achatbillets\").where({\n      id\n    }).update({\n      status_paiement: \"annul√©\"\n    });\n    res.json({\n      message: \"Paiement annul√© avec succ√®s !\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de l'annulation du paiement :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\nconst updateSaleStatus = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    status_paiement\n  } = req.body;\n  try {\n    await updatePaymentStatus(id, status_paiement);\n\n    // üîπ R√©cup√©rer la vente mise √† jour\n    const updatedSale = await db(\"achatbillets\").where({\n      id\n    }).first();\n    res.json({\n      message: \"Statut mis √† jour avec succ√®s\",\n      status_paiement: updatedSale.status_paiement // ‚úÖ Retourne le nouveau statut\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la mise √† jour du paiement :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\nconst deleteSale = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    // Supprimer l'enregistrement correspondant\n    await db(\"achatbillets\").where({\n      id\n    }).del();\n    res.json({\n      message: \"Vente supprim√©e avec succ√®s !\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la suppression de la vente :\", error);\n    res.status(500).json({\n      message: \"Erreur serveur\"\n    });\n  }\n};\nconst transferPaymentToOrganizer = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    // R√©cup√©rer les infos de la vente et de l'organisateur\n    const sale = await db(\"achatbillets\").join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\").join(\"organisateur\", \"evenement.id_organisateur\", \"=\", \"organisateur.id_organisateur\").where(\"achatbillets.id\", id).select(\"achatbillets.montant_a_transferer\", \"organisateur.tel_organisateur\").first();\n    if (!sale) {\n      return res.status(404).json({\n        message: \"Vente introuvable.\"\n      });\n    }\n    const {\n      montant_a_transferer,\n      tel_organisateur\n    } = sale;\n\n    // Simulation d'un appel API vers MVola / Orange Money / Airtel Money\n    const mobileMoneyResponse = await axios.post(\"https://api-mobilemoney.com/transfer\", {\n      phoneNumber: tel_organisateur,\n      amount: montant_a_transferer,\n      currency: \"MGA\",\n      description: \"Paiement de l'organisateur\"\n    });\n    if (mobileMoneyResponse.data.status !== \"success\") {\n      return res.status(500).json({\n        message: \"√âchec du transfert Mobile Money.\"\n      });\n    }\n\n    // Mise √† jour du statut de paiement dans la base de donn√©es\n    await db(\"achatbillets\").where({\n      id\n    }).update({\n      status_paiement: \"pay√©\"\n    });\n    res.json({\n      message: \"Transfert r√©ussi et paiement marqu√© comme pay√©.\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors du transfert de paiement :\", error);\n    res.status(500).json({\n      message: \"Erreur lors du transfert du paiement.\"\n    });\n  }\n};\n\n// V√©rification des exports\nconsole.log(\"‚úÖ ticketSalesController charg√© avec succ√®s !\");\nmodule.exports = {\n  acheterTicket,\n  getAllTicketSales,\n  updateSaleStatus,\n  deleteSale,\n  updateTransferStatus,\n  cancelPayment,\n  transferPaymentToOrganizer\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJnZXRUaWNrZXRTYWxlcyIsInVwZGF0ZVBheW1lbnRTdGF0dXMiLCJkZWxldGVUaWNrZXRTYWxlIiwiYXhpb3MiLCJhY2hldGVyVGlja2V0IiwicmVxIiwicmVzIiwiaWRfZXZlbmVtZW50IiwidHlwZV90aWNrZXQiLCJxdWFudGl0eSIsImFjaGV0ZXVyIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJldmVudCIsImpvaW4iLCJ3aGVyZSIsInNlbGVjdCIsImZpcnN0Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ0aWNrZXRzIiwiSlNPTiIsInBhcnNlIiwidHlwZXNfdGlja2V0cyIsInRpY2tldFVwZGF0ZWQiLCJwcml4VW5pdGFpcmUiLCJtYXAiLCJ0aWNrZXQiLCJ0eXBlIiwibmJyX3RpY2tldF9kaXNwb25pYmxlIiwidW5kZWZpbmVkIiwicXVhbnRpdGUiLCJwYXJzZUludCIsInByaXhfdGlja2V0IiwicHJpeCIsInVwZGF0ZSIsInN0cmluZ2lmeSIsIm5vbV9vcmdhbmlzYXRldXIiLCJtb250YW50VG90YWwiLCJtb250YW50QVRyYW5zZmVyZXIiLCJpZEFjaGF0IiwiaW5zZXJ0Iiwibm9tX2V2ZW5lbWVudCIsIm5vbV9ldmVudCIsInByaXhfdW5pdGFpcmUiLCJ0b3RhbF9iaWxsZXRzX3ZlbmR1cyIsIm1vbnRhbnRfY29sbGVjdGUiLCJtb250YW50X2FfdHJhbnNmZXJlciIsInN0YXR1c19wYWllbWVudCIsImRhdGVfYWNoYXQiLCJmbiIsIm5vdyIsImlkX2FjaGF0IiwiZXJyb3IiLCJnZXRBbGxUaWNrZXRTYWxlcyIsInZlbnRlcyIsInJhdyIsImdyb3VwQnkiLCJ2ZW50ZXNBdmVjUXVhbnRpdGUiLCJ2ZW50ZSIsInR5cGVzVGlja2V0cyIsImJpbGxldEFzc29jaWUiLCJmaW5kIiwicXVhbnRpdGVfcmVzdGFudGUiLCJ1cGRhdGVUcmFuc2ZlclN0YXR1cyIsImlkIiwicGFyYW1zIiwiY2FuY2VsUGF5bWVudCIsInVwZGF0ZVNhbGVTdGF0dXMiLCJ1cGRhdGVkU2FsZSIsImRlbGV0ZVNhbGUiLCJkZWwiLCJ0cmFuc2ZlclBheW1lbnRUb09yZ2FuaXplciIsInNhbGUiLCJ0ZWxfb3JnYW5pc2F0ZXVyIiwibW9iaWxlTW9uZXlSZXNwb25zZSIsInBvc3QiLCJwaG9uZU51bWJlciIsImFtb3VudCIsImN1cnJlbmN5IiwiZGVzY3JpcHRpb24iLCJkYXRhIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxjb250cm9sZXJzXFwiLCJzb3VyY2VzIjpbIlRpY2tldFNhbGVzQ29udHJvbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZSgnLi8uLi9kYicpO1xyXG5jb25zdCB7XHJcbiAgICBnZXRUaWNrZXRTYWxlcyxcclxuICAgIHVwZGF0ZVBheW1lbnRTdGF0dXMsXHJcbiAgICBkZWxldGVUaWNrZXRTYWxlXHJcbn0gPSByZXF1aXJlKFwiLi4vcXVlcmllc1wiKTsgIC8vIFbDqXJpZmllIGJpZW4gbGUgY2hlbWluXHJcbmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTsgXHJcblxyXG5jb25zdCBhY2hldGVyVGlja2V0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkX2V2ZW5lbWVudCwgdHlwZV90aWNrZXQsIHF1YW50aXR5LCBhY2hldGV1ciB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCfm5IgRG9ubsOpZXMgcmXDp3VlcyBwb3VyIGwnYWNoYXQgOlwiLCByZXEuYm9keSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBWw6lyaWZpZXIgc2kgbCfDqXbDqW5lbWVudCBleGlzdGVcclxuICAgICAgICBjb25zdCBldmVudCA9IGF3YWl0IGRiKFwiZXZlbmVtZW50XCIpXHJcbiAgICAgICAgICAgIC5qb2luKFwib3JnYW5pc2F0ZXVyXCIsIFwiZXZlbmVtZW50LmlkX29yZ2FuaXNhdGV1clwiLCBcIj1cIiwgXCJvcmdhbmlzYXRldXIuaWRfb3JnYW5pc2F0ZXVyXCIpXHJcbiAgICAgICAgICAgIC53aGVyZShcImV2ZW5lbWVudC5pZF9ldmVuZW1lbnRcIiwgaWRfZXZlbmVtZW50KVxyXG4gICAgICAgICAgICAuc2VsZWN0KFwiZXZlbmVtZW50LipcIiwgXCJvcmdhbmlzYXRldXIubm9tX29yZ2FuaXNhdGV1clwiKVxyXG4gICAgICAgICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIsOJdsOpbmVtZW50IGludHJvdXZhYmxlXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGlja2V0cyA9IEpTT04ucGFyc2UoZXZlbnQudHlwZXNfdGlja2V0cyk7XHJcbiAgICAgICAgbGV0IHRpY2tldFVwZGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcHJpeFVuaXRhaXJlID0gMDtcclxuXHJcbiAgICAgICAgdGlja2V0cyA9IHRpY2tldHMubWFwKHRpY2tldCA9PiB7XHJcbiAgICAgICAgICAgIGlmICgodGlja2V0LnR5cGVfdGlja2V0IHx8IHRpY2tldC50eXBlKSA9PT0gdHlwZV90aWNrZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIPCfk4wgKipDb3JyZWN0aW9uIDogSW5pdGlhbGlzZXIgYG5icl90aWNrZXRfZGlzcG9uaWJsZWAgw6AgYHF1YW50aXRlYCBzaSBudWxsKipcclxuICAgICAgICAgICAgICAgIGlmICh0aWNrZXQubmJyX3RpY2tldF9kaXNwb25pYmxlID09PSBudWxsIHx8IHRpY2tldC5uYnJfdGlja2V0X2Rpc3BvbmlibGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpY2tldC5uYnJfdGlja2V0X2Rpc3BvbmlibGUgPSB0aWNrZXQucXVhbnRpdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g8J+TjCAqKlbDqXJpZmljYXRpb24gZHUgc3RvY2sgZGlzcG9uaWJsZSoqXHJcbiAgICAgICAgICAgICAgICBpZiAodGlja2V0Lm5icl90aWNrZXRfZGlzcG9uaWJsZSA8IHF1YW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJTdG9jayBpbnN1ZmZpc2FudFwiIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1pc2Ugw6Agam91ciBkdSBwcml4IGV0IGR1IHN0b2NrIGFwcsOocyBhY2hhdFxyXG4gICAgICAgICAgICAgICAgcHJpeFVuaXRhaXJlID0gcGFyc2VJbnQodGlja2V0LnByaXhfdGlja2V0IHx8IHRpY2tldC5wcml4LCAxMCk7XHJcbiAgICAgICAgICAgICAgICB0aWNrZXQubmJyX3RpY2tldF9kaXNwb25pYmxlIC09IHF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgdGlja2V0VXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRpY2tldDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aWNrZXRVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiVHlwZSBkZSBiaWxsZXQgbm9uIHRyb3V2w6kgb3Ugc3RvY2sgaW5zdWZmaXNhbnRcIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIPCfk4wgKipNZXR0cmUgw6Agam91ciBsYSBiYXNlIGRlIGRvbm7DqWVzIGF2ZWMgbGVzIG5vdXZlbGxlcyB2YWxldXJzKipcclxuICAgICAgICBhd2FpdCBkYihcImV2ZW5lbWVudFwiKVxyXG4gICAgICAgICAgICAud2hlcmUoeyBpZF9ldmVuZW1lbnQgfSlcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IHR5cGVzX3RpY2tldHM6IEpTT04uc3RyaW5naWZ5KHRpY2tldHMpIH0pO1xyXG5cclxuICAgICAgICAvLyBWw6lyaWZpZXIgc2kgbCdvcmdhbmlzYXRldXIgZXN0IGJpZW4gZMOpZmluaVxyXG4gICAgICAgIGlmICghZXZlbnQubm9tX29yZ2FuaXNhdGV1cikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciA6IE5vbSBkZSBsJ29yZ2FuaXNhdGV1ciBpbnRyb3V2YWJsZSBwb3VyIGNldCDDqXbDqW5lbWVudC5cIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIPCfk4wgKipDYWxjdWwgZGVzIG1vbnRhbnRzKipcclxuICAgICAgICBjb25zdCBtb250YW50VG90YWwgPSBwcml4VW5pdGFpcmUgKiBxdWFudGl0eTtcclxuICAgICAgICBjb25zdCBtb250YW50QVRyYW5zZmVyZXIgPSBtb250YW50VG90YWwgKiAwLjk1OyAvLyBSZXRyYWl0IGRlIDUlIHBvdXIgbGEgcGxhdGVmb3JtZVxyXG5cclxuICAgICAgICAvLyDwn5OMICoqRW5yZWdpc3RyZXIgbCdhY2hhdCBkYW5zIGxhIHRhYmxlIGBhY2hhdGJpbGxldHNgKipcclxuICAgICAgICBjb25zdCBbaWRBY2hhdF0gPSBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKS5pbnNlcnQoe1xyXG4gICAgICAgICAgICBub21fb3JnYW5pc2F0ZXVyOiBldmVudC5ub21fb3JnYW5pc2F0ZXVyLFxyXG4gICAgICAgICAgICBub21fZXZlbmVtZW50OiBldmVudC5ub21fZXZlbnQsXHJcbiAgICAgICAgICAgIHR5cGVfdGlja2V0LFxyXG4gICAgICAgICAgICBxdWFudGl0ZTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgIHByaXhfdW5pdGFpcmU6IHByaXhVbml0YWlyZSxcclxuICAgICAgICAgICAgdG90YWxfYmlsbGV0c192ZW5kdXM6IHF1YW50aXR5LFxyXG4gICAgICAgICAgICBtb250YW50X2NvbGxlY3RlOiBtb250YW50VG90YWwsXHJcbiAgICAgICAgICAgIG1vbnRhbnRfYV90cmFuc2ZlcmVyOiBtb250YW50QVRyYW5zZmVyZXIsXHJcbiAgICAgICAgICAgIGFjaGV0ZXVyOiBhY2hldGV1cixcclxuICAgICAgICAgICAgc3RhdHVzX3BhaWVtZW50OiBcImVuX2F0dGVudGVcIixcclxuICAgICAgICAgICAgZGF0ZV9hY2hhdDogZGIuZm4ubm93KCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuanNvbih7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWNoYXQgcsOpdXNzaVwiLFxyXG4gICAgICAgICAgICBpZF9hY2hhdDogaWRBY2hhdCxcclxuICAgICAgICAgICAgdGlja2V0cyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbCdhY2hhdCA6XCIsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBpbnRlcm5lIGR1IHNlcnZldXJcIiB9KTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5jb25zdCBnZXRBbGxUaWNrZXRTYWxlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB2ZW50ZXMgPSBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKVxyXG4gICAgICAgICAgICAuam9pbihcIm9yZ2FuaXNhdGV1clwiLCBcImFjaGF0YmlsbGV0cy5ub21fb3JnYW5pc2F0ZXVyXCIsIFwiPVwiLCBcIm9yZ2FuaXNhdGV1ci5ub21fb3JnYW5pc2F0ZXVyXCIpXHJcbiAgICAgICAgICAgIC5qb2luKFwiZXZlbmVtZW50XCIsIFwiYWNoYXRiaWxsZXRzLm5vbV9ldmVuZW1lbnRcIiwgXCI9XCIsIFwiZXZlbmVtZW50Lm5vbV9ldmVudFwiKVxyXG4gICAgICAgICAgICAuc2VsZWN0KFxyXG4gICAgICAgICAgICAgICAgXCJhY2hhdGJpbGxldHMuaWRcIiwgLy8g4pyFIENvcnJlY3Rpb24gaWNpXHJcbiAgICAgICAgICAgICAgICBcIm9yZ2FuaXNhdGV1ci5ub21fb3JnYW5pc2F0ZXVyXCIsXHJcbiAgICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5ub21fZXZlbmVtZW50XCIsXHJcbiAgICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy50eXBlX3RpY2tldFwiLFxyXG4gICAgICAgICAgICAgICAgZGIucmF3KFwiU1VNKGFjaGF0YmlsbGV0cy50b3RhbF9iaWxsZXRzX3ZlbmR1cykgYXMgdG90YWxfYmlsbGV0c192ZW5kdXNcIiksXHJcbiAgICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5wcml4X3VuaXRhaXJlXCIsXHJcbiAgICAgICAgICAgICAgICBkYi5yYXcoXCJTVU0oYWNoYXRiaWxsZXRzLm1vbnRhbnRfY29sbGVjdGUpIGFzIG1vbnRhbnRfY29sbGVjdGVcIiksXHJcbiAgICAgICAgICAgICAgICBkYi5yYXcoXCJTVU0oYWNoYXRiaWxsZXRzLm1vbnRhbnRfYV90cmFuc2ZlcmVyKSBhcyBtb250YW50X2FfdHJhbnNmZXJlclwiKSxcclxuICAgICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLmFjaGV0ZXVyXCIsXHJcbiAgICAgICAgICAgICAgICBcImFjaGF0YmlsbGV0cy5zdGF0dXNfcGFpZW1lbnRcIixcclxuICAgICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLmRhdGVfYWNoYXRcIixcclxuICAgICAgICAgICAgICAgIFwiZXZlbmVtZW50LnR5cGVzX3RpY2tldHNcIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5ncm91cEJ5KFwiYWNoYXRiaWxsZXRzLm5vbV9ldmVuZW1lbnRcIiwgXCJhY2hhdGJpbGxldHMudHlwZV90aWNrZXRcIiwgXCJhY2hhdGJpbGxldHMuaWRcIik7IC8vIOKchSBDb3JyZWN0aW9uIGljaSBhdXNzaVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBEb25uw6llcyBkZXMgdmVudGVzIGVudm95w6llcyA6XCIsIHZlbnRlcyk7XHJcblxyXG5cclxuICAgICAgICAvLyDwn5S5IEV4dHJhY3Rpb24gZGUgbGEgcXVhbnRpdMOpIHRvdGFsZSBkZSBiaWxsZXRzIGV0IGNhbGN1bCBkZSBsYSBxdWFudGl0w6kgcmVzdGFudGVcclxuICAgICAgICBjb25zdCB2ZW50ZXNBdmVjUXVhbnRpdGUgPSB2ZW50ZXMubWFwKCh2ZW50ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlc1RpY2tldHMgPSBKU09OLnBhcnNlKHZlbnRlLnR5cGVzX3RpY2tldHMgfHwgXCJbXVwiKTtcclxuICAgICAgICAgICAgY29uc3QgYmlsbGV0QXNzb2NpZSA9IHR5cGVzVGlja2V0cy5maW5kKCh0aWNrZXQpID0+IHRpY2tldC50eXBlID09PSB2ZW50ZS50eXBlX3RpY2tldCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIERvbm7DqWVzIGRlcyB2ZW50ZXMgZW52b3nDqWVzIDpcIiwgdmVudGVzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAuLi52ZW50ZSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXRlOiBiaWxsZXRBc3NvY2llID8gYmlsbGV0QXNzb2NpZS5xdWFudGl0ZSA6IDAsIC8vIPCflLkgUXVhbnRpdMOpIGluaXRpYWxlXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0ZV9yZXN0YW50ZTogYmlsbGV0QXNzb2NpZVxyXG4gICAgICAgICAgICAgICAgICAgID8gYmlsbGV0QXNzb2NpZS5xdWFudGl0ZSAtIHZlbnRlLnRvdGFsX2JpbGxldHNfdmVuZHVzXHJcbiAgICAgICAgICAgICAgICAgICAgOiAwLCAvLyDwn5S5IENhbGN1bGVyIGxlcyBiaWxsZXRzIHJlc3RhbnRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJlcy5qc29uKHZlbnRlc0F2ZWNRdWFudGl0ZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHZlbnRlcyA6XCIsIGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vICoqKioqKioqKioqKioqZm9uY3Rpb25uZWwgaW8gcmV2eSBhbWJvbnkgaW8gKioqKioqKioqKioqKioqKioqKlxyXG5cclxuXHJcbmNvbnN0IHVwZGF0ZVRyYW5zZmVyU3RhdHVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gTWV0dHJlIMOgIGpvdXIgbGUgc3RhdHV0IGRlIHRyYW5zZmVydCDDoCBcInBhecOpXCJcclxuICAgICAgICBhd2FpdCBkYihcImFjaGF0YmlsbGV0c1wiKVxyXG4gICAgICAgICAgICAud2hlcmUoeyBpZCB9KVxyXG4gICAgICAgICAgICAudXBkYXRlKHsgc3RhdHVzX3BhaWVtZW50OiBcInBhecOpXCIgfSk7XHJcblxyXG4gICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJQYWllbWVudCB0cmFuc2bDqXLDqSDDoCBsJ29yZ2FuaXNhdGV1ciBhdmVjIHN1Y2PDqHMgIVwiIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGR1IHRyYW5zZmVydCBkdSBwYWllbWVudCA6XCIsIGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5jb25zdCBjYW5jZWxQYXltZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gTWV0dHJlIMOgIGpvdXIgbGUgc3RhdHV0IGRlIHBhaWVtZW50IMOgIFwiYW5udWzDqVwiXHJcbiAgICAgICAgYXdhaXQgZGIoXCJhY2hhdGJpbGxldHNcIilcclxuICAgICAgICAgICAgLndoZXJlKHsgaWQgfSlcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IHN0YXR1c19wYWllbWVudDogXCJhbm51bMOpXCIgfSk7XHJcblxyXG4gICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJQYWllbWVudCBhbm51bMOpIGF2ZWMgc3VjY8OocyAhXCIgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbCdhbm51bGF0aW9uIGR1IHBhaWVtZW50IDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcblxyXG5jb25zdCB1cGRhdGVTYWxlU3RhdHVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gICAgY29uc3QgeyBzdGF0dXNfcGFpZW1lbnQgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgdXBkYXRlUGF5bWVudFN0YXR1cyhpZCwgc3RhdHVzX3BhaWVtZW50KTtcclxuXHJcbiAgICAgICAgLy8g8J+UuSBSw6ljdXDDqXJlciBsYSB2ZW50ZSBtaXNlIMOgIGpvdXJcclxuICAgICAgICBjb25zdCB1cGRhdGVkU2FsZSA9IGF3YWl0IGRiKFwiYWNoYXRiaWxsZXRzXCIpLndoZXJlKHsgaWQgfSkuZmlyc3QoKTtcclxuXHJcbiAgICAgICAgcmVzLmpzb24oe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlN0YXR1dCBtaXMgw6Agam91ciBhdmVjIHN1Y2PDqHNcIixcclxuICAgICAgICAgICAgc3RhdHVzX3BhaWVtZW50OiB1cGRhdGVkU2FsZS5zdGF0dXNfcGFpZW1lbnQsIC8vIOKchSBSZXRvdXJuZSBsZSBub3V2ZWF1IHN0YXR1dFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkdSBwYWllbWVudCA6XCIsIGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5jb25zdCBkZWxldGVTYWxlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gU3VwcHJpbWVyIGwnZW5yZWdpc3RyZW1lbnQgY29ycmVzcG9uZGFudFxyXG4gICAgICAgIGF3YWl0IGRiKFwiYWNoYXRiaWxsZXRzXCIpLndoZXJlKHsgaWQgfSkuZGVsKCk7XHJcblxyXG4gICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJWZW50ZSBzdXBwcmltw6llIGF2ZWMgc3VjY8OocyAhXCIgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gZGUgbGEgdmVudGUgOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuY29uc3QgdHJhbnNmZXJQYXltZW50VG9Pcmdhbml6ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBSw6ljdXDDqXJlciBsZXMgaW5mb3MgZGUgbGEgdmVudGUgZXQgZGUgbCdvcmdhbmlzYXRldXJcclxuICAgICAgICBjb25zdCBzYWxlID0gYXdhaXQgZGIoXCJhY2hhdGJpbGxldHNcIilcclxuICAgICAgICAgICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJhY2hhdGJpbGxldHMubm9tX2V2ZW5lbWVudFwiLCBcIj1cIiwgXCJldmVuZW1lbnQubm9tX2V2ZW50XCIpXHJcbiAgICAgICAgICAgIC5qb2luKFwib3JnYW5pc2F0ZXVyXCIsIFwiZXZlbmVtZW50LmlkX29yZ2FuaXNhdGV1clwiLCBcIj1cIiwgXCJvcmdhbmlzYXRldXIuaWRfb3JnYW5pc2F0ZXVyXCIpXHJcbiAgICAgICAgICAgIC53aGVyZShcImFjaGF0YmlsbGV0cy5pZFwiLCBpZClcclxuICAgICAgICAgICAgLnNlbGVjdChcclxuICAgICAgICAgICAgICAgIFwiYWNoYXRiaWxsZXRzLm1vbnRhbnRfYV90cmFuc2ZlcmVyXCIsXHJcbiAgICAgICAgICAgICAgICBcIm9yZ2FuaXNhdGV1ci50ZWxfb3JnYW5pc2F0ZXVyXCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuZmlyc3QoKTtcclxuXHJcbiAgICAgICAgaWYgKCFzYWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiVmVudGUgaW50cm91dmFibGUuXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB7IG1vbnRhbnRfYV90cmFuc2ZlcmVyLCB0ZWxfb3JnYW5pc2F0ZXVyIH0gPSBzYWxlO1xyXG5cclxuICAgICAgICAvLyBTaW11bGF0aW9uIGQndW4gYXBwZWwgQVBJIHZlcnMgTVZvbGEgLyBPcmFuZ2UgTW9uZXkgLyBBaXJ0ZWwgTW9uZXlcclxuICAgICAgICBjb25zdCBtb2JpbGVNb25leVJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcImh0dHBzOi8vYXBpLW1vYmlsZW1vbmV5LmNvbS90cmFuc2ZlclwiLCB7XHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiB0ZWxfb3JnYW5pc2F0ZXVyLFxyXG4gICAgICAgICAgICBhbW91bnQ6IG1vbnRhbnRfYV90cmFuc2ZlcmVyLFxyXG4gICAgICAgICAgICBjdXJyZW5jeTogXCJNR0FcIixcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiUGFpZW1lbnQgZGUgbCdvcmdhbmlzYXRldXJcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAobW9iaWxlTW9uZXlSZXNwb25zZS5kYXRhLnN0YXR1cyAhPT0gXCJzdWNjZXNzXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCLDiWNoZWMgZHUgdHJhbnNmZXJ0IE1vYmlsZSBNb25leS5cIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE1pc2Ugw6Agam91ciBkdSBzdGF0dXQgZGUgcGFpZW1lbnQgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbiAgICAgICAgYXdhaXQgZGIoXCJhY2hhdGJpbGxldHNcIilcclxuICAgICAgICAgICAgLndoZXJlKHsgaWQgfSlcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IHN0YXR1c19wYWllbWVudDogXCJwYXnDqVwiIH0pO1xyXG5cclxuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiVHJhbnNmZXJ0IHLDqXVzc2kgZXQgcGFpZW1lbnQgbWFycXXDqSBjb21tZSBwYXnDqS5cIiB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgbG9ycyBkdSB0cmFuc2ZlcnQgZGUgcGFpZW1lbnQgOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBsb3JzIGR1IHRyYW5zZmVydCBkdSBwYWllbWVudC5cIiB9KTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG5cclxuLy8gVsOpcmlmaWNhdGlvbiBkZXMgZXhwb3J0c1xyXG5jb25zb2xlLmxvZyhcIuKchSB0aWNrZXRTYWxlc0NvbnRyb2xsZXIgY2hhcmfDqSBhdmVjIHN1Y2PDqHMgIVwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgYWNoZXRlclRpY2tldCxcclxuICAgIGdldEFsbFRpY2tldFNhbGVzLFxyXG4gICAgdXBkYXRlU2FsZVN0YXR1cyxcclxuICAgIGRlbGV0ZVNhbGUsXHJcbiAgICB1cGRhdGVUcmFuc2ZlclN0YXR1cyxcclxuICAgIGNhbmNlbFBheW1lbnQsXHJcbiAgICB0cmFuc2ZlclBheW1lbnRUb09yZ2FuaXplcixcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUM3QixNQUFNO0VBQ0ZDLGNBQWM7RUFDZEMsbUJBQW1CO0VBQ25CQztBQUNKLENBQUMsR0FBR0gsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUU7QUFDNUIsTUFBTUksS0FBSyxHQUFHSixPQUFPLENBQUMsT0FBTyxDQUFDO0FBRTlCLE1BQU1LLGFBQWEsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNO0lBQUVDLFlBQVk7SUFBRUMsV0FBVztJQUFFQyxRQUFRO0lBQUVDO0VBQVMsQ0FBQyxHQUFHTCxHQUFHLENBQUNNLElBQUk7RUFDbEVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxFQUFFUixHQUFHLENBQUNNLElB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","map":{"version":3,"names":["db","require","getTicketSales","updatePaymentStatus","deleteTicketSale","axios","acheterTicket","req","res","id_evenement","type_ticket","quantity","acheteur","body","console","log","event","join","where","select","first","status","json","message","tickets","JSON","parse","types_tickets","ticketUpdated","prixUnitaire","map","ticket","type","nbr_ticket_disponible","undefined","quantite","parseInt","prix_ticket","prix","update","stringify","nom_organisateur","montantTotal","montantATransferer","idAchat","insert","nom_evenement","nom_event","prix_unitaire","total_billets_vendus","montant_collecte","montant_a_transferer","status_paiement","date_achat","fn","now","id_achat","error","getAllTicketSales","ventes","raw","groupBy","ventesAvecQuantite","vente","typesTickets","billetAssocie","find","quantite_restante","updateTransferStatus","id","params","cancelPayment","updateSaleStatus","updatedSale","deleteSale","del","transferPaymentToOrganizer","sale","tel_organisateur","mobileMoneyResponse","post","phoneNumber","amount","currency","description","data","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["TicketSalesControler.js"],"sourcesContent":["const db = require('./../db');\r\nconst {\r\n    getTicketSales,\r\n    updatePaymentStatus,\r\n    deleteTicketSale\r\n} = require(\"../queries\");  // V√©rifie bien le chemin\r\nconst axios = require('axios'); \r\n\r\nconst acheterTicket = async (req, res) => {\r\n    const { id_evenement, type_ticket, quantity, acheteur } = req.body;\r\n    console.log(\"üõí Donn√©es re√ßues pour l'achat :\", req.body);\r\n\r\n    try {\r\n        // V√©rifier si l'√©v√©nement existe\r\n        const event = await db(\"evenement\")\r\n            .join(\"organisateur\", \"evenement.id_organisateur\", \"=\", \"organisateur.id_organisateur\")\r\n            .where(\"evenement.id_evenement\", id_evenement)\r\n            .select(\"evenement.*\", \"organisateur.nom_organisateur\")\r\n            .first();\r\n\r\n        if (!event) {\r\n            return res.status(404).json({ message: \"√âv√©nement introuvable\" });\r\n        }\r\n\r\n        let tickets = JSON.parse(event.types_tickets);\r\n        let ticketUpdated = false;\r\n        let prixUnitaire = 0;\r\n\r\n        tickets = tickets.map(ticket => {\r\n            if ((ticket.type_ticket || ticket.type) === type_ticket) {\r\n                // üìå **Correction : Initialiser `nbr_ticket_disponible` √† `quantite` si null**\r\n                if (ticket.nbr_ticket_disponible === null || ticket.nbr_ticket_disponible === undefined) {\r\n                    ticket.nbr_ticket_disponible = ticket.quantite;\r\n                }\r\n\r\n                // üìå **V√©rification du stock disponible**\r\n                if (ticket.nbr_ticket_disponible < quantity) {\r\n                    return res.status(400).json({ message: \"Stock insuffisant\" });\r\n                }\r\n\r\n                // Mise √† jour du prix et du stock apr√®s achat\r\n                prixUnitaire = parseInt(ticket.prix_ticket || ticket.prix, 10);\r\n                ticket.nbr_ticket_disponible -= quantity;\r\n                ticketUpdated = true;\r\n            }\r\n            return ticket;\r\n        });\r\n\r\n        if (!ticketUpdated) {\r\n            return res.status(400).json({ message: \"Type de billet non trouv√© ou stock insuffisant\" });\r\n        }\r\n\r\n        // üìå **Mettre √† jour la base de donn√©es avec les nouvelles valeurs**\r\n        await db(\"evenement\")\r\n            .where({ id_evenement })\r\n            .update({ types_tickets: JSON.stringify(tickets) });\r\n\r\n        // V√©rifier si l'organisateur est bien d√©fini\r\n        if (!event.nom_organisateur) {\r\n            return res.status(500).json({ message: \"Erreur : Nom de l'organisateur introuvable pour cet √©v√©nement.\" });\r\n        }\r\n\r\n        // üìå **Calcul des montants**\r\n        const montantTotal = prixUnitaire * quantity;\r\n        const montantATransferer = montantTotal * 0.95; // Retrait de 5% pour la plateforme\r\n\r\n        // üìå **Enregistrer l'achat dans la table `achatbillets`**\r\n        const [idAchat] = await db(\"achatbillets\").insert({\r\n            nom_organisateur: event.nom_organisateur,\r\n            nom_evenement: event.nom_event,\r\n            type_ticket,\r\n            quantite: quantity,\r\n            prix_unitaire: prixUnitaire,\r\n            total_billets_vendus: quantity,\r\n            montant_collecte: montantTotal,\r\n            montant_a_transferer: montantATransferer,\r\n            acheteur: acheteur,\r\n            status_paiement: \"en_attente\",\r\n            date_achat: db.fn.now(),\r\n        });\r\n\r\n        return res.json({\r\n            message: \"Achat r√©ussi\",\r\n            id_achat: idAchat,\r\n            tickets,\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de l'achat :\", error);\r\n        return res.status(500).json({ message: \"Erreur interne du serveur\" });\r\n    }\r\n};\r\n\r\n\r\nconst getAllTicketSales = async (req, res) => {\r\n    try {\r\n        const ventes = await db(\"achatbillets\")\r\n            .join(\"organisateur\", \"achatbillets.nom_organisateur\", \"=\", \"organisateur.nom_organisateur\")\r\n            .join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\")\r\n            .select(\r\n                \"achatbillets.id\", // ‚úÖ Correction ici\r\n                \"organisateur.nom_organisateur\",\r\n                \"achatbillets.nom_evenement\",\r\n                \"achatbillets.type_ticket\",\r\n                db.raw(\"SUM(achatbillets.total_billets_vendus) as total_billets_vendus\"),\r\n                \"achatbillets.prix_unitaire\",\r\n                db.raw(\"SUM(achatbillets.montant_collecte) as montant_collecte\"),\r\n                db.raw(\"SUM(achatbillets.montant_a_transferer) as montant_a_transferer\"),\r\n                \"achatbillets.acheteur\",\r\n                \"achatbillets.status_paiement\",\r\n                \"achatbillets.date_achat\",\r\n                \"evenement.types_tickets\"\r\n            )\r\n            .groupBy(\"achatbillets.nom_evenement\", \"achatbillets.type_ticket\", \"achatbillets.id\"); // ‚úÖ Correction ici aussi\r\n\r\n        console.log(\"‚úÖ Donn√©es des ventes envoy√©es :\", ventes);\r\n\r\n\r\n        // üîπ Extraction de la quantit√© totale de billets et calcul de la quantit√© restante\r\n        const ventesAvecQuantite = ventes.map((vente) => {\r\n            const typesTickets = JSON.parse(vente.types_tickets || \"[]\");\r\n            const billetAssocie = typesTickets.find((ticket) => ticket.type === vente.type_ticket);\r\n            console.log(\"‚úÖ Donn√©es des ventes envoy√©es :\", ventes);\r\n\r\n            return {\r\n                ...vente,\r\n                quantite: billetAssocie ? billetAssocie.quantite : 0, // üîπ Quantit√© initiale\r\n                quantite_restante: billetAssocie\r\n                    ? billetAssocie.quantite - vente.total_billets_vendus\r\n                    : 0, // üîπ Calculer les billets restants\r\n            };\r\n        });\r\n\r\n        res.json(ventesAvecQuantite);\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la r√©cup√©ration des ventes :\", error);\r\n        res.status(500).json({ message: \"Erreur serveur\" });\r\n    }\r\n};\r\n\r\n// **************fonctionnel io revy ambony io *******************\r\n\r\n\r\nconst updateTransferStatus = async (req, res) => {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n        // Mettre √† jour le statut de transfert √† \"pay√©\"\r\n        await db(\"achatbillets\")\r\n            .where({ id })\r\n            .update({ status_paiement: \"pay√©\" });\r\n\r\n        res.json({ message: \"Paiement transf√©r√© √† l'organisateur avec succ√®s !\" });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors du transfert du paiement :\", error);\r\n        res.status(500).json({ message: \"Erreur serveur\" });\r\n    }\r\n};\r\n\r\n\r\nconst cancelPayment = async (req, res) => {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n        // Mettre √† jour le statut de paiement √† \"annul√©\"\r\n        await db(\"achatbillets\")\r\n            .where({ id })\r\n            .update({ status_paiement: \"annul√©\" });\r\n\r\n        res.json({ message: \"Paiement annul√© avec succ√®s !\" });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de l'annulation du paiement :\", error);\r\n        res.status(500).json({ message: \"Erreur serveur\" });\r\n    }\r\n};\r\n\r\n\r\n\r\nconst updateSaleStatus = async (req, res) => {\r\n    const { id } = req.params;\r\n    const { status_paiement } = req.body;\r\n\r\n    try {\r\n        await updatePaymentStatus(id, status_paiement);\r\n\r\n        // üîπ R√©cup√©rer la vente mise √† jour\r\n        const updatedSale = await db(\"achatbillets\").where({ id }).first();\r\n\r\n        res.json({\r\n            message: \"Statut mis √† jour avec succ√®s\",\r\n            status_paiement: updatedSale.status_paiement, // ‚úÖ Retourne le nouveau statut\r\n        });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la mise √† jour du paiement :\", error);\r\n        res.status(500).json({ message: \"Erreur serveur\" });\r\n    }\r\n};\r\n\r\n\r\nconst deleteSale = async (req, res) => {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n        // Supprimer l'enregistrement correspondant\r\n        await db(\"achatbillets\").where({ id }).del();\r\n\r\n        res.json({ message: \"Vente supprim√©e avec succ√®s !\" });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la suppression de la vente :\", error);\r\n        res.status(500).json({ message: \"Erreur serveur\" });\r\n    }\r\n};\r\n\r\n\r\nconst transferPaymentToOrganizer = async (req, res) => {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n        // R√©cup√©rer les infos de la vente et de l'organisateur\r\n        const sale = await db(\"achatbillets\")\r\n            .join(\"evenement\", \"achatbillets.nom_evenement\", \"=\", \"evenement.nom_event\")\r\n            .join(\"organisateur\", \"evenement.id_organisateur\", \"=\", \"organisateur.id_organisateur\")\r\n            .where(\"achatbillets.id\", id)\r\n            .select(\r\n                \"achatbillets.montant_a_transferer\",\r\n                \"organisateur.tel_organisateur\"\r\n            )\r\n            .first();\r\n\r\n        if (!sale) {\r\n            return res.status(404).json({ message: \"Vente introuvable.\" });\r\n        }\r\n\r\n        const { montant_a_transferer, tel_organisateur } = sale;\r\n\r\n        // Simulation d'un appel API vers MVola / Orange Money / Airtel Money\r\n        const mobileMoneyResponse = await axios.post(\"https://api-mobilemoney.com/transfer\", {\r\n            phoneNumber: tel_organisateur,\r\n            amount: montant_a_transferer,\r\n            currency: \"MGA\",\r\n            description: \"Paiement de l'organisateur\"\r\n        });\r\n\r\n        if (mobileMoneyResponse.data.status !== \"success\") {\r\n            return res.status(500).json({ message: \"√âchec du transfert Mobile Money.\" });\r\n        }\r\n\r\n        // Mise √† jour du statut de paiement dans la base de donn√©es\r\n        await db(\"achatbillets\")\r\n            .where({ id })\r\n            .update({ status_paiement: \"pay√©\" });\r\n\r\n        res.json({ message: \"Transfert r√©ussi et paiement marqu√© comme pay√©.\" });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors du transfert de paiement :\", error);\r\n        res.status(500).json({ message: \"Erreur lors du transfert du paiement.\" });\r\n    }\r\n};\r\n\r\n\r\n\r\n// V√©rification des exports\r\nconsole.log(\"‚úÖ ticketSalesController charg√© avec succ√®s !\");\r\n\r\nmodule.exports = {\r\n    acheterTicket,\r\n    getAllTicketSales,\r\n    updateSaleStatus,\r\n    deleteSale,\r\n    updateTransferStatus,\r\n    cancelPayment,\r\n    transferPaymentToOrganizer,\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742722151114},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\certificateRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require(\"express\");\nconst router = express.Router();\nconst certificateControler = require(\"../controlers/certificateControler\");\n\n// Route pour distribuer un certificat √† un participant\nrouter.post(\"/distribute/:id\", (req, res, next) => {\n  console.log(\"‚úÖ Requ√™te re√ßue sur /distribute/:id\");\n  next();\n}, certificateControler.distributeCertificate);\n\n// Route pour r√©cup√©rer tous les certificats\nrouter.get(\"/all\", certificateControler.getAllCertificates);\n\n// Route pour r√©cup√©rer les certificats d'un participant\nrouter.get(\"/participant/:id\", certificateControler.getCertificatesByParticipant);\n\n// Route pour supprimer un certificat\nrouter.delete(\"/:id\", certificateControler.deleteCertificate);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImNlcnRpZmljYXRlQ29udHJvbGVyIiwicG9zdCIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwiZGlzdHJpYnV0ZUNlcnRpZmljYXRlIiwiZ2V0IiwiZ2V0QWxsQ2VydGlmaWNhdGVzIiwiZ2V0Q2VydGlmaWNhdGVzQnlQYXJ0aWNpcGFudCIsImRlbGV0ZSIsImRlbGV0ZUNlcnRpZmljYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiY2VydGlmaWNhdGVSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCBjZXJ0aWZpY2F0ZUNvbnRyb2xlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sZXJzL2NlcnRpZmljYXRlQ29udHJvbGVyXCIpO1xyXG5cclxuXHJcbi8vIFJvdXRlIHBvdXIgZGlzdHJpYnVlciB1biBjZXJ0aWZpY2F0IMOgIHVuIHBhcnRpY2lwYW50XHJcbnJvdXRlci5wb3N0KFwiL2Rpc3RyaWJ1dGUvOmlkXCIsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCLinIUgUmVxdcOqdGUgcmXDp3VlIHN1ciAvZGlzdHJpYnV0ZS86aWRcIik7XHJcbiAgICBuZXh0KCk7XHJcbn0sIGNlcnRpZmljYXRlQ29udHJvbGVyLmRpc3RyaWJ1dGVDZXJ0aWZpY2F0ZSk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIHRvdXMgbGVzIGNlcnRpZmljYXRzXHJcbnJvdXRlci5nZXQoXCIvYWxsXCIsIGNlcnRpZmljYXRlQ29udHJvbGVyLmdldEFsbENlcnRpZmljYXRlcyk7XHJcblxyXG5cclxuLy8gUm91dGUgcG91ciByw6ljdXDDqXJlciBsZXMgY2VydGlmaWNhdHMgZCd1biBwYXJ0aWNpcGFudFxyXG5yb3V0ZXIuZ2V0KFwiL3BhcnRpY2lwYW50LzppZFwiLCBjZXJ0aWZpY2F0ZUNvbnRyb2xlci5nZXRDZXJ0aWZpY2F0ZXNCeVBhcnRpY2lwYW50KTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgc3VwcHJpbWVyIHVuIGNlcnRpZmljYXRcclxucm91dGVyLmRlbGV0ZShcIi86aWRcIiwgY2VydGlmaWNhdGVDb250cm9sZXIuZGVsZXRlQ2VydGlmaWNhdGUpO1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTUMsb0JBQW9CLEdBQUdILE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQzs7QUFHMUU7QUFDQUMsTUFBTSxDQUFDRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUMvQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMscUNBQXFDLENBQUM7RUFDbERGLElBQUksQ0FBQyxDQUFDO0FBQ1YsQ0FBQyxFQUFFSixvQkFBb0IsQ0FBQ08scUJBQXFCLENBQUM7O0FBRTlDO0FBQ0FULE1BQU0sQ0FBQ1UsR0FBRyxDQUFDLE1BQU0sRUFBRVIsb0JBQW9CLENBQUNTLGtCQUFrQixDQUFDOztBQUczRDtBQUNBWCxNQUFNLENBQUNVLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRVIsb0JBQW9CLENBQUNVLDRCQUE0QixDQUFDOztBQUVqRjtBQUNBWixNQUFNLENBQUNhLE1BQU0sQ0FBQyxNQUFNLEVBQUVYLG9CQUFvQixDQUFDWSxpQkFBaUIsQ0FBQztBQUk3REMsTUFBTSxDQUFDQyxPQUFPLEdBQUdoQixNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","router","Router","certificateControler","post","req","res","next","console","log","distributeCertificate","get","getAllCertificates","getCertificatesByParticipant","delete","deleteCertificate","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["certificateRoutes.js"],"sourcesContent":["const express = require(\"express\");\r\nconst router = express.Router();\r\nconst certificateControler = require(\"../controlers/certificateControler\");\r\n\r\n\r\n// Route pour distribuer un certificat √† un participant\r\nrouter.post(\"/distribute/:id\", (req, res, next) => {\r\n    console.log(\"‚úÖ Requ√™te re√ßue sur /distribute/:id\");\r\n    next();\r\n}, certificateControler.distributeCertificate);\r\n\r\n// Route pour r√©cup√©rer tous les certificats\r\nrouter.get(\"/all\", certificateControler.getAllCertificates);\r\n\r\n\r\n// Route pour r√©cup√©rer les certificats d'un participant\r\nrouter.get(\"/participant/:id\", certificateControler.getCertificatesByParticipant);\r\n\r\n// Route pour supprimer un certificat\r\nrouter.delete(\"/:id\", certificateControler.deleteCertificate);\r\n\r\n\r\n\r\nmodule.exports = router;\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,oBAAoB,GAAGH,OAAO,CAAC,oCAAoC,CAAC;;AAG1E;AACAC,MAAM,CAACG,IAAI,CAAC,iBAAiB,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/CC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;EAClDF,IAAI,CAAC,CAAC;AACV,CAAC,EAAEJ,oBAAoB,CAACO,qBAAqB,CAAC;;AAE9C;AACAT,MAAM,CAACU,GAAG,CAAC,MAAM,EAAER,oBAAoB,CAACS,kBAAkB,CAAC;;AAG3D;AACAX,MAAM,CAACU,GAAG,CAAC,kBAAkB,EAAER,oBAAoB,CAACU,4BAA4B,CAAC;;AAEjF;AACAZ,MAAM,CAACa,MAAM,CAAC,MAAM,EAAEX,oBAAoB,CAACY,iBAAiB,CAAC;AAI7DC,MAAM,CAACC,OAAO,GAAGhB,MAAM","ignoreList":[]}},"mtime":1742200841390},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\certificateControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst {\n  addCertificate,\n  getParticipantById,\n  getAllCertificates,\n  getCertificatesByParticipant\n} = require('../queries'); // V√©rifie que le chemin est correct\nconst db = require('./../db');\nexports.distributeCertificate = async (req, res) => {\n  const {\n    id\n  } = req.params; // ID du participant\n  let {\n    id_evenement,\n    adminId\n  } = req.body; // ID de l'√©v√©nement et de l'admin\n\n  console.log(\"üì© Donn√©es re√ßues :\", req.body); // ‚úÖ V√©rifier si adminId est bien pr√©sent\n\n  // V√©rifier si adminId est d√©fini, sinon attribuer une valeur par d√©faut\n  if (!adminId) {\n    console.warn(\"‚ö†Ô∏è Aucun adminId re√ßu, attribution d'une valeur par d√©faut.\");\n    adminId = 1; // üõ† Remplacez 1 par un ID valide si n√©cessaire\n  }\n  try {\n    if (!id_evenement) {\n      return res.status(400).json({\n        message: \"L'ID de l'√©v√©nement est requis pour distribuer un certificat.\"\n      });\n    }\n    const evenement = await db(\"evenement\").where(\"id_evenement\", id_evenement).first();\n    if (!evenement) {\n      return res.status(404).json({\n        message: \"√âv√©nement non trouv√©\"\n      });\n    }\n    const participant = await getParticipantById(id);\n    if (!participant || !participant.nom_part) {\n      return res.status(404).json({\n        message: \"Participant non trouv√© ou nom invalide\"\n      });\n    }\n    console.log(\"üîç Participant trouv√© :\", participant);\n    console.log(\"üìÜ √âv√©nement trouv√© :\", evenement);\n    const certificateData = {\n      type_certificat: \"Certificat de participation\",\n      nom_titulaire: participant.nom_part,\n      date_certificat: new Date(),\n      url_certificat: `https://mon-site.com/certificats/${id}.pdf`,\n      id_admin: adminId,\n      // ‚úÖ V√©rification et correction ici\n      id_participant: id,\n      id_evenement: id_evenement,\n      date_distribution: new Date()\n    };\n    console.log(\"üì© Donn√©es du certificat √† ins√©rer :\", certificateData);\n    await addCertificate(certificateData);\n    res.status(200).json({\n      message: `Certificat distribu√© avec succ√®s √† ${participant.nom_part} pour l'√©v√©nement ${evenement.nom_event} !`\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur distribution certificat :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de la distribution du certificat\",\n      error\n    });\n  }\n};\n\n// R√©cup√©rer tous les certificats\nexports.getAllCertificates = async (req, res) => {\n  try {\n    const certificates = await getAllCertificates();\n    res.status(200).json(certificates);\n  } catch (error) {\n    console.error(\"‚ùå Erreur r√©cup√©ration certificats :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de la r√©cup√©ration des certificats\",\n      error\n    });\n  }\n};\n\n// R√©cup√©rer un certificat par participant\nexports.getCertificatesByParticipant = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const certificates = await getCertificatesByParticipant(id); // Correction ici\n    if (!certificates || certificates.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun certificat trouv√© pour ce participant\"\n      });\n    }\n    res.status(200).json(certificates);\n  } catch (error) {\n    console.error(\"‚ùå Erreur r√©cup√©ration certificat :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de la r√©cup√©ration du certificat\",\n      error\n    });\n  }\n};\n\n// Supprimer un certificat par ID\nexports.deleteCertificate = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    // V√©rifier si le certificat existe\n    const certificat = await db(\"certificat\").where(\"id_certificat\", id).first();\n    if (!certificat) {\n      return res.status(404).json({\n        message: \"Certificat non trouv√©\"\n      });\n    }\n\n    // Supprimer le certificat\n    await db(\"certificat\").where(\"id_certificat\", id).del();\n    res.status(200).json({\n      message: \"Certificat supprim√© avec succ√®s\"\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la suppression du certificat :\", error);\n    res.status(500).json({\n      message: \"Erreur lors de la suppression du certificat\",\n      error\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhZGRDZXJ0aWZpY2F0ZSIsImdldFBhcnRpY2lwYW50QnlJZCIsImdldEFsbENlcnRpZmljYXRlcyIsImdldENlcnRpZmljYXRlc0J5UGFydGljaXBhbnQiLCJyZXF1aXJlIiwiZGIiLCJleHBvcnRzIiwiZGlzdHJpYnV0ZUNlcnRpZmljYXRlIiwicmVxIiwicmVzIiwiaWQiLCJwYXJhbXMiLCJpZF9ldmVuZW1lbnQiLCJhZG1pbklkIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJldmVuZW1lbnQiLCJ3aGVyZSIsImZpcnN0IiwicGFydGljaXBhbnQiLCJub21fcGFydCIsImNlcnRpZmljYXRlRGF0YSIsInR5cGVfY2VydGlmaWNhdCIsIm5vbV90aXR1bGFpcmUiLCJkYXRlX2NlcnRpZmljYXQiLCJEYXRlIiwidXJsX2NlcnRpZmljYXQiLCJpZF9hZG1pbiIsImlkX3BhcnRpY2lwYW50IiwiZGF0ZV9kaXN0cmlidXRpb24iLCJub21fZXZlbnQiLCJlcnJvciIsImNlcnRpZmljYXRlcyIsImxlbmd0aCIsImRlbGV0ZUNlcnRpZmljYXRlIiwiY2VydGlmaWNhdCIsImRlbCJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxjb250cm9sZXJzXFwiLCJzb3VyY2VzIjpbImNlcnRpZmljYXRlQ29udHJvbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtcclxuICAgIGFkZENlcnRpZmljYXRlLFxyXG4gICAgZ2V0UGFydGljaXBhbnRCeUlkLFxyXG4gICAgZ2V0QWxsQ2VydGlmaWNhdGVzLFxyXG4gICAgZ2V0Q2VydGlmaWNhdGVzQnlQYXJ0aWNpcGFudCxcclxufSA9IHJlcXVpcmUoJy4uL3F1ZXJpZXMnKTsgLy8gVsOpcmlmaWUgcXVlIGxlIGNoZW1pbiBlc3QgY29ycmVjdFxyXG5jb25zdCBkYiA9IHJlcXVpcmUoJy4vLi4vZGInKTtcclxuXHJcblxyXG5leHBvcnRzLmRpc3RyaWJ1dGVDZXJ0aWZpY2F0ZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtczsgLy8gSUQgZHUgcGFydGljaXBhbnRcclxuICAgIGxldCB7IGlkX2V2ZW5lbWVudCwgYWRtaW5JZCB9ID0gcmVxLmJvZHk7IC8vIElEIGRlIGwnw6l2w6luZW1lbnQgZXQgZGUgbCdhZG1pblxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi8J+TqSBEb25uw6llcyByZcOndWVzIDpcIiwgcmVxLmJvZHkpOyAvLyDinIUgVsOpcmlmaWVyIHNpIGFkbWluSWQgZXN0IGJpZW4gcHLDqXNlbnRcclxuXHJcbiAgICAvLyBWw6lyaWZpZXIgc2kgYWRtaW5JZCBlc3QgZMOpZmluaSwgc2lub24gYXR0cmlidWVyIHVuZSB2YWxldXIgcGFyIGTDqWZhdXRcclxuICAgIGlmICghYWRtaW5JZCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBBdWN1biBhZG1pbklkIHJlw6d1LCBhdHRyaWJ1dGlvbiBkJ3VuZSB2YWxldXIgcGFyIGTDqWZhdXQuXCIpO1xyXG4gICAgICAgIGFkbWluSWQgPSAxOyAvLyDwn5ugIFJlbXBsYWNleiAxIHBhciB1biBJRCB2YWxpZGUgc2kgbsOpY2Vzc2FpcmVcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICghaWRfZXZlbmVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTCdJRCBkZSBsJ8OpdsOpbmVtZW50IGVzdCByZXF1aXMgcG91ciBkaXN0cmlidWVyIHVuIGNlcnRpZmljYXQuXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBldmVuZW1lbnQgPSBhd2FpdCBkYihcImV2ZW5lbWVudFwiKS53aGVyZShcImlkX2V2ZW5lbWVudFwiLCBpZF9ldmVuZW1lbnQpLmZpcnN0KCk7XHJcbiAgICAgICAgaWYgKCFldmVuZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCLDiXbDqW5lbWVudCBub24gdHJvdXbDqVwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBhd2FpdCBnZXRQYXJ0aWNpcGFudEJ5SWQoaWQpO1xyXG4gICAgICAgIGlmICghcGFydGljaXBhbnQgfHwgIXBhcnRpY2lwYW50Lm5vbV9wYXJ0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUGFydGljaXBhbnQgbm9uIHRyb3V2w6kgb3Ugbm9tIGludmFsaWRlXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIvCflI0gUGFydGljaXBhbnQgdHJvdXbDqSA6XCIsIHBhcnRpY2lwYW50KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIvCfk4Ygw4l2w6luZW1lbnQgdHJvdXbDqSA6XCIsIGV2ZW5lbWVudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNlcnRpZmljYXRlRGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZV9jZXJ0aWZpY2F0OiBcIkNlcnRpZmljYXQgZGUgcGFydGljaXBhdGlvblwiLFxyXG4gICAgICAgICAgICBub21fdGl0dWxhaXJlOiBwYXJ0aWNpcGFudC5ub21fcGFydCxcclxuICAgICAgICAgICAgZGF0ZV9jZXJ0aWZpY2F0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICB1cmxfY2VydGlmaWNhdDogYGh0dHBzOi8vbW9uLXNpdGUuY29tL2NlcnRpZmljYXRzLyR7aWR9LnBkZmAsXHJcbiAgICAgICAgICAgIGlkX2FkbWluOiBhZG1pbklkLCAvLyDinIUgVsOpcmlmaWNhdGlvbiBldCBjb3JyZWN0aW9uIGljaVxyXG4gICAgICAgICAgICBpZF9wYXJ0aWNpcGFudDogaWQsXHJcbiAgICAgICAgICAgIGlkX2V2ZW5lbWVudDogaWRfZXZlbmVtZW50LFxyXG4gICAgICAgICAgICBkYXRlX2Rpc3RyaWJ1dGlvbjogbmV3IERhdGUoKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TqSBEb25uw6llcyBkdSBjZXJ0aWZpY2F0IMOgIGluc8OpcmVyIDpcIiwgY2VydGlmaWNhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgYXdhaXQgYWRkQ2VydGlmaWNhdGUoY2VydGlmaWNhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBgQ2VydGlmaWNhdCBkaXN0cmlidcOpIGF2ZWMgc3VjY8OocyDDoCAke3BhcnRpY2lwYW50Lm5vbV9wYXJ0fSBwb3VyIGwnw6l2w6luZW1lbnQgJHtldmVuZW1lbnQubm9tX2V2ZW50fSAhYCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgZGlzdHJpYnV0aW9uIGNlcnRpZmljYXQgOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBsb3JzIGRlIGxhIGRpc3RyaWJ1dGlvbiBkdSBjZXJ0aWZpY2F0XCIsIGVycm9yIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbi8vIFLDqWN1cMOpcmVyIHRvdXMgbGVzIGNlcnRpZmljYXRzXHJcbmV4cG9ydHMuZ2V0QWxsQ2VydGlmaWNhdGVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGNlcnRpZmljYXRlcyA9IGF3YWl0IGdldEFsbENlcnRpZmljYXRlcygpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNlcnRpZmljYXRlcyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIHLDqWN1cMOpcmF0aW9uIGNlcnRpZmljYXRzIDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgY2VydGlmaWNhdHNcIiwgZXJyb3IgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBSw6ljdXDDqXJlciB1biBjZXJ0aWZpY2F0IHBhciBwYXJ0aWNpcGFudFxyXG5leHBvcnRzLmdldENlcnRpZmljYXRlc0J5UGFydGljaXBhbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjZXJ0aWZpY2F0ZXMgPSBhd2FpdCBnZXRDZXJ0aWZpY2F0ZXNCeVBhcnRpY2lwYW50KGlkKTsgLy8gQ29ycmVjdGlvbiBpY2lcclxuICAgICAgICBpZiAoIWNlcnRpZmljYXRlcyB8fCBjZXJ0aWZpY2F0ZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gY2VydGlmaWNhdCB0cm91dsOpIHBvdXIgY2UgcGFydGljaXBhbnRcIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oY2VydGlmaWNhdGVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJldXIgcsOpY3Vww6lyYXRpb24gY2VydGlmaWNhdCA6XCIsIGVycm9yKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgY2VydGlmaWNhdFwiLCBlcnJvciB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFN1cHByaW1lciB1biBjZXJ0aWZpY2F0IHBhciBJRFxyXG5leHBvcnRzLmRlbGV0ZUNlcnRpZmljYXRlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVsOpcmlmaWVyIHNpIGxlIGNlcnRpZmljYXQgZXhpc3RlXHJcbiAgICAgICAgY29uc3QgY2VydGlmaWNhdCA9IGF3YWl0IGRiKFwiY2VydGlmaWNhdFwiKS53aGVyZShcImlkX2NlcnRpZmljYXRcIiwgaWQpLmZpcnN0KCk7XHJcbiAgICAgICAgaWYgKCFjZXJ0aWZpY2F0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQ2VydGlmaWNhdCBub24gdHJvdXbDqVwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3VwcHJpbWVyIGxlIGNlcnRpZmljYXRcclxuICAgICAgICBhd2FpdCBkYihcImNlcnRpZmljYXRcIikud2hlcmUoXCJpZF9jZXJ0aWZpY2F0XCIsIGlkKS5kZWwoKTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiBcIkNlcnRpZmljYXQgc3VwcHJpbcOpIGF2ZWMgc3VjY8Ooc1wiIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGR1IGNlcnRpZmljYXQgOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGR1IGNlcnRpZmljYXRcIiwgZXJyb3IgfSk7XHJcbiAgICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNO0VBQ0ZBLGNBQWM7RUFDZEMsa0JBQWtCO0VBQ2xCQyxrQkFBa0I7RUFDbEJD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","map":{"version":3,"names":["addCertificate","getParticipantById","getAllCertificates","getCertificatesByParticipant","require","db","exports","distributeCertificate","req","res","id","params","id_evenement","adminId","body","console","log","warn","status","json","message","evenement","where","first","participant","nom_part","certificateData","type_certificat","nom_titulaire","date_certificat","Date","url_certificat","id_admin","id_participant","date_distribution","nom_event","error","certificates","length","deleteCertificate","certificat","del"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["certificateControler.js"],"sourcesContent":["const {\r\n    addCertificate,\r\n    getParticipantById,\r\n    getAllCertificates,\r\n    getCertificatesByParticipant,\r\n} = require('../queries'); // V√©rifie que le chemin est correct\r\nconst db = require('./../db');\r\n\r\n\r\nexports.distributeCertificate = async (req, res) => {\r\n    const { id } = req.params; // ID du participant\r\n    let { id_evenement, adminId } = req.body; // ID de l'√©v√©nement et de l'admin\r\n\r\n    console.log(\"üì© Donn√©es re√ßues :\", req.body); // ‚úÖ V√©rifier si adminId est bien pr√©sent\r\n\r\n    // V√©rifier si adminId est d√©fini, sinon attribuer une valeur par d√©faut\r\n    if (!adminId) {\r\n        console.warn(\"‚ö†Ô∏è Aucun adminId re√ßu, attribution d'une valeur par d√©faut.\");\r\n        adminId = 1; // üõ† Remplacez 1 par un ID valide si n√©cessaire\r\n    }\r\n\r\n    try {\r\n        if (!id_evenement) {\r\n            return res.status(400).json({ message: \"L'ID de l'√©v√©nement est requis pour distribuer un certificat.\" });\r\n        }\r\n\r\n        const evenement = await db(\"evenement\").where(\"id_evenement\", id_evenement).first();\r\n        if (!evenement) {\r\n            return res.status(404).json({ message: \"√âv√©nement non trouv√©\" });\r\n        }\r\n\r\n        const participant = await getParticipantById(id);\r\n        if (!participant || !participant.nom_part) {\r\n            return res.status(404).json({ message: \"Participant non trouv√© ou nom invalide\" });\r\n        }\r\n\r\n        console.log(\"üîç Participant trouv√© :\", participant);\r\n        console.log(\"üìÜ √âv√©nement trouv√© :\", evenement);\r\n\r\n        const certificateData = {\r\n            type_certificat: \"Certificat de participation\",\r\n            nom_titulaire: participant.nom_part,\r\n            date_certificat: new Date(),\r\n            url_certificat: `https://mon-site.com/certificats/${id}.pdf`,\r\n            id_admin: adminId, // ‚úÖ V√©rification et correction ici\r\n            id_participant: id,\r\n            id_evenement: id_evenement,\r\n            date_distribution: new Date()\r\n        };\r\n\r\n        console.log(\"üì© Donn√©es du certificat √† ins√©rer :\", certificateData);\r\n\r\n        await addCertificate(certificateData);\r\n\r\n        res.status(200).json({ message: `Certificat distribu√© avec succ√®s √† ${participant.nom_part} pour l'√©v√©nement ${evenement.nom_event} !` });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur distribution certificat :\", error);\r\n        res.status(500).json({ message: \"Erreur lors de la distribution du certificat\", error });\r\n    }\r\n};\r\n\r\n\r\n// R√©cup√©rer tous les certificats\r\nexports.getAllCertificates = async (req, res) => {\r\n    try {\r\n        const certificates = await getAllCertificates();\r\n        res.status(200).json(certificates);\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur r√©cup√©ration certificats :\", error);\r\n        res.status(500).json({ message: \"Erreur lors de la r√©cup√©ration des certificats\", error });\r\n    }\r\n};\r\n\r\n// R√©cup√©rer un certificat par participant\r\nexports.getCertificatesByParticipant = async (req, res) => {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n        const certificates = await getCertificatesByParticipant(id); // Correction ici\r\n        if (!certificates || certificates.length === 0) {\r\n            return res.status(404).json({ message: \"Aucun certificat trouv√© pour ce participant\" });\r\n        }\r\n        res.status(200).json(certificates);\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur r√©cup√©ration certificat :\", error);\r\n        res.status(500).json({ message: \"Erreur lors de la r√©cup√©ration du certificat\", error });\r\n    }\r\n};\r\n\r\n// Supprimer un certificat par ID\r\nexports.deleteCertificate = async (req, res) => {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n        // V√©rifier si le certificat existe\r\n        const certificat = await db(\"certificat\").where(\"id_certificat\", id).first();\r\n        if (!certificat) {\r\n            return res.status(404).json({ message: \"Certificat non trouv√©\" });\r\n        }\r\n\r\n        // Supprimer le certificat\r\n        await db(\"certificat\").where(\"id_certificat\", id).del();\r\n\r\n        res.status(200).json({ message: \"Certificat supprim√© avec succ√®s\" });\r\n    } catch (error) {\r\n        console.error(\"‚ùå Erreur lors de la suppression du certificat :\", error);\r\n        res.status(500).json({ message: \"Erreur lors de la suppression du certificat\", error });\r\n    }\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742478520264},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\calendrierRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst router = express.Router();\nconst CalendrierControler = require('../controlers/CalendrierControler');\n\n// ‚úÖ Route publique pour r√©cup√©rer les rencontres d'un √©v√©nement\nrouter.get('/eventcalendrier/:eventId/matches', CalendrierControler.getEventMatches);\n\n// ‚úÖ Nouvelle route pour r√©cup√©rer tous les matchs de tous les √©v√©nements\nrouter.get('/allmatches', CalendrierControler.getAllMatches);\n\n// Route pour r√©cup√©rer les poules et les participants d'un √©v√©nement\nrouter.get('/eventcalendrier/:eventId/pools', CalendrierControler.getEventPools);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkNhbGVuZHJpZXJDb250cm9sZXIiLCJnZXQiLCJnZXRFdmVudE1hdGNoZXMiLCJnZXRBbGxNYXRjaGVzIiwiZ2V0RXZlbnRQb29scyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxccm91dGVzXFwiLCJzb3VyY2VzIjpbImNhbGVuZHJpZXJSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3QgQ2FsZW5kcmllckNvbnRyb2xlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xlcnMvQ2FsZW5kcmllckNvbnRyb2xlcicpO1xyXG5cclxuLy8g4pyFIFJvdXRlIHB1YmxpcXVlIHBvdXIgcsOpY3Vww6lyZXIgbGVzIHJlbmNvbnRyZXMgZCd1biDDqXbDqW5lbWVudFxyXG5yb3V0ZXIuZ2V0KCcvZXZlbnRjYWxlbmRyaWVyLzpldmVudElkL21hdGNoZXMnLCBDYWxlbmRyaWVyQ29udHJvbGVyLmdldEV2ZW50TWF0Y2hlcyk7XHJcblxyXG4vLyDinIUgTm91dmVsbGUgcm91dGUgcG91ciByw6ljdXDDqXJlciB0b3VzIGxlcyBtYXRjaHMgZGUgdG91cyBsZXMgw6l2w6luZW1lbnRzXHJcbnJvdXRlci5nZXQoJy9hbGxtYXRjaGVzJywgQ2FsZW5kcmllckNvbnRyb2xlci5nZXRBbGxNYXRjaGVzKTtcclxuXHJcbi8vIFJvdXRlIHBvdXIgcsOpY3Vww6lyZXIgbGVzIHBvdWxlcyBldCBsZXMgcGFydGljaXBhbnRzIGQndW4gw6l2w6luZW1lbnRcclxucm91dGVyLmdldCgnL2V2ZW50Y2FsZW5kcmllci86ZXZlbnRJZC9wb29scycsIENhbGVuZHJpZXJDb250cm9sZXIuZ2V0RXZlbnRQb29scyk7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLG1CQUFtQixHQUFHSCxPQUFPLENBQUMsbUNBQW1DLENBQUM7O0FBRXhFO0FBQ0FDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLG1DQUFtQyxFQUFFRCxtQkFBbUIsQ0FBQ0UsZUFBZSxDQUFDOztBQUVwRjtBQUNBSixNQUFNLENBQUNHLEdBQUcsQ0FBQyxhQUFhLEVBQUVELG1CQUFtQixDQUFDRyxhQUFhLENBQUM7O0FBRTVEO0FBQ0FMLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLGlDQUFpQyxFQUFFRCxtQkFBbUIsQ0FBQ0ksYUFBYSxDQUFDO0FBR2hGQyxNQUFNLENBQUNDLE9BQU8sR0FBR1IsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","router","Router","CalendrierControler","get","getEventMatches","getAllMatches","getEventPools","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["calendrierRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst CalendrierControler = require('../controlers/CalendrierControler');\r\n\r\n// ‚úÖ Route publique pour r√©cup√©rer les rencontres d'un √©v√©nement\r\nrouter.get('/eventcalendrier/:eventId/matches', CalendrierControler.getEventMatches);\r\n\r\n// ‚úÖ Nouvelle route pour r√©cup√©rer tous les matchs de tous les √©v√©nements\r\nrouter.get('/allmatches', CalendrierControler.getAllMatches);\r\n\r\n// Route pour r√©cup√©rer les poules et les participants d'un √©v√©nement\r\nrouter.get('/eventcalendrier/:eventId/pools', CalendrierControler.getEventPools);\r\n\r\n\r\nmodule.exports = router;\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,mBAAmB,GAAGH,OAAO,CAAC,mCAAmC,CAAC;;AAExE;AACAC,MAAM,CAACG,GAAG,CAAC,mCAAmC,EAAED,mBAAmB,CAACE,eAAe,CAAC;;AAEpF;AACAJ,MAAM,CAACG,GAAG,CAAC,aAAa,EAAED,mBAAmB,CAACG,aAAa,CAAC;;AAE5D;AACAL,MAAM,CAACG,GAAG,CAAC,iCAAiC,EAAED,mBAAmB,CAACI,aAAa,CAAC;AAGhFC,MAAM,CAACC,OAAO,GAAGR,MAAM","ignoreList":[]}},"mtime":1742290190412},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\CalendrierControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst db = require('../db'); // Connexion MySQL avec Knex\n\nexports.getEventMatches = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  try {\n    const matches = await db('rencontre').where('id_evenement', eventId).select('*'); // S√©lectionne toutes les colonnes\n\n    console.log(\"Matches trouv√©s :\", matches); // ‚úÖ V√©rifie si des donn√©es sont r√©cup√©r√©es\n    if (matches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n    res.json(matches);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n\n// Contr√¥leur pour r√©cup√©rer tous les matchs\nexports.getAllMatches = async (req, res) => {\n  try {\n    const events = await db('evenement').select('id_evenement', 'nom_event'); // S√©lectionne tous les √©v√©nements\n    const allMatches = [];\n\n    // Pour chaque √©v√©nement, r√©cup√©rer les matchs associ√©s\n    for (const event of events) {\n      const matches = await db('rencontre').where('id_evenement', event.id_evenement).select('*');\n      allMatches.push(...matches.map(match => ({\n        ...match,\n        eventName: event.nom_event,\n        eventId: event.id_evenement\n      })));\n    }\n\n    // Si des matchs sont trouv√©s, les renvoyer\n    if (allMatches.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune rencontre trouv√©e\"\n      });\n    }\n    res.json(allMatches); // Renvoie tous les matchs\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n\n// contr√¥leur pour r√©cup√©rer les poules\nexports.getEventPools = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  try {\n    // R√©cup√©rer toutes les poules pour un √©v√©nement sp√©cifique\n    const pools = await db('poules').where('id_evenement', eventId).select('id_poule', 'nom_poule');\n\n    // R√©cup√©rer les participants associ√©s √† chaque poule avec les √©quipes\n    for (let pool of pools) {\n      const participants = await db('poule_participants').where('id_poule', pool.id_poule).join('equipes', 'poule_participants.id_participant', '=', 'equipes.id_participant').select('equipes.nom_equipe');\n      pool.participants = participants;\n    }\n    if (pools.length === 0) {\n      return res.status(404).json({\n        message: \"Aucune poule trouv√©e pour cet √©v√©nement.\"\n      });\n    }\n    res.json(pools);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJleHBvcnRzIiwiZ2V0RXZlbnRNYXRjaGVzIiwicmVxIiwicmVzIiwiZXZlbnRJZCIsInBhcmFtcyIsIm1hdGNoZXMiLCJ3aGVyZSIsInNlbGVjdCIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImVycm9yIiwiZ2V0QWxsTWF0Y2hlcyIsImV2ZW50cyIsImFsbE1hdGNoZXMiLCJldmVudCIsImlkX2V2ZW5lbWVudCIsInB1c2giLCJtYXAiLCJtYXRjaCIsImV2ZW50TmFtZSIsIm5vbV9ldmVudCIsImdldEV2ZW50UG9vbHMiLCJwb29scyIsInBvb2wiLCJwYXJ0aWNpcGFudHMiLCJpZF9wb3VsZSIsImpvaW4iXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJDYWxlbmRyaWVyQ29udHJvbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGInKTsgIC8vIENvbm5leGlvbiBNeVNRTCBhdmVjIEtuZXhcclxuXHJcbmV4cG9ydHMuZ2V0RXZlbnRNYXRjaGVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBtYXRjaGVzID0gYXdhaXQgZGIoJ3JlbmNvbnRyZScpXHJcbiAgICAgIC53aGVyZSgnaWRfZXZlbmVtZW50JywgZXZlbnRJZClcclxuICAgICAgLnNlbGVjdCgnKicpOyAgLy8gU8OpbGVjdGlvbm5lIHRvdXRlcyBsZXMgY29sb25uZXNcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIk1hdGNoZXMgdHJvdXbDqXMgOlwiLCBtYXRjaGVzKTsgLy8g4pyFIFbDqXJpZmllIHNpIGRlcyBkb25uw6llcyBzb250IHLDqWN1cMOpcsOpZXNcclxuICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuZSByZW5jb250cmUgdHJvdXbDqWUgcG91ciBjZXQgw6l2w6luZW1lbnQuXCIgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlcy5qc29uKG1hdGNoZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHJlbmNvbnRyZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ29udHLDtGxldXIgcG91ciByw6ljdXDDqXJlciB0b3VzIGxlcyBtYXRjaHNcclxuZXhwb3J0cy5nZXRBbGxNYXRjaGVzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGRiKCdldmVuZW1lbnQnKS5zZWxlY3QoJ2lkX2V2ZW5lbWVudCcsICdub21fZXZlbnQnKTsgIC8vIFPDqWxlY3Rpb25uZSB0b3VzIGxlcyDDqXbDqW5lbWVudHNcclxuICAgIGNvbnN0IGFsbE1hdGNoZXMgPSBbXTtcclxuXHJcbiAgICAvLyBQb3VyIGNoYXF1ZSDDqXbDqW5lbWVudCwgcsOpY3Vww6lyZXIgbGVzIG1hdGNocyBhc3NvY2nDqXNcclxuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XHJcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBhd2FpdCBkYigncmVuY29udHJlJylcclxuICAgICAgICAud2hlcmUoJ2lkX2V2ZW5lbWVudCcsIGV2ZW50LmlkX2V2ZW5lbWVudClcclxuICAgICAgICAuc2VsZWN0KCcqJyk7XHJcbiAgICAgIGFsbE1hdGNoZXMucHVzaCguLi5tYXRjaGVzLm1hcChtYXRjaCA9PiAoe1xyXG4gICAgICAgIC4uLm1hdGNoLFxyXG4gICAgICAgIGV2ZW50TmFtZTogZXZlbnQubm9tX2V2ZW50LFxyXG4gICAgICAgIGV2ZW50SWQ6IGV2ZW50LmlkX2V2ZW5lbWVudFxyXG4gICAgICB9KSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNpIGRlcyBtYXRjaHMgc29udCB0cm91dsOpcywgbGVzIHJlbnZveWVyXHJcbiAgICBpZiAoYWxsTWF0Y2hlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1bmUgcmVuY29udHJlIHRyb3V2w6llXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLmpzb24oYWxsTWF0Y2hlcyk7ICAvLyBSZW52b2llIHRvdXMgbGVzIG1hdGNoc1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHJlbmNvbnRyZXMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcbi8vIGNvbnRyw7RsZXVyIHBvdXIgcsOpY3Vww6lyZXIgbGVzIHBvdWxlc1xyXG5leHBvcnRzLmdldEV2ZW50UG9vbHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFLDqWN1cMOpcmVyIHRvdXRlcyBsZXMgcG91bGVzIHBvdXIgdW4gw6l2w6luZW1lbnQgc3DDqWNpZmlxdWVcclxuICAgIGNvbnN0IHBvb2xzID0gYXdhaXQgZGIoJ3BvdWxlcycpXHJcbiAgICAgIC53aGVyZSgnaWRfZXZlbmVtZW50JywgZXZlbnRJZClcclxuICAgICAgLnNlbGVjdCgnaWRfcG91bGUnLCAnbm9tX3BvdWxlJyk7XHJcbiAgICBcclxuICAgIC8vIFLDqWN1cMOpcmVyIGxlcyBwYXJ0aWNpcGFudHMgYXNzb2Npw6lzIMOgIGNoYXF1ZSBwb3VsZSBhdmVjIGxlcyDDqXF1aXBlc1xyXG4gICAgZm9yIChsZXQgcG9vbCBvZiBwb29scykge1xyXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBhd2FpdCBkYigncG91bGVfcGFydGljaXBhbnRzJylcclxuICAgICAgICAud2hlcmUoJ2lkX3BvdWxlJywgcG9vbC5pZF9wb3VsZSlcclxuICAgICAgICAuam9pbignZXF1aXBlcycsICdwb3VsZV9wYXJ0aWNpcGFudHMuaWRfcGFydGljaXBhbnQnLCAnPScsICdlcXVpcGVzLmlkX3BhcnRpY2lwYW50JylcclxuICAgICAgICAuc2VsZWN0KCdlcXVpcGVzLm5vbV9lcXVpcGUnKTtcclxuICAgICAgcG9vbC5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHM7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBvb2xzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkF1Y3VuZSBwb3VsZSB0cm91dsOpZSBwb3VyIGNldCDDqXbDqW5lbWVudC5cIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuanNvbihwb29scyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcG91bGVzIDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFFOztBQUU5QkMsT0FBTyxDQUFDQyxlQUFlLEdBQUcsT0FBT0Ms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","map":{"version":3,"names":["db","require","exports","getEventMatches","req","res","eventId","params","matches","where","select","console","log","length","status","json","message","error","getAllMatches","events","allMatches","event","id_evenement","push","map","match","eventName","nom_event","getEventPools","pools","pool","participants","id_poule","join"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["CalendrierControler.js"],"sourcesContent":["const db = require('../db');  // Connexion MySQL avec Knex\r\n\r\nexports.getEventMatches = async (req, res) => {\r\n  const { eventId } = req.params;\r\n  try {\r\n    const matches = await db('rencontre')\r\n      .where('id_evenement', eventId)\r\n      .select('*');  // S√©lectionne toutes les colonnes\r\n\r\n    console.log(\"Matches trouv√©s :\", matches); // ‚úÖ V√©rifie si des donn√©es sont r√©cup√©r√©es\r\n    if (matches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n    \r\n    res.json(matches);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n// Contr√¥leur pour r√©cup√©rer tous les matchs\r\nexports.getAllMatches = async (req, res) => {\r\n  try {\r\n    const events = await db('evenement').select('id_evenement', 'nom_event');  // S√©lectionne tous les √©v√©nements\r\n    const allMatches = [];\r\n\r\n    // Pour chaque √©v√©nement, r√©cup√©rer les matchs associ√©s\r\n    for (const event of events) {\r\n      const matches = await db('rencontre')\r\n        .where('id_evenement', event.id_evenement)\r\n        .select('*');\r\n      allMatches.push(...matches.map(match => ({\r\n        ...match,\r\n        eventName: event.nom_event,\r\n        eventId: event.id_evenement\r\n      })));\r\n    }\r\n\r\n    // Si des matchs sont trouv√©s, les renvoyer\r\n    if (allMatches.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune rencontre trouv√©e\" });\r\n    }\r\n\r\n    res.json(allMatches);  // Renvoie tous les matchs\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des rencontres :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// contr√¥leur pour r√©cup√©rer les poules\r\nexports.getEventPools = async (req, res) => {\r\n  const { eventId } = req.params;\r\n  try {\r\n    // R√©cup√©rer toutes les poules pour un √©v√©nement sp√©cifique\r\n    const pools = await db('poules')\r\n      .where('id_evenement', eventId)\r\n      .select('id_poule', 'nom_poule');\r\n    \r\n    // R√©cup√©rer les participants associ√©s √† chaque poule avec les √©quipes\r\n    for (let pool of pools) {\r\n      const participants = await db('poule_participants')\r\n        .where('id_poule', pool.id_poule)\r\n        .join('equipes', 'poule_participants.id_participant', '=', 'equipes.id_participant')\r\n        .select('equipes.nom_equipe');\r\n      pool.participants = participants;\r\n    }\r\n\r\n    if (pools.length === 0) {\r\n      return res.status(404).json({ message: \"Aucune poule trouv√©e pour cet √©v√©nement.\" });\r\n    }\r\n\r\n    res.json(pools);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des poules :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742290803194},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\resultatsRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst router = express.Router();\nconst ResultatsControler = require('../controlers/ResultatsControler');\n\n// ‚úÖ R√©cup√©rer les r√©sultats d'un √©v√©nement sp√©cifique\nrouter.get('/:eventId/matches', ResultatsControler.getEventResults); // R√©cup√©rer les r√©sultats pour un √©v√©nement sp√©cifique\n\n// ‚úÖ R√©cup√©rer tous les r√©sultats\nrouter.get('/all', ResultatsControler.getAllResults); // R√©cup√©rer tous les r√©sultats\n\nrouter.get('/classement/:eventId/:phase/:journee', ResultatsControler.getClassementByEventPhaseJournee);\n\n// Route pour r√©cup√©rer le classement par √©v√©nement\nrouter.get(\"/classement/:eventId\", ResultatsControler.getClassementByEvent);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIlJlc3VsdGF0c0NvbnRyb2xlciIsImdldCIsImdldEV2ZW50UmVzdWx0cyIsImdldEFsbFJlc3VsdHMiLCJnZXRDbGFzc2VtZW50QnlFdmVudFBoYXNlSm91cm5lZSIsImdldENsYXNzZW1lbnRCeUV2ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsicmVzdWx0YXRzUm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IFJlc3VsdGF0c0NvbnRyb2xlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xlcnMvUmVzdWx0YXRzQ29udHJvbGVyJyk7XHJcblxyXG4vLyDinIUgUsOpY3Vww6lyZXIgbGVzIHLDqXN1bHRhdHMgZCd1biDDqXbDqW5lbWVudCBzcMOpY2lmaXF1ZVxyXG5yb3V0ZXIuZ2V0KCcvOmV2ZW50SWQvbWF0Y2hlcycsIFJlc3VsdGF0c0NvbnRyb2xlci5nZXRFdmVudFJlc3VsdHMpOyAgLy8gUsOpY3Vww6lyZXIgbGVzIHLDqXN1bHRhdHMgcG91ciB1biDDqXbDqW5lbWVudCBzcMOpY2lmaXF1ZVxyXG5cclxuLy8g4pyFIFLDqWN1cMOpcmVyIHRvdXMgbGVzIHLDqXN1bHRhdHNcclxucm91dGVyLmdldCgnL2FsbCcsIFJlc3VsdGF0c0NvbnRyb2xlci5nZXRBbGxSZXN1bHRzKTsgIC8vIFLDqWN1cMOpcmVyIHRvdXMgbGVzIHLDqXN1bHRhdHNcclxuXHJcbnJvdXRlci5nZXQoJy9jbGFzc2VtZW50LzpldmVudElkLzpwaGFzZS86am91cm5lZScsIFJlc3VsdGF0c0NvbnRyb2xlci5nZXRDbGFzc2VtZW50QnlFdmVudFBoYXNlSm91cm5lZSk7XHJcblxyXG4vLyBSb3V0ZSBwb3VyIHLDqWN1cMOpcmVyIGxlIGNsYXNzZW1lbnQgcGFyIMOpdsOpbmVtZW50XHJcbnJvdXRlci5nZXQoXCIvY2xhc3NlbWVudC86ZXZlbnRJZFwiLCBSZXN1bHRhdHNDb250cm9sZXIuZ2V0Q2xhc3NlbWVudEJ5RXZlbnQpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLGtCQUFrQixHQUFHSCxPQUFPLENBQUMsa0NBQWtDLENBQUM7O0FBRXRFO0FBQ0FDLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLG1CQUFtQixFQUFFRCxrQkFBa0IsQ0FBQ0UsZUFBZSxDQUFDLENBQUMsQ0FBRTs7QUFFdEU7QUFDQUosTUFBTSxDQUFDRyxHQUFHLENBQUMsTUFBTSxFQUFFRCxrQkFBa0IsQ0FBQ0csYUFBYSxDQUFDLENBQUMsQ0FBRTs7QUFFdkRMLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLHNDQUFzQyxFQUFFRCxrQkFBa0IsQ0FBQ0ksZ0NBQWdDLENBQUM7O0FBRXZHO0FBQ0FOLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLHNCQUFzQixFQUFFRCxrQkFBa0IsQ0FBQ0ssb0JBQW9CLENBQUM7QUFFM0VDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","router","Router","ResultatsControler","get","getEventResults","getAllResults","getClassementByEventPhaseJournee","getClassementByEvent","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["resultatsRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst ResultatsControler = require('../controlers/ResultatsControler');\r\n\r\n// ‚úÖ R√©cup√©rer les r√©sultats d'un √©v√©nement sp√©cifique\r\nrouter.get('/:eventId/matches', ResultatsControler.getEventResults);  // R√©cup√©rer les r√©sultats pour un √©v√©nement sp√©cifique\r\n\r\n// ‚úÖ R√©cup√©rer tous les r√©sultats\r\nrouter.get('/all', ResultatsControler.getAllResults);  // R√©cup√©rer tous les r√©sultats\r\n\r\nrouter.get('/classement/:eventId/:phase/:journee', ResultatsControler.getClassementByEventPhaseJournee);\r\n\r\n// Route pour r√©cup√©rer le classement par √©v√©nement\r\nrouter.get(\"/classement/:eventId\", ResultatsControler.getClassementByEvent);\r\n\r\nmodule.exports = router;\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,kBAAkB,GAAGH,OAAO,CAAC,kCAAkC,CAAC;;AAEtE;AACAC,MAAM,CAACG,GAAG,CAAC,mBAAmB,EAAED,kBAAkB,CAACE,eAAe,CAAC,CAAC,CAAE;;AAEtE;AACAJ,MAAM,CAACG,GAAG,CAAC,MAAM,EAAED,kBAAkB,CAACG,aAAa,CAAC,CAAC,CAAE;;AAEvDL,MAAM,CAACG,GAAG,CAAC,sCAAsC,EAAED,kBAAkB,CAACI,gCAAgC,CAAC;;AAEvG;AACAN,MAAM,CAACG,GAAG,CAAC,sBAAsB,EAAED,kBAAkB,CAACK,oBAAoB,CAAC;AAE3EC,MAAM,CAACC,OAAO,GAAGT,MAAM","ignoreList":[]}},"mtime":1742591915592},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\ResultatsControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst db = require('../db'); // Connexion √† MySQL avec Knex\n\nexports.getEventResults = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  try {\n    const results = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').where('rencontre.id_evenement', eventId).select('rencontre.phase', 'rencontre.journee', 'rencontre.date_rencontre', 'rencontre.heure_rencontre', 'rencontre.participant_a', 'rencontre.participant_b', 'rencontre.lieu_rencontre', 'resultat.score_A', 'resultat.score_B').orderBy(['rencontre.phase', 'rencontre.journee', 'rencontre.date_rencontre']);\n    res.json(results);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des r√©sultats :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n\n// ‚úÖ R√©cup√©rer tous les r√©sultats pour tous les √©v√©nements\nexports.getAllResults = async (req, res) => {\n  try {\n    const results = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement').select('evenement.nom_event as eventName', 'rencontre.phase', 'rencontre.journee', 'rencontre.date_rencontre', 'rencontre.heure_rencontre', 'rencontre.participant_a', 'rencontre.participant_b', 'rencontre.lieu_rencontre', 'resultat.score_A', 'resultat.score_B').orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.date_rencontre']);\n    if (results.length === 0) {\n      return res.status(404).json({\n        message: \"Aucun r√©sultat disponible.\"\n      });\n    }\n    res.json(results);\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des r√©sultats :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\nexports.getClassementByEventPhaseJournee = async (req, res) => {\n  const {\n    eventId,\n    phase,\n    journee\n  } = req.params;\n  try {\n    const classement = await db('resultat').join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre').join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement').where('rencontre.id_evenement', eventId).where('rencontre.phase', phase).where('rencontre.journee', journee).select('evenement.nom_sport',\n    // ‚úÖ Ajout du type de sport\n    'rencontre.phase', 'rencontre.journee', 'rencontre.participant_a as equipe', db.raw('SUM(resultat.score_A) as points'), db.raw('SUM(resultat.score_A - resultat.score_B) as difference'), db.raw('COUNT(resultat.id_rencontre) as matchs_joues')).groupBy('rencontre.participant_a').orderBy('points', 'desc').orderBy('difference', 'desc');\n    res.json({\n      classement,\n      sport: classement[0]?.nom_sport\n    });\n  } catch (error) {\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration du classement :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n\n// ‚úÖ R√©cup√©rer le classement par √©v√©nement\n\n// exports.getClassementByEvent = async (req, res) => {\n//   const { eventId } = req.params;\n\n//   try {\n//     const results = await db(\"resultat\")\n//       .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\n//       .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\n//       .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\n//       .where(\"rencontre.id_evenement\", eventId)\n//       .select(\n//         \"evenement.nom_event\",\n//         \"evenement.nom_sport\", // doit √™tre bien renseign√© dans ta DB\n//         \"rencontre.phase\",\n//         \"rencontre.journee\",\n//         \"poules.nom_poule\",\n//         \"rencontre.participant_a\",\n//         \"rencontre.participant_b\",\n//         \"resultat.score_A\",\n//         \"resultat.score_B\",\n//         \"resultat.point_victoire\",\n//         \"resultat.point_matchnul\",\n//         \"resultat.point_defaite\"\n//       );\n\n//     if (!results.length) {\n//       return res.status(404).json({ message: \"Aucun classement disponible.\" });\n//     }\n\n//     const nom_sport = (results[0].nom_sport ?? \"inconnu\").toLowerCase();\n\n//     let classementParPhase = {};\n//     let classementGeneral = {};\n\n//     results.forEach((match) => {\n//       const { phase, journee, nom_poule } = match;\n//       const phaseKey = `Phase: ${phase}`;\n//       const journeeKey = `Journ√©e ${journee}`;\n//       const pouleKey = `Poule ${nom_poule}`;\n\n//       if (!classementParPhase[phaseKey]) classementParPhase[phaseKey] = {};\n//       if (!classementParPhase[phaseKey][journeeKey]) classementParPhase[phaseKey][journeeKey] = {};\n//       if (!classementParPhase[phaseKey][journeeKey][pouleKey]) classementParPhase[phaseKey][journeeKey][pouleKey] = [];\n\n//       [match.participant_a, match.participant_b].forEach((equipe, i) => {\n//         const score = i === 0 ? match.score_A : match.score_B;\n//         const adversaireScore = i === 0 ? match.score_B : match.score_A;\n//         const victoire = score > adversaireScore ? 1 : 0;\n//         const defaite = score < adversaireScore ? 1 : 0;\n//         const matchJoue = 1;\n\n//         let points = 0;\n//         if (score > adversaireScore) points = match.point_victoire;\n//         else if (score === adversaireScore) points = match.point_matchnul;\n//         else points = match.point_defaite;\n\n//         const team = classementParPhase[phaseKey][journeeKey][pouleKey].find((e) => e.nom_equipe === equipe);\n\n//         if (team) {\n//           if (nom_sport === \"basketball\") {\n//             team.mj += matchJoue;\n//             team.v += victoire;\n//             team.d += defaite;\n//             team.points_marques += score;\n//             team.points_concedes += adversaireScore;\n//             team.difference_points += score - adversaireScore;\n//           } else {\n//             team.points += points;\n//             team.buts_marques += score;\n//             team.buts_encaisses += adversaireScore;\n//             team.difference_buts += score - adversaireScore;\n//           }\n//         } else {\n//           classementParPhase[phaseKey][journeeKey][pouleKey].push({\n//             nom_equipe: equipe,\n//             points,\n//             mj: nom_sport === \"basketball\" ? matchJoue : undefined,\n//             v: nom_sport === \"basketball\" ? victoire : undefined,\n//             d: nom_sport === \"basketball\" ? defaite : undefined,\n//             buts_marques: nom_sport !== \"basketball\" ? score : undefined,\n//             buts_encaisses: nom_sport !== \"basketball\" ? adversaireScore : undefined,\n//             difference_buts: nom_sport !== \"basketball\" ? score - adversaireScore : undefined,\n//             points_marques: nom_sport === \"basketball\" ? score : undefined,\n//             points_concedes: nom_sport === \"basketball\" ? adversaireScore : undefined,\n//             difference_points: nom_sport === \"basketball\" ? score - adversaireScore : undefined,\n//           });\n//         }\n//       });\n//     });\n\n//     // Classement g√©n√©ral (fusion de toutes les phases)\n//     Object.keys(classementParPhase).forEach((phaseKey) => {\n//       Object.keys(classementParPhase[phaseKey]).forEach((journeeKey) => {\n//         Object.keys(classementParPhase[phaseKey][journeeKey]).forEach((pouleKey) => {\n//           classementParPhase[phaseKey][journeeKey][pouleKey].forEach((team) => {\n//             const equipeKey = team.nom_equipe;\n//             if (!classementGeneral[equipeKey]) {\n//               classementGeneral[equipeKey] = { ...team };\n//             } else {\n//               Object.keys(team).forEach((stat) => {\n//                 if (typeof team[stat] === \"number\") {\n//                   classementGeneral[equipeKey][stat] += team[stat];\n//                 }\n//               });\n//             }\n//           });\n//         });\n//       });\n//     });\n\n//     // üîÅ Normalisation des noms de champs selon le sport\n//     function normaliserClassement(classement, sport) {\n//       const nouveauClassement = {};\n\n//       Object.keys(classement).forEach(phase => {\n//         nouveauClassement[phase] = {};\n//         Object.keys(classement[phase]).forEach(journee => {\n//           nouveauClassement[phase][journee] = {};\n//           Object.keys(classement[phase][journee]).forEach(poule => {\n//             nouveauClassement[phase][journee][poule] = classement[phase][journee][poule].map(team => {\n//               const base = {\n//                 nom_equipe: team.nom_equipe,\n//                 points: team.points ?? 0,\n//               };\n\n//               if (sport.toLowerCase() === \"p√©tanque\") {\n//                 return {\n//                   ...base,\n//                   points_marques: team.buts_marques ?? 0,\n//                   points_concedes: team.buts_encaisses ?? 0,\n//                   difference_points: team.difference_buts ?? 0\n//                 };\n//               } else if (sport.toLowerCase() === \"basketball\") {\n//                 return {\n//                   ...base,\n//                   mj: team.mj ?? 0,\n//                   v: team.v ?? 0,\n//                   d: team.d ?? 0,\n//                   points_marques: team.points_marques ?? 0,\n//                   points_concedes: team.points_concedes ?? 0,\n//                   difference_points: team.difference_points ?? 0\n//                 };\n//               } else {\n//                 return {\n//                   ...base,\n//                   buts_marques: team.buts_marques ?? 0,\n//                   buts_encaisses: team.buts_encaisses ?? 0,\n//                   difference_buts: team.difference_buts ?? 0\n//                 };\n//               }\n//             });\n//           });\n//         });\n//       });\n\n//       return nouveauClassement;\n//     }\n\n//     // ‚úÖ Envoi final\n//     res.json({\n//       nom_event: results[0].nom_event,\n//       classement: normaliserClassement(classementParPhase, nom_sport),\n//       classement_general: Object.values(classementGeneral).sort((a, b) => b.points - a.points),\n//       sport: nom_sport\n//     });\n//   } catch (error) {\n//     console.error(\"Erreur lors de la r√©cup√©ration du classement :\", error);\n//     res.status(500).json({ error: \"Erreur serveur\" });\n//   }\n// };\n// exports.getClassementByEvent = async (req, res) => {\n//   const { eventId } = req.params;\n\n//   try {\n//     const results = await db(\"resultat\")\n//       .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\n//       .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\n//       .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\n//       .where(\"rencontre.id_evenement\", eventId)\n//       .select(\n//         \"evenement.nom_event\",\n//         \"evenement.nom_sport\",\n//         \"rencontre.phase\",\n//         \"rencontre.journee\",\n//         \"poules.nom_poule\",\n//         \"rencontre.participant_a\",\n//         \"rencontre.participant_b\",\n//         \"resultat.score_A\",\n//         \"resultat.score_B\",\n//         \"resultat.point_victoire\",\n//         \"resultat.point_matchnul\",\n//         \"resultat.point_defaite\"\n//       );\n\n//     if (!results.length) {\n//       return res.status(404).json({ message: \"Aucun classement disponible.\" });\n//     }\n\n//     const nom_sport = (results[0].nom_sport ?? \"inconnu\").toLowerCase();\n\n//     let classementParPhase = {};\n//     let classementGeneral = {};\n\n//     results.forEach((match) => {\n//       const { phase, journee, nom_poule } = match;\n//       const phaseKey = `Phase: ${phase}`;\n//       const journeeKey = `Journ√©e ${journee}`;\n//       const pouleKey = `Poule ${nom_poule}`;\n\n//       if (!classementParPhase[phaseKey]) classementParPhase[phaseKey] = {};\n//       if (!classementParPhase[phaseKey][journeeKey]) classementParPhase[phaseKey][journeeKey] = {};\n//       if (!classementParPhase[phaseKey][journeeKey][pouleKey]) classementParPhase[phaseKey][journeeKey][pouleKey] = [];\n\n//       [match.participant_a, match.participant_b].forEach((equipe, i) => {\n//         const score = i === 0 ? match.score_A : match.score_B;\n//         const adversaireScore = i === 0 ? match.score_B : match.score_A;\n//         const victoire = score > adversaireScore ? 1 : 0;\n//         const defaite = score < adversaireScore ? 1 : 0;\n//         const matchJoue = 1;\n\n//         let points = 0;\n//         if (score > adversaireScore) points = match.point_victoire;\n//         else if (score === adversaireScore) points = match.point_matchnul;\n//         else points = match.point_defaite;\n\n//         const team = classementParPhase[phaseKey][journeeKey][pouleKey].find((e) => e.nom_equipe === equipe);\n\n//         if (team) {\n//           if (nom_sport === \"basketball\") {\n//             team.mj += matchJoue;\n//             team.v += victoire;\n//             team.d += defaite;\n//             team.points_marques += score;\n//             team.points_concedes += adversaireScore;\n//             team.difference_points += score - adversaireScore;\n//           } else {\n//             team.points += points;\n//             team.buts_marques += score;\n//             team.buts_encaisses += adversaireScore;\n//             team.difference_buts += score - adversaireScore;\n//           }\n//         } else {\n//           classementParPhase[phaseKey][journeeKey][pouleKey].push({\n//             nom_equipe: equipe,\n//             points,\n//             mj: nom_sport === \"basketball\" ? matchJoue : undefined,\n//             v: nom_sport === \"basketball\" ? victoire : undefined,\n//             d: nom_sport === \"basketball\" ? defaite : undefined,\n//             buts_marques: nom_sport !== \"basketball\" ? score : undefined,\n//             buts_encaisses: nom_sport !== \"basketball\" ? adversaireScore : undefined,\n//             difference_buts: nom_sport !== \"basketball\" ? score - adversaireScore : undefined,\n//             points_marques: nom_sport === \"basketball\" ? score : undefined,\n//             points_concedes: nom_sport === \"basketball\" ? adversaireScore : undefined,\n//             difference_points: nom_sport === \"basketball\" ? score - adversaireScore : undefined,\n//           });\n//         }\n//       });\n//     });\n\n//     // üîÅ Calcul du classement g√©n√©ral (fusion de tous les matchs)\n//     Object.keys(classementParPhase).forEach((phaseKey) => {\n//       Object.keys(classementParPhase[phaseKey]).forEach((journeeKey) => {\n//         Object.keys(classementParPhase[phaseKey][journeeKey]).forEach((pouleKey) => {\n//           classementParPhase[phaseKey][journeeKey][pouleKey].forEach((team) => {\n//             const equipeKey = team.nom_equipe;\n//             if (!classementGeneral[equipeKey]) {\n//               classementGeneral[equipeKey] = { ...team };\n//             } else {\n//               Object.keys(team).forEach((stat) => {\n//                 if (typeof team[stat] === \"number\") {\n//                   classementGeneral[equipeKey][stat] += team[stat];\n//                 }\n//               });\n//             }\n//           });\n//         });\n//       });\n//     });\n\n//     // üîÅ Normalisation du classement g√©n√©ral selon le sport\n//     const classementGeneralNormalise = Object.values(classementGeneral).map((team) => {\n//       const base = {\n//         nom_equipe: team.nom_equipe,\n//         points: team.points ?? 0,\n//       };\n\n//       if (nom_sport === \"p√©tanque\") {\n//         return {\n//           ...base,\n//           points_marques: team.buts_marques ?? 0,\n//           points_concedes: team.buts_encaisses ?? 0,\n//           difference_points: team.difference_buts ?? 0,\n//         };\n//       } else if (nom_sport === \"basketball\") {\n//         return {\n//           ...base,\n//           mj: team.mj ?? 0,\n//           v: team.v ?? 0,\n//           d: team.d ?? 0,\n//           points_marques: team.points_marques ?? 0,\n//           points_concedes: team.points_concedes ?? 0,\n//           difference_points: team.difference_points ?? 0,\n//         };\n//       } else {\n//         return {\n//           ...base,\n//           buts_marques: team.buts_marques ?? 0,\n//           buts_encaisses: team.buts_encaisses ?? 0,\n//           difference_buts: team.difference_buts ?? 0,\n//         };\n//       }\n//     });\n\n//     // üîÅ Normalisation du classement journalier (par phase)\n//     function normaliserClassement(classement, sport) {\n//       const nouveauClassement = {};\n\n//       Object.keys(classement).forEach(phase => {\n//         nouveauClassement[phase] = {};\n//         Object.keys(classement[phase]).forEach(journee => {\n//           nouveauClassement[phase][journee] = {};\n//           Object.keys(classement[phase][journee]).forEach(poule => {\n//             nouveauClassement[phase][journee][poule] = classement[phase][journee][poule].map(team => {\n//               const base = {\n//                 nom_equipe: team.nom_equipe,\n//                 points: team.points ?? 0,\n//               };\n\n//               if (sport === \"p√©tanque\") {\n//                 return {\n//                   ...base,\n//                   points_marques: team.buts_marques ?? 0,\n//                   points_concedes: team.buts_encaisses ?? 0,\n//                   difference_points: team.difference_buts ?? 0,\n//                 };\n//               } else if (sport === \"basketball\") {\n//                 return {\n//                   ...base,\n//                   mj: team.mj ?? 0,\n//                   v: team.v ?? 0,\n//                   d: team.d ?? 0,\n//                   points_marques: team.points_marques ?? 0,\n//                   points_concedes: team.points_concedes ?? 0,\n//                   difference_points: team.difference_points ?? 0,\n//                 };\n//               } else {\n//                 return {\n//                   ...base,\n//                   buts_marques: team.buts_marques ?? 0,\n//                   buts_encaisses: team.buts_encaisses ?? 0,\n//                   difference_buts: team.difference_buts ?? 0,\n//                 };\n//               }\n//             });\n//           });\n//         });\n//       });\n\n//       return nouveauClassement;\n//     }\n\n//     // ‚úÖ Envoi final\n//     res.json({\n//       nom_event: results[0].nom_event,\n//       classement: normaliserClassement(classementParPhase, nom_sport),\n//       classement_general: classementGeneralNormalise.sort((a, b) => b.points - a.points),\n//       sport: nom_sport\n//     });\n\n//   } catch (error) {\n//     console.error(\"Erreur lors de la r√©cup√©ration du classement :\", error);\n//     res.status(500).json({ error: \"Erreur serveur\" });\n//   }\n// };\nexports.getClassementByEvent = async (req, res) => {\n  const {\n    eventId\n  } = req.params;\n  try {\n    const results = await db(\"resultat\").join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\").join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\").join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\").where(\"rencontre.id_evenement\", eventId).select(\"evenement.nom_event\", \"evenement.nom_sport\", \"rencontre.phase\", \"rencontre.journee\", \"rencontre.tour_final\",\n    // Ajout du champ 'tour_final'\n    \"poules.nom_poule\", \"rencontre.participant_a\", \"rencontre.participant_b\", \"resultat.score_A\", \"resultat.score_B\", \"resultat.point_victoire\", \"resultat.point_matchnul\", \"resultat.point_defaite\");\n    if (!results.length) {\n      return res.status(404).json({\n        message: \"Aucun classement disponible.\"\n      });\n    }\n    const nom_sport = (results[0].nom_sport ?? \"inconnu\").toLowerCase();\n    let classementParPhase = {};\n    let classementGeneral = {};\n    results.forEach(match => {\n      const {\n        phase,\n        journee,\n        tour_final,\n        nom_poule\n      } = match; // R√©cup√©rer tour_final ici\n      const phaseKey = `Phase: ${phase}`;\n      const journeeKey = `Journ√©e ${journee}`;\n      const pouleKey = `Poule ${nom_poule}`;\n      if (!classementParPhase[phaseKey]) classementParPhase[phaseKey] = {};\n      if (!classementParPhase[phaseKey][journeeKey]) classementParPhase[phaseKey][journeeKey] = {};\n      if (!classementParPhase[phaseKey][journeeKey][pouleKey]) classementParPhase[phaseKey][journeeKey][pouleKey] = [];\n      [match.participant_a, match.participant_b].forEach((equipe, i) => {\n        const score = i === 0 ? match.score_A : match.score_B;\n        const adversaireScore = i === 0 ? match.score_B : match.score_A;\n        const victoire = score > adversaireScore ? 1 : 0;\n        const defaite = score < adversaireScore ? 1 : 0;\n        const matchJoue = 1;\n        let points = 0;\n        if (score > adversaireScore) points = match.point_victoire;else if (score === adversaireScore) points = match.point_matchnul;else points = match.point_defaite;\n        const team = classementParPhase[phaseKey][journeeKey][pouleKey].find(e => e.nom_equipe === equipe);\n        if (team) {\n          if (nom_sport === \"basketball\") {\n            team.mj += matchJoue;\n            team.v += victoire;\n            team.d += defaite;\n            team.points_marques += score;\n            team.points_concedes += adversaireScore;\n            team.difference_points += score - adversaireScore;\n          } else {\n            team.points += points;\n            team.buts_marques += score;\n            team.buts_encaisses += adversaireScore;\n            team.difference_buts += score - adversaireScore;\n          }\n        } else {\n          classementParPhase[phaseKey][journeeKey][pouleKey].push({\n            nom_equipe: equipe,\n            points,\n            mj: nom_sport === \"basketball\" ? matchJoue : undefined,\n            v: nom_sport === \"basketball\" ? victoire : undefined,\n            d: nom_sport === \"basketball\" ? defaite : undefined,\n            buts_marques: nom_sport !== \"basketball\" ? score : undefined,\n            buts_encaisses: nom_sport !== \"basketball\" ? adversaireScore : undefined,\n            difference_buts: nom_sport !== \"basketball\" ? score - adversaireScore : undefined,\n            points_marques: nom_sport === \"basketball\" ? score : undefined,\n            points_concedes: nom_sport === \"basketball\" ? adversaireScore : undefined,\n            difference_points: nom_sport === \"basketball\" ? score - adversaireScore : undefined\n          });\n        }\n      });\n    });\n\n    // üîÅ Calcul du classement g√©n√©ral (fusion de tous les matchs)\n    Object.keys(classementParPhase).forEach(phaseKey => {\n      Object.keys(classementParPhase[phaseKey]).forEach(journeeKey => {\n        Object.keys(classementParPhase[phaseKey][journeeKey]).forEach(pouleKey => {\n          classementParPhase[phaseKey][journeeKey][pouleKey].forEach(team => {\n            const equipeKey = team.nom_equipe;\n            if (!classementGeneral[equipeKey]) {\n              classementGeneral[equipeKey] = {\n                ...team\n              };\n            } else {\n              Object.keys(team).forEach(stat => {\n                if (typeof team[stat] === \"number\") {\n                  classementGeneral[equipeKey][stat] += team[stat];\n                }\n              });\n            }\n          });\n        });\n      });\n    });\n\n    // üîÅ Normalisation du classement g√©n√©ral selon le sport\n    const classementGeneralNormalise = Object.values(classementGeneral).map(team => {\n      const base = {\n        nom_equipe: team.nom_equipe,\n        points: team.points ?? 0\n      };\n      if (nom_sport === \"p√©tanque\") {\n        return {\n          ...base,\n          points_marques: team.buts_marques ?? 0,\n          points_concedes: team.buts_encaisses ?? 0,\n          difference_points: team.difference_buts ?? 0\n        };\n      } else if (nom_sport === \"basketball\") {\n        return {\n          ...base,\n          mj: team.mj ?? 0,\n          v: team.v ?? 0,\n          d: team.d ?? 0,\n          points_marques: team.points_marques ?? 0,\n          points_concedes: team.points_concedes ?? 0,\n          difference_points: team.difference_points ?? 0\n        };\n      } else {\n        return {\n          ...base,\n          buts_marques: team.buts_marques ?? 0,\n          buts_encaisses: team.buts_encaisses ?? 0,\n          difference_buts: team.difference_buts ?? 0\n        };\n      }\n    });\n\n    // üîÅ Normalisation du classement journalier (par phase)\n    function normaliserClassement(classement, sport) {\n      const nouveauClassement = {};\n      Object.keys(classement).forEach(phase => {\n        nouveauClassement[phase] = {};\n        Object.keys(classement[phase]).forEach(journee => {\n          nouveauClassement[phase][journee] = {};\n          Object.keys(classement[phase][journee]).forEach(poule => {\n            nouveauClassement[phase][journee][poule] = classement[phase][journee][poule].map(team => {\n              const base = {\n                nom_equipe: team.nom_equipe,\n                points: team.points ?? 0\n              };\n              if (sport === \"p√©tanque\") {\n                return {\n                  ...base,\n                  points_marques: team.buts_marques ?? 0,\n                  points_concedes: team.buts_encaisses ?? 0,\n                  difference_points: team.difference_buts ?? 0\n                };\n              } else if (sport === \"basketball\") {\n                return {\n                  ...base,\n                  mj: team.mj ?? 0,\n                  v: team.v ?? 0,\n                  d: team.d ?? 0,\n                  points_marques: team.points_marques ?? 0,\n                  points_concedes: team.points_concedes ?? 0,\n                  difference_points: team.difference_points ?? 0\n                };\n              } else {\n                return {\n                  ...base,\n                  buts_marques: team.buts_marques ?? 0,\n                  buts_encaisses: team.buts_encaisses ?? 0,\n                  difference_buts: team.difference_buts ?? 0\n                };\n              }\n            });\n          });\n        });\n      });\n      return nouveauClassement;\n    }\n\n    // ‚úÖ Envoi final\n    res.json({\n      nom_event: results[0].nom_event,\n      classement: normaliserClassement(classementParPhase, nom_sport),\n      classement_general: classementGeneralNormalise.sort((a, b) => b.points - a.points),\n      sport: nom_sport,\n      tour_final: results[0].tour_final // Ajouter tour_final √† la r√©ponse\n    });\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du classement :\", error);\n    res.status(500).json({\n      error: \"Erreur serveur\"\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJleHBvcnRzIiwiZ2V0RXZlbnRSZXN1bHRzIiwicmVxIiwicmVzIiwiZXZlbnRJZCIsInBhcmFtcyIsInJlc3VsdHMiLCJqb2luIiwid2hlcmUiLCJzZWxlY3QiLCJvcmRlckJ5IiwianNvbiIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyIsImdldEFsbFJlc3VsdHMiLCJsZW5ndGgiLCJtZXNzYWdlIiwiZ2V0Q2xhc3NlbWVudEJ5RXZlbnRQaGFzZUpvdXJuZWUiLCJwaGFzZSIsImpvdXJuZWUiLCJjbGFzc2VtZW50IiwicmF3IiwiZ3JvdXBCeSIsInNwb3J0Iiwibm9tX3Nwb3J0IiwiZ2V0Q2xhc3NlbWVudEJ5RXZlbnQiLCJ0b0xvd2VyQ2FzZSIsImNsYXNzZW1lbnRQYXJQaGFzZSIsImNsYXNzZW1lbnRHZW5lcmFsIiwiZm9yRWFjaCIsIm1hdGNoIiwidG91cl9maW5hbCIsIm5vbV9wb3VsZSIsInBoYXNlS2V5Iiwiam91cm5lZUtleSIsInBvdWxlS2V5IiwicGFydGljaXBhbnRfYSIsInBhcnRpY2lwYW50X2IiLCJlcXVpcGUiLCJpIiwic2NvcmUiLCJzY29yZV9BIiwic2NvcmVfQiIsImFkdmVyc2FpcmVTY29yZSIsInZpY3RvaXJlIiwiZGVmYWl0ZSIsIm1hdGNoSm91ZSIsInBvaW50cyIsInBvaW50X3ZpY3RvaXJlIiwicG9pbnRfbWF0Y2hudWwiLCJwb2ludF9kZWZhaXRlIiwidGVhbSIsImZpbmQiLCJlIiwibm9tX2VxdWlwZSIsIm1qIiwidiIsImQiLCJwb2ludHNfbWFycXVlcyIsInBvaW50c19jb25jZWRlcyIsImRpZmZlcmVuY2VfcG9pbnRzIiwiYnV0c19tYXJxdWVzIiwiYnV0c19lbmNhaXNzZXMiLCJkaWZmZXJlbmNlX2J1dHMiLCJwdXNoIiwidW5kZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsImVxdWlwZUtleSIsInN0YXQiLCJjbGFzc2VtZW50R2VuZXJhbE5vcm1hbGlzZSIsInZhbHVlcyIsIm1hcCIsImJhc2UiLCJub3JtYWxpc2VyQ2xhc3NlbWVudCIsIm5vdXZlYXVDbGFzc2VtZW50IiwicG91bGUiLCJub21fZXZlbnQiLCJjbGFzc2VtZW50X2dlbmVyYWwiLCJzb3J0IiwiYSIsImIiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJSZXN1bHRhdHNDb250cm9sZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGIgPSByZXF1aXJlKCcuLi9kYicpOyAgLy8gQ29ubmV4aW9uIMOgIE15U1FMIGF2ZWMgS25leFxyXG5cclxuXHJcbmV4cG9ydHMuZ2V0RXZlbnRSZXN1bHRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGRiKCdyZXN1bHRhdCcpXHJcbiAgICAgIC5qb2luKCdyZW5jb250cmUnLCAncmVzdWx0YXQuaWRfcmVuY29udHJlJywgJz0nLCAncmVuY29udHJlLmlkX3JlbmNvbnRyZScpXHJcbiAgICAgIC53aGVyZSgncmVuY29udHJlLmlkX2V2ZW5lbWVudCcsIGV2ZW50SWQpXHJcbiAgICAgIC5zZWxlY3QoXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5waGFzZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5qb3VybmVlJyxcclxuICAgICAgICAncmVuY29udHJlLmRhdGVfcmVuY29udHJlJyxcclxuICAgICAgICAncmVuY29udHJlLmhldXJlX3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5wYXJ0aWNpcGFudF9hJyxcclxuICAgICAgICAncmVuY29udHJlLnBhcnRpY2lwYW50X2InLFxyXG4gICAgICAgICdyZW5jb250cmUubGlldV9yZW5jb250cmUnLFxyXG4gICAgICAgICdyZXN1bHRhdC5zY29yZV9BJyxcclxuICAgICAgICAncmVzdWx0YXQuc2NvcmVfQidcclxuICAgICAgKVxyXG4gICAgICAub3JkZXJCeShbJ3JlbmNvbnRyZS5waGFzZScsICdyZW5jb250cmUuam91cm5lZScsICdyZW5jb250cmUuZGF0ZV9yZW5jb250cmUnXSk7XHJcblxyXG4gICAgcmVzLmpzb24ocmVzdWx0cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcsOpc3VsdGF0cyA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG5cclxuLy8g4pyFIFLDqWN1cMOpcmVyIHRvdXMgbGVzIHLDqXN1bHRhdHMgcG91ciB0b3VzIGxlcyDDqXbDqW5lbWVudHNcclxuZXhwb3J0cy5nZXRBbGxSZXN1bHRzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBkYigncmVzdWx0YXQnKVxyXG4gICAgICAuam9pbigncmVuY29udHJlJywgJ3Jlc3VsdGF0LmlkX3JlbmNvbnRyZScsICc9JywgJ3JlbmNvbnRyZS5pZF9yZW5jb250cmUnKVxyXG4gICAgICAuam9pbignZXZlbmVtZW50JywgJ3JlbmNvbnRyZS5pZF9ldmVuZW1lbnQnLCAnPScsICdldmVuZW1lbnQuaWRfZXZlbmVtZW50JylcclxuICAgICAgLnNlbGVjdChcclxuICAgICAgICAnZXZlbmVtZW50Lm5vbV9ldmVudCBhcyBldmVudE5hbWUnLFxyXG4gICAgICAgICdyZW5jb250cmUucGhhc2UnLFxyXG4gICAgICAgICdyZW5jb250cmUuam91cm5lZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5kYXRlX3JlbmNvbnRyZScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5oZXVyZV9yZW5jb250cmUnLFxyXG4gICAgICAgICdyZW5jb250cmUucGFydGljaXBhbnRfYScsXHJcbiAgICAgICAgJ3JlbmNvbnRyZS5wYXJ0aWNpcGFudF9iJyxcclxuICAgICAgICAncmVuY29udHJlLmxpZXVfcmVuY29udHJlJyxcclxuICAgICAgICAncmVzdWx0YXQuc2NvcmVfQScsXHJcbiAgICAgICAgJ3Jlc3VsdGF0LnNjb3JlX0InXHJcbiAgICAgIClcclxuICAgICAgLm9yZGVyQnkoWydldmVuZW1lbnQubm9tX2V2ZW50JywgJ3JlbmNvbnRyZS5waGFzZScsICdyZW5jb250cmUuam91cm5lZScsICdyZW5jb250cmUuZGF0ZV9yZW5jb250cmUnXSk7XHJcblxyXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gcsOpc3VsdGF0IGRpc3BvbmlibGUuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLmpzb24ocmVzdWx0cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHLDqXN1bHRhdHMgOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRDbGFzc2VtZW50QnlFdmVudFBoYXNlSm91cm5lZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgZXZlbnRJZCwgcGhhc2UsIGpvdXJuZWUgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjbGFzc2VtZW50ID0gYXdhaXQgZGIoJ3Jlc3VsdGF0JylcclxuICAgICAgLmpvaW4oJ3JlbmNvbnRyZScsICdyZXN1bHRhdC5pZF9yZW5jb250cmUnLCAnPScsICdyZW5jb250cmUuaWRfcmVuY29udHJlJylcclxuICAgICAgLmpvaW4oJ2V2ZW5lbWVudCcsICdyZW5jb250cmUuaWRfZXZlbmVtZW50JywgJz0nLCAnZXZlbmVtZW50LmlkX2V2ZW5lbWVudCcpXHJcbiAgICAgIC53aGVyZSgncmVuY29udHJlLmlkX2V2ZW5lbWVudCcsIGV2ZW50SWQpXHJcbiAgICAgIC53aGVyZSgncmVuY29udHJlLnBoYXNlJywgcGhhc2UpXHJcbiAgICAgIC53aGVyZSgncmVuY29udHJlLmpvdXJuZWUnLCBqb3VybmVlKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgICdldmVuZW1lbnQubm9tX3Nwb3J0JywgLy8g4pyFIEFqb3V0IGR1IHR5cGUgZGUgc3BvcnRcclxuICAgICAgICAncmVuY29udHJlLnBoYXNlJyxcclxuICAgICAgICAncmVuY29udHJlLmpvdXJuZWUnLFxyXG4gICAgICAgICdyZW5jb250cmUucGFydGljaXBhbnRfYSBhcyBlcXVpcGUnLFxyXG4gICAgICAgIGRiLnJhdygnU1VNKHJlc3VsdGF0LnNjb3JlX0EpIGFzIHBvaW50cycpLFxyXG4gICAgICAgIGRiLnJhdygnU1VNKHJlc3VsdGF0LnNjb3JlX0EgLSByZXN1bHRhdC5zY29yZV9CKSBhcyBkaWZmZXJlbmNlJyksXHJcbiAgICAgICAgZGIucmF3KCdDT1VOVChyZXN1bHRhdC5pZF9yZW5jb250cmUpIGFzIG1hdGNoc19qb3VlcycpXHJcbiAgICAgIClcclxuICAgICAgLmdyb3VwQnkoJ3JlbmNvbnRyZS5wYXJ0aWNpcGFudF9hJylcclxuICAgICAgLm9yZGVyQnkoJ3BvaW50cycsICdkZXNjJylcclxuICAgICAgLm9yZGVyQnkoJ2RpZmZlcmVuY2UnLCAnZGVzYycpO1xyXG5cclxuICAgICAgcmVzLmpzb24oeyBjbGFzc2VtZW50LCBzcG9ydDogY2xhc3NlbWVudFswXT8ubm9tX3Nwb3J0IH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgY2xhc3NlbWVudCA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyDinIUgUsOpY3Vww6lyZXIgbGUgY2xhc3NlbWVudCBwYXIgw6l2w6luZW1lbnRcclxuXHJcbi8vIGV4cG9ydHMuZ2V0Q2xhc3NlbWVudEJ5RXZlbnQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuLy8gICBjb25zdCB7IGV2ZW50SWQgfSA9IHJlcS5wYXJhbXM7XHJcblxyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZGIoXCJyZXN1bHRhdFwiKVxyXG4vLyAgICAgICAuam9pbihcInJlbmNvbnRyZVwiLCBcInJlc3VsdGF0LmlkX3JlbmNvbnRyZVwiLCBcIj1cIiwgXCJyZW5jb250cmUuaWRfcmVuY29udHJlXCIpXHJcbi8vICAgICAgIC5qb2luKFwiZXZlbmVtZW50XCIsIFwicmVuY29udHJlLmlkX2V2ZW5lbWVudFwiLCBcIj1cIiwgXCJldmVuZW1lbnQuaWRfZXZlbmVtZW50XCIpXHJcbi8vICAgICAgIC5qb2luKFwicG91bGVzXCIsIFwicmVuY29udHJlLmlkX3BvdWxlXCIsIFwiPVwiLCBcInBvdWxlcy5pZF9wb3VsZVwiKVxyXG4vLyAgICAgICAud2hlcmUoXCJyZW5jb250cmUuaWRfZXZlbmVtZW50XCIsIGV2ZW50SWQpXHJcbi8vICAgICAgIC5zZWxlY3QoXHJcbi8vICAgICAgICAgXCJldmVuZW1lbnQubm9tX2V2ZW50XCIsXHJcbi8vICAgICAgICAgXCJldmVuZW1lbnQubm9tX3Nwb3J0XCIsIC8vIGRvaXQgw6p0cmUgYmllbiByZW5zZWlnbsOpIGRhbnMgdGEgREJcclxuLy8gICAgICAgICBcInJlbmNvbnRyZS5waGFzZVwiLFxyXG4vLyAgICAgICAgIFwicmVuY29udHJlLmpvdXJuZWVcIixcclxuLy8gICAgICAgICBcInBvdWxlcy5ub21fcG91bGVcIixcclxuLy8gICAgICAgICBcInJlbmNvbnRyZS5wYXJ0aWNpcGFudF9hXCIsXHJcbi8vICAgICAgICAgXCJyZW5jb250cmUucGFydGljaXBhbnRfYlwiLFxyXG4vLyAgICAgICAgIFwicmVzdWx0YXQuc2NvcmVfQVwiLFxyXG4vLyAgICAgICAgIFwicmVzdWx0YXQuc2NvcmVfQlwiLFxyXG4vLyAgICAgICAgIFwicmVzdWx0YXQucG9pbnRfdmljdG9pcmVcIixcclxuLy8gICAgICAgICBcInJlc3VsdGF0LnBvaW50X21hdGNobnVsXCIsXHJcbi8vICAgICAgICAgXCJyZXN1bHRhdC5wb2ludF9kZWZhaXRlXCJcclxuLy8gICAgICAgKTtcclxuXHJcbi8vICAgICBpZiAoIXJlc3VsdHMubGVuZ3RoKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gY2xhc3NlbWVudCBkaXNwb25pYmxlLlwiIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IG5vbV9zcG9ydCA9IChyZXN1bHRzWzBdLm5vbV9zcG9ydCA/PyBcImluY29ubnVcIikudG9Mb3dlckNhc2UoKTtcclxuXHJcbi8vICAgICBsZXQgY2xhc3NlbWVudFBhclBoYXNlID0ge307XHJcbi8vICAgICBsZXQgY2xhc3NlbWVudEdlbmVyYWwgPSB7fTtcclxuXHJcbi8vICAgICByZXN1bHRzLmZvckVhY2goKG1hdGNoKSA9PiB7XHJcbi8vICAgICAgIGNvbnN0IHsgcGhhc2UsIGpvdXJuZWUsIG5vbV9wb3VsZSB9ID0gbWF0Y2g7XHJcbi8vICAgICAgIGNvbnN0IHBoYXNlS2V5ID0gYFBoYXNlOiAke3BoYXNlfWA7XHJcbi8vICAgICAgIGNvbnN0IGpvdXJuZWVLZXkgPSBgSm91cm7DqWUgJHtqb3VybmVlfWA7XHJcbi8vICAgICAgIGNvbnN0IHBvdWxlS2V5ID0gYFBvdWxlICR7bm9tX3BvdWxlfWA7XHJcblxyXG4vLyAgICAgICBpZiAoIWNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV0pIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV0gPSB7fTtcclxuLy8gICAgICAgaWYgKCFjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldW2pvdXJuZWVLZXldKSBjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldW2pvdXJuZWVLZXldID0ge307XHJcbi8vICAgICAgIGlmICghY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0pIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldID0gW107XHJcblxyXG4vLyAgICAgICBbbWF0Y2gucGFydGljaXBhbnRfYSwgbWF0Y2gucGFydGljaXBhbnRfYl0uZm9yRWFjaCgoZXF1aXBlLCBpKSA9PiB7XHJcbi8vICAgICAgICAgY29uc3Qgc2NvcmUgPSBpID09PSAwID8gbWF0Y2guc2NvcmVfQSA6IG1hdGNoLnNjb3JlX0I7XHJcbi8vICAgICAgICAgY29uc3QgYWR2ZXJzYWlyZVNjb3JlID0gaSA9PT0gMCA/IG1hdGNoLnNjb3JlX0IgOiBtYXRjaC5zY29yZV9BO1xyXG4vLyAgICAgICAgIGNvbnN0IHZpY3RvaXJlID0gc2NvcmUgPiBhZHZlcnNhaXJlU2NvcmUgPyAxIDogMDtcclxuLy8gICAgICAgICBjb25zdCBkZWZhaXRlID0gc2NvcmUgPCBhZHZlcnNhaXJlU2NvcmUgPyAxIDogMDtcclxuLy8gICAgICAgICBjb25zdCBtYXRjaEpvdWUgPSAxO1xyXG5cclxuLy8gICAgICAgICBsZXQgcG9pbnRzID0gMDtcclxuLy8gICAgICAgICBpZiAoc2NvcmUgPiBhZHZlcnNhaXJlU2NvcmUpIHBvaW50cyA9IG1hdGNoLnBvaW50X3ZpY3RvaXJlO1xyXG4vLyAgICAgICAgIGVsc2UgaWYgKHNjb3JlID09PSBhZHZlcnNhaXJlU2NvcmUpIHBvaW50cyA9IG1hdGNoLnBvaW50X21hdGNobnVsO1xyXG4vLyAgICAgICAgIGVsc2UgcG9pbnRzID0gbWF0Y2gucG9pbnRfZGVmYWl0ZTtcclxuXHJcbi8vICAgICAgICAgY29uc3QgdGVhbSA9IGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLmZpbmQoKGUpID0+IGUubm9tX2VxdWlwZSA9PT0gZXF1aXBlKTtcclxuXHJcbi8vICAgICAgICAgaWYgKHRlYW0pIHtcclxuLy8gICAgICAgICAgIGlmIChub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiKSB7XHJcbi8vICAgICAgICAgICAgIHRlYW0ubWogKz0gbWF0Y2hKb3VlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnYgKz0gdmljdG9pcmU7XHJcbi8vICAgICAgICAgICAgIHRlYW0uZCArPSBkZWZhaXRlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnBvaW50c19tYXJxdWVzICs9IHNjb3JlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnBvaW50c19jb25jZWRlcyArPSBhZHZlcnNhaXJlU2NvcmU7XHJcbi8vICAgICAgICAgICAgIHRlYW0uZGlmZmVyZW5jZV9wb2ludHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbi8vICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnBvaW50cyArPSBwb2ludHM7XHJcbi8vICAgICAgICAgICAgIHRlYW0uYnV0c19tYXJxdWVzICs9IHNjb3JlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLmJ1dHNfZW5jYWlzc2VzICs9IGFkdmVyc2FpcmVTY29yZTtcclxuLy8gICAgICAgICAgICAgdGVhbS5kaWZmZXJlbmNlX2J1dHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbi8vICAgICAgICAgICB9XHJcbi8vICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLnB1c2goe1xyXG4vLyAgICAgICAgICAgICBub21fZXF1aXBlOiBlcXVpcGUsXHJcbi8vICAgICAgICAgICAgIHBvaW50cyxcclxuLy8gICAgICAgICAgICAgbWo6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBtYXRjaEpvdWUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIHY6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyB2aWN0b2lyZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgICAgZDogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IGRlZmFpdGUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIGJ1dHNfbWFycXVlczogbm9tX3Nwb3J0ICE9PSBcImJhc2tldGJhbGxcIiA/IHNjb3JlIDogdW5kZWZpbmVkLFxyXG4vLyAgICAgICAgICAgICBidXRzX2VuY2Fpc3Nlczogbm9tX3Nwb3J0ICE9PSBcImJhc2tldGJhbGxcIiA/IGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgICAgZGlmZmVyZW5jZV9idXRzOiBub21fc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIHBvaW50c19tYXJxdWVzOiBub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIHBvaW50c19jb25jZWRlczogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBzY29yZSAtIGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgIH0pO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgfSk7XHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyBDbGFzc2VtZW50IGfDqW7DqXJhbCAoZnVzaW9uIGRlIHRvdXRlcyBsZXMgcGhhc2VzKVxyXG4vLyAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhclBoYXNlKS5mb3JFYWNoKChwaGFzZUtleSkgPT4ge1xyXG4vLyAgICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldKS5mb3JFYWNoKChqb3VybmVlS2V5KSA9PiB7XHJcbi8vICAgICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XSkuZm9yRWFjaCgocG91bGVLZXkpID0+IHtcclxuLy8gICAgICAgICAgIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLmZvckVhY2goKHRlYW0pID0+IHtcclxuLy8gICAgICAgICAgICAgY29uc3QgZXF1aXBlS2V5ID0gdGVhbS5ub21fZXF1aXBlO1xyXG4vLyAgICAgICAgICAgICBpZiAoIWNsYXNzZW1lbnRHZW5lcmFsW2VxdWlwZUtleV0pIHtcclxuLy8gICAgICAgICAgICAgICBjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldID0geyAuLi50ZWFtIH07XHJcbi8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGVhbSkuZm9yRWFjaCgoc3RhdCkgPT4ge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZWFtW3N0YXRdID09PSBcIm51bWJlclwiKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgIGNsYXNzZW1lbnRHZW5lcmFsW2VxdWlwZUtleV1bc3RhdF0gKz0gdGVhbVtzdGF0XTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICAgIH0pO1xyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgLy8g8J+UgSBOb3JtYWxpc2F0aW9uIGRlcyBub21zIGRlIGNoYW1wcyBzZWxvbiBsZSBzcG9ydFxyXG4vLyAgICAgZnVuY3Rpb24gbm9ybWFsaXNlckNsYXNzZW1lbnQoY2xhc3NlbWVudCwgc3BvcnQpIHtcclxuLy8gICAgICAgY29uc3Qgbm91dmVhdUNsYXNzZW1lbnQgPSB7fTtcclxuXHJcbi8vICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnQpLmZvckVhY2gocGhhc2UgPT4ge1xyXG4vLyAgICAgICAgIG5vdXZlYXVDbGFzc2VtZW50W3BoYXNlXSA9IHt9O1xyXG4vLyAgICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRbcGhhc2VdKS5mb3JFYWNoKGpvdXJuZWUgPT4ge1xyXG4vLyAgICAgICAgICAgbm91dmVhdUNsYXNzZW1lbnRbcGhhc2VdW2pvdXJuZWVdID0ge307XHJcbi8vICAgICAgICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50W3BoYXNlXVtqb3VybmVlXSkuZm9yRWFjaChwb3VsZSA9PiB7XHJcbi8vICAgICAgICAgICAgIG5vdXZlYXVDbGFzc2VtZW50W3BoYXNlXVtqb3VybmVlXVtwb3VsZV0gPSBjbGFzc2VtZW50W3BoYXNlXVtqb3VybmVlXVtwb3VsZV0ubWFwKHRlYW0gPT4ge1xyXG4vLyAgICAgICAgICAgICAgIGNvbnN0IGJhc2UgPSB7XHJcbi8vICAgICAgICAgICAgICAgICBub21fZXF1aXBlOiB0ZWFtLm5vbV9lcXVpcGUsXHJcbi8vICAgICAgICAgICAgICAgICBwb2ludHM6IHRlYW0ucG9pbnRzID8/IDAsXHJcbi8vICAgICAgICAgICAgICAgfTtcclxuXHJcbi8vICAgICAgICAgICAgICAgaWYgKHNwb3J0LnRvTG93ZXJDYXNlKCkgPT09IFwicMOpdGFucXVlXCIpIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAgICAgICAgIC4uLmJhc2UsXHJcbi8vICAgICAgICAgICAgICAgICAgIHBvaW50c19tYXJxdWVzOiB0ZWFtLmJ1dHNfbWFycXVlcyA/PyAwLFxyXG4vLyAgICAgICAgICAgICAgICAgICBwb2ludHNfY29uY2VkZXM6IHRlYW0uYnV0c19lbmNhaXNzZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IHRlYW0uZGlmZmVyZW5jZV9idXRzID8/IDBcclxuLy8gICAgICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcG9ydC50b0xvd2VyQ2FzZSgpID09PSBcImJhc2tldGJhbGxcIikge1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICAgICAgICAgICAgLi4uYmFzZSxcclxuLy8gICAgICAgICAgICAgICAgICAgbWo6IHRlYW0ubWogPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgdjogdGVhbS52ID8/IDAsXHJcbi8vICAgICAgICAgICAgICAgICAgIGQ6IHRlYW0uZCA/PyAwLFxyXG4vLyAgICAgICAgICAgICAgICAgICBwb2ludHNfbWFycXVlczogdGVhbS5wb2ludHNfbWFycXVlcyA/PyAwLFxyXG4vLyAgICAgICAgICAgICAgICAgICBwb2ludHNfY29uY2VkZXM6IHRlYW0ucG9pbnRzX2NvbmNlZGVzID8/IDAsXHJcbi8vICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VfcG9pbnRzOiB0ZWFtLmRpZmZlcmVuY2VfcG9pbnRzID8/IDBcclxuLy8gICAgICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAgICAgICAgIC4uLmJhc2UsXHJcbi8vICAgICAgICAgICAgICAgICAgIGJ1dHNfbWFycXVlczogdGVhbS5idXRzX21hcnF1ZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgYnV0c19lbmNhaXNzZXM6IHRlYW0uYnV0c19lbmNhaXNzZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZV9idXRzOiB0ZWFtLmRpZmZlcmVuY2VfYnV0cyA/PyAwXHJcbi8vICAgICAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICB9KTtcclxuLy8gICAgICAgfSk7XHJcblxyXG4vLyAgICAgICByZXR1cm4gbm91dmVhdUNsYXNzZW1lbnQ7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgLy8g4pyFIEVudm9pIGZpbmFsXHJcbi8vICAgICByZXMuanNvbih7XHJcbi8vICAgICAgIG5vbV9ldmVudDogcmVzdWx0c1swXS5ub21fZXZlbnQsXHJcbi8vICAgICAgIGNsYXNzZW1lbnQ6IG5vcm1hbGlzZXJDbGFzc2VtZW50KGNsYXNzZW1lbnRQYXJQaGFzZSwgbm9tX3Nwb3J0KSxcclxuLy8gICAgICAgY2xhc3NlbWVudF9nZW5lcmFsOiBPYmplY3QudmFsdWVzKGNsYXNzZW1lbnRHZW5lcmFsKS5zb3J0KChhLCBiKSA9PiBiLnBvaW50cyAtIGEucG9pbnRzKSxcclxuLy8gICAgICAgc3BvcnQ6IG5vbV9zcG9ydFxyXG4vLyAgICAgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkdSBjbGFzc2VtZW50IDpcIiwgZXJyb3IpO1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJFcnJldXIgc2VydmV1clwiIH0pO1xyXG4vLyAgIH1cclxuLy8gfTtcclxuLy8gZXhwb3J0cy5nZXRDbGFzc2VtZW50QnlFdmVudCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnBhcmFtcztcclxuXHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBkYihcInJlc3VsdGF0XCIpXHJcbi8vICAgICAgIC5qb2luKFwicmVuY29udHJlXCIsIFwicmVzdWx0YXQuaWRfcmVuY29udHJlXCIsIFwiPVwiLCBcInJlbmNvbnRyZS5pZF9yZW5jb250cmVcIilcclxuLy8gICAgICAgLmpvaW4oXCJldmVuZW1lbnRcIiwgXCJyZW5jb250cmUuaWRfZXZlbmVtZW50XCIsIFwiPVwiLCBcImV2ZW5lbWVudC5pZF9ldmVuZW1lbnRcIilcclxuLy8gICAgICAgLmpvaW4oXCJwb3VsZXNcIiwgXCJyZW5jb250cmUuaWRfcG91bGVcIiwgXCI9XCIsIFwicG91bGVzLmlkX3BvdWxlXCIpXHJcbi8vICAgICAgIC53aGVyZShcInJlbmNvbnRyZS5pZF9ldmVuZW1lbnRcIiwgZXZlbnRJZClcclxuLy8gICAgICAgLnNlbGVjdChcclxuLy8gICAgICAgICBcImV2ZW5lbWVudC5ub21fZXZlbnRcIixcclxuLy8gICAgICAgICBcImV2ZW5lbWVudC5ub21fc3BvcnRcIixcclxuLy8gICAgICAgICBcInJlbmNvbnRyZS5waGFzZVwiLFxyXG4vLyAgICAgICAgIFwicmVuY29udHJlLmpvdXJuZWVcIixcclxuLy8gICAgICAgICBcInBvdWxlcy5ub21fcG91bGVcIixcclxuLy8gICAgICAgICBcInJlbmNvbnRyZS5wYXJ0aWNpcGFudF9hXCIsXHJcbi8vICAgICAgICAgXCJyZW5jb250cmUucGFydGljaXBhbnRfYlwiLFxyXG4vLyAgICAgICAgIFwicmVzdWx0YXQuc2NvcmVfQVwiLFxyXG4vLyAgICAgICAgIFwicmVzdWx0YXQuc2NvcmVfQlwiLFxyXG4vLyAgICAgICAgIFwicmVzdWx0YXQucG9pbnRfdmljdG9pcmVcIixcclxuLy8gICAgICAgICBcInJlc3VsdGF0LnBvaW50X21hdGNobnVsXCIsXHJcbi8vICAgICAgICAgXCJyZXN1bHRhdC5wb2ludF9kZWZhaXRlXCJcclxuLy8gICAgICAgKTtcclxuXHJcbi8vICAgICBpZiAoIXJlc3VsdHMubGVuZ3RoKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQXVjdW4gY2xhc3NlbWVudCBkaXNwb25pYmxlLlwiIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGNvbnN0IG5vbV9zcG9ydCA9IChyZXN1bHRzWzBdLm5vbV9zcG9ydCA/PyBcImluY29ubnVcIikudG9Mb3dlckNhc2UoKTtcclxuXHJcbi8vICAgICBsZXQgY2xhc3NlbWVudFBhclBoYXNlID0ge307XHJcbi8vICAgICBsZXQgY2xhc3NlbWVudEdlbmVyYWwgPSB7fTtcclxuXHJcbi8vICAgICByZXN1bHRzLmZvckVhY2goKG1hdGNoKSA9PiB7XHJcbi8vICAgICAgIGNvbnN0IHsgcGhhc2UsIGpvdXJuZWUsIG5vbV9wb3VsZSB9ID0gbWF0Y2g7XHJcbi8vICAgICAgIGNvbnN0IHBoYXNlS2V5ID0gYFBoYXNlOiAke3BoYXNlfWA7XHJcbi8vICAgICAgIGNvbnN0IGpvdXJuZWVLZXkgPSBgSm91cm7DqWUgJHtqb3VybmVlfWA7XHJcbi8vICAgICAgIGNvbnN0IHBvdWxlS2V5ID0gYFBvdWxlICR7bm9tX3BvdWxlfWA7XHJcblxyXG4vLyAgICAgICBpZiAoIWNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV0pIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV0gPSB7fTtcclxuLy8gICAgICAgaWYgKCFjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldW2pvdXJuZWVLZXldKSBjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldW2pvdXJuZWVLZXldID0ge307XHJcbi8vICAgICAgIGlmICghY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0pIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldID0gW107XHJcblxyXG4vLyAgICAgICBbbWF0Y2gucGFydGljaXBhbnRfYSwgbWF0Y2gucGFydGljaXBhbnRfYl0uZm9yRWFjaCgoZXF1aXBlLCBpKSA9PiB7XHJcbi8vICAgICAgICAgY29uc3Qgc2NvcmUgPSBpID09PSAwID8gbWF0Y2guc2NvcmVfQSA6IG1hdGNoLnNjb3JlX0I7XHJcbi8vICAgICAgICAgY29uc3QgYWR2ZXJzYWlyZVNjb3JlID0gaSA9PT0gMCA/IG1hdGNoLnNjb3JlX0IgOiBtYXRjaC5zY29yZV9BO1xyXG4vLyAgICAgICAgIGNvbnN0IHZpY3RvaXJlID0gc2NvcmUgPiBhZHZlcnNhaXJlU2NvcmUgPyAxIDogMDtcclxuLy8gICAgICAgICBjb25zdCBkZWZhaXRlID0gc2NvcmUgPCBhZHZlcnNhaXJlU2NvcmUgPyAxIDogMDtcclxuLy8gICAgICAgICBjb25zdCBtYXRjaEpvdWUgPSAxO1xyXG5cclxuLy8gICAgICAgICBsZXQgcG9pbnRzID0gMDtcclxuLy8gICAgICAgICBpZiAoc2NvcmUgPiBhZHZlcnNhaXJlU2NvcmUpIHBvaW50cyA9IG1hdGNoLnBvaW50X3ZpY3RvaXJlO1xyXG4vLyAgICAgICAgIGVsc2UgaWYgKHNjb3JlID09PSBhZHZlcnNhaXJlU2NvcmUpIHBvaW50cyA9IG1hdGNoLnBvaW50X21hdGNobnVsO1xyXG4vLyAgICAgICAgIGVsc2UgcG9pbnRzID0gbWF0Y2gucG9pbnRfZGVmYWl0ZTtcclxuXHJcbi8vICAgICAgICAgY29uc3QgdGVhbSA9IGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLmZpbmQoKGUpID0+IGUubm9tX2VxdWlwZSA9PT0gZXF1aXBlKTtcclxuXHJcbi8vICAgICAgICAgaWYgKHRlYW0pIHtcclxuLy8gICAgICAgICAgIGlmIChub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiKSB7XHJcbi8vICAgICAgICAgICAgIHRlYW0ubWogKz0gbWF0Y2hKb3VlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnYgKz0gdmljdG9pcmU7XHJcbi8vICAgICAgICAgICAgIHRlYW0uZCArPSBkZWZhaXRlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnBvaW50c19tYXJxdWVzICs9IHNjb3JlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnBvaW50c19jb25jZWRlcyArPSBhZHZlcnNhaXJlU2NvcmU7XHJcbi8vICAgICAgICAgICAgIHRlYW0uZGlmZmVyZW5jZV9wb2ludHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbi8vICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICB0ZWFtLnBvaW50cyArPSBwb2ludHM7XHJcbi8vICAgICAgICAgICAgIHRlYW0uYnV0c19tYXJxdWVzICs9IHNjb3JlO1xyXG4vLyAgICAgICAgICAgICB0ZWFtLmJ1dHNfZW5jYWlzc2VzICs9IGFkdmVyc2FpcmVTY29yZTtcclxuLy8gICAgICAgICAgICAgdGVhbS5kaWZmZXJlbmNlX2J1dHMgKz0gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmU7XHJcbi8vICAgICAgICAgICB9XHJcbi8vICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLnB1c2goe1xyXG4vLyAgICAgICAgICAgICBub21fZXF1aXBlOiBlcXVpcGUsXHJcbi8vICAgICAgICAgICAgIHBvaW50cyxcclxuLy8gICAgICAgICAgICAgbWo6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBtYXRjaEpvdWUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIHY6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyB2aWN0b2lyZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgICAgZDogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IGRlZmFpdGUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIGJ1dHNfbWFycXVlczogbm9tX3Nwb3J0ICE9PSBcImJhc2tldGJhbGxcIiA/IHNjb3JlIDogdW5kZWZpbmVkLFxyXG4vLyAgICAgICAgICAgICBidXRzX2VuY2Fpc3Nlczogbm9tX3Nwb3J0ICE9PSBcImJhc2tldGJhbGxcIiA/IGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgICAgZGlmZmVyZW5jZV9idXRzOiBub21fc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgLSBhZHZlcnNhaXJlU2NvcmUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIHBvaW50c19tYXJxdWVzOiBub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgOiB1bmRlZmluZWQsXHJcbi8vICAgICAgICAgICAgIHBvaW50c19jb25jZWRlczogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBzY29yZSAtIGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuLy8gICAgICAgICAgIH0pO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgfSk7XHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyDwn5SBIENhbGN1bCBkdSBjbGFzc2VtZW50IGfDqW7DqXJhbCAoZnVzaW9uIGRlIHRvdXMgbGVzIG1hdGNocylcclxuLy8gICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRQYXJQaGFzZSkuZm9yRWFjaCgocGhhc2VLZXkpID0+IHtcclxuLy8gICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XSkuZm9yRWFjaCgoam91cm5lZUtleSkgPT4ge1xyXG4vLyAgICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV0pLmZvckVhY2goKHBvdWxlS2V5KSA9PiB7XHJcbi8vICAgICAgICAgICBjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldW2pvdXJuZWVLZXldW3BvdWxlS2V5XS5mb3JFYWNoKCh0ZWFtKSA9PiB7XHJcbi8vICAgICAgICAgICAgIGNvbnN0IGVxdWlwZUtleSA9IHRlYW0ubm9tX2VxdWlwZTtcclxuLy8gICAgICAgICAgICAgaWYgKCFjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldKSB7XHJcbi8vICAgICAgICAgICAgICAgY2xhc3NlbWVudEdlbmVyYWxbZXF1aXBlS2V5XSA9IHsgLi4udGVhbSB9O1xyXG4vLyAgICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRlYW0pLmZvckVhY2goKHN0YXQpID0+IHtcclxuLy8gICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVhbVtzdGF0XSA9PT0gXCJudW1iZXJcIikge1xyXG4vLyAgICAgICAgICAgICAgICAgICBjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldW3N0YXRdICs9IHRlYW1bc3RhdF07XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgIH0pO1xyXG4vLyAgICAgICAgIH0pO1xyXG4vLyAgICAgICB9KTtcclxuLy8gICAgIH0pO1xyXG5cclxuLy8gICAgIC8vIPCflIEgTm9ybWFsaXNhdGlvbiBkdSBjbGFzc2VtZW50IGfDqW7DqXJhbCBzZWxvbiBsZSBzcG9ydFxyXG4vLyAgICAgY29uc3QgY2xhc3NlbWVudEdlbmVyYWxOb3JtYWxpc2UgPSBPYmplY3QudmFsdWVzKGNsYXNzZW1lbnRHZW5lcmFsKS5tYXAoKHRlYW0pID0+IHtcclxuLy8gICAgICAgY29uc3QgYmFzZSA9IHtcclxuLy8gICAgICAgICBub21fZXF1aXBlOiB0ZWFtLm5vbV9lcXVpcGUsXHJcbi8vICAgICAgICAgcG9pbnRzOiB0ZWFtLnBvaW50cyA/PyAwLFxyXG4vLyAgICAgICB9O1xyXG5cclxuLy8gICAgICAgaWYgKG5vbV9zcG9ydCA9PT0gXCJww6l0YW5xdWVcIikge1xyXG4vLyAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAuLi5iYXNlLFxyXG4vLyAgICAgICAgICAgcG9pbnRzX21hcnF1ZXM6IHRlYW0uYnV0c19tYXJxdWVzID8/IDAsXHJcbi8vICAgICAgICAgICBwb2ludHNfY29uY2VkZXM6IHRlYW0uYnV0c19lbmNhaXNzZXMgPz8gMCxcclxuLy8gICAgICAgICAgIGRpZmZlcmVuY2VfcG9pbnRzOiB0ZWFtLmRpZmZlcmVuY2VfYnV0cyA/PyAwLFxyXG4vLyAgICAgICAgIH07XHJcbi8vICAgICAgIH0gZWxzZSBpZiAobm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIikge1xyXG4vLyAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAuLi5iYXNlLFxyXG4vLyAgICAgICAgICAgbWo6IHRlYW0ubWogPz8gMCxcclxuLy8gICAgICAgICAgIHY6IHRlYW0udiA/PyAwLFxyXG4vLyAgICAgICAgICAgZDogdGVhbS5kID8/IDAsXHJcbi8vICAgICAgICAgICBwb2ludHNfbWFycXVlczogdGVhbS5wb2ludHNfbWFycXVlcyA/PyAwLFxyXG4vLyAgICAgICAgICAgcG9pbnRzX2NvbmNlZGVzOiB0ZWFtLnBvaW50c19jb25jZWRlcyA/PyAwLFxyXG4vLyAgICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IHRlYW0uZGlmZmVyZW5jZV9wb2ludHMgPz8gMCxcclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAuLi5iYXNlLFxyXG4vLyAgICAgICAgICAgYnV0c19tYXJxdWVzOiB0ZWFtLmJ1dHNfbWFycXVlcyA/PyAwLFxyXG4vLyAgICAgICAgICAgYnV0c19lbmNhaXNzZXM6IHRlYW0uYnV0c19lbmNhaXNzZXMgPz8gMCxcclxuLy8gICAgICAgICAgIGRpZmZlcmVuY2VfYnV0czogdGVhbS5kaWZmZXJlbmNlX2J1dHMgPz8gMCxcclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICAvLyDwn5SBIE5vcm1hbGlzYXRpb24gZHUgY2xhc3NlbWVudCBqb3VybmFsaWVyIChwYXIgcGhhc2UpXHJcbi8vICAgICBmdW5jdGlvbiBub3JtYWxpc2VyQ2xhc3NlbWVudChjbGFzc2VtZW50LCBzcG9ydCkge1xyXG4vLyAgICAgICBjb25zdCBub3V2ZWF1Q2xhc3NlbWVudCA9IHt9O1xyXG5cclxuLy8gICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudCkuZm9yRWFjaChwaGFzZSA9PiB7XHJcbi8vICAgICAgICAgbm91dmVhdUNsYXNzZW1lbnRbcGhhc2VdID0ge307XHJcbi8vICAgICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFtwaGFzZV0pLmZvckVhY2goam91cm5lZSA9PiB7XHJcbi8vICAgICAgICAgICBub3V2ZWF1Q2xhc3NlbWVudFtwaGFzZV1bam91cm5lZV0gPSB7fTtcclxuLy8gICAgICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZW1lbnRbcGhhc2VdW2pvdXJuZWVdKS5mb3JFYWNoKHBvdWxlID0+IHtcclxuLy8gICAgICAgICAgICAgbm91dmVhdUNsYXNzZW1lbnRbcGhhc2VdW2pvdXJuZWVdW3BvdWxlXSA9IGNsYXNzZW1lbnRbcGhhc2VdW2pvdXJuZWVdW3BvdWxlXS5tYXAodGVhbSA9PiB7XHJcbi8vICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHtcclxuLy8gICAgICAgICAgICAgICAgIG5vbV9lcXVpcGU6IHRlYW0ubm9tX2VxdWlwZSxcclxuLy8gICAgICAgICAgICAgICAgIHBvaW50czogdGVhbS5wb2ludHMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICB9O1xyXG5cclxuLy8gICAgICAgICAgICAgICBpZiAoc3BvcnQgPT09IFwicMOpdGFucXVlXCIpIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAgICAgICAgIC4uLmJhc2UsXHJcbi8vICAgICAgICAgICAgICAgICAgIHBvaW50c19tYXJxdWVzOiB0ZWFtLmJ1dHNfbWFycXVlcyA/PyAwLFxyXG4vLyAgICAgICAgICAgICAgICAgICBwb2ludHNfY29uY2VkZXM6IHRlYW0uYnV0c19lbmNhaXNzZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IHRlYW0uZGlmZmVyZW5jZV9idXRzID8/IDAsXHJcbi8vICAgICAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiKSB7XHJcbi8vICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4vLyAgICAgICAgICAgICAgICAgICAuLi5iYXNlLFxyXG4vLyAgICAgICAgICAgICAgICAgICBtajogdGVhbS5taiA/PyAwLFxyXG4vLyAgICAgICAgICAgICAgICAgICB2OiB0ZWFtLnYgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgZDogdGVhbS5kID8/IDAsXHJcbi8vICAgICAgICAgICAgICAgICAgIHBvaW50c19tYXJxdWVzOiB0ZWFtLnBvaW50c19tYXJxdWVzID8/IDAsXHJcbi8vICAgICAgICAgICAgICAgICAgIHBvaW50c19jb25jZWRlczogdGVhbS5wb2ludHNfY29uY2VkZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IHRlYW0uZGlmZmVyZW5jZV9wb2ludHMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAgICAgICAgIC4uLmJhc2UsXHJcbi8vICAgICAgICAgICAgICAgICAgIGJ1dHNfbWFycXVlczogdGVhbS5idXRzX21hcnF1ZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgYnV0c19lbmNhaXNzZXM6IHRlYW0uYnV0c19lbmNhaXNzZXMgPz8gMCxcclxuLy8gICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZV9idXRzOiB0ZWFtLmRpZmZlcmVuY2VfYnV0cyA/PyAwLFxyXG4vLyAgICAgICAgICAgICAgICAgfTtcclxuLy8gICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIH0pO1xyXG4vLyAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgcmV0dXJuIG5vdXZlYXVDbGFzc2VtZW50O1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIC8vIOKchSBFbnZvaSBmaW5hbFxyXG4vLyAgICAgcmVzLmpzb24oe1xyXG4vLyAgICAgICBub21fZXZlbnQ6IHJlc3VsdHNbMF0ubm9tX2V2ZW50LFxyXG4vLyAgICAgICBjbGFzc2VtZW50OiBub3JtYWxpc2VyQ2xhc3NlbWVudChjbGFzc2VtZW50UGFyUGhhc2UsIG5vbV9zcG9ydCksXHJcbi8vICAgICAgIGNsYXNzZW1lbnRfZ2VuZXJhbDogY2xhc3NlbWVudEdlbmVyYWxOb3JtYWxpc2Uuc29ydCgoYSwgYikgPT4gYi5wb2ludHMgLSBhLnBvaW50cyksXHJcbi8vICAgICAgIHNwb3J0OiBub21fc3BvcnRcclxuLy8gICAgIH0pO1xyXG5cclxuLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGR1IGNsYXNzZW1lbnQgOlwiLCBlcnJvcik7XHJcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkVycmV1ciBzZXJ2ZXVyXCIgfSk7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5leHBvcnRzLmdldENsYXNzZW1lbnRCeUV2ZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBldmVudElkIH0gPSByZXEucGFyYW1zO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGRiKFwicmVzdWx0YXRcIilcclxuICAgICAgLmpvaW4oXCJyZW5jb250cmVcIiwgXCJyZXN1bHRhdC5pZF9yZW5jb250cmVcIiwgXCI9XCIsIFwicmVuY29udHJlLmlkX3JlbmNvbnRyZVwiKVxyXG4gICAgICAuam9pbihcImV2ZW5lbWVudFwiLCBcInJlbmNvbnRyZS5pZF9ldmVuZW1lbnRcIiwgXCI9XCIsIFwiZXZlbmVtZW50LmlkX2V2ZW5lbWVudFwiKVxyXG4gICAgICAuam9pbihcInBvdWxlc1wiLCBcInJlbmNvbnRyZS5pZF9wb3VsZVwiLCBcIj1cIiwgXCJwb3VsZXMuaWRfcG91bGVcIilcclxuICAgICAgLndoZXJlKFwicmVuY29udHJlLmlkX2V2ZW5lbWVudFwiLCBldmVudElkKVxyXG4gICAgICAuc2VsZWN0KFxyXG4gICAgICAgIFwiZXZlbmVtZW50Lm5vbV9ldmVudFwiLFxyXG4gICAgICAgIFwiZXZlbmVtZW50Lm5vbV9zcG9ydFwiLFxyXG4gICAgICAgIFwicmVuY29udHJlLnBoYXNlXCIsXHJcbiAgICAgICAgXCJyZW5jb250cmUuam91cm5lZVwiLFxyXG4gICAgICAgIFwicmVuY29udHJlLnRvdXJfZmluYWxcIiwgIC8vIEFqb3V0IGR1IGNoYW1wICd0b3VyX2ZpbmFsJ1xyXG4gICAgICAgIFwicG91bGVzLm5vbV9wb3VsZVwiLFxyXG4gICAgICAgIFwicmVuY29udHJlLnBhcnRpY2lwYW50X2FcIixcclxuICAgICAgICBcInJlbmNvbnRyZS5wYXJ0aWNpcGFudF9iXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5zY29yZV9BXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5zY29yZV9CXCIsXHJcbiAgICAgICAgXCJyZXN1bHRhdC5wb2ludF92aWN0b2lyZVwiLFxyXG4gICAgICAgIFwicmVzdWx0YXQucG9pbnRfbWF0Y2hudWxcIixcclxuICAgICAgICBcInJlc3VsdGF0LnBvaW50X2RlZmFpdGVcIlxyXG4gICAgICApO1xyXG5cclxuICAgIGlmICghcmVzdWx0cy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBdWN1biBjbGFzc2VtZW50IGRpc3BvbmlibGUuXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm9tX3Nwb3J0ID0gKHJlc3VsdHNbMF0ubm9tX3Nwb3J0ID8/IFwiaW5jb25udVwiKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGxldCBjbGFzc2VtZW50UGFyUGhhc2UgPSB7fTtcclxuICAgIGxldCBjbGFzc2VtZW50R2VuZXJhbCA9IHt9O1xyXG5cclxuICAgIHJlc3VsdHMuZm9yRWFjaCgobWF0Y2gpID0+IHtcclxuICAgICAgY29uc3QgeyBwaGFzZSwgam91cm5lZSwgdG91cl9maW5hbCwgbm9tX3BvdWxlIH0gPSBtYXRjaDsgLy8gUsOpY3Vww6lyZXIgdG91cl9maW5hbCBpY2lcclxuICAgICAgY29uc3QgcGhhc2VLZXkgPSBgUGhhc2U6ICR7cGhhc2V9YDtcclxuICAgICAgY29uc3Qgam91cm5lZUtleSA9IGBKb3VybsOpZSAke2pvdXJuZWV9YDtcclxuICAgICAgY29uc3QgcG91bGVLZXkgPSBgUG91bGUgJHtub21fcG91bGV9YDtcclxuXHJcbiAgICAgIGlmICghY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XSkgY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XSA9IHt9O1xyXG4gICAgICBpZiAoIWNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV0pIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV0gPSB7fTtcclxuICAgICAgaWYgKCFjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldW2pvdXJuZWVLZXldW3BvdWxlS2V5XSkgY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0gPSBbXTtcclxuXHJcbiAgICAgIFttYXRjaC5wYXJ0aWNpcGFudF9hLCBtYXRjaC5wYXJ0aWNpcGFudF9iXS5mb3JFYWNoKChlcXVpcGUsIGkpID0+IHtcclxuICAgICAgICBjb25zdCBzY29yZSA9IGkgPT09IDAgPyBtYXRjaC5zY29yZV9BIDogbWF0Y2guc2NvcmVfQjtcclxuICAgICAgICBjb25zdCBhZHZlcnNhaXJlU2NvcmUgPSBpID09PSAwID8gbWF0Y2guc2NvcmVfQiA6IG1hdGNoLnNjb3JlX0E7XHJcbiAgICAgICAgY29uc3QgdmljdG9pcmUgPSBzY29yZSA+IGFkdmVyc2FpcmVTY29yZSA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGRlZmFpdGUgPSBzY29yZSA8IGFkdmVyc2FpcmVTY29yZSA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoSm91ZSA9IDE7XHJcblxyXG4gICAgICAgIGxldCBwb2ludHMgPSAwO1xyXG4gICAgICAgIGlmIChzY29yZSA+IGFkdmVyc2FpcmVTY29yZSkgcG9pbnRzID0gbWF0Y2gucG9pbnRfdmljdG9pcmU7XHJcbiAgICAgICAgZWxzZSBpZiAoc2NvcmUgPT09IGFkdmVyc2FpcmVTY29yZSkgcG9pbnRzID0gbWF0Y2gucG9pbnRfbWF0Y2hudWw7XHJcbiAgICAgICAgZWxzZSBwb2ludHMgPSBtYXRjaC5wb2ludF9kZWZhaXRlO1xyXG5cclxuICAgICAgICBjb25zdCB0ZWFtID0gY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0uZmluZCgoZSkgPT4gZS5ub21fZXF1aXBlID09PSBlcXVpcGUpO1xyXG5cclxuICAgICAgICBpZiAodGVhbSkge1xyXG4gICAgICAgICAgaWYgKG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIpIHtcclxuICAgICAgICAgICAgdGVhbS5taiArPSBtYXRjaEpvdWU7XHJcbiAgICAgICAgICAgIHRlYW0udiArPSB2aWN0b2lyZTtcclxuICAgICAgICAgICAgdGVhbS5kICs9IGRlZmFpdGU7XHJcbiAgICAgICAgICAgIHRlYW0ucG9pbnRzX21hcnF1ZXMgKz0gc2NvcmU7XHJcbiAgICAgICAgICAgIHRlYW0ucG9pbnRzX2NvbmNlZGVzICs9IGFkdmVyc2FpcmVTY29yZTtcclxuICAgICAgICAgICAgdGVhbS5kaWZmZXJlbmNlX3BvaW50cyArPSBzY29yZSAtIGFkdmVyc2FpcmVTY29yZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRlYW0ucG9pbnRzICs9IHBvaW50cztcclxuICAgICAgICAgICAgdGVhbS5idXRzX21hcnF1ZXMgKz0gc2NvcmU7XHJcbiAgICAgICAgICAgIHRlYW0uYnV0c19lbmNhaXNzZXMgKz0gYWR2ZXJzYWlyZVNjb3JlO1xyXG4gICAgICAgICAgICB0ZWFtLmRpZmZlcmVuY2VfYnV0cyArPSBzY29yZSAtIGFkdmVyc2FpcmVTY29yZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XVtwb3VsZUtleV0ucHVzaCh7XHJcbiAgICAgICAgICAgIG5vbV9lcXVpcGU6IGVxdWlwZSxcclxuICAgICAgICAgICAgcG9pbnRzLFxyXG4gICAgICAgICAgICBtajogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IG1hdGNoSm91ZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdjogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IHZpY3RvaXJlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkOiBub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiID8gZGVmYWl0ZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYnV0c19tYXJxdWVzOiBub21fc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gc2NvcmUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGJ1dHNfZW5jYWlzc2VzOiBub21fc3BvcnQgIT09IFwiYmFza2V0YmFsbFwiID8gYWR2ZXJzYWlyZVNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkaWZmZXJlbmNlX2J1dHM6IG5vbV9zcG9ydCAhPT0gXCJiYXNrZXRiYWxsXCIgPyBzY29yZSAtIGFkdmVyc2FpcmVTY29yZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcG9pbnRzX21hcnF1ZXM6IG5vbV9zcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIgPyBzY29yZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcG9pbnRzX2NvbmNlZGVzOiBub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiID8gYWR2ZXJzYWlyZVNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkaWZmZXJlbmNlX3BvaW50czogbm9tX3Nwb3J0ID09PSBcImJhc2tldGJhbGxcIiA/IHNjb3JlIC0gYWR2ZXJzYWlyZVNjb3JlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIPCflIEgQ2FsY3VsIGR1IGNsYXNzZW1lbnQgZ8OpbsOpcmFsIChmdXNpb24gZGUgdG91cyBsZXMgbWF0Y2hzKVxyXG4gICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhclBoYXNlKS5mb3JFYWNoKChwaGFzZUtleSkgPT4ge1xyXG4gICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50UGFyUGhhc2VbcGhhc2VLZXldKS5mb3JFYWNoKChqb3VybmVlS2V5KSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFBhclBoYXNlW3BoYXNlS2V5XVtqb3VybmVlS2V5XSkuZm9yRWFjaCgocG91bGVLZXkpID0+IHtcclxuICAgICAgICAgIGNsYXNzZW1lbnRQYXJQaGFzZVtwaGFzZUtleV1bam91cm5lZUtleV1bcG91bGVLZXldLmZvckVhY2goKHRlYW0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXF1aXBlS2V5ID0gdGVhbS5ub21fZXF1aXBlO1xyXG4gICAgICAgICAgICBpZiAoIWNsYXNzZW1lbnRHZW5lcmFsW2VxdWlwZUtleV0pIHtcclxuICAgICAgICAgICAgICBjbGFzc2VtZW50R2VuZXJhbFtlcXVpcGVLZXldID0geyAuLi50ZWFtIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgT2JqZWN0LmtleXModGVhbSkuZm9yRWFjaCgoc3RhdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZWFtW3N0YXRdID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzZW1lbnRHZW5lcmFsW2VxdWlwZUtleV1bc3RhdF0gKz0gdGVhbVtzdGF0XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g8J+UgSBOb3JtYWxpc2F0aW9uIGR1IGNsYXNzZW1lbnQgZ8OpbsOpcmFsIHNlbG9uIGxlIHNwb3J0XHJcbiAgICBjb25zdCBjbGFzc2VtZW50R2VuZXJhbE5vcm1hbGlzZSA9IE9iamVjdC52YWx1ZXMoY2xhc3NlbWVudEdlbmVyYWwpLm1hcCgodGVhbSkgPT4ge1xyXG4gICAgICBjb25zdCBiYXNlID0ge1xyXG4gICAgICAgIG5vbV9lcXVpcGU6IHRlYW0ubm9tX2VxdWlwZSxcclxuICAgICAgICBwb2ludHM6IHRlYW0ucG9pbnRzID8/IDAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAobm9tX3Nwb3J0ID09PSBcInDDqXRhbnF1ZVwiKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLmJhc2UsXHJcbiAgICAgICAgICBwb2ludHNfbWFycXVlczogdGVhbS5idXRzX21hcnF1ZXMgPz8gMCxcclxuICAgICAgICAgIHBvaW50c19jb25jZWRlczogdGVhbS5idXRzX2VuY2Fpc3NlcyA/PyAwLFxyXG4gICAgICAgICAgZGlmZmVyZW5jZV9wb2ludHM6IHRlYW0uZGlmZmVyZW5jZV9idXRzID8/IDAsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIGlmIChub21fc3BvcnQgPT09IFwiYmFza2V0YmFsbFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLmJhc2UsXHJcbiAgICAgICAgICBtajogdGVhbS5taiA/PyAwLFxyXG4gICAgICAgICAgdjogdGVhbS52ID8/IDAsXHJcbiAgICAgICAgICBkOiB0ZWFtLmQgPz8gMCxcclxuICAgICAgICAgIHBvaW50c19tYXJxdWVzOiB0ZWFtLnBvaW50c19tYXJxdWVzID8/IDAsXHJcbiAgICAgICAgICBwb2ludHNfY29uY2VkZXM6IHRlYW0ucG9pbnRzX2NvbmNlZGVzID8/IDAsXHJcbiAgICAgICAgICBkaWZmZXJlbmNlX3BvaW50czogdGVhbS5kaWZmZXJlbmNlX3BvaW50cyA/PyAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLmJhc2UsXHJcbiAgICAgICAgICBidXRzX21hcnF1ZXM6IHRlYW0uYnV0c19tYXJxdWVzID8/IDAsXHJcbiAgICAgICAgICBidXRzX2VuY2Fpc3NlczogdGVhbS5idXRzX2VuY2Fpc3NlcyA/PyAwLFxyXG4gICAgICAgICAgZGlmZmVyZW5jZV9idXRzOiB0ZWFtLmRpZmZlcmVuY2VfYnV0cyA/PyAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIPCflIEgTm9ybWFsaXNhdGlvbiBkdSBjbGFzc2VtZW50IGpvdXJuYWxpZXIgKHBhciBwaGFzZSlcclxuICAgIGZ1bmN0aW9uIG5vcm1hbGlzZXJDbGFzc2VtZW50KGNsYXNzZW1lbnQsIHNwb3J0KSB7XHJcbiAgICAgIGNvbnN0IG5vdXZlYXVDbGFzc2VtZW50ID0ge307XHJcblxyXG4gICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50KS5mb3JFYWNoKHBoYXNlID0+IHtcclxuICAgICAgICBub3V2ZWF1Q2xhc3NlbWVudFtwaGFzZV0gPSB7fTtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbGFzc2VtZW50W3BoYXNlXSkuZm9yRWFjaChqb3VybmVlID0+IHtcclxuICAgICAgICAgIG5vdXZlYXVDbGFzc2VtZW50W3BoYXNlXVtqb3VybmVlXSA9IHt9O1xyXG4gICAgICAgICAgT2JqZWN0LmtleXMoY2xhc3NlbWVudFtwaGFzZV1bam91cm5lZV0pLmZvckVhY2gocG91bGUgPT4ge1xyXG4gICAgICAgICAgICBub3V2ZWF1Q2xhc3NlbWVudFtwaGFzZV1bam91cm5lZV1bcG91bGVdID0gY2xhc3NlbWVudFtwaGFzZV1bam91cm5lZV1bcG91bGVdLm1hcCh0ZWFtID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBiYXNlID0ge1xyXG4gICAgICAgICAgICAgICAgbm9tX2VxdWlwZTogdGVhbS5ub21fZXF1aXBlLFxyXG4gICAgICAgICAgICAgICAgcG9pbnRzOiB0ZWFtLnBvaW50cyA/PyAwLFxyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChzcG9ydCA9PT0gXCJww6l0YW5xdWVcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgLi4uYmFzZSxcclxuICAgICAgICAgICAgICAgICAgcG9pbnRzX21hcnF1ZXM6IHRlYW0uYnV0c19tYXJxdWVzID8/IDAsXHJcbiAgICAgICAgICAgICAgICAgIHBvaW50c19jb25jZWRlczogdGVhbS5idXRzX2VuY2Fpc3NlcyA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlX3BvaW50czogdGVhbS5kaWZmZXJlbmNlX2J1dHMgPz8gMCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcG9ydCA9PT0gXCJiYXNrZXRiYWxsXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgIC4uLmJhc2UsXHJcbiAgICAgICAgICAgICAgICAgIG1qOiB0ZWFtLm1qID8/IDAsXHJcbiAgICAgICAgICAgICAgICAgIHY6IHRlYW0udiA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICBkOiB0ZWFtLmQgPz8gMCxcclxuICAgICAgICAgICAgICAgICAgcG9pbnRzX21hcnF1ZXM6IHRlYW0ucG9pbnRzX21hcnF1ZXMgPz8gMCxcclxuICAgICAgICAgICAgICAgICAgcG9pbnRzX2NvbmNlZGVzOiB0ZWFtLnBvaW50c19jb25jZWRlcyA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlX3BvaW50czogdGVhbS5kaWZmZXJlbmNlX3BvaW50cyA/PyAwLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgLi4uYmFzZSxcclxuICAgICAgICAgICAgICAgICAgYnV0c19tYXJxdWVzOiB0ZWFtLmJ1dHNfbWFycXVlcyA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICBidXRzX2VuY2Fpc3NlczogdGVhbS5idXRzX2VuY2Fpc3NlcyA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlX2J1dHM6IHRlYW0uZGlmZmVyZW5jZV9idXRzID8/IDAsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gbm91dmVhdUNsYXNzZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g4pyFIEVudm9pIGZpbmFsXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG5vbV9ldmVudDogcmVzdWx0c1swXS5ub21fZXZlbnQsXHJcbiAgICAgIGNsYXNzZW1lbnQ6IG5vcm1hbGlzZXJDbGFzc2VtZW50KGNsYXNzZW1lbnRQYXJQaGFzZSwgbm9tX3Nwb3J0KSxcclxuICAgICAgY2xhc3NlbWVudF9nZW5lcmFsOiBjbGFzc2VtZW50R2VuZXJhbE5vcm1hbGlzZS5zb3J0KChhLCBiKSA9PiBiLnBvaW50cyAtIGEucG9pbnRzKSxcclxuICAgICAgc3BvcnQ6IG5vbV9zcG9ydCxcclxuICAgICAgdG91cl9maW5hbDogcmVzdWx0c1swXS50b3VyX2ZpbmFsIC8vIEFqb3V0ZXIgdG91cl9maW5hbCDDoCBsYSByw6lwb25zZVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZHUgY2xhc3NlbWVudCA6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiRXJyZXVyIHNlcnZldXJcIiB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFFOztBQUc5QkMsT0FBTyxDQUFDQyxlQUFlLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDNUMsTUFBTTtJQUFFQztFQUFRLENBQUMsR0FBR0YsR0FBRyxDQUFDRyxNQUFNO0VBRTlCLElBQUk7SUFDRixNQUFNQyxPQUFPLEdBQUcsTUFBTVIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUNqQ1MsSUFBSSxDQUFDLFdBQVcsRUFBRSx1QkFBdUIsRUFBRSxHQUFHLEVBQUUsd0JBQXdCLENBQUMsQ0FDekVDLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUosT0FBTyxDQUFDLENBQ3hDSyxNQUFNLENBQ0wsaUJBQWlCLEVBQ2pCLG1CQUFtQixFQUNuQiwwQkFBMEIsRUFDMUIsMkJBQTJCLEVBQzNCLHlCQUF5QixFQUN6Qix5QkFBeUIsRUFDekIsMEJBQTBCLEVBQzFCLGtCQUFr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QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFD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","map":{"version":3,"names":["db","require","exports","getEventResults","req","res","eventId","params","results","join","where","select","orderBy","json","error","console","status","getAllResults","length","message","getClassementByEventPhaseJournee","phase","journee","classement","raw","groupBy","sport","nom_sport","getClassementByEvent","toLowerCase","classementParPhase","classementGeneral","forEach","match","tour_final","nom_poule","phaseKey","journeeKey","pouleKey","participant_a","participant_b","equipe","i","score","score_A","score_B","adversaireScore","victoire","defaite","matchJoue","points","point_victoire","point_matchnul","point_defaite","team","find","e","nom_equipe","mj","v","d","points_marques","points_concedes","difference_points","buts_marques","buts_encaisses","difference_buts","push","undefined","Object","keys","equipeKey","stat","classementGeneralNormalise","values","map","base","normaliserClassement","nouveauClassement","poule","nom_event","classement_general","sort","a","b"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["ResultatsControler.js"],"sourcesContent":["const db = require('../db');  // Connexion √† MySQL avec Knex\r\n\r\n\r\nexports.getEventResults = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  try {\r\n    const results = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .where('rencontre.id_evenement', eventId)\r\n      .select(\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.date_rencontre',\r\n        'rencontre.heure_rencontre',\r\n        'rencontre.participant_a',\r\n        'rencontre.participant_b',\r\n        'rencontre.lieu_rencontre',\r\n        'resultat.score_A',\r\n        'resultat.score_B'\r\n      )\r\n      .orderBy(['rencontre.phase', 'rencontre.journee', 'rencontre.date_rencontre']);\r\n\r\n    res.json(results);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration des r√©sultats :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n\r\n// ‚úÖ R√©cup√©rer tous les r√©sultats pour tous les √©v√©nements\r\nexports.getAllResults = async (req, res) => {\r\n  try {\r\n    const results = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement')\r\n      .select(\r\n        'evenement.nom_event as eventName',\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.date_rencontre',\r\n        'rencontre.heure_rencontre',\r\n        'rencontre.participant_a',\r\n        'rencontre.participant_b',\r\n        'rencontre.lieu_rencontre',\r\n        'resultat.score_A',\r\n        'resultat.score_B'\r\n      )\r\n      .orderBy(['evenement.nom_event', 'rencontre.phase', 'rencontre.journee', 'rencontre.date_rencontre']);\r\n\r\n    if (results.length === 0) {\r\n      return res.status(404).json({ message: \"Aucun r√©sultat disponible.\" });\r\n    }\r\n\r\n    res.json(results);\r\n  } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration des r√©sultats :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\nexports.getClassementByEventPhaseJournee = async (req, res) => {\r\n  const { eventId, phase, journee } = req.params;\r\n\r\n  try {\r\n    const classement = await db('resultat')\r\n      .join('rencontre', 'resultat.id_rencontre', '=', 'rencontre.id_rencontre')\r\n      .join('evenement', 'rencontre.id_evenement', '=', 'evenement.id_evenement')\r\n      .where('rencontre.id_evenement', eventId)\r\n      .where('rencontre.phase', phase)\r\n      .where('rencontre.journee', journee)\r\n      .select(\r\n        'evenement.nom_sport', // ‚úÖ Ajout du type de sport\r\n        'rencontre.phase',\r\n        'rencontre.journee',\r\n        'rencontre.participant_a as equipe',\r\n        db.raw('SUM(resultat.score_A) as points'),\r\n        db.raw('SUM(resultat.score_A - resultat.score_B) as difference'),\r\n        db.raw('COUNT(resultat.id_rencontre) as matchs_joues')\r\n      )\r\n      .groupBy('rencontre.participant_a')\r\n      .orderBy('points', 'desc')\r\n      .orderBy('difference', 'desc');\r\n\r\n      res.json({ classement, sport: classement[0]?.nom_sport });\r\n    } catch (error) {\r\n    console.error(\"‚ùå Erreur lors de la r√©cup√©ration du classement :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n\r\n// ‚úÖ R√©cup√©rer le classement par √©v√©nement\r\n\r\n// exports.getClassementByEvent = async (req, res) => {\r\n//   const { eventId } = req.params;\r\n\r\n//   try {\r\n//     const results = await db(\"resultat\")\r\n//       .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\r\n//       .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n//       .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\r\n//       .where(\"rencontre.id_evenement\", eventId)\r\n//       .select(\r\n//         \"evenement.nom_event\",\r\n//         \"evenement.nom_sport\", // doit √™tre bien renseign√© dans ta DB\r\n//         \"rencontre.phase\",\r\n//         \"rencontre.journee\",\r\n//         \"poules.nom_poule\",\r\n//         \"rencontre.participant_a\",\r\n//         \"rencontre.participant_b\",\r\n//         \"resultat.score_A\",\r\n//         \"resultat.score_B\",\r\n//         \"resultat.point_victoire\",\r\n//         \"resultat.point_matchnul\",\r\n//         \"resultat.point_defaite\"\r\n//       );\r\n\r\n//     if (!results.length) {\r\n//       return res.status(404).json({ message: \"Aucun classement disponible.\" });\r\n//     }\r\n\r\n//     const nom_sport = (results[0].nom_sport ?? \"inconnu\").toLowerCase();\r\n\r\n//     let classementParPhase = {};\r\n//     let classementGeneral = {};\r\n\r\n//     results.forEach((match) => {\r\n//       const { phase, journee, nom_poule } = match;\r\n//       const phaseKey = `Phase: ${phase}`;\r\n//       const journeeKey = `Journ√©e ${journee}`;\r\n//       const pouleKey = `Poule ${nom_poule}`;\r\n\r\n//       if (!classementParPhase[phaseKey]) classementParPhase[phaseKey] = {};\r\n//       if (!classementParPhase[phaseKey][journeeKey]) classementParPhase[phaseKey][journeeKey] = {};\r\n//       if (!classementParPhase[phaseKey][journeeKey][pouleKey]) classementParPhase[phaseKey][journeeKey][pouleKey] = [];\r\n\r\n//       [match.participant_a, match.participant_b].forEach((equipe, i) => {\r\n//         const score = i === 0 ? match.score_A : match.score_B;\r\n//         const adversaireScore = i === 0 ? match.score_B : match.score_A;\r\n//         const victoire = score > adversaireScore ? 1 : 0;\r\n//         const defaite = score < adversaireScore ? 1 : 0;\r\n//         const matchJoue = 1;\r\n\r\n//         let points = 0;\r\n//         if (score > adversaireScore) points = match.point_victoire;\r\n//         else if (score === adversaireScore) points = match.point_matchnul;\r\n//         else points = match.point_defaite;\r\n\r\n//         const team = classementParPhase[phaseKey][journeeKey][pouleKey].find((e) => e.nom_equipe === equipe);\r\n\r\n//         if (team) {\r\n//           if (nom_sport === \"basketball\") {\r\n//             team.mj += matchJoue;\r\n//             team.v += victoire;\r\n//             team.d += defaite;\r\n//             team.points_marques += score;\r\n//             team.points_concedes += adversaireScore;\r\n//             team.difference_points += score - adversaireScore;\r\n//           } else {\r\n//             team.points += points;\r\n//             team.buts_marques += score;\r\n//             team.buts_encaisses += adversaireScore;\r\n//             team.difference_buts += score - adversaireScore;\r\n//           }\r\n//         } else {\r\n//           classementParPhase[phaseKey][journeeKey][pouleKey].push({\r\n//             nom_equipe: equipe,\r\n//             points,\r\n//             mj: nom_sport === \"basketball\" ? matchJoue : undefined,\r\n//             v: nom_sport === \"basketball\" ? victoire : undefined,\r\n//             d: nom_sport === \"basketball\" ? defaite : undefined,\r\n//             buts_marques: nom_sport !== \"basketball\" ? score : undefined,\r\n//             buts_encaisses: nom_sport !== \"basketball\" ? adversaireScore : undefined,\r\n//             difference_buts: nom_sport !== \"basketball\" ? score - adversaireScore : undefined,\r\n//             points_marques: nom_sport === \"basketball\" ? score : undefined,\r\n//             points_concedes: nom_sport === \"basketball\" ? adversaireScore : undefined,\r\n//             difference_points: nom_sport === \"basketball\" ? score - adversaireScore : undefined,\r\n//           });\r\n//         }\r\n//       });\r\n//     });\r\n\r\n//     // Classement g√©n√©ral (fusion de toutes les phases)\r\n//     Object.keys(classementParPhase).forEach((phaseKey) => {\r\n//       Object.keys(classementParPhase[phaseKey]).forEach((journeeKey) => {\r\n//         Object.keys(classementParPhase[phaseKey][journeeKey]).forEach((pouleKey) => {\r\n//           classementParPhase[phaseKey][journeeKey][pouleKey].forEach((team) => {\r\n//             const equipeKey = team.nom_equipe;\r\n//             if (!classementGeneral[equipeKey]) {\r\n//               classementGeneral[equipeKey] = { ...team };\r\n//             } else {\r\n//               Object.keys(team).forEach((stat) => {\r\n//                 if (typeof team[stat] === \"number\") {\r\n//                   classementGeneral[equipeKey][stat] += team[stat];\r\n//                 }\r\n//               });\r\n//             }\r\n//           });\r\n//         });\r\n//       });\r\n//     });\r\n\r\n//     // üîÅ Normalisation des noms de champs selon le sport\r\n//     function normaliserClassement(classement, sport) {\r\n//       const nouveauClassement = {};\r\n\r\n//       Object.keys(classement).forEach(phase => {\r\n//         nouveauClassement[phase] = {};\r\n//         Object.keys(classement[phase]).forEach(journee => {\r\n//           nouveauClassement[phase][journee] = {};\r\n//           Object.keys(classement[phase][journee]).forEach(poule => {\r\n//             nouveauClassement[phase][journee][poule] = classement[phase][journee][poule].map(team => {\r\n//               const base = {\r\n//                 nom_equipe: team.nom_equipe,\r\n//                 points: team.points ?? 0,\r\n//               };\r\n\r\n//               if (sport.toLowerCase() === \"p√©tanque\") {\r\n//                 return {\r\n//                   ...base,\r\n//                   points_marques: team.buts_marques ?? 0,\r\n//                   points_concedes: team.buts_encaisses ?? 0,\r\n//                   difference_points: team.difference_buts ?? 0\r\n//                 };\r\n//               } else if (sport.toLowerCase() === \"basketball\") {\r\n//                 return {\r\n//                   ...base,\r\n//                   mj: team.mj ?? 0,\r\n//                   v: team.v ?? 0,\r\n//                   d: team.d ?? 0,\r\n//                   points_marques: team.points_marques ?? 0,\r\n//                   points_concedes: team.points_concedes ?? 0,\r\n//                   difference_points: team.difference_points ?? 0\r\n//                 };\r\n//               } else {\r\n//                 return {\r\n//                   ...base,\r\n//                   buts_marques: team.buts_marques ?? 0,\r\n//                   buts_encaisses: team.buts_encaisses ?? 0,\r\n//                   difference_buts: team.difference_buts ?? 0\r\n//                 };\r\n//               }\r\n//             });\r\n//           });\r\n//         });\r\n//       });\r\n\r\n//       return nouveauClassement;\r\n//     }\r\n\r\n//     // ‚úÖ Envoi final\r\n//     res.json({\r\n//       nom_event: results[0].nom_event,\r\n//       classement: normaliserClassement(classementParPhase, nom_sport),\r\n//       classement_general: Object.values(classementGeneral).sort((a, b) => b.points - a.points),\r\n//       sport: nom_sport\r\n//     });\r\n//   } catch (error) {\r\n//     console.error(\"Erreur lors de la r√©cup√©ration du classement :\", error);\r\n//     res.status(500).json({ error: \"Erreur serveur\" });\r\n//   }\r\n// };\r\n// exports.getClassementByEvent = async (req, res) => {\r\n//   const { eventId } = req.params;\r\n\r\n//   try {\r\n//     const results = await db(\"resultat\")\r\n//       .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\r\n//       .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n//       .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\r\n//       .where(\"rencontre.id_evenement\", eventId)\r\n//       .select(\r\n//         \"evenement.nom_event\",\r\n//         \"evenement.nom_sport\",\r\n//         \"rencontre.phase\",\r\n//         \"rencontre.journee\",\r\n//         \"poules.nom_poule\",\r\n//         \"rencontre.participant_a\",\r\n//         \"rencontre.participant_b\",\r\n//         \"resultat.score_A\",\r\n//         \"resultat.score_B\",\r\n//         \"resultat.point_victoire\",\r\n//         \"resultat.point_matchnul\",\r\n//         \"resultat.point_defaite\"\r\n//       );\r\n\r\n//     if (!results.length) {\r\n//       return res.status(404).json({ message: \"Aucun classement disponible.\" });\r\n//     }\r\n\r\n//     const nom_sport = (results[0].nom_sport ?? \"inconnu\").toLowerCase();\r\n\r\n//     let classementParPhase = {};\r\n//     let classementGeneral = {};\r\n\r\n//     results.forEach((match) => {\r\n//       const { phase, journee, nom_poule } = match;\r\n//       const phaseKey = `Phase: ${phase}`;\r\n//       const journeeKey = `Journ√©e ${journee}`;\r\n//       const pouleKey = `Poule ${nom_poule}`;\r\n\r\n//       if (!classementParPhase[phaseKey]) classementParPhase[phaseKey] = {};\r\n//       if (!classementParPhase[phaseKey][journeeKey]) classementParPhase[phaseKey][journeeKey] = {};\r\n//       if (!classementParPhase[phaseKey][journeeKey][pouleKey]) classementParPhase[phaseKey][journeeKey][pouleKey] = [];\r\n\r\n//       [match.participant_a, match.participant_b].forEach((equipe, i) => {\r\n//         const score = i === 0 ? match.score_A : match.score_B;\r\n//         const adversaireScore = i === 0 ? match.score_B : match.score_A;\r\n//         const victoire = score > adversaireScore ? 1 : 0;\r\n//         const defaite = score < adversaireScore ? 1 : 0;\r\n//         const matchJoue = 1;\r\n\r\n//         let points = 0;\r\n//         if (score > adversaireScore) points = match.point_victoire;\r\n//         else if (score === adversaireScore) points = match.point_matchnul;\r\n//         else points = match.point_defaite;\r\n\r\n//         const team = classementParPhase[phaseKey][journeeKey][pouleKey].find((e) => e.nom_equipe === equipe);\r\n\r\n//         if (team) {\r\n//           if (nom_sport === \"basketball\") {\r\n//             team.mj += matchJoue;\r\n//             team.v += victoire;\r\n//             team.d += defaite;\r\n//             team.points_marques += score;\r\n//             team.points_concedes += adversaireScore;\r\n//             team.difference_points += score - adversaireScore;\r\n//           } else {\r\n//             team.points += points;\r\n//             team.buts_marques += score;\r\n//             team.buts_encaisses += adversaireScore;\r\n//             team.difference_buts += score - adversaireScore;\r\n//           }\r\n//         } else {\r\n//           classementParPhase[phaseKey][journeeKey][pouleKey].push({\r\n//             nom_equipe: equipe,\r\n//             points,\r\n//             mj: nom_sport === \"basketball\" ? matchJoue : undefined,\r\n//             v: nom_sport === \"basketball\" ? victoire : undefined,\r\n//             d: nom_sport === \"basketball\" ? defaite : undefined,\r\n//             buts_marques: nom_sport !== \"basketball\" ? score : undefined,\r\n//             buts_encaisses: nom_sport !== \"basketball\" ? adversaireScore : undefined,\r\n//             difference_buts: nom_sport !== \"basketball\" ? score - adversaireScore : undefined,\r\n//             points_marques: nom_sport === \"basketball\" ? score : undefined,\r\n//             points_concedes: nom_sport === \"basketball\" ? adversaireScore : undefined,\r\n//             difference_points: nom_sport === \"basketball\" ? score - adversaireScore : undefined,\r\n//           });\r\n//         }\r\n//       });\r\n//     });\r\n\r\n//     // üîÅ Calcul du classement g√©n√©ral (fusion de tous les matchs)\r\n//     Object.keys(classementParPhase).forEach((phaseKey) => {\r\n//       Object.keys(classementParPhase[phaseKey]).forEach((journeeKey) => {\r\n//         Object.keys(classementParPhase[phaseKey][journeeKey]).forEach((pouleKey) => {\r\n//           classementParPhase[phaseKey][journeeKey][pouleKey].forEach((team) => {\r\n//             const equipeKey = team.nom_equipe;\r\n//             if (!classementGeneral[equipeKey]) {\r\n//               classementGeneral[equipeKey] = { ...team };\r\n//             } else {\r\n//               Object.keys(team).forEach((stat) => {\r\n//                 if (typeof team[stat] === \"number\") {\r\n//                   classementGeneral[equipeKey][stat] += team[stat];\r\n//                 }\r\n//               });\r\n//             }\r\n//           });\r\n//         });\r\n//       });\r\n//     });\r\n\r\n//     // üîÅ Normalisation du classement g√©n√©ral selon le sport\r\n//     const classementGeneralNormalise = Object.values(classementGeneral).map((team) => {\r\n//       const base = {\r\n//         nom_equipe: team.nom_equipe,\r\n//         points: team.points ?? 0,\r\n//       };\r\n\r\n//       if (nom_sport === \"p√©tanque\") {\r\n//         return {\r\n//           ...base,\r\n//           points_marques: team.buts_marques ?? 0,\r\n//           points_concedes: team.buts_encaisses ?? 0,\r\n//           difference_points: team.difference_buts ?? 0,\r\n//         };\r\n//       } else if (nom_sport === \"basketball\") {\r\n//         return {\r\n//           ...base,\r\n//           mj: team.mj ?? 0,\r\n//           v: team.v ?? 0,\r\n//           d: team.d ?? 0,\r\n//           points_marques: team.points_marques ?? 0,\r\n//           points_concedes: team.points_concedes ?? 0,\r\n//           difference_points: team.difference_points ?? 0,\r\n//         };\r\n//       } else {\r\n//         return {\r\n//           ...base,\r\n//           buts_marques: team.buts_marques ?? 0,\r\n//           buts_encaisses: team.buts_encaisses ?? 0,\r\n//           difference_buts: team.difference_buts ?? 0,\r\n//         };\r\n//       }\r\n//     });\r\n\r\n//     // üîÅ Normalisation du classement journalier (par phase)\r\n//     function normaliserClassement(classement, sport) {\r\n//       const nouveauClassement = {};\r\n\r\n//       Object.keys(classement).forEach(phase => {\r\n//         nouveauClassement[phase] = {};\r\n//         Object.keys(classement[phase]).forEach(journee => {\r\n//           nouveauClassement[phase][journee] = {};\r\n//           Object.keys(classement[phase][journee]).forEach(poule => {\r\n//             nouveauClassement[phase][journee][poule] = classement[phase][journee][poule].map(team => {\r\n//               const base = {\r\n//                 nom_equipe: team.nom_equipe,\r\n//                 points: team.points ?? 0,\r\n//               };\r\n\r\n//               if (sport === \"p√©tanque\") {\r\n//                 return {\r\n//                   ...base,\r\n//                   points_marques: team.buts_marques ?? 0,\r\n//                   points_concedes: team.buts_encaisses ?? 0,\r\n//                   difference_points: team.difference_buts ?? 0,\r\n//                 };\r\n//               } else if (sport === \"basketball\") {\r\n//                 return {\r\n//                   ...base,\r\n//                   mj: team.mj ?? 0,\r\n//                   v: team.v ?? 0,\r\n//                   d: team.d ?? 0,\r\n//                   points_marques: team.points_marques ?? 0,\r\n//                   points_concedes: team.points_concedes ?? 0,\r\n//                   difference_points: team.difference_points ?? 0,\r\n//                 };\r\n//               } else {\r\n//                 return {\r\n//                   ...base,\r\n//                   buts_marques: team.buts_marques ?? 0,\r\n//                   buts_encaisses: team.buts_encaisses ?? 0,\r\n//                   difference_buts: team.difference_buts ?? 0,\r\n//                 };\r\n//               }\r\n//             });\r\n//           });\r\n//         });\r\n//       });\r\n\r\n//       return nouveauClassement;\r\n//     }\r\n\r\n//     // ‚úÖ Envoi final\r\n//     res.json({\r\n//       nom_event: results[0].nom_event,\r\n//       classement: normaliserClassement(classementParPhase, nom_sport),\r\n//       classement_general: classementGeneralNormalise.sort((a, b) => b.points - a.points),\r\n//       sport: nom_sport\r\n//     });\r\n\r\n//   } catch (error) {\r\n//     console.error(\"Erreur lors de la r√©cup√©ration du classement :\", error);\r\n//     res.status(500).json({ error: \"Erreur serveur\" });\r\n//   }\r\n// };\r\nexports.getClassementByEvent = async (req, res) => {\r\n  const { eventId } = req.params;\r\n\r\n  try {\r\n    const results = await db(\"resultat\")\r\n      .join(\"rencontre\", \"resultat.id_rencontre\", \"=\", \"rencontre.id_rencontre\")\r\n      .join(\"evenement\", \"rencontre.id_evenement\", \"=\", \"evenement.id_evenement\")\r\n      .join(\"poules\", \"rencontre.id_poule\", \"=\", \"poules.id_poule\")\r\n      .where(\"rencontre.id_evenement\", eventId)\r\n      .select(\r\n        \"evenement.nom_event\",\r\n        \"evenement.nom_sport\",\r\n        \"rencontre.phase\",\r\n        \"rencontre.journee\",\r\n        \"rencontre.tour_final\",  // Ajout du champ 'tour_final'\r\n        \"poules.nom_poule\",\r\n        \"rencontre.participant_a\",\r\n        \"rencontre.participant_b\",\r\n        \"resultat.score_A\",\r\n        \"resultat.score_B\",\r\n        \"resultat.point_victoire\",\r\n        \"resultat.point_matchnul\",\r\n        \"resultat.point_defaite\"\r\n      );\r\n\r\n    if (!results.length) {\r\n      return res.status(404).json({ message: \"Aucun classement disponible.\" });\r\n    }\r\n\r\n    const nom_sport = (results[0].nom_sport ?? \"inconnu\").toLowerCase();\r\n\r\n    let classementParPhase = {};\r\n    let classementGeneral = {};\r\n\r\n    results.forEach((match) => {\r\n      const { phase, journee, tour_final, nom_poule } = match; // R√©cup√©rer tour_final ici\r\n      const phaseKey = `Phase: ${phase}`;\r\n      const journeeKey = `Journ√©e ${journee}`;\r\n      const pouleKey = `Poule ${nom_poule}`;\r\n\r\n      if (!classementParPhase[phaseKey]) classementParPhase[phaseKey] = {};\r\n      if (!classementParPhase[phaseKey][journeeKey]) classementParPhase[phaseKey][journeeKey] = {};\r\n      if (!classementParPhase[phaseKey][journeeKey][pouleKey]) classementParPhase[phaseKey][journeeKey][pouleKey] = [];\r\n\r\n      [match.participant_a, match.participant_b].forEach((equipe, i) => {\r\n        const score = i === 0 ? match.score_A : match.score_B;\r\n        const adversaireScore = i === 0 ? match.score_B : match.score_A;\r\n        const victoire = score > adversaireScore ? 1 : 0;\r\n        const defaite = score < adversaireScore ? 1 : 0;\r\n        const matchJoue = 1;\r\n\r\n        let points = 0;\r\n        if (score > adversaireScore) points = match.point_victoire;\r\n        else if (score === adversaireScore) points = match.point_matchnul;\r\n        else points = match.point_defaite;\r\n\r\n        const team = classementParPhase[phaseKey][journeeKey][pouleKey].find((e) => e.nom_equipe === equipe);\r\n\r\n        if (team) {\r\n          if (nom_sport === \"basketball\") {\r\n            team.mj += matchJoue;\r\n            team.v += victoire;\r\n            team.d += defaite;\r\n            team.points_marques += score;\r\n            team.points_concedes += adversaireScore;\r\n            team.difference_points += score - adversaireScore;\r\n          } else {\r\n            team.points += points;\r\n            team.buts_marques += score;\r\n            team.buts_encaisses += adversaireScore;\r\n            team.difference_buts += score - adversaireScore;\r\n          }\r\n        } else {\r\n          classementParPhase[phaseKey][journeeKey][pouleKey].push({\r\n            nom_equipe: equipe,\r\n            points,\r\n            mj: nom_sport === \"basketball\" ? matchJoue : undefined,\r\n            v: nom_sport === \"basketball\" ? victoire : undefined,\r\n            d: nom_sport === \"basketball\" ? defaite : undefined,\r\n            buts_marques: nom_sport !== \"basketball\" ? score : undefined,\r\n            buts_encaisses: nom_sport !== \"basketball\" ? adversaireScore : undefined,\r\n            difference_buts: nom_sport !== \"basketball\" ? score - adversaireScore : undefined,\r\n            points_marques: nom_sport === \"basketball\" ? score : undefined,\r\n            points_concedes: nom_sport === \"basketball\" ? adversaireScore : undefined,\r\n            difference_points: nom_sport === \"basketball\" ? score - adversaireScore : undefined,\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    // üîÅ Calcul du classement g√©n√©ral (fusion de tous les matchs)\r\n    Object.keys(classementParPhase).forEach((phaseKey) => {\r\n      Object.keys(classementParPhase[phaseKey]).forEach((journeeKey) => {\r\n        Object.keys(classementParPhase[phaseKey][journeeKey]).forEach((pouleKey) => {\r\n          classementParPhase[phaseKey][journeeKey][pouleKey].forEach((team) => {\r\n            const equipeKey = team.nom_equipe;\r\n            if (!classementGeneral[equipeKey]) {\r\n              classementGeneral[equipeKey] = { ...team };\r\n            } else {\r\n              Object.keys(team).forEach((stat) => {\r\n                if (typeof team[stat] === \"number\") {\r\n                  classementGeneral[equipeKey][stat] += team[stat];\r\n                }\r\n              });\r\n            }\r\n          });\r\n        });\r\n      });\r\n    });\r\n\r\n    // üîÅ Normalisation du classement g√©n√©ral selon le sport\r\n    const classementGeneralNormalise = Object.values(classementGeneral).map((team) => {\r\n      const base = {\r\n        nom_equipe: team.nom_equipe,\r\n        points: team.points ?? 0,\r\n      };\r\n\r\n      if (nom_sport === \"p√©tanque\") {\r\n        return {\r\n          ...base,\r\n          points_marques: team.buts_marques ?? 0,\r\n          points_concedes: team.buts_encaisses ?? 0,\r\n          difference_points: team.difference_buts ?? 0,\r\n        };\r\n      } else if (nom_sport === \"basketball\") {\r\n        return {\r\n          ...base,\r\n          mj: team.mj ?? 0,\r\n          v: team.v ?? 0,\r\n          d: team.d ?? 0,\r\n          points_marques: team.points_marques ?? 0,\r\n          points_concedes: team.points_concedes ?? 0,\r\n          difference_points: team.difference_points ?? 0,\r\n        };\r\n      } else {\r\n        return {\r\n          ...base,\r\n          buts_marques: team.buts_marques ?? 0,\r\n          buts_encaisses: team.buts_encaisses ?? 0,\r\n          difference_buts: team.difference_buts ?? 0,\r\n        };\r\n      }\r\n    });\r\n\r\n    // üîÅ Normalisation du classement journalier (par phase)\r\n    function normaliserClassement(classement, sport) {\r\n      const nouveauClassement = {};\r\n\r\n      Object.keys(classement).forEach(phase => {\r\n        nouveauClassement[phase] = {};\r\n        Object.keys(classement[phase]).forEach(journee => {\r\n          nouveauClassement[phase][journee] = {};\r\n          Object.keys(classement[phase][journee]).forEach(poule => {\r\n            nouveauClassement[phase][journee][poule] = classement[phase][journee][poule].map(team => {\r\n              const base = {\r\n                nom_equipe: team.nom_equipe,\r\n                points: team.points ?? 0,\r\n              };\r\n\r\n              if (sport === \"p√©tanque\") {\r\n                return {\r\n                  ...base,\r\n                  points_marques: team.buts_marques ?? 0,\r\n                  points_concedes: team.buts_encaisses ?? 0,\r\n                  difference_points: team.difference_buts ?? 0,\r\n                };\r\n              } else if (sport === \"basketball\") {\r\n                return {\r\n                  ...base,\r\n                  mj: team.mj ?? 0,\r\n                  v: team.v ?? 0,\r\n                  d: team.d ?? 0,\r\n                  points_marques: team.points_marques ?? 0,\r\n                  points_concedes: team.points_concedes ?? 0,\r\n                  difference_points: team.difference_points ?? 0,\r\n                };\r\n              } else {\r\n                return {\r\n                  ...base,\r\n                  buts_marques: team.buts_marques ?? 0,\r\n                  buts_encaisses: team.buts_encaisses ?? 0,\r\n                  difference_buts: team.difference_buts ?? 0,\r\n                };\r\n              }\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      return nouveauClassement;\r\n    }\r\n\r\n    // ‚úÖ Envoi final\r\n    res.json({\r\n      nom_event: results[0].nom_event,\r\n      classement: normaliserClassement(classementParPhase, nom_sport),\r\n      classement_general: classementGeneralNormalise.sort((a, b) => b.points - a.points),\r\n      sport: nom_sport,\r\n      tour_final: results[0].tour_final // Ajouter tour_final √† la r√©ponse\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la r√©cup√©ration du classement :\", error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n};\r\n"],"mappings":"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C,OAAOb,KAAK,EAAE;IAChBC,OAAO,CAACD,KAAK,CAAC,kDAAkD,EAAEA,KAAK,CAAC;IACxET,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAiB,CAAC,CAAC;EACnD;AACF,CAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACAZ,OAAO,CAAC0B,oBAAoB,GAAG,OAAOxB,GAAG,EAAEC,GAAG,KAAK;EACjD,MAAM;IAAEC;EAAQ,CAAC,GAAGF,GAAG,CAACG,MAAM;EAE9B,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMR,EAAE,CAAC,UAAU,CAAC,CACjCS,IAAI,CAAC,WAAW,EAAE,uBAAuB,EAAE,GAAG,EAAE,wBAAwB,CAAC,CACzEA,IAAI,CAAC,WAAW,EAAE,wBAAwB,EAAE,GAAG,EAAE,wBAAwB,CAAC,CAC1EA,IAAI,CAAC,QAAQ,EAAE,oBAAoB,EAAE,GAAG,EAAE,iBAAiB,CAAC,CAC5DC,KAAK,CAAC,wBAAwB,EAAEJ,OAAO,CAAC,CACxCK,MAAM,CACL,qBAAqB,EACrB,qBAAqB,EACrB,iBAAiB,EACjB,mBAAmB,EACnB,sBAAsB;IAAG;IACzB,kBAAkB,EAClB,yBAAyB,EACzB,yBAAyB,EACzB,kBAAkB,EAClB,kBAAkB,EAClB,yBAAyB,EACzB,yBAAyB,EACzB,wBACF,CAAC;IAEH,IAAI,CAACH,OAAO,CAACU,MAAM,EAAE;MACnB,OAAOb,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC;QAAEM,OAAO,EAAE;MAA+B,CAAC,CAAC;IAC1E;IAEA,MAAMQ,SAAS,GAAG,CAACnB,OAAO,CAAC,CAAC,CAAC,CAACmB,SAAS,IAAI,SAAS,EAAEE,WAAW,CAAC,CAAC;IAEnE,IAAIC,kBAAkB,GAAG,CAAC,CAAC;IAC3B,IAAIC,iBAAiB,GAAG,CAAC,CAAC;IAE1BvB,OAAO,CAACwB,OAAO,CAAEC,KAAK,IAAK;MACzB,MAAM;QAAEZ,KAAK;QAAEC,OAAO;QAAEY,UAAU;QAAEC;MAAU,CAAC,GAAGF,KAAK,CAAC,CAAC;MACzD,MAAMG,QAAQ,GAAG,UAAUf,KAAK,EAAE;MAClC,MAAMgB,UAAU,GAAG,WAAWf,OAAO,EAAE;MACvC,MAAMgB,QAAQ,GAAG,SAASH,SAAS,EAAE;MAErC,IAAI,CAACL,kBAAkB,CAACM,QAAQ,CAAC,EAAEN,kBAAkB,CAACM,QAAQ,CAAC,GAAG,CAAC,CAAC;MACpE,IAAI,CAACN,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,EAAEP,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,GAAG,CAAC,CAAC;MAC5F,IAAI,CAACP,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,CAACC,QAAQ,CAAC,EAAER,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,CAACC,QAAQ,CAAC,GAAG,EAAE;MAEhH,CAACL,KAAK,CAACM,aAAa,EAAEN,KAAK,CAACO,aAAa,CAAC,CAACR,OAAO,CAAC,CAACS,MAAM,EAAEC,CAAC,KAAK;QAChE,MAAMC,KAAK,GAAGD,CAAC,KAAK,CAAC,GAAGT,KAAK,CAACW,OAAO,GAAGX,KAAK,CAACY,OAAO;QACrD,MAAMC,eAAe,GAAGJ,CAAC,KAAK,CAAC,GAAGT,KAAK,CAACY,OAAO,GAAGZ,KAAK,CAACW,OAAO;QAC/D,MAAMG,QAAQ,GAAGJ,KAAK,GAAGG,eAAe,GAAG,CAAC,GAAG,CAAC;QAChD,MAAME,OAAO,GAAGL,KAAK,GAAGG,eAAe,GAAG,CAAC,GAAG,CAAC;QAC/C,MAAMG,SAAS,GAAG,CAAC;QAEnB,IAAIC,MAAM,GAAG,CAAC;QACd,IAAIP,KAAK,GAAGG,eAAe,EAAEI,MAAM,GAAGjB,KAAK,CAACkB,cAAc,CAAC,KACtD,IAAIR,KAAK,KAAKG,eAAe,EAAEI,MAAM,GAAGjB,KAAK,CAACmB,cAAc,CAAC,KAC7DF,MAAM,GAAGjB,KAAK,CAACoB,aAAa;QAEjC,MAAMC,IAAI,GAAGxB,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,CAACC,QAAQ,CAAC,CAACiB,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,UAAU,KAAKhB,MAAM,CAAC;QAEpG,IAAIa,IAAI,EAAE;UACR,IAAI3B,SAAS,KAAK,YAAY,EAAE;YAC9B2B,IAAI,CAACI,EAAE,IAAIT,SAAS;YACpBK,IAAI,CAACK,CAAC,IAAIZ,QAAQ;YAClBO,IAAI,CAACM,CAAC,IAAIZ,OAAO;YACjBM,IAAI,CAACO,cAAc,IAAIlB,KAAK;YAC5BW,IAAI,CAACQ,eAAe,IAAIhB,eAAe;YACvCQ,IAAI,CAACS,iBAAiB,IAAIpB,KAAK,GAAGG,eAAe;UACnD,CAAC,MAAM;YACLQ,IAAI,CAACJ,MAAM,IAAIA,MAAM;YACrBI,IAAI,CAACU,YAAY,IAAIrB,KAAK;YAC1BW,IAAI,CAACW,cAAc,IAAInB,eAAe;YACtCQ,IAAI,CAACY,eAAe,IAAIvB,KAAK,GAAGG,eAAe;UACjD;QACF,CAAC,MAAM;UACLhB,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,CAACC,QAAQ,CAAC,CAAC6B,IAAI,CAAC;YACtDV,UAAU,EAAEhB,MAAM;YAClBS,MAAM;YACNQ,EAAE,EAAE/B,SAAS,KAAK,YAAY,GAAGsB,SAAS,GAAGmB,SAAS;YACtDT,CAAC,EAAEhC,SAAS,KAAK,YAAY,GAAGoB,QAAQ,GAAGqB,SAAS;YACpDR,CAAC,EAAEjC,SAAS,KAAK,YAAY,GAAGqB,OAAO,GAAGoB,SAAS;YACnDJ,YAAY,EAAErC,SAAS,KAAK,YAAY,GAAGgB,KAAK,GAAGyB,SAAS;YAC5DH,cAAc,EAAEtC,SAAS,KAAK,YAAY,GAAGmB,eAAe,GAAGsB,SAAS;YACxEF,eAAe,EAAEvC,SAAS,KAAK,YAAY,GAAGgB,KAAK,GAAGG,eAAe,GAAGsB,SAAS;YACjFP,cAAc,EAAElC,SAAS,KAAK,YAAY,GAAGgB,KAAK,GAAGyB,SAAS;YAC9DN,eAAe,EAAEnC,SAAS,KAAK,YAAY,GAAGmB,eAAe,GAAGsB,SAAS;YACzEL,iBAAiB,EAAEpC,SAAS,KAAK,YAAY,GAAGgB,KAAK,GAAGG,eAAe,GAAGsB;UAC5E,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACAC,MAAM,CAACC,IAAI,CAACxC,kBAAkB,CAAC,CAACE,OAAO,CAAEI,QAAQ,IAAK;MACpDiC,MAAM,CAACC,IAAI,CAACxC,kBAAkB,CAACM,QAAQ,CAAC,CAAC,CAACJ,OAAO,CAAEK,UAAU,IAAK;QAChEgC,MAAM,CAACC,IAAI,CAACxC,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,CAAC,CAACL,OAAO,CAAEM,QAAQ,IAAK;UAC1ER,kBAAkB,CAACM,QAAQ,CAAC,CAACC,UAAU,CAAC,CAACC,QAAQ,CAAC,CAACN,OAAO,CAAEsB,IAAI,IAAK;YACnE,MAAMiB,SAAS,GAAGjB,IAAI,CAACG,UAAU;YACjC,IAAI,CAAC1B,iBAAiB,CAACwC,SAAS,CAAC,EAAE;cACjCxC,iBAAiB,CAACwC,SAAS,CAAC,GAAG;gBAAE,GAAGjB;cAAK,CAAC;YAC5C,CAAC,MAAM;cACLe,MAAM,CAACC,IAAI,CAAChB,IAAI,CAAC,CAACtB,OAAO,CAAEwC,IAAI,IAAK;gBAClC,IAAI,OAAOlB,IAAI,CAACkB,IAAI,CAAC,KAAK,QAAQ,EAAE;kBAClCzC,iBAAiB,CAACwC,SAAS,CAAC,CAACC,IAAI,CAAC,IAAIlB,IAAI,CAACkB,IAAI,CAAC;gBAClD;cACF,CAAC,CAAC;YACJ;UACF,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,MAAMC,0BAA0B,GAAGJ,MAAM,CAACK,MAAM,CAAC3C,iBAAiB,CAAC,CAAC4C,GAAG,CAAErB,IAAI,IAAK;MAChF,MAAMsB,IAAI,GAAG;QACXnB,UAAU,EAAEH,IAAI,CAACG,UAAU;QAC3BP,MAAM,EAAEI,IAAI,CAACJ,MAAM,IAAI;MACzB,CAAC;MAED,IAAIvB,SAAS,KAAK,UAAU,EAAE;QAC5B,OAAO;UACL,GAAGiD,IAAI;UACPf,cAAc,EAAEP,IAAI,CAACU,YAAY,IAAI,CAAC;UACtCF,eAAe,EAAER,IAAI,CAACW,cAAc,IAAI,CAAC;UACzCF,iBAAiB,EAAET,IAAI,CAACY,eAAe,IAAI;QAC7C,CAAC;MACH,CAAC,MAAM,IAAIvC,SAAS,KAAK,YAAY,EAAE;QACrC,OAAO;UACL,GAAGiD,IAAI;UACPlB,EAAE,EAAEJ,IAAI,CAACI,EAAE,IAAI,CAAC;UAChBC,CAAC,EAAEL,IAAI,CAACK,CAAC,IAAI,CAAC;UACdC,CAAC,EAAEN,IAAI,CAACM,CAAC,IAAI,CAAC;UACdC,cAAc,EAAEP,IAAI,CAACO,cAAc,IAAI,CAAC;UACxCC,eAAe,EAAER,IAAI,CAACQ,eAAe,IAAI,CAAC;UAC1CC,iBAAiB,EAAET,IAAI,CAACS,iBAAiB,IAAI;QAC/C,CAAC;MACH,CAAC,MAAM;QACL,OAAO;UACL,GAAGa,IAAI;UACPZ,YAAY,EAAEV,IAAI,CAACU,YAAY,IAAI,CAAC;UACpCC,cAAc,EAAEX,IAAI,CAACW,cAAc,IAAI,CAAC;UACxCC,eAAe,EAAEZ,IAAI,CAACY,eAAe,IAAI;QAC3C,CAAC;MACH;IACF,CAAC,CAAC;;IAEF;IACA,SAASW,oBAAoBA,CAACtD,UAAU,EAAEG,KAAK,EAAE;MAC/C,MAAMoD,iBAAiB,GAAG,CAAC,CAAC;MAE5BT,MAAM,CAACC,IAAI,CAAC/C,UAAU,CAAC,CAACS,OAAO,CAACX,KAAK,IAAI;QACvCyD,iBAAiB,CAACzD,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7BgD,MAAM,CAACC,IAAI,CAAC/C,UAAU,CAACF,KAAK,CAAC,CAAC,CAACW,OAAO,CAACV,OAAO,IAAI;UAChDwD,iBAAiB,CAACzD,KAAK,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC,CAAC;UACtC+C,MAAM,CAACC,IAAI,CAAC/C,UAAU,CAACF,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC,CAACU,OAAO,CAAC+C,KAAK,IAAI;YACvDD,iBAAiB,CAACzD,KAAK,CAAC,CAACC,OAAO,CAAC,CAACyD,KAAK,CAAC,GAAGxD,UAAU,CAACF,KAAK,CAAC,CAACC,OAAO,CAAC,CAACyD,KAAK,CAAC,CAACJ,GAAG,CAACrB,IAAI,IAAI;cACvF,MAAMsB,IAAI,GAAG;gBACXnB,UAAU,EAAEH,IAAI,CAACG,UAAU;gBAC3BP,MAAM,EAAEI,IAAI,CAACJ,MAAM,IAAI;cACzB,CAAC;cAED,IAAIxB,KAAK,KAAK,UAAU,EAAE;gBACxB,OAAO;kBACL,GAAGkD,IAAI;kBACPf,cAAc,EAAEP,IAAI,CAACU,YAAY,IAAI,CAAC;kBACtCF,eAAe,EAAER,IAAI,CAACW,cAAc,IAAI,CAAC;kBACzCF,iBAAiB,EAAET,IAAI,CAACY,eAAe,IAAI;gBAC7C,CAAC;cACH,CAAC,MAAM,IAAIxC,KAAK,KAAK,YAAY,EAAE;gBACjC,OAAO;kBACL,GAAGkD,IAAI;kBACPlB,EAAE,EAAEJ,IAAI,CAACI,EAAE,IAAI,CAAC;kBAChBC,CAAC,EAAEL,IAAI,CAACK,CAAC,IAAI,CAAC;kBACdC,CAAC,EAAEN,IAAI,CAACM,CAAC,IAAI,CAAC;kBACdC,cAAc,EAAEP,IAAI,CAACO,cAAc,IAAI,CAAC;kBACxCC,eAAe,EAAER,IAAI,CAACQ,eAAe,IAAI,CAAC;kBAC1CC,iBAAiB,EAAET,IAAI,CAACS,iBAAiB,IAAI;gBAC/C,CAAC;cACH,CAAC,MAAM;gBACL,OAAO;kBACL,GAAGa,IAAI;kBACPZ,YAAY,EAAEV,IAAI,CAACU,YAAY,IAAI,CAAC;kBACpCC,cAAc,EAAEX,IAAI,CAACW,cAAc,IAAI,CAAC;kBACxCC,eAAe,EAAEZ,IAAI,CAACY,eAAe,IAAI;gBAC3C,CAAC;cACH;YACF,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;MAEF,OAAOY,iBAAiB;IAC1B;;IAEA;IACAzE,GAAG,CAACQ,IAAI,CAAC;MACPmE,SAAS,EAAExE,OAAO,CAAC,CAAC,CAAC,CAACwE,SAAS;MAC/BzD,UAAU,EAAEsD,oBAAoB,CAAC/C,kBAAkB,EAAEH,SAAS,CAAC;MAC/DsD,kBAAkB,EAAER,0BAA0B,CAACS,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAClC,MAAM,GAAGiC,CAAC,CAACjC,MAAM,CAAC;MAClFxB,KAAK,EAAEC,SAAS;MAChBO,UAAU,EAAE1B,OAAO,CAAC,CAAC,CAAC,CAAC0B,UAAU,CAAC;IACpC,CAAC,CAAC;EAEJ,CAAC,CAAC,OAAOpB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gDAAgD,EAAEA,KAAK,CAAC;IACtET,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAiB,CAAC,CAAC;EACnD;AACF,CAAC","ignoreList":[]}},"mtime":1742671873042},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\routes\\\\contactRoutes.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst router = express.Router();\nconst ContactControler = require('../controlers/ContactControler');\nrouter.post('/send', ContactControler.sendContactMessage);\n\n// üîπ Route GET pour r√©cup√©rer les messages de contact\nrouter.get('/messages', ContactControler.getAllContactMessages);\n\n// Route de suppression\nrouter.delete('/messages/:id', ContactControler.deleteContactMessage);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIkNvbnRhY3RDb250cm9sZXIiLCJwb3N0Iiwic2VuZENvbnRhY3RNZXNzYWdlIiwiZ2V0IiwiZ2V0QWxsQ29udGFjdE1lc3NhZ2VzIiwiZGVsZXRlIiwiZGVsZXRlQ29udGFjdE1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXHJvdXRlc1xcIiwic291cmNlcyI6WyJjb250YWN0Um91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IENvbnRhY3RDb250cm9sZXIgPSByZXF1aXJlKCcuLi9jb250cm9sZXJzL0NvbnRhY3RDb250cm9sZXInKTtcclxuXHJcbnJvdXRlci5wb3N0KCcvc2VuZCcsIENvbnRhY3RDb250cm9sZXIuc2VuZENvbnRhY3RNZXNzYWdlKTtcclxuXHJcbi8vIPCflLkgUm91dGUgR0VUIHBvdXIgcsOpY3Vww6lyZXIgbGVzIG1lc3NhZ2VzIGRlIGNvbnRhY3Rcclxucm91dGVyLmdldCgnL21lc3NhZ2VzJywgQ29udGFjdENvbnRyb2xlci5nZXRBbGxDb250YWN0TWVzc2FnZXMpO1xyXG5cclxuLy8gUm91dGUgZGUgc3VwcHJlc3Npb25cclxucm91dGVyLmRlbGV0ZSgnL21lc3NhZ2VzLzppZCcsIENvbnRhY3RDb250cm9sZXIuZGVsZXRlQ29udGFjdE1lc3NhZ2UpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLGdCQUFnQixHQUFHSCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFbEVDLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLE9BQU8sRUFBRUQsZ0JBQWdCLENBQUNFLGtCQUFrQixDQUFDOztBQUV6RDtBQUNBSixNQUFNLENBQUNLLEdBQUcsQ0FBQyxXQUFXLEVBQUVILGdCQUFnQixDQUFDSSxxQkFBcUIsQ0FBQzs7QUFFL0Q7QUFDQU4sTUFBTSxDQUFDTyxNQUFNLENBQUMsZUFBZSxFQUFFTCxnQkFBZ0IsQ0FBQ00sb0JBQW9CLENBQUM7QUFFckVDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHVixNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","require","router","Router","ContactControler","post","sendContactMessage","get","getAllContactMessages","delete","deleteContactMessage","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\routes\\","sources":["contactRoutes.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst ContactControler = require('../controlers/ContactControler');\r\n\r\nrouter.post('/send', ContactControler.sendContactMessage);\r\n\r\n// üîπ Route GET pour r√©cup√©rer les messages de contact\r\nrouter.get('/messages', ContactControler.getAllContactMessages);\r\n\r\n// Route de suppression\r\nrouter.delete('/messages/:id', ContactControler.deleteContactMessage);\r\n\r\nmodule.exports = router;\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,gBAAgB,GAAGH,OAAO,CAAC,gCAAgC,CAAC;AAElEC,MAAM,CAACG,IAAI,CAAC,OAAO,EAAED,gBAAgB,CAACE,kBAAkB,CAAC;;AAEzD;AACAJ,MAAM,CAACK,GAAG,CAAC,WAAW,EAAEH,gBAAgB,CAACI,qBAAqB,CAAC;;AAE/D;AACAN,MAAM,CAACO,MAAM,CAAC,eAAe,EAAEL,gBAAgB,CAACM,oBAAoB,CAAC;AAErEC,MAAM,CAACC,OAAO,GAAGV,MAAM","ignoreList":[]}},"mtime":1742769377617},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\controlers\\\\ContactControler.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst db = require('./../db');\nconst nodemailer = require('nodemailer');\nconst {\n  saveContactMessage\n} = require('../queries');\nexports.sendContactMessage = async (req, res) => {\n  const {\n    name,\n    email,\n    subject,\n    message\n  } = req.body;\n  if (!name || !email || !subject || !message) {\n    return res.status(400).json({\n      error: \"Tous les champs sont requis.\"\n    });\n  }\n  try {\n    // (Optionnel) Enregistrer dans la base de donn√©es\n    await saveContactMessage({\n      name,\n      email,\n      subject,\n      message\n    });\n\n    // Envoi par mail via Nodemailer\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS\n      }\n    });\n    const mailOptions = {\n      from: email,\n      to: process.env.EMAIL_USER,\n      // R√©cepteur : admin\n      subject: `[Contact] ${subject}`,\n      text: `Nom : ${name}\\nEmail : ${email}\\n\\n${message}`\n    };\n    await transporter.sendMail(mailOptions);\n    res.status(200).json({\n      message: \"Message envoy√© avec succ√®s !\"\n    });\n  } catch (error) {\n    console.error(\"Erreur envoi message de contact :\", error);\n    res.status(500).json({\n      error: \"Erreur lors de l'envoi du message.\"\n    });\n  }\n};\n\n// üîπ Contr√¥leur : R√©cup√©rer les messages de contact\nexports.getAllContactMessages = async (req, res) => {\n  try {\n    const messages = await db('contact_messages').orderBy('created_at', 'desc');\n    res.status(200).json(messages);\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des messages :\", error);\n    res.status(500).json({\n      error: 'Erreur serveur lors de la r√©cup√©ration des messages.'\n    });\n  }\n};\n\n// Supprimer un message de contact\nexports.deleteContactMessage = async (req, res) => {\n  const {\n    id\n  } = req.params;\n  try {\n    const deleted = await db('contact_messages').where({\n      id\n    }).del();\n    if (deleted) {\n      res.json({\n        message: 'Message supprim√© avec succ√®s.'\n      });\n    } else {\n      res.status(404).json({\n        error: 'Message non trouv√©.'\n      });\n    }\n  } catch (error) {\n    console.error(\"Erreur suppression :\", error);\n    res.status(500).json({\n      error: 'Erreur serveur lors de la suppression.'\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJub2RlbWFpbGVyIiwic2F2ZUNvbnRhY3RNZXNzYWdlIiwiZXhwb3J0cyIsInNlbmRDb250YWN0TWVzc2FnZSIsInJlcSIsInJlcyIsIm5hbWUiLCJlbWFpbCIsInN1YmplY3QiLCJtZXNzYWdlIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic2VydmljZSIsImF1dGgiLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkVNQUlMX1VTRVIiLCJwYXNzIiwiRU1BSUxfUEFTUyIsIm1haWxPcHRpb25zIiwiZnJvbSIsInRvIiwidGV4dCIsInNlbmRNYWlsIiwiY29uc29sZSIsImdldEFsbENvbnRhY3RNZXNzYWdlcyIsIm1lc3NhZ2VzIiwib3JkZXJCeSIsImRlbGV0ZUNvbnRhY3RNZXNzYWdlIiwiaWQiLCJwYXJhbXMiLCJkZWxldGVkIiwid2hlcmUiLCJkZWwiXSwic291cmNlUm9vdCI6Ikc6XFxwcm9qZXQgZmluIGQnZXR1ZGUgVFIgdGVuYSBpenlcXGNsaWVudGl6eVxcYmFja2VuZFxcY29udHJvbGVyc1xcIiwic291cmNlcyI6WyJDb250YWN0Q29udHJvbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRiID0gcmVxdWlyZSgnLi8uLi9kYicpO1xyXG5jb25zdCBub2RlbWFpbGVyID0gcmVxdWlyZSgnbm9kZW1haWxlcicpO1xyXG5jb25zdCB7IHNhdmVDb250YWN0TWVzc2FnZSB9ID0gcmVxdWlyZSgnLi4vcXVlcmllcycpO1xyXG5cclxuZXhwb3J0cy5zZW5kQ29udGFjdE1lc3NhZ2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGVtYWlsLCBzdWJqZWN0LCBtZXNzYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgaWYgKCFuYW1lIHx8ICFlbWFpbCB8fCAhc3ViamVjdCB8fCAhbWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiVG91cyBsZXMgY2hhbXBzIHNvbnQgcmVxdWlzLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIChPcHRpb25uZWwpIEVucmVnaXN0cmVyIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llc1xyXG4gICAgYXdhaXQgc2F2ZUNvbnRhY3RNZXNzYWdlKHsgbmFtZSwgZW1haWwsIHN1YmplY3QsIG1lc3NhZ2UgfSk7XHJcblxyXG4gICAgLy8gRW52b2kgcGFyIG1haWwgdmlhIE5vZGVtYWlsZXJcclxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gICAgICBzZXJ2aWNlOiBcImdtYWlsXCIsXHJcbiAgICAgIGF1dGg6IHtcclxuICAgICAgICB1c2VyOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxyXG4gICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1NcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICAgIGZyb206IGVtYWlsLFxyXG4gICAgICB0bzogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiwgLy8gUsOpY2VwdGV1ciA6IGFkbWluXHJcbiAgICAgIHN1YmplY3Q6IGBbQ29udGFjdF0gJHtzdWJqZWN0fWAsXHJcbiAgICAgIHRleHQ6IGBOb20gOiAke25hbWV9XFxuRW1haWwgOiAke2VtYWlsfVxcblxcbiR7bWVzc2FnZX1gXHJcbiAgICB9O1xyXG5cclxuICAgIGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiTWVzc2FnZSBlbnZvecOpIGF2ZWMgc3VjY8OocyAhXCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgZW52b2kgbWVzc2FnZSBkZSBjb250YWN0IDpcIiwgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJFcnJldXIgbG9ycyBkZSBsJ2Vudm9pIGR1IG1lc3NhZ2UuXCIgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g8J+UuSBDb250csO0bGV1ciA6IFLDqWN1cMOpcmVyIGxlcyBtZXNzYWdlcyBkZSBjb250YWN0XHJcbmV4cG9ydHMuZ2V0QWxsQ29udGFjdE1lc3NhZ2VzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGRiKCdjb250YWN0X21lc3NhZ2VzJykub3JkZXJCeSgnY3JlYXRlZF9hdCcsICdkZXNjJyk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG1lc3NhZ2VzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgbWVzc2FnZXMgOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJldXIgc2VydmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyBtZXNzYWdlcy4nIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuLy8gU3VwcHJpbWVyIHVuIG1lc3NhZ2UgZGUgY29udGFjdFxyXG5leHBvcnRzLmRlbGV0ZUNvbnRhY3RNZXNzYWdlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xyXG4gIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGVsZXRlZCA9IGF3YWl0IGRiKCdjb250YWN0X21lc3NhZ2VzJykud2hlcmUoeyBpZCB9KS5kZWwoKTtcclxuICBcclxuICAgICAgaWYgKGRlbGV0ZWQpIHtcclxuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdNZXNzYWdlIHN1cHByaW3DqSBhdmVjIHN1Y2PDqHMuJyB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTWVzc2FnZSBub24gdHJvdXbDqS4nIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIHN1cHByZXNzaW9uIDpcIiwgZXJyb3IpO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyZXVyIHNlcnZldXIgbG9ycyBkZSBsYSBzdXBwcmVzc2lvbi4nIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDN0IsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ3hDLE1BQU07RUFBRUU7QUFBbUIsQ0FBQyxHQUFHRixPQUFPLENBQUMsWUFBWSxDQUFDO0FBRXBERyxPQUFPLENBQUNDLGtCQUFrQixHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQy9DLE1BQU07SUFBRUMsSUFBSTtJQUFFQyxLQUFLO0lBQUVDLE9BQU87SUFBRUM7RUFBUSxDQUFDLEdBQUdMLEdBQUcsQ0FBQ00sSUFBSTtFQUVsRCxJQUFJLENBQUNKLElBQUksSUFBSSxDQUFDQyxLQUFLLElBQUksQ0FBQ0MsT0FBTyxJQUFJLENBQUNDLE9BQU8sRUFBRTtJQUMzQyxPQUFPSixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUErQixDQUFDLENBQUM7RUFDeEU7RUFFQSxJQUFJO0lBQ0Y7SUFDQSxNQUFNWixrQkFBa0IsQ0FBQztNQUFFSyxJQUFJO01BQUVDLEtBQUs7TUFBRUMsT0FBTztNQUFFQztJQUFRLENBQUMsQ0FBQzs7SUFFM0Q7SUFDQSxNQUFNSyxXQUFXLEdB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","map":{"version":3,"names":["db","require","nodemailer","saveContactMessage","exports","sendContactMessage","req","res","name","email","subject","message","body","status","json","error","transporter","createTransport","service","auth","user","process","env","EMAIL_USER","pass","EMAIL_PASS","mailOptions","from","to","text","sendMail","console","getAllContactMessages","messages","orderBy","deleteContactMessage","id","params","deleted","where","del"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\controlers\\","sources":["ContactControler.js"],"sourcesContent":["const db = require('./../db');\r\nconst nodemailer = require('nodemailer');\r\nconst { saveContactMessage } = require('../queries');\r\n\r\nexports.sendContactMessage = async (req, res) => {\r\n  const { name, email, subject, message } = req.body;\r\n\r\n  if (!name || !email || !subject || !message) {\r\n    return res.status(400).json({ error: \"Tous les champs sont requis.\" });\r\n  }\r\n\r\n  try {\r\n    // (Optionnel) Enregistrer dans la base de donn√©es\r\n    await saveContactMessage({ name, email, subject, message });\r\n\r\n    // Envoi par mail via Nodemailer\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS\r\n      }\r\n    });\r\n\r\n    const mailOptions = {\r\n      from: email,\r\n      to: process.env.EMAIL_USER, // R√©cepteur : admin\r\n      subject: `[Contact] ${subject}`,\r\n      text: `Nom : ${name}\\nEmail : ${email}\\n\\n${message}`\r\n    };\r\n\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    res.status(200).json({ message: \"Message envoy√© avec succ√®s !\" });\r\n  } catch (error) {\r\n    console.error(\"Erreur envoi message de contact :\", error);\r\n    res.status(500).json({ error: \"Erreur lors de l'envoi du message.\" });\r\n  }\r\n};\r\n\r\n// üîπ Contr√¥leur : R√©cup√©rer les messages de contact\r\nexports.getAllContactMessages = async (req, res) => {\r\n    try {\r\n      const messages = await db('contact_messages').orderBy('created_at', 'desc');\r\n      res.status(200).json(messages);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la r√©cup√©ration des messages :\", error);\r\n      res.status(500).json({ error: 'Erreur serveur lors de la r√©cup√©ration des messages.' });\r\n    }\r\n  };\r\n\r\n\r\n// Supprimer un message de contact\r\nexports.deleteContactMessage = async (req, res) => {\r\n    const { id } = req.params;\r\n  \r\n    try {\r\n      const deleted = await db('contact_messages').where({ id }).del();\r\n  \r\n      if (deleted) {\r\n        res.json({ message: 'Message supprim√© avec succ√®s.' });\r\n      } else {\r\n        res.status(404).json({ error: 'Message non trouv√©.' });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur suppression :\", error);\r\n      res.status(500).json({ error: 'Erreur serveur lors de la suppression.' });\r\n    }\r\n  };\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1742769342478},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\db.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nconst knex = require('knex');\nconst config = require('./knexfile');\n\n// Cr√©e une instance de Knex\nconst db = knex(config.development);\n\n// Exporter l'instance de Knex\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJrbmV4IiwicmVxdWlyZSIsImNvbmZpZyIsImRiIiwiZGV2ZWxvcG1lbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJHOlxccHJvamV0IGZpbiBkJ2V0dWRlIFRSIHRlbmEgaXp5XFxjbGllbnRpenlcXGJhY2tlbmRcXCIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qga25leCA9IHJlcXVpcmUoJ2tuZXgnKTtcclxuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi9rbmV4ZmlsZScpO1xyXG5cclxuLy8gQ3LDqWUgdW5lIGluc3RhbmNlIGRlIEtuZXhcclxuY29uc3QgZGIgPSBrbmV4KGNvbmZpZy5kZXZlbG9wbWVudCk7XHJcblxyXG4vLyBFeHBvcnRlciBsJ2luc3RhbmNlIGRlIEtuZXhcclxubW9kdWxlLmV4cG9ydHMgPSBkYjtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxZQUFZLENBQUM7O0FBRXBDO0FBQ0EsTUFBTUUsRUFBRSxHQUFHSCxJQUFJLENBQUNFLE1BQU0sQ0FBQ0UsV0FBVyxDQUFDOztBQUVuQztBQUNBQyxNQUFNLENBQUNDLE9BQU8sR0FBR0gsRUFBRSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["knex","require","config","db","development","module","exports"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\","sources":["db.js"],"sourcesContent":["const knex = require('knex');\r\nconst config = require('./knexfile');\r\n\r\n// Cr√©e une instance de Knex\r\nconst db = knex(config.development);\r\n\r\n// Exporter l'instance de Knex\r\nmodule.exports = db;\r\n"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMC,MAAM,GAAGD,OAAO,CAAC,YAAY,CAAC;;AAEpC;AACA,MAAME,EAAE,GAAGH,IAAI,CAACE,MAAM,CAACE,WAAW,CAAC;;AAEnC;AACAC,MAAM,CAACC,OAAO,GAAGH,EAAE","ignoreList":[]}},"mtime":1728050066000},"{\"assumptions\":{},\"sourceRoot\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"filename\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\knexfile.js\",\"targets\":{\"android\":\"134.0.0\",\"chrome\":\"109.0.0\",\"edge\":\"133.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"15.6.0\",\"opera\":\"116.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"27.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"bugfix-firefox-class-in-computed-class-key\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"plugin-bugfix-safari-class-field-initializer-scope\",\"visitor\":{\"ClassProperty\":{\"enter\":[null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$12\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$19\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"G:\\\\projet fin d'etude TR tena izy\\\\clientizy\\\\backend\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$20\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nrequire('dotenv').config();\nmodule.exports = {\n  development: {\n    client: 'mysql',\n    connection: {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME\n    },\n    migrations: {\n      tableName: 'knex_migrations'\n    }\n  },\n  test: {\n    client: 'mysql',\n    connection: {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME\n    },\n    migrations: {\n      tableName: 'knex_migrations'\n    }\n  },\n  production: {\n    client: 'mysql',\n    connection: {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD,\n      database: process.env.DB_NAME\n    },\n    migrations: {\n      tableName: 'knex_migrations'\n    }\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwibW9kdWxlIiwiZXhwb3J0cyIsImRldmVsb3BtZW50IiwiY2xpZW50IiwiY29ubmVjdGlvbiIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsIm1pZ3JhdGlvbnMiLCJ0YWJsZU5hbWUiLCJ0ZXN0IiwicHJvZHVjdGlvbiJdLCJzb3VyY2VSb290IjoiRzpcXHByb2pldCBmaW4gZCdldHVkZSBUUiB0ZW5hIGl6eVxcY2xpZW50aXp5XFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbImtuZXhmaWxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpOyAgXG5cbm1vZHVsZS5leHBvcnRzID0geyAgXG4gIGRldmVsb3BtZW50OiB7ICBcbiAgICBjbGllbnQ6ICdteXNxbCcsXG4gICAgY29ubmVjdGlvbjogeyAgXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULCAgXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLCAgXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsICBcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLCAgXG4gICAgfSwgIFxuICAgIG1pZ3JhdGlvbnM6IHsgIFxuICAgICAgdGFibGVOYW1lOiAna25leF9taWdyYXRpb25zJyAgXG4gICAgfSAgXG4gIH0sICBcbiAgdGVzdDogeyAgXG4gICAgY2xpZW50OiAnbXlzcWwnLCAgXG4gICAgY29ubmVjdGlvbjogeyAgXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULCAgXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLCAgXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsICBcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLCAgXG4gICAgfSwgIFxuICAgIG1pZ3JhdGlvbnM6IHsgIFxuICAgICAgdGFibGVOYW1lOiAna25leF9taWdyYXRpb25zJyAgXG4gICAgfSAgXG4gIH0sICBcbiAgcHJvZHVjdGlvbjogeyAgXG4gICAgY2xpZW50OiAnbXlzcWwnLCAgXG4gICAgY29ubmVjdGlvbjogeyAgXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULCAgXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLCAgXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsICBcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FLCAgXG4gICAgfSwgIFxuICAgIG1pZ3JhdGlvbnM6IHsgIFxuICAgICAgdGFibGVOYW1lOiAna25leF9taWdyYXRpb25zJyAgXG4gICAgfSAgXG4gIH0gIFxufTsgIFxuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBRTFCQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmQyxXQUFXLEVBQUU7SUFDWEMsTUFBTSxFQUFFLE9BQU87SUFDZkMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLElBQUksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDekJDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVc7TUFDakNDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPO0lBQ3hCLENBQUM7SUFDREMsVUFBVSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQztFQUNEQyxJQUFJLEVBQUU7SUFDSmQsTUFBTSxFQUFFLE9BQU87SUFDZkMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLElBQUksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDekJDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVc7TUFDakNDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPO0lBQ3hCLENBQUM7SUFDREMsVUFBVSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTtJQUNiO0VBQ0YsQ0FBQztFQUNERSxVQUFVLEVBQUU7SUFDVmYsTUFBTSxFQUFFLE9BQU87SUFDZkMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87TUFDekJDLElBQUksRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU87TUFDekJDLFFBQVEsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVc7TUFDakNDLFFBQVEsRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPO0lBQ3hCLENBQUM7SUFDREMsVUFBVSxFQUFFO01BQ1ZDLFNBQVMsRUFBRTtJQUNiO0VBQ0Y7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["require","config","module","exports","development","client","connection","host","process","env","DB_HOST","user","DB_USER","password","DB_PASSWORD","database","DB_NAME","migrations","tableName","test","production"],"sourceRoot":"G:\\projet fin d'etude TR tena izy\\clientizy\\backend\\","sources":["knexfile.js"],"sourcesContent":["require('dotenv').config();  \n\nmodule.exports = {  \n  development: {  \n    client: 'mysql',\n    connection: {  \n      host: process.env.DB_HOST,  \n      user: process.env.DB_USER,  \n      password: process.env.DB_PASSWORD,  \n      database: process.env.DB_NAME,  \n    },  \n    migrations: {  \n      tableName: 'knex_migrations'  \n    }  \n  },  \n  test: {  \n    client: 'mysql',  \n    connection: {  \n      host: process.env.DB_HOST,  \n      user: process.env.DB_USER,  \n      password: process.env.DB_PASSWORD,  \n      database: process.env.DB_NAME,  \n    },  \n    migrations: {  \n      tableName: 'knex_migrations'  \n    }  \n  },  \n  production: {  \n    client: 'mysql',  \n    connection: {  \n      host: process.env.DB_HOST,  \n      user: process.env.DB_USER,  \n      password: process.env.DB_PASSWORD,  \n      database: process.env.DB_NAME,  \n    },  \n    migrations: {  \n      tableName: 'knex_migrations'  \n    }  \n  }  \n};  \n"],"mappings":";;AAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAE1BC,MAAM,CAACC,OAAO,GAAG;EACfC,WAAW,EAAE;IACXC,MAAM,EAAE,OAAO;IACfC,UAAU,EAAE;MACVC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MACzBC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,WAAW;MACjCC,QAAQ,EAAEP,OAAO,CAACC,GAAG,CAACO;IACxB,CAAC;IACDC,UAAU,EAAE;MACVC,SAAS,EAAE;IACb;EACF,CAAC;EACDC,IAAI,EAAE;IACJd,MAAM,EAAE,OAAO;IACfC,UAAU,EAAE;MACVC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MACzBC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,WAAW;MACjCC,QAAQ,EAAEP,OAAO,CAACC,GAAG,CAACO;IACxB,CAAC;IACDC,UAAU,EAAE;MACVC,SAAS,EAAE;IACb;EACF,CAAC;EACDE,UAAU,EAAE;IACVf,MAAM,EAAE,OAAO;IACfC,UAAU,EAAE;MACVC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,OAAO;MACzBC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,OAAO;MACzBC,QAAQ,EAAEL,OAAO,CAACC,GAAG,CAACK,WAAW;MACjCC,QAAQ,EAAEP,OAAO,CAACC,GAAG,CAACO;IACxB,CAAC;IACDC,UAAU,EAAE;MACVC,SAAS,EAAE;IACb;EACF;AACF,CAAC","ignoreList":[]}},"mtime":1727785916000}}